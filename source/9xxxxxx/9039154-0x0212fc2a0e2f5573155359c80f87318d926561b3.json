{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity 0.5.13;\r\n\r\ncontract Laurea {\r\n    \r\n    address laurea; \r\n\r\n    struct School {\r\n        string name;\r\n        string taxID;\r\n        address schoolAddress;\r\n    }\r\n    \r\n    struct CertificadoAluno {\r\n        string cpf;\r\n        string codigoCurso;\r\n        string nomeAluno;\r\n        string nomeCurso;\r\n        string dataInicioFim;\r\n        uint8 cargaHoraria;\r\n        bytes32 hashCertificado;\r\n        bool exists;\r\n    }\r\n    \r\n    School public school;\r\n    mapping(bytes32 => CertificadoAluno) public certificados;\r\n    \r\n    event StudentLaurated(string indexed codigoCurso, string indexed cpf, string nomeCurso, string nomeAluno, bytes32 hashCertificado);\r\n    \r\n    constructor(string memory _name, string memory _taxID, address _schoolAddress) public {\r\n        laurea = msg.sender;\r\n        school = School(_name, _taxID, _schoolAddress);\r\n    }\r\n    \r\n    function editSchool(string memory _name, string memory _taxID, address _schoolAddress) public {\r\n        require (msg.sender == school.schoolAddress || msg.sender == laurea);\r\n        school = School(_name, _taxID, _schoolAddress);\r\n    }\r\n    \r\n    function addCertificado(string memory _cpf, string memory _codigoCurso, string memory _nomeAluno, string memory _nomeCurso, string memory  _dataInicioFim,  uint8 _cargaHoraria) public returns (bytes32) {\r\n        require (msg.sender == school.schoolAddress || msg.sender == laurea);\r\n        bytes32 hashCertificado = keccak256(abi.encodePacked(_cpf, _codigoCurso));\r\n        CertificadoAluno memory ca = CertificadoAluno(_cpf, _codigoCurso, _nomeAluno, _nomeCurso, _dataInicioFim, _cargaHoraria, hashCertificado, true);\r\n        certificados[hashCertificado] = ca;\r\n        emit StudentLaurated (ca.codigoCurso, ca.cpf, ca.nomeAluno, ca.nomeCurso, hashCertificado);\r\n        return hashCertificado;\r\n    }\r\n    \r\n    function alterarCertificado (bytes32 _hash, string memory _nomeAluno, string memory _nomeCurso, string memory  _dataInicioFim,  uint8 _cargaHoraria ) public returns(bool) {\r\n        require (msg.sender == school.schoolAddress || msg.sender == laurea);\r\n        CertificadoAluno storage ca = certificados[_hash];\r\n        ca.nomeAluno = _nomeAluno;\r\n        ca.nomeCurso = _nomeCurso;\r\n        ca.dataInicioFim = _dataInicioFim;\r\n        ca.cargaHoraria = _cargaHoraria;\r\n        emit StudentLaurated (ca.codigoCurso, ca.cpf, ca.nomeAluno, ca.nomeCurso, _hash);\r\n        return true;\r\n    }\r\n    \r\n    function alterarEstadoCertificado (bytes32 _hash) public returns(bool) {\r\n        require (msg.sender == school.schoolAddress || msg.sender == laurea);\r\n        CertificadoAluno storage ca = certificados[_hash];\r\n        if (ca.exists == true) {\r\n            ca.exists = false;\r\n            return true;\r\n        } \r\n        else { \r\n            ca.exists = true;\r\n            return true;\r\n        }\r\n    }\r\n    \r\n    function buscarCertificado(string memory _cpf, string memory _codigoCurso) public view returns (string memory, string memory, string memory, string memory, string memory, uint, bytes32) {\r\n        CertificadoAluno memory ca = certificados[keccak256(abi.encodePacked(_cpf, _codigoCurso))];\r\n        require(ca.exists == true, \"Certificado não localizado\");\r\n        return (ca.cpf, ca.codigoCurso, ca.nomeAluno, ca.nomeCurso, ca.dataInicioFim, ca.cargaHoraria, ca.hashCertificado);\r\n    }\r\n    \r\n    function buscarCertificadoHash(bytes32 _hash) public view returns (string memory, string memory, string memory, string memory, string memory, uint, bytes32) {\r\n        CertificadoAluno memory ca = certificados[_hash];\r\n        require(ca.exists == true, \"Certificado não localizado\");\r\n        return (ca.cpf, ca.codigoCurso, ca.nomeAluno, ca.nomeCurso, ca.dataInicioFim, ca.cargaHoraria, ca.hashCertificado);\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_taxID\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"_schoolAddress\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"string\",\"name\":\"codigoCurso\",\"type\":\"string\"},{\"indexed\":true,\"internalType\":\"string\",\"name\":\"cpf\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"nomeCurso\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"nomeAluno\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"hashCertificado\",\"type\":\"bytes32\"}],\"name\":\"StudentLaurated\",\"type\":\"event\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"string\",\"name\":\"_cpf\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_codigoCurso\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_nomeAluno\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_nomeCurso\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_dataInicioFim\",\"type\":\"string\"},{\"internalType\":\"uint8\",\"name\":\"_cargaHoraria\",\"type\":\"uint8\"}],\"name\":\"addCertificado\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_hash\",\"type\":\"bytes32\"},{\"internalType\":\"string\",\"name\":\"_nomeAluno\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_nomeCurso\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_dataInicioFim\",\"type\":\"string\"},{\"internalType\":\"uint8\",\"name\":\"_cargaHoraria\",\"type\":\"uint8\"}],\"name\":\"alterarCertificado\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_hash\",\"type\":\"bytes32\"}],\"name\":\"alterarEstadoCertificado\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"string\",\"name\":\"_cpf\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_codigoCurso\",\"type\":\"string\"}],\"name\":\"buscarCertificado\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_hash\",\"type\":\"bytes32\"}],\"name\":\"buscarCertificadoHash\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"certificados\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"cpf\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"codigoCurso\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"nomeAluno\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"nomeCurso\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"dataInicioFim\",\"type\":\"string\"},{\"internalType\":\"uint8\",\"name\":\"cargaHoraria\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"hashCertificado\",\"type\":\"bytes32\"},{\"internalType\":\"bool\",\"name\":\"exists\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"_taxID\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"_schoolAddress\",\"type\":\"address\"}],\"name\":\"editSchool\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"school\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"taxID\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"schoolAddress\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"Laurea","CompilerVersion":"v0.5.13+commit.5b0b510c","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000042903e2230b47eb6ad6b8c7091fe160e040323d6000000000000000000000000000000000000000000000000000000000000000a467574757265204c617700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000e3132333435363738393031323334000000000000000000000000000000000000","Library":"","LicenseType":"MIT","SwarmSource":"bzzr://66360818db8adc2404c47992953b9ab76fbaa3b67b86d173dab778bd471bb59d"}]}