{"status":"1","message":"OK","result":[{"SourceCode":"/// withPermit.sol -- Dai automated clearing house\r\n\r\n// Copyright (C) 2020  Martin Lundfall\r\n\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n\r\n// You should have received a copy of the GNU General Public License\r\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\npragma solidity >=0.5.12;\r\npragma experimental ABIEncoderV2;\r\n\r\ninterface DachLike {\r\n    function daiCheque(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                       uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s) external;\r\n    function daiSwap(address sender, uint amount, uint min_eth, uint fee, uint nonce,\r\n                     uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s) external returns (uint256);\r\n    function joinChai(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                      uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s) external;\r\n    function chaiCheque(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                        uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s) external;\r\n    function chaiSwap(address sender, uint amount, uint min_eth, uint fee, uint nonce,\r\n                      uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s) external returns (uint256);\r\n    function exitChai(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                      uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s) external;\r\n}\r\n\r\ninterface DaiLike {\r\n  function permit(address, address, uint256, uint256, bool, uint8, bytes32, bytes32) external;\r\n}\r\n\r\ncontract withPermit {\r\n\r\n  struct signedPermit {\r\n    address holder;\r\n    address spender;\r\n    uint256 nonce;\r\n    uint256 expiry;\r\n    bool allowed;\r\n    uint8 v;\r\n    bytes32 r;\r\n    bytes32 s;\r\n  }\r\n\r\n  DaiLike  public constant dai  = DaiLike(0x6B175474E89094C44Da98b954EedeAC495271d0F);\r\n  DaiLike  public constant chai = DaiLike(0x06AF07097C9Eeb7fD685c692751D5C66dB49c215);\r\n  DachLike public constant dach = DachLike(0x64043a98f097fD6ef0D3ad41588a6B0424723b3a);\r\n\r\n  function daiCheque(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                     uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s,\r\n                     signedPermit calldata daiPermit) external {\r\n    dai.permit(daiPermit.holder, daiPermit.spender, daiPermit.nonce, daiPermit.expiry,\r\n               daiPermit.allowed, daiPermit.v, daiPermit.r, daiPermit.s);\r\n    dach.daiCheque(sender, receiver, amount, fee, nonce, expiry, relayer, v, r, s);\r\n  }\r\n\r\n  function daiSwap(address sender, uint amount, uint min_eth, uint fee, uint nonce,\r\n                   uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s,\r\n                   signedPermit calldata daiPermit) external returns (uint256) {\r\n    dai.permit(daiPermit.holder, daiPermit.spender, daiPermit.nonce, daiPermit.expiry,\r\n               daiPermit.allowed, daiPermit.v, daiPermit.r, daiPermit.s);\r\n    return dach.daiSwap(sender, amount, min_eth, fee, nonce, expiry, relayer, v, r, s);\r\n  }\r\n\r\n  function joinChai(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                    uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s,\r\n                    signedPermit calldata daiPermit) external {\r\n    dai.permit(daiPermit.holder, daiPermit.spender, daiPermit.nonce, daiPermit.expiry,\r\n               daiPermit.allowed, daiPermit.v, daiPermit.r, daiPermit.s);\r\n    dach.joinChai(sender, receiver, amount, fee, nonce, expiry, relayer, v, r, s);\r\n  }\r\n\r\n  function chaiSwap(address sender, uint amount, uint min_eth, uint fee, uint nonce,\r\n                    uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s,\r\n                    signedPermit calldata chaiPermit) external returns (uint256) {\r\n    chai.permit(chaiPermit.holder, chaiPermit.spender, chaiPermit.nonce, chaiPermit.expiry,\r\n                chaiPermit.allowed, chaiPermit.v, chaiPermit.r, chaiPermit.s);\r\n    return dach.chaiSwap(sender, amount, min_eth, fee, nonce, expiry, relayer, v, r, s);\r\n  }\r\n      \r\n  function chaiCheque(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                      uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s,\r\n                      signedPermit calldata chaiPermit) external {\r\n    chai.permit(chaiPermit.holder, chaiPermit.spender, chaiPermit.nonce, chaiPermit.expiry,\r\n                chaiPermit.allowed, chaiPermit.v, chaiPermit.r, chaiPermit.s);\r\n    dach.chaiCheque(sender, receiver, amount, fee, nonce, expiry, relayer, v, r, s);\r\n  }\r\n\r\n  function exitChai(address sender, address receiver, uint amount, uint fee, uint nonce,\r\n                    uint expiry, address relayer, uint8 v, bytes32 r, bytes32 s,\r\n                    signedPermit calldata chaiPermit) external {\r\n    chai.permit(chaiPermit.holder, chaiPermit.spender, chaiPermit.nonce, chaiPermit.expiry,\r\n                chaiPermit.allowed, chaiPermit.v, chaiPermit.r, chaiPermit.s);\r\n    dach.exitChai(sender, receiver, amount, fee, nonce, expiry, relayer, v, r, s);\r\n  }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"chai\",\"outputs\":[{\"internalType\":\"contract DaiLike\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"holder\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"}],\"internalType\":\"struct withPermit.signedPermit\",\"name\":\"chaiPermit\",\"type\":\"tuple\"}],\"name\":\"chaiCheque\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"min_eth\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"holder\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"}],\"internalType\":\"struct withPermit.signedPermit\",\"name\":\"chaiPermit\",\"type\":\"tuple\"}],\"name\":\"chaiSwap\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dach\",\"outputs\":[{\"internalType\":\"contract DachLike\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dai\",\"outputs\":[{\"internalType\":\"contract DaiLike\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"holder\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"}],\"internalType\":\"struct withPermit.signedPermit\",\"name\":\"daiPermit\",\"type\":\"tuple\"}],\"name\":\"daiCheque\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"min_eth\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"holder\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"}],\"internalType\":\"struct withPermit.signedPermit\",\"name\":\"daiPermit\",\"type\":\"tuple\"}],\"name\":\"daiSwap\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"holder\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"}],\"internalType\":\"struct withPermit.signedPermit\",\"name\":\"chaiPermit\",\"type\":\"tuple\"}],\"name\":\"exitChai\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"fee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"relayer\",\"type\":\"address\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"holder\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"allowed\",\"type\":\"bool\"},{\"internalType\":\"uint8\",\"name\":\"v\",\"type\":\"uint8\"},{\"internalType\":\"bytes32\",\"name\":\"r\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"s\",\"type\":\"bytes32\"}],\"internalType\":\"struct withPermit.signedPermit\",\"name\":\"daiPermit\",\"type\":\"tuple\"}],\"name\":\"joinChai\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"withPermit","CompilerVersion":"v0.5.12+commit.7709ece9","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","LicenseType":"GNU LGPLv3","SwarmSource":"bzzr://e2431e597e081c0de406706d4ce8530ae021f254d29c638534cc04615349ed41"}]}