{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity 0.4.25;\r\n\r\ncontract Auth {\r\n\r\n  address internal mainAdmin;\r\n  address internal backupAdmin;\r\n\r\n  event OwnershipTransferred(address indexed _previousOwner, address indexed _newOwner);\r\n\r\n  constructor(\r\n    address _mainAdmin,\r\n    address _backupAdmin\r\n  ) internal {\r\n    mainAdmin = _mainAdmin;\r\n    backupAdmin = _backupAdmin;\r\n  }\r\n\r\n  modifier onlyMainAdmin() {\r\n    require(isMainAdmin(), \"onlyMainAdmin\");\r\n    _;\r\n  }\r\n\r\n  modifier onlyBackupAdmin() {\r\n    require(isBackupAdmin(), \"onlyBackupAdmin\");\r\n    _;\r\n  }\r\n\r\n  function transferOwnership(address _newOwner) onlyBackupAdmin internal {\r\n    require(_newOwner != address(0x0));\r\n    mainAdmin = _newOwner;\r\n    emit OwnershipTransferred(msg.sender, _newOwner);\r\n  }\r\n\r\n  function isMainAdmin() public view returns (bool) {\r\n    return msg.sender == mainAdmin;\r\n  }\r\n\r\n  function isBackupAdmin() public view returns (bool) {\r\n    return msg.sender == backupAdmin;\r\n  }\r\n}\r\n\r\ncontract Fomo5k is Auth {\r\n\r\n  struct User {\r\n    bool isExist;\r\n    uint id;\r\n    uint referrerID;\r\n    address[] referral;\r\n    mapping(uint => uint) levelExpired;\r\n    uint level;\r\n  }\r\n\r\n  uint REFERRER_1_LEVEL_LIMIT = 2;\r\n  uint PERIOD_LENGTH = 100 days;\r\n  uint public totalUser = 1;\r\n\r\n  mapping(uint => uint) public LEVEL_PRICE;\r\n\r\n  mapping (address => User) public users;\r\n  mapping (uint => address) public userLists;\r\n  uint public userIdCounter = 0;\r\n  address cAccount;\r\n\r\n  event Registered(address indexed user, address indexed inviter, uint id, uint time);\r\n  event LevelBought(address indexed user, uint indexed id, uint level, uint time);\r\n  event MoneyReceived(address indexed user, uint indexed id, address indexed from, uint level, uint amount, uint time);\r\n  event MoneyMissed(address indexed user, uint indexed id, address indexed from, uint level, uint amount, uint time);\r\n\r\n  constructor(\r\n    address _rootAccount,\r\n    address _cAccount,\r\n    address _backupAdmin\r\n  )\r\n  public\r\n  Auth(msg.sender, _backupAdmin)\r\n  {\r\n    LEVEL_PRICE[1] = 0.1 ether;\r\n    LEVEL_PRICE[2] = 0.16 ether;\r\n    LEVEL_PRICE[3] = 0.3 ether;\r\n    LEVEL_PRICE[4] = 1 ether;\r\n    LEVEL_PRICE[5] = 3 ether;\r\n    LEVEL_PRICE[6] = 8 ether;\r\n    LEVEL_PRICE[7] = 16 ether;\r\n    LEVEL_PRICE[8] = 31 ether;\r\n    LEVEL_PRICE[9] = 60 ether;\r\n    LEVEL_PRICE[10] = 120 ether;\r\n\r\n    User memory user;\r\n\r\n    user = User({\r\n      isExist: true,\r\n      id: userIdCounter,\r\n      referrerID: 0,\r\n      referral: new address[](0),\r\n      level: 1\r\n    });\r\n    users[_rootAccount] = user;\r\n    userLists[userIdCounter] = _rootAccount;\r\n    cAccount = _cAccount;\r\n  }\r\n\r\n  function updateMainAdmin(address _admin) public {\r\n    transferOwnership(_admin);\r\n  }\r\n\r\n  function updateCAccount(address _cAccount) onlyMainAdmin public {\r\n    cAccount = _cAccount;\r\n  }\r\n\r\n  function () external payable {\r\n    uint level;\r\n\r\n    if(msg.value == LEVEL_PRICE[1]) level = 1;\r\n    else if(msg.value == LEVEL_PRICE[2]) level = 2;\r\n    else if(msg.value == LEVEL_PRICE[3]) level = 3;\r\n    else if(msg.value == LEVEL_PRICE[4]) level = 4;\r\n    else if(msg.value == LEVEL_PRICE[5]) level = 5;\r\n    else if(msg.value == LEVEL_PRICE[6]) level = 6;\r\n    else if(msg.value == LEVEL_PRICE[7]) level = 7;\r\n    else if(msg.value == LEVEL_PRICE[8]) level = 8;\r\n    else if(msg.value == LEVEL_PRICE[9]) level = 9;\r\n    else if(msg.value == LEVEL_PRICE[10]) level = 10;\r\n    else revert('Incorrect Value send');\r\n\r\n    if(users[msg.sender].isExist) buyLevel(level);\r\n    else if(level == 1) {\r\n      uint refId = 0;\r\n      address referrer = bytesToAddress(msg.data);\r\n\r\n      if(users[referrer].isExist) refId = users[referrer].id;\r\n      else revert('Incorrect referrer');\r\n\r\n      regUser(refId);\r\n    }\r\n    else revert('Please buy first level for 0.1 ETH');\r\n  }\r\n\r\n  function regUser(uint _referrerID) public payable {\r\n    require(!users[msg.sender].isExist, 'User exist');\r\n    require(_referrerID >= 0 && _referrerID <= userIdCounter, 'Incorrect referrer Id');\r\n    require(msg.value == LEVEL_PRICE[1], 'Incorrect Value');\r\n\r\n    if(users[userLists[_referrerID]].referral.length >= REFERRER_1_LEVEL_LIMIT) _referrerID = users[findFreeReferrer(userLists[_referrerID])].id;\r\n\r\n    User memory user;\r\n    userIdCounter++;\r\n\r\n    user = User({\r\n      isExist: true,\r\n      id: userIdCounter,\r\n      referrerID: _referrerID,\r\n      referral: new address[](0),\r\n      level: 1\r\n    });\r\n\r\n    users[msg.sender] = user;\r\n    userLists[userIdCounter] = msg.sender;\r\n\r\n    users[msg.sender].levelExpired[1] = now + PERIOD_LENGTH;\r\n\r\n    users[userLists[_referrerID]].referral.push(msg.sender);\r\n    totalUser += 1;\r\n    emit Registered(msg.sender, userLists[_referrerID], userIdCounter, now);\r\n\r\n    payForLevel(1, msg.sender);\r\n  }\r\n\r\n  function buyLevel(uint _level) public payable {\r\n    require(users[msg.sender].isExist, 'User not exist');\r\n    require(_level > 0 && _level <= 10, 'Incorrect level');\r\n\r\n    if(_level == 1) {\r\n      require(msg.value == LEVEL_PRICE[1], 'Incorrect Value');\r\n      users[msg.sender].levelExpired[1] += PERIOD_LENGTH;\r\n    }\r\n    else {\r\n      require(msg.value == LEVEL_PRICE[_level], 'Incorrect Value');\r\n\r\n      for(uint l =_level - 1; l > 0; l--) require(users[msg.sender].levelExpired[l] >= now, 'Buy the previous level');\r\n\r\n      if(users[msg.sender].levelExpired[_level] == 0 || users[msg.sender].levelExpired[_level] < now) {\r\n        users[msg.sender].levelExpired[_level] = now + PERIOD_LENGTH;\r\n      } else {\r\n        users[msg.sender].levelExpired[_level] += PERIOD_LENGTH;\r\n      }\r\n    }\r\n    users[msg.sender].level = _level;\r\n    emit LevelBought(msg.sender, users[msg.sender].id, _level, now);\r\n\r\n    payForLevel(_level, msg.sender);\r\n  }\r\n\r\n  function payForLevel(uint _level, address _user) internal {\r\n    address referer;\r\n    address referer1;\r\n    address referer2;\r\n    address referer3;\r\n    address referer4;\r\n\r\n    if(_level == 1 || _level == 6) {\r\n      referer = userLists[users[_user].referrerID];\r\n    }\r\n    else if(_level == 2 || _level == 7) {\r\n      referer1 = userLists[users[_user].referrerID];\r\n      referer = userLists[users[referer1].referrerID];\r\n    }\r\n    else if(_level == 3 || _level == 8) {\r\n      referer1 = userLists[users[_user].referrerID];\r\n      referer2 = userLists[users[referer1].referrerID];\r\n      referer = userLists[users[referer2].referrerID];\r\n    }\r\n    else if(_level == 4 || _level == 9) {\r\n      referer1 = userLists[users[_user].referrerID];\r\n      referer2 = userLists[users[referer1].referrerID];\r\n      referer3 = userLists[users[referer2].referrerID];\r\n      referer = userLists[users[referer3].referrerID];\r\n    }\r\n    else if(_level == 5 || _level == 10) {\r\n      referer1 = userLists[users[_user].referrerID];\r\n      referer2 = userLists[users[referer1].referrerID];\r\n      referer3 = userLists[users[referer2].referrerID];\r\n      referer4 = userLists[users[referer3].referrerID];\r\n      referer = userLists[users[referer4].referrerID];\r\n    }\r\n\r\n    if(users[referer].isExist && users[referer].id > 0) {\r\n      bool sent = false;\r\n      if(users[referer].levelExpired[_level] >= now && users[referer].level == _level) {\r\n        sent = address(uint160(referer)).send(LEVEL_PRICE[_level]);\r\n\r\n        if (sent) {\r\n          emit MoneyReceived(referer, users[referer].id, msg.sender, _level, LEVEL_PRICE[_level], now);\r\n        }\r\n      }\r\n      if(!sent) {\r\n        emit MoneyMissed(referer, users[referer].id, msg.sender, _level, LEVEL_PRICE[_level], now);\r\n\r\n        payForLevel(_level, referer);\r\n      }\r\n    } else {\r\n      cAccount.transfer(LEVEL_PRICE[_level]);\r\n    }\r\n  }\r\n\r\n  function findFreeReferrer(address _user) public view returns(address) {\r\n    if(users[_user].referral.length < REFERRER_1_LEVEL_LIMIT) return _user;\r\n\r\n    address[] memory referrals = new address[](126);\r\n    referrals[0] = users[_user].referral[0];\r\n    referrals[1] = users[_user].referral[1];\r\n\r\n    address freeReferrer;\r\n    bool noFreeReferrer = true;\r\n\r\n    for(uint i = 0; i < 126; i++) {\r\n      if(users[referrals[i]].referral.length == REFERRER_1_LEVEL_LIMIT) {\r\n        if(i < 62) {\r\n          referrals[(i+1)*2] = users[referrals[i]].referral[0];\r\n          referrals[(i+1)*2+1] = users[referrals[i]].referral[1];\r\n        }\r\n      }\r\n      else {\r\n        noFreeReferrer = false;\r\n        freeReferrer = referrals[i];\r\n        break;\r\n      }\r\n    }\r\n\r\n    require(!noFreeReferrer, 'No Free Referrer');\r\n\r\n    return freeReferrer;\r\n  }\r\n\r\n  function viewUserReferral(address _user) public view returns(address[] memory) {\r\n    return users[_user].referral;\r\n  }\r\n\r\n  function viewUserLevelExpired(address _user, uint _level) public view returns(uint) {\r\n    return users[_user].levelExpired[_level];\r\n  }\r\n\r\n  function showMe() public view returns (bool, uint, uint) {\r\n    User storage user = users[msg.sender];\r\n    return (user.isExist, user.id, user.level);\r\n  }\r\n\r\n  function levelData() public view returns (uint, uint, uint, uint, uint, uint, uint, uint, uint, uint) {\r\n    return (\r\n      users[msg.sender].levelExpired[1],\r\n      users[msg.sender].levelExpired[2],\r\n      users[msg.sender].levelExpired[3],\r\n      users[msg.sender].levelExpired[4],\r\n      users[msg.sender].levelExpired[5],\r\n      users[msg.sender].levelExpired[6],\r\n      users[msg.sender].levelExpired[7],\r\n      users[msg.sender].levelExpired[8],\r\n      users[msg.sender].levelExpired[9],\r\n      users[msg.sender].levelExpired[10]\r\n    );\r\n  }\r\n\r\n  function bytesToAddress(bytes memory bys) private pure returns (address addr) {\r\n    assembly {\r\n      addr := mload(add(bys, 20))\r\n    }\r\n  }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_cAccount\",\"type\":\"address\"}],\"name\":\"updateCAccount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isMainAdmin\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"findFreeReferrer\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"userIdCounter\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"userLists\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"viewUserReferral\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"LEVEL_PRICE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_referrerID\",\"type\":\"uint256\"}],\"name\":\"regUser\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isBackupAdmin\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"showMe\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"users\",\"outputs\":[{\"name\":\"isExist\",\"type\":\"bool\"},{\"name\":\"id\",\"type\":\"uint256\"},{\"name\":\"referrerID\",\"type\":\"uint256\"},{\"name\":\"level\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_user\",\"type\":\"address\"},{\"name\":\"_level\",\"type\":\"uint256\"}],\"name\":\"viewUserLevelExpired\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_admin\",\"type\":\"address\"}],\"name\":\"updateMainAdmin\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalUser\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"levelData\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_level\",\"type\":\"uint256\"}],\"name\":\"buyLevel\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_rootAccount\",\"type\":\"address\"},{\"name\":\"_cAccount\",\"type\":\"address\"},{\"name\":\"_backupAdmin\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"inviter\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"time\",\"type\":\"uint256\"}],\"name\":\"Registered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"level\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"time\",\"type\":\"uint256\"}],\"name\":\"LevelBought\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"level\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"time\",\"type\":\"uint256\"}],\"name\":\"MoneyReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"level\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"time\",\"type\":\"uint256\"}],\"name\":\"MoneyMissed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]","ContractName":"Fomo5k","CompilerVersion":"v0.4.25+commit.59dbf8f1","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000118c11862150f130121d5fe1d4c9f02263fa079c00000000000000000000000054f55427c9af43a11644ffdb0d151fe9f40d0bca000000000000000000000000118c11862150f130121d5fe1d4c9f02263fa079c","Library":"","LicenseType":"GNU GPLv3","SwarmSource":"bzzr://0828e6c0275fbb801f27d38cc8079bf8546d1e4076521357503f3fd50b51cce2"}]}