{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.5.12;\r\n\r\ncontract VatLike {\r\n    function urns(bytes32, address) public view returns (uint, uint);\r\n    function hope(address) public;\r\n    function flux(bytes32, address, address, uint) public;\r\n    function move(address, address, uint) public;\r\n    function frob(bytes32, address, address, address, int, int) public;\r\n    function fork(bytes32, address, address, int, int) public;\r\n}\r\n\r\ncontract UrnHandler {\r\n    constructor(address vat) public {\r\n        VatLike(vat).hope(msg.sender);\r\n    }\r\n}\r\n\r\ncontract OasisCdpManagerEvents {\r\n    event OpenEvent(\r\n        address indexed usr,\r\n        bytes32 ilk,\r\n        address indexed urn\r\n    );\r\n\r\n    event FrobEvent(\r\n        address indexed usr,\r\n        bytes32 ilk,\r\n        address indexed urn,\r\n        int dink,\r\n        int dart\r\n    );\r\n\r\n    event FluxEvent(\r\n        address indexed usr,\r\n        bytes32 ilk,\r\n        address indexed urn,\r\n        address dst,\r\n        uint wad\r\n    );\r\n\r\n    event MoveEvent(\r\n        address indexed usr,\r\n        bytes32 ilk,\r\n        address indexed urn,\r\n        address dst,\r\n        uint rad\r\n    );\r\n\r\n    event QuitEvent(\r\n        address indexed usr,\r\n        bytes32 ilk,\r\n        address indexed urn,\r\n        int dink,\r\n        int dart\r\n    );\r\n\r\n    event EnterEvent(\r\n        address indexed usr,\r\n        bytes32 ilk,\r\n        address indexed urn,\r\n        int dink,\r\n        int dart\r\n    );\r\n}\r\n\r\ncontract OasisCdpManager is OasisCdpManagerEvents {\r\n    address public vat;\r\n\r\n    mapping (\r\n        address => mapping (\r\n            bytes32 => address\r\n        )\r\n    ) public urns;  // Owner => Ilk => UrnHandler\r\n\r\n    constructor(address vat_) public {\r\n        vat = vat_;\r\n    }\r\n\r\n    function toInt(uint x) internal pure returns (int y) {\r\n        y = int(x);\r\n        require(y >= 0);\r\n    }\r\n\r\n    // Open a new cdp for msg.sender address.\r\n    function open(\r\n        bytes32 ilk\r\n    ) public returns (address urn) {\r\n        require(urns[msg.sender][ilk] == address(0), \"cannot-override-urn\");\r\n        urn = address(new UrnHandler(vat));\r\n        urns[msg.sender][ilk] = urn;\r\n        emit OpenEvent(msg.sender, ilk, urn);\r\n    }\r\n\r\n    // Frob the cdp keeping the generated DAI or collateral freed in the cdp urn address.\r\n    function frob(\r\n        bytes32 ilk,\r\n        int dink,\r\n        int dart\r\n    ) public {\r\n        address urn = urns[msg.sender][ilk];\r\n        VatLike(vat).frob(\r\n            ilk,\r\n            urn,\r\n            urn,\r\n            urn,\r\n            dink,\r\n            dart\r\n        );\r\n        emit FrobEvent(msg.sender, ilk, urn, dink, dart);\r\n    }\r\n\r\n    // Transfer wad amount of cdp collateral from the cdp address to a dst address.\r\n    function flux(\r\n        bytes32 ilk,\r\n        address dst,\r\n        uint wad\r\n    ) public {\r\n        VatLike(vat).flux(ilk, urns[msg.sender][ilk], dst, wad);\r\n        emit FluxEvent(msg.sender, ilk, urns[msg.sender][ilk], dst, wad);\r\n    }\r\n\r\n    // Transfer wad amount of cdp collateral from the cdp address to a dst address.\r\n    // This function has the purpose to take away collateral from the system that doesn't correspond to the cdp but was sent there wrongly.\r\n    function flux(\r\n        bytes32 ilk,\r\n        bytes32 ilkExtract,\r\n        address dst,\r\n        uint wad\r\n    ) public {\r\n        VatLike(vat).flux(ilkExtract, urns[msg.sender][ilk], dst, wad);\r\n        emit FluxEvent(msg.sender, ilkExtract, urns[msg.sender][ilk], dst, wad);\r\n    }\r\n\r\n    // Transfer rad amount of DAI from the cdp address to a dst address.\r\n    function move(\r\n        bytes32 ilk,\r\n        address dst,\r\n        uint rad\r\n    ) public {\r\n        VatLike(vat).move(urns[msg.sender][ilk], dst, rad);\r\n        emit MoveEvent(msg.sender, ilk, urns[msg.sender][ilk], dst, rad);\r\n    }\r\n\r\n    // Quit the system, migrating the msg.sender cdp (ink, art) to a msg.sender urn\r\n    function quit(\r\n        bytes32 ilk\r\n    ) public {\r\n        address urn = urns[msg.sender][ilk];\r\n        (uint ink, uint art) = VatLike(vat).urns(ilk, urn);\r\n        VatLike(vat).fork(\r\n            ilk,\r\n            urn,\r\n            msg.sender,\r\n            toInt(ink),\r\n            toInt(art)\r\n        );\r\n        emit QuitEvent(msg.sender, ilk, urn, toInt(ink), toInt(art));\r\n    }\r\n\r\n    // Import a position from msg.sender urn to msg.sender cdp\r\n    function enter(\r\n        bytes32 ilk\r\n    ) public {\r\n        address urn = urns[msg.sender][ilk];\r\n        require(urn != address(0), \"not-existing-urn\");\r\n        (uint ink, uint art) = VatLike(vat).urns(ilk, msg.sender);\r\n        VatLike(vat).fork(\r\n            ilk,\r\n            msg.sender,\r\n            urn,\r\n            toInt(ink),\r\n            toInt(art)\r\n        );\r\n        emit EnterEvent(msg.sender, ilk, urn, toInt(ink), toInt(art));\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"vat_\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"usr\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"urn\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"dink\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"dart\",\"type\":\"int256\"}],\"name\":\"EnterEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"usr\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"urn\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"dst\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"wad\",\"type\":\"uint256\"}],\"name\":\"FluxEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"usr\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"urn\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"dink\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"dart\",\"type\":\"int256\"}],\"name\":\"FrobEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"usr\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"urn\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"dst\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rad\",\"type\":\"uint256\"}],\"name\":\"MoveEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"usr\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"urn\",\"type\":\"address\"}],\"name\":\"OpenEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"usr\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"urn\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"dink\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"dart\",\"type\":\"int256\"}],\"name\":\"QuitEvent\",\"type\":\"event\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"}],\"name\":\"enter\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"ilkExtract\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"dst\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"wad\",\"type\":\"uint256\"}],\"name\":\"flux\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"dst\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"wad\",\"type\":\"uint256\"}],\"name\":\"flux\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"internalType\":\"int256\",\"name\":\"dink\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"dart\",\"type\":\"int256\"}],\"name\":\"frob\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"dst\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"rad\",\"type\":\"uint256\"}],\"name\":\"move\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"}],\"name\":\"open\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"urn\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"ilk\",\"type\":\"bytes32\"}],\"name\":\"quit\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"urns\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"vat\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"OasisCdpManager","CompilerVersion":"v0.5.12+commit.7709ece9","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"00000000000000000000000035d1b3f3d7966a1dfe207aa4514c12a259a0492b","Library":"","LicenseType":"None","SwarmSource":"bzzr://fdecf6a7d73ac45e60ce7b6917eef21c2b497e3ba493e71d4631bf0ebd7d7511"}]}