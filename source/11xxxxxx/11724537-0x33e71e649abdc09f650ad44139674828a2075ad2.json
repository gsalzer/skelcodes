{"status":"1","message":"OK","result":[{"SourceCode":"// File: @axie/contract-library/contracts/access/HasAdmin.sol\r\n\r\npragma solidity ^0.5.2;\r\n\r\n\r\ncontract HasAdmin {\r\n  event AdminChanged(address indexed _oldAdmin, address indexed _newAdmin);\r\n  event AdminRemoved(address indexed _oldAdmin);\r\n\r\n  address public admin;\r\n\r\n  modifier onlyAdmin {\r\n    require(msg.sender == admin);\r\n    _;\r\n  }\r\n\r\n  constructor() internal {\r\n    admin = msg.sender;\r\n    emit AdminChanged(address(0), admin);\r\n  }\r\n\r\n  function changeAdmin(address _newAdmin) external onlyAdmin {\r\n    require(_newAdmin != address(0));\r\n    emit AdminChanged(admin, _newAdmin);\r\n    admin = _newAdmin;\r\n  }\r\n\r\n  function removeAdmin() external onlyAdmin {\r\n    emit AdminRemoved(admin);\r\n    admin = address(0);\r\n  }\r\n}\r\n// File: contracts/chain/common/Registry.sol\r\n\r\npragma solidity ^0.5.17;\r\n\r\n\r\n\r\ncontract Registry is HasAdmin {\r\n\r\n  event ContractAddressUpdated(\r\n    string indexed _name,\r\n    bytes32 indexed _code,\r\n    address indexed _newAddress\r\n  );\r\n\r\n  event TokenMapped(\r\n    address indexed _mainchainToken,\r\n    address indexed _sidechainToken,\r\n    uint32 _standard\r\n  );\r\n\r\n  string public constant GATEWAY = \"GATEWAY\";\r\n  string public constant WETH_TOKEN = \"WETH_TOKEN\";\r\n  string public constant VALIDATOR = \"VALIDATOR\";\r\n  string public constant ACKNOWLEDGEMENT = \"ACKNOWLEDGEMENT\";\r\n\r\n  struct TokenMapping {\r\n    address mainchainToken;\r\n    address sidechainToken;\r\n    uint32 standard; // 20, 721 or any other standards\r\n  }\r\n\r\n  mapping(bytes32 => address) public contractAddresses;\r\n  mapping(address => TokenMapping) public mainchainMap;\r\n  mapping(address => TokenMapping) public sidechainMap;\r\n\r\n  function getContract(string calldata _name)\r\n    external\r\n    view\r\n    returns (address _address)\r\n  {\r\n    bytes32 _code = getCode(_name);\r\n    _address = contractAddresses[_code];\r\n    require(_address != address(0));\r\n  }\r\n\r\n  function isTokenMapped(address _token, uint32 _standard, bool _isMainchain)\r\n    external\r\n    view\r\n    returns (bool)\r\n  {\r\n    TokenMapping memory _mapping = _getTokenMapping(_token, _isMainchain);\r\n\r\n    return _mapping.mainchainToken != address(0) &&\r\n      _mapping.sidechainToken != address(0) &&\r\n      _mapping.standard == _standard;\r\n  }\r\n\r\n  function updateContract(string calldata _name, address _newAddress)\r\n    external\r\n    onlyAdmin\r\n  {\r\n    bytes32 _code = getCode(_name);\r\n    contractAddresses[_code] = _newAddress;\r\n\r\n    emit ContractAddressUpdated(_name, _code, _newAddress);\r\n  }\r\n\r\n  function mapToken(address _mainchainToken, address _sidechainToken, uint32 _standard)\r\n    external\r\n    onlyAdmin\r\n  {\r\n    TokenMapping memory _map = TokenMapping(\r\n      _mainchainToken,\r\n      _sidechainToken,\r\n      _standard\r\n    );\r\n\r\n    mainchainMap[_mainchainToken] = _map;\r\n    sidechainMap[_sidechainToken] = _map;\r\n\r\n    emit TokenMapped(\r\n      _mainchainToken,\r\n      _sidechainToken,\r\n      _standard\r\n    );\r\n  }\r\n\r\n  function clearMapToken(address _mainchainToken, address _sidechainToken)\r\n    external\r\n    onlyAdmin\r\n  {\r\n    TokenMapping storage _mainchainMap = mainchainMap[_mainchainToken];\r\n    _clearMapEntry(_mainchainMap);\r\n\r\n    TokenMapping storage _sidechainMap = sidechainMap[_sidechainToken];\r\n    _clearMapEntry(_sidechainMap);\r\n  }\r\n\r\n  function getMappedToken(\r\n    address _token,\r\n    bool _isMainchain\r\n  )\r\n    external\r\n    view\r\n  returns (\r\n    address _mainchainToken,\r\n    address _sidechainToken,\r\n    uint32 _standard\r\n  )\r\n  {\r\n    TokenMapping memory _mapping = _getTokenMapping(_token, _isMainchain);\r\n    _mainchainToken = _mapping.mainchainToken;\r\n    _sidechainToken = _mapping.sidechainToken;\r\n    _standard = _mapping.standard;\r\n  }\r\n\r\n  function getCode(string memory _name)\r\n    public\r\n    pure\r\n    returns (bytes32)\r\n  {\r\n    return keccak256(abi.encodePacked(_name));\r\n  }\r\n\r\n  function _getTokenMapping(\r\n    address _token,\r\n    bool isMainchain\r\n  )\r\n    internal\r\n    view\r\n    returns (TokenMapping memory _mapping)\r\n  {\r\n    if (isMainchain) {\r\n      _mapping = mainchainMap[_token];\r\n    } else {\r\n      _mapping = sidechainMap[_token];\r\n    }\r\n  }\r\n\r\n  function _clearMapEntry(TokenMapping storage _entry)\r\n    internal\r\n  {\r\n    _entry.mainchainToken = address(0);\r\n    _entry.sidechainToken = address(0);\r\n    _entry.standard = 0;\r\n  }\r\n}","ABI":"[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_oldAdmin\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_newAdmin\",\"type\":\"address\"}],\"name\":\"AdminChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_oldAdmin\",\"type\":\"address\"}],\"name\":\"AdminRemoved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"},{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"_code\",\"type\":\"bytes32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_newAddress\",\"type\":\"address\"}],\"name\":\"ContractAddressUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_mainchainToken\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"_sidechainToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint32\",\"name\":\"_standard\",\"type\":\"uint32\"}],\"name\":\"TokenMapped\",\"type\":\"event\"},{\"constant\":true,\"inputs\":[],\"name\":\"ACKNOWLEDGEMENT\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"GATEWAY\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"VALIDATOR\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"WETH_TOKEN\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newAdmin\",\"type\":\"address\"}],\"name\":\"changeAdmin\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_mainchainToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_sidechainToken\",\"type\":\"address\"}],\"name\":\"clearMapToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"contractAddresses\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"}],\"name\":\"getCode\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"}],\"name\":\"getContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_isMainchain\",\"type\":\"bool\"}],\"name\":\"getMappedToken\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"_mainchainToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_sidechainToken\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"_standard\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"_standard\",\"type\":\"uint32\"},{\"internalType\":\"bool\",\"name\":\"_isMainchain\",\"type\":\"bool\"}],\"name\":\"isTokenMapped\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"mainchainMap\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"mainchainToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"sidechainToken\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"standard\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"_mainchainToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_sidechainToken\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"_standard\",\"type\":\"uint32\"}],\"name\":\"mapToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"removeAdmin\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"sidechainMap\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"mainchainToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"sidechainToken\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"standard\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"string\",\"name\":\"_name\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"_newAddress\",\"type\":\"address\"}],\"name\":\"updateContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"Registry","CompilerVersion":"v0.5.17+commit.d19bba13","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":"bzzr://c00f3f5eeb54e6aad73194fc261f3ef7c33c66f49b7d0d9313aa4460b5264174"}]}