{"status":"1","message":"OK","result":[{"SourceCode":"# Created by interfinex.io\r\n# - The Greeks\r\n\r\ninterface MarginMarket:\r\n    def initialize(\r\n        _assetToken: address, \r\n        _collateralToken: address, \r\n        _dividend_erc20_template: address, \r\n        _ifex_token: address,\r\n        _swap_factory: address\r\n    ) -> bool: nonpayable\r\n    def liquidityToken() -> address: view\r\n\r\nevent NewMarginMarket:\r\n    creator: indexed(address)\r\n    margin_market_address: indexed(address)\r\n    assetToken: address\r\n    collateralToken: address\r\n\r\nid_count: public(uint256)\r\nid_to_margin_market: public(HashMap[uint256, address])\r\npair_to_margin_market: public(HashMap[address, HashMap[address, address]])\r\nmargin_market_to_pair: public(HashMap[address, address[2]])\r\nliquidity_token_to_pair: public(HashMap[address, address[2]])\r\n\r\nmargin_market_template: public(address)\r\ndividend_erc20_template: public(address)\r\nifex_token: public(address)\r\nswap_factory: public(address)\r\n\r\nis_initialized: public(bool)\r\n\r\n@external\r\ndef initialize(_margin_market_template: address, _dividend_erc20_template: address, _ifex_token: address, _swap_factory: address):\r\n    assert self.is_initialized == False, \"Factory already initialized\"\r\n    self.is_initialized = True\r\n    self.margin_market_template = _margin_market_template\r\n    self.dividend_erc20_template = _dividend_erc20_template\r\n    self.ifex_token = _ifex_token\r\n    self.swap_factory = _swap_factory\r\n    return\r\n\r\n@internal\r\ndef createMarket(assetToken: address, collateralToken: address, creator: address):\r\n    # Create and init the new margin market\r\n    margin_market: address = create_forwarder_to(self.margin_market_template)\r\n    MarginMarket(margin_market).initialize(assetToken, collateralToken, self.dividend_erc20_template, self.ifex_token, self.swap_factory)\r\n\r\n    # Save the contract into state to be accessed later by other functions etc.\r\n    assert self.pair_to_margin_market[assetToken][collateralToken] == ZERO_ADDRESS, \"Margin market for this pair already exists\"\r\n    new_id: uint256 = self.id_count + 1\r\n    self.id_count = new_id\r\n    self.id_to_margin_market[new_id] = margin_market\r\n    self.pair_to_margin_market[assetToken][collateralToken] = margin_market\r\n    self.margin_market_to_pair[margin_market] = [assetToken, collateralToken]\r\n\r\n    liquidityToken: address = MarginMarket(margin_market).liquidityToken()\r\n    self.liquidity_token_to_pair[liquidityToken] = [assetToken, collateralToken]\r\n    log NewMarginMarket(creator, margin_market, assetToken, collateralToken)\r\n\r\n@external\r\ndef createMarketPair(_token0: address, _token1: address):\r\n    self.createMarket(_token0, _token1, msg.sender)\r\n    self.createMarket(_token1, _token0, msg.sender)","ABI":"[{\"name\":\"NewMarginMarket\",\"inputs\":[{\"type\":\"address\",\"name\":\"creator\",\"indexed\":true},{\"type\":\"address\",\"name\":\"margin_market_address\",\"indexed\":true},{\"type\":\"address\",\"name\":\"assetToken\",\"indexed\":false},{\"type\":\"address\",\"name\":\"collateralToken\",\"indexed\":false}],\"anonymous\":false,\"type\":\"event\"},{\"name\":\"initialize\",\"outputs\":[],\"inputs\":[{\"type\":\"address\",\"name\":\"_margin_market_template\"},{\"type\":\"address\",\"name\":\"_dividend_erc20_template\"},{\"type\":\"address\",\"name\":\"_ifex_token\"},{\"type\":\"address\",\"name\":\"_swap_factory\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\",\"gas\":176614},{\"name\":\"createMarketPair\",\"outputs\":[],\"inputs\":[{\"type\":\"address\",\"name\":\"_token0\"},{\"type\":\"address\",\"name\":\"_token1\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\",\"gas\":598505},{\"name\":\"id_count\",\"outputs\":[{\"type\":\"uint256\",\"name\":\"\"}],\"inputs\":[],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1151},{\"name\":\"id_to_margin_market\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[{\"type\":\"uint256\",\"name\":\"arg0\"}],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1296},{\"name\":\"pair_to_margin_market\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"arg0\"},{\"type\":\"address\",\"name\":\"arg1\"}],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1641},{\"name\":\"margin_market_to_pair\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"arg0\"},{\"type\":\"uint256\",\"name\":\"arg1\"}],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1565},{\"name\":\"liquidity_token_to_pair\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[{\"type\":\"address\",\"name\":\"arg0\"},{\"type\":\"uint256\",\"name\":\"arg1\"}],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1595},{\"name\":\"margin_market_template\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1301},{\"name\":\"dividend_erc20_template\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1331},{\"name\":\"ifex_token\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1361},{\"name\":\"swap_factory\",\"outputs\":[{\"type\":\"address\",\"name\":\"\"}],\"inputs\":[],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1391},{\"name\":\"is_initialized\",\"outputs\":[{\"type\":\"bool\",\"name\":\"\"}],\"inputs\":[],\"stateMutability\":\"view\",\"type\":\"function\",\"gas\":1421}]","ContractName":"Vyper_contract","CompilerVersion":"vyper:0.2.7","OptimizationUsed":"0","Runs":"0","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":""}]}