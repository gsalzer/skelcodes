{"status":"1","message":"OK","result":[{"SourceCode":"// SPDX-License-Identifier: MIT\r\npragma solidity ^0.7.3;\r\n\r\n// A partial ERC20 interface.\r\ninterface IERC20 {\r\n    function balanceOf(address owner) external view returns (uint256);\r\n    function approve(address spender, uint256 amount) external returns (bool);\r\n    function transfer(address to, uint256 amount) external returns (bool);\r\n}\r\n\r\n// A partial WETH interfaec.\r\ninterface IWETH is IERC20 {\r\n    function deposit() external payable;\r\n    function withdraw(uint amount) external;\r\n}\r\n\r\n// Demo contract that swaps its ERC20 balance for another ERC20.\r\n// NOT to be used in production.\r\ncontract SimpleTokenSwap {\r\n\r\n    event BoughtTokens(IERC20 sellToken, IERC20 buyToken, uint256 boughtAmount);\r\n\r\n    // The WETH contract.\r\n    IWETH public immutable WETH;\r\n    // Creator of this contract.\r\n    address public owner;\r\n\r\n    constructor(IWETH weth) {\r\n        WETH = weth;\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlyOwner() {\r\n        require(msg.sender == owner, \"ONLY_OWNER\");\r\n        _;\r\n    }\r\n\r\n    // Payable fallback to allow this contract to receive protocol fee refunds.\r\n    receive() external payable {}\r\n\r\n    // Transfer tokens held by this contrat to the sender/owner.\r\n    function withdrawToken(IERC20 token, uint256 amount)\r\n        external\r\n        onlyOwner\r\n    {\r\n        require(token.transfer(msg.sender, amount));\r\n    }\r\n\r\n    // Transfer ETH held by this contrat to the sender/owner.\r\n    function withdrawETH(uint256 amount)\r\n        external\r\n        onlyOwner\r\n    {\r\n        msg.sender.transfer(amount);\r\n    }\r\n\r\n    // Transfer ETH into this contract and wrap it into WETH.\r\n    function depositETH()\r\n        external\r\n        payable\r\n    {\r\n        WETH.deposit{value: msg.value}();\r\n    }\r\n\r\n    // Swaps ERC20->ERC20 tokens held by this contract using a 0x-API quote.\r\n    function fillQuote(\r\n        // The `sellTokenAddress` field from the API response.\r\n        IERC20 sellToken,\r\n        // The `buyTokenAddress` field from the API response.\r\n        IERC20 buyToken,\r\n        // The `allowanceTarget` field from the API response.\r\n        address spender,\r\n        // The `to` field from the API response.\r\n        address payable swapTarget,\r\n        // The `data` field from the API response.\r\n        bytes calldata swapCallData,\r\n        \r\n        // The `sellTokenAddress` field from the API response.\r\n        IERC20 sellToken1,\r\n        // The `buyTokenAddress` field from the API response.\r\n        IERC20 buyToken1,\r\n        // The `allowanceTarget` field from the API response.\r\n        address spender1,\r\n        // The `to` field from the API response.\r\n        address payable swapTarget1,\r\n        // The `data` field from the API response.\r\n        bytes calldata swapCallData1\r\n    )\r\n        external\r\n        onlyOwner\r\n        payable // Must attach ETH equal to the `value` field from the API response.\r\n    {\r\n        \r\n        // Track our balance of the buyToken to determine how much we've bought.\r\n        uint256 boughtAmount = buyToken.balanceOf(address(this));\r\n\r\n        // Give `spender` an infinite allowance to spend this contract's `sellToken`.\r\n        // Note that for some tokens (e.g., USDT, KNC), you must first reset any existing\r\n        // allowance to 0 before being able to update it.\r\n        require(sellToken.approve(spender, uint256(-1)));\r\n        // Call the encoded swap function call on the contract at `swapTarget`,\r\n        // passing along any ETH attached to this function call to cover protocol fees.\r\n        (bool success,) = swapTarget.call{value: msg.value}(swapCallData);\r\n        require(success, 'SWAP_CALL_FAILED');\r\n        // Refund any unspent protocol fees to the sender.\r\n        // msg.sender.transfer(address(this).balance);\r\n\r\n        // Use our current buyToken balance to determine how much we've bought.\r\n        boughtAmount = buyToken.balanceOf(address(this)) - boughtAmount;\r\n        emit BoughtTokens(sellToken, buyToken, boughtAmount);\r\n        \r\n                // Track our balance of the buyToken to determine how much we've bought.\r\n        uint256 boughtAmount1 = buyToken1.balanceOf(address(this));\r\n\r\n        // Give `spender` an infinite allowance to spend this contract's `sellToken`.\r\n        // Note that for some tokens (e.g., USDT, KNC), you must first reset any existing\r\n        // allowance to 0 before being able to update it.\r\n        require(sellToken1.approve(spender1, uint256(-1)));\r\n        // Call the encoded swap function call on the contract at `swapTarget`,\r\n        // passing along any ETH attached to this function call to cover protocol fees.\r\n        (bool success1,) = swapTarget1.call{value: msg.value}(swapCallData1);\r\n        require(success1, 'SWAP_CALL_FAILED');\r\n        // Refund any unspent protocol fees to the sender.\r\n        msg.sender.transfer(address(this).balance);\r\n\r\n        // Use our current buyToken balance to determine how much we've bought.\r\n        boughtAmount1 = buyToken1.balanceOf(address(this)) - boughtAmount1;\r\n        emit BoughtTokens(sellToken1, buyToken1, boughtAmount1);\r\n        \r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"contract IWETH\",\"name\":\"weth\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"contract IERC20\",\"name\":\"sellToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"contract IERC20\",\"name\":\"buyToken\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"boughtAmount\",\"type\":\"uint256\"}],\"name\":\"BoughtTokens\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"WETH\",\"outputs\":[{\"internalType\":\"contract IWETH\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"depositETH\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"sellToken\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"buyToken\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"address payable\",\"name\":\"swapTarget\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"swapCallData\",\"type\":\"bytes\"},{\"internalType\":\"contract IERC20\",\"name\":\"sellToken1\",\"type\":\"address\"},{\"internalType\":\"contract IERC20\",\"name\":\"buyToken1\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"spender1\",\"type\":\"address\"},{\"internalType\":\"address payable\",\"name\":\"swapTarget1\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"swapCallData1\",\"type\":\"bytes\"}],\"name\":\"fillQuote\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawETH\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract IERC20\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawToken\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}]","ContractName":"SimpleTokenSwap","CompilerVersion":"v0.7.4+commit.3f05b770","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":"ipfs://c925f0b87e80b417a04709a90905e85c9c382d9b336cefb49480a9e5267b9d43"}]}