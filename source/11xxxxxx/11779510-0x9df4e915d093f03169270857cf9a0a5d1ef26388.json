{"status":"1","message":"OK","result":[{"SourceCode":"// File: contracts\\liquidity-mining\\util\\DFOHub.sol\r\n\r\n// SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.7.6;\r\n\r\ninterface IDoubleProxy {\r\n    function proxy() external view returns (address);\r\n}\r\n\r\ninterface IMVDProxy {\r\n    function getMVDFunctionalitiesManagerAddress() external view returns(address);\r\n    function getMVDWalletAddress() external view returns (address);\r\n    function getStateHolderAddress() external view returns(address);\r\n    function submit(string calldata codeName, bytes calldata data) external payable returns(bytes memory returnData);\r\n}\r\n\r\ninterface IMVDFunctionalitiesManager {\r\n    function getFunctionalityData(string calldata codeName) external view returns(address, uint256, string memory, address, uint256);\r\n    function isAuthorizedFunctionality(address functionality) external view returns(bool);\r\n}\r\n\r\ninterface IStateHolder {\r\n    function getUint256(string calldata name) external view returns(uint256);\r\n    function getAddress(string calldata name) external view returns(address);\r\n    function clear(string calldata varName) external returns(string memory oldDataType, bytes memory oldVal);\r\n}\r\n\r\n// File: contracts\\liquidity-mining\\ILiquidityMiningFactory.sol\r\n\r\n//SPDX_License_Identifier: MIT\r\npragma solidity ^0.7.6;\r\n\r\ninterface ILiquidityMiningFactory {\r\n\r\n    event ExtensionCloned(address indexed);\r\n\r\n    function feePercentageInfo() external view returns (uint256, address);\r\n    function liquidityMiningDefaultExtension() external view returns(address);\r\n    function cloneLiquidityMiningDefaultExtension() external returns(address);\r\n    function getLiquidityFarmTokenCollectionURI() external view returns (string memory);\r\n    function getLiquidityFarmTokenURI() external view returns (string memory);\r\n}\r\n\r\n// File: contracts\\liquidity-mining\\LiquidityMiningFactory.sol\r\n\r\n//SPDX_License_Identifier: MIT\r\npragma solidity ^0.7.6;\r\n\r\n\r\n\r\ncontract LiquidityMiningFactory is ILiquidityMiningFactory {\r\n\r\n    // liquidity mining contract implementation address\r\n    address public liquidityMiningImplementationAddress;\r\n    // liquidity mining default extension\r\n    address public override liquidityMiningDefaultExtension;\r\n    // double proxy address of the linked DFO\r\n    address public _doubleProxy;\r\n    // linked DFO exit fee\r\n    uint256 private _feePercentage;\r\n    // liquidity mining collection uri\r\n    string public liquidityFarmTokenCollectionURI;\r\n    // liquidity mining farm token uri\r\n    string public liquidityFarmTokenURI;\r\n    // event that tracks liquidity mining contracts deployed\r\n    event LiquidityMiningDeployed(address indexed liquidityMiningAddress, address indexed sender, bytes liquidityMiningInitResultData);\r\n    // event that tracks logic contract address change\r\n    event LiquidityMiningLogicSet(address indexed newAddress);\r\n    // event that tracks default extension contract address change\r\n    event LiquidityMiningDefaultExtensionSet(address indexed newAddress);\r\n    // event that tracks wallet changes\r\n    event FeePercentageSet(uint256 newFeePercentage);\r\n\r\n    constructor(address doubleProxy, address _liquidityMiningImplementationAddress, address _liquidityMiningDefaultExtension, uint256 feePercentage, string memory liquidityFarmTokenCollectionUri, string memory liquidityFarmTokenUri) {\r\n        _doubleProxy = doubleProxy;\r\n        liquidityFarmTokenCollectionURI = liquidityFarmTokenCollectionUri;\r\n        liquidityFarmTokenURI = liquidityFarmTokenUri;\r\n        emit LiquidityMiningLogicSet(liquidityMiningImplementationAddress = _liquidityMiningImplementationAddress);\r\n        emit LiquidityMiningDefaultExtensionSet(liquidityMiningDefaultExtension = _liquidityMiningDefaultExtension);\r\n        emit FeePercentageSet(_feePercentage = feePercentage);\r\n    }\r\n\r\n    /** PUBLIC METHODS */\r\n\r\n    function feePercentageInfo() public override view returns (uint256, address) {\r\n        return (_feePercentage, IMVDProxy(IDoubleProxy(_doubleProxy).proxy()).getMVDWalletAddress());\r\n    }\r\n\r\n    /** @dev allows the DFO to update the double proxy address.\r\n      * @param newDoubleProxy new double proxy address.\r\n    */\r\n    function setDoubleProxy(address newDoubleProxy) public onlyDFO {\r\n        _doubleProxy = newDoubleProxy;\r\n    }\r\n\r\n    /** @dev change the fee percentage\r\n     * @param feePercentage new fee percentage.\r\n     */\r\n    function updateFeePercentage(uint256 feePercentage) public onlyDFO {\r\n        emit FeePercentageSet(_feePercentage = feePercentage);\r\n    }\r\n\r\n    /** @dev allows the factory owner to update the logic contract address.\r\n     * @param _liquidityMiningImplementationAddress new liquidity mining implementation address.\r\n     */\r\n    function updateLogicAddress(address _liquidityMiningImplementationAddress) public onlyDFO {\r\n        emit LiquidityMiningLogicSet(liquidityMiningImplementationAddress = _liquidityMiningImplementationAddress);\r\n    }\r\n\r\n    /** @dev allows the factory owner to update the default extension contract address.\r\n     * @param _liquidityMiningDefaultExtensionAddress new liquidity mining extension address.\r\n     */\r\n    function updateDefaultExtensionAddress(address _liquidityMiningDefaultExtensionAddress) public onlyDFO {\r\n        emit LiquidityMiningDefaultExtensionSet(liquidityMiningDefaultExtension = _liquidityMiningDefaultExtensionAddress);\r\n    }\r\n\r\n    /** @dev allows the factory owner to update the liquidity farm token collection uri.\r\n     * @param liquidityFarmTokenCollectionUri new liquidity farm token collection uri.\r\n     */\r\n    function updateLiquidityFarmTokenCollectionURI(string memory liquidityFarmTokenCollectionUri) public onlyDFO {\r\n        liquidityFarmTokenCollectionURI = liquidityFarmTokenCollectionUri;\r\n    }\r\n\r\n    /** @dev allows the factory owner to update the liquidity farm token collection uri.\r\n     * @param liquidityFarmTokenUri new liquidity farm token collection uri.\r\n     */\r\n    function updateLiquidityFarmTokenURI(string memory liquidityFarmTokenUri) public onlyDFO {\r\n        liquidityFarmTokenURI = liquidityFarmTokenUri;\r\n    }\r\n\r\n    /** @dev returns the liquidity farm token collection uri.\r\n      * @return liquidity farm token collection uri.\r\n     */\r\n    function getLiquidityFarmTokenCollectionURI() public override view returns (string memory) {\r\n        return liquidityFarmTokenCollectionURI;\r\n    }\r\n\r\n    /** @dev returns the liquidity farm token uri.\r\n      * @return liquidity farm token uri.\r\n     */\r\n    function getLiquidityFarmTokenURI() public override view returns (string memory) {\r\n        return liquidityFarmTokenURI;\r\n    }\r\n\r\n    /** @dev utlity method to clone default extension\r\n     * @return clonedExtension the address of the actually-cloned liquidity mining extension\r\n     */\r\n    function cloneLiquidityMiningDefaultExtension() public override returns(address clonedExtension) {\r\n        emit ExtensionCloned(clonedExtension = _clone(liquidityMiningDefaultExtension));\r\n    }\r\n\r\n    /** @dev this function deploys a new LiquidityMining contract and calls the encoded function passed as data.\r\n     * @param data encoded initialize function for the liquidity mining contract (check LiquidityMining contract code).\r\n     * @return contractAddress new liquidity mining contract address.\r\n     * @return initResultData new liquidity mining contract call result.\r\n     */\r\n    function deploy(bytes memory data) public returns (address contractAddress, bytes memory initResultData) {\r\n        initResultData = _call(contractAddress = _clone(liquidityMiningImplementationAddress), data);\r\n        emit LiquidityMiningDeployed(contractAddress, msg.sender, initResultData);\r\n    }\r\n\r\n    /** PRIVATE METHODS */\r\n\r\n    /** @dev clones the input contract address and returns the copied contract address.\r\n     * @param original address of the original contract.\r\n     * @return copy copied contract address.\r\n     */\r\n    function _clone(address original) private returns (address copy) {\r\n        assembly {\r\n            mstore(\r\n                0,\r\n                or(\r\n                    0x5880730000000000000000000000000000000000000000803b80938091923cF3,\r\n                    mul(original, 0x1000000000000000000)\r\n                )\r\n            )\r\n            copy := create(0, 0, 32)\r\n            switch extcodesize(copy)\r\n                case 0 {\r\n                    invalid()\r\n                }\r\n        }\r\n    }\r\n\r\n    /** @dev calls the contract at the given location using the given payload and returns the returnData.\r\n      * @param location location to call.\r\n      * @param payload call payload.\r\n      * @return returnData call return data.\r\n     */\r\n    function _call(address location, bytes memory payload) private returns(bytes memory returnData) {\r\n        assembly {\r\n            let result := call(gas(), location, 0, add(payload, 0x20), mload(payload), 0, 0)\r\n            let size := returndatasize()\r\n            returnData := mload(0x40)\r\n            mstore(returnData, size)\r\n            let returnDataPayloadStart := add(returnData, 0x20)\r\n            returndatacopy(returnDataPayloadStart, 0, size)\r\n            mstore(0x40, add(returnDataPayloadStart, size))\r\n            switch result case 0 {revert(returnDataPayloadStart, size)}\r\n        }\r\n    }\r\n\r\n    /** @dev onlyDFO modifier used to check for unauthorized accesses. */\r\n    modifier onlyDFO() {\r\n        require(IMVDFunctionalitiesManager(IMVDProxy(IDoubleProxy(_doubleProxy).proxy()).getMVDFunctionalitiesManagerAddress()).isAuthorizedFunctionality(msg.sender), \"Unauthorized.\");\r\n        _;\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"doubleProxy\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_liquidityMiningImplementationAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_liquidityMiningDefaultExtension\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"feePercentage\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"liquidityFarmTokenCollectionUri\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"liquidityFarmTokenUri\",\"type\":\"string\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"ExtensionCloned\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newFeePercentage\",\"type\":\"uint256\"}],\"name\":\"FeePercentageSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newAddress\",\"type\":\"address\"}],\"name\":\"LiquidityMiningDefaultExtensionSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"liquidityMiningAddress\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"liquidityMiningInitResultData\",\"type\":\"bytes\"}],\"name\":\"LiquidityMiningDeployed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newAddress\",\"type\":\"address\"}],\"name\":\"LiquidityMiningLogicSet\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"_doubleProxy\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"cloneLiquidityMiningDefaultExtension\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"clonedExtension\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"deploy\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"contractAddress\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"initResultData\",\"type\":\"bytes\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feePercentageInfo\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getLiquidityFarmTokenCollectionURI\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getLiquidityFarmTokenURI\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"liquidityFarmTokenCollectionURI\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"liquidityFarmTokenURI\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"liquidityMiningDefaultExtension\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"liquidityMiningImplementationAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newDoubleProxy\",\"type\":\"address\"}],\"name\":\"setDoubleProxy\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_liquidityMiningDefaultExtensionAddress\",\"type\":\"address\"}],\"name\":\"updateDefaultExtensionAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"feePercentage\",\"type\":\"uint256\"}],\"name\":\"updateFeePercentage\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"liquidityFarmTokenCollectionUri\",\"type\":\"string\"}],\"name\":\"updateLiquidityFarmTokenCollectionURI\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"liquidityFarmTokenUri\",\"type\":\"string\"}],\"name\":\"updateLiquidityFarmTokenURI\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_liquidityMiningImplementationAddress\",\"type\":\"address\"}],\"name\":\"updateLogicAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"LiquidityMiningFactory","CompilerVersion":"v0.7.6+commit.7338295f","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000f869538e3904778a0cb1ff620c8e83c7df36b9460000000000000000000000007e78c6217acf4421187ccb0bc47f56bf50614e920000000000000000000000000b98ec39cb95372ccacd7acb2a0ffb6520b83d30000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000003a697066733a2f2f697066732f516d62767136766975376453534e5a6964446741385a676d3258556a576e37755061566b41536878785a3532366d000000000000000000000000000000000000000000000000000000000000000000000000003a697066733a2f2f697066732f516d58415743523267326244344b66324235444767725953336d693139456e48794651726378355a553466316466000000000000","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":"ipfs://f058c01d1a28d1984b20f4a56b451c5333cbb324fde2ceba602ca7e5b331c64a"}]}