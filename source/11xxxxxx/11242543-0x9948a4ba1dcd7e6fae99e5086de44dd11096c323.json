{"status":"1","message":"OK","result":[{"SourceCode":"// Verified using https://dapp.tools\n\n// hevm: flattened sources of src/spell.sol\npragma solidity >=0.5.15 <0.6.0;\n\n////// src/spell.sol\n// Copyright (C) 2020 Centrifuge\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n/* pragma solidity >=0.5.15 <0.6.0; */\n\ninterface TinlakeRootLike {\n    function relyContract(address, address) external;\n    function denyContract(address, address) external;\n}\n\n\n// This spell swaps the senior operator in the PC2 pool\ncontract TinlakeSpell {\n\n    bool public done;\n    string constant public description = \"Tinlake Mainnet Spell\";\n\n    // MAINNET ADDRESSES\n    // The contracts in this list should correspond to a tinlake deployment\n    // https://github.com/centrifuge/tinlake-pool-config/blob/master/mainnet-production.json\n\n    // PC2 contracts\n    address constant public ROOT = 0x23e11B3f2CD3d73f68a4A3AF436e2ED3459d0260;\n    address constant public SENIOR_OPERATOR_OLD = 0x5BdCeF4d70D7Df939cb52be639F6a189423837eE;\n    address constant public SENIOR_OPERATOR_NEW = 0xB1319831F7BC0cbc9813eA731A1bD5684a2f0ae3;\n    address constant public SENIOR_TRANCHE = 0xF2C43699306DAB17Ec353886272BdFB4f443aD84;\n   \n    // permissions to be revoked\n    address constant public SENIOR_OPERATOR_ADMIN_OLD = 0x790c2c860DDC993f3da92B19cB440cF8338C59a6;  \n\n    // permissions to be set \n    address constant public SENIOR_OPERATOR_ADMIN1 = 0x6c98A86035D93ec71cc79372bFBC16f4D7c48ED6;                                             \n    address constant public SENIOR_OPERATOR_ADMIN2 = 0x6ff40A231CA4E33DD8A5F7FDdA2a90A991052aB1;\n    address constant public SENIOR_OPERATOR_ADMIN3 = 0x9B15cBAb38a0408E5DBaB9636145C862bFA5Ce53;\n\n    function cast() public {\n        require(!done, \"spell-already-cast\");\n        done = true;\n        execute();\n    }\n\n    function execute() internal {\n        TinlakeRootLike root = TinlakeRootLike(address(ROOT));\n      \n        // Tranche: revoke permissions for old operator\n        root.denyContract(SENIOR_TRANCHE, SENIOR_OPERATOR_OLD);\n\n        // Tranche: give permissions for new operator\n        root.relyContract(SENIOR_TRANCHE, SENIOR_OPERATOR_NEW);\n\n        // new Senior Operator: revoke admin permissions\n        root.denyContract(SENIOR_OPERATOR_NEW, SENIOR_OPERATOR_ADMIN_OLD);\n\n        // new Senior Operator: give admin permissions\n        root.relyContract(SENIOR_OPERATOR_NEW, SENIOR_OPERATOR_ADMIN1);\n        root.relyContract(SENIOR_OPERATOR_NEW, SENIOR_OPERATOR_ADMIN2);\n        root.relyContract(SENIOR_OPERATOR_NEW, SENIOR_OPERATOR_ADMIN3);\n    }   \n}\n","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"ROOT\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SENIOR_OPERATOR_ADMIN1\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SENIOR_OPERATOR_ADMIN2\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SENIOR_OPERATOR_ADMIN3\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SENIOR_OPERATOR_ADMIN_OLD\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SENIOR_OPERATOR_NEW\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SENIOR_OPERATOR_OLD\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SENIOR_TRANCHE\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"cast\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"description\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"done\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"TinlakeSpell","CompilerVersion":"v0.5.15+commit.6a57276f","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"","Proxy":"0","Implementation":"","SwarmSource":""}]}