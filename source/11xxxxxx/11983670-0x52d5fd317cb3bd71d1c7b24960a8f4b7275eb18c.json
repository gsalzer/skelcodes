{"status":"1","message":"OK","result":[{"SourceCode":"// File: contracts/updater/interfaces/IFreeFromUpTo.sol\r\n\r\npragma solidity ^0.6.12;\r\n\r\ninterface IFreeFromUpTo {\r\n    function freeFromUpTo(address from, uint256 value) external returns (uint256 freed);\r\n}\r\n\r\n// File: contracts/updater/BurnChi.sol\r\n\r\npragma solidity 0.6.12;\r\n\r\ncontract BurnChi {\r\n    IFreeFromUpTo private constant chi = IFreeFromUpTo(0x0000000000004946c0e9F43F4Dee607b0eF1fA1c);\r\n\r\n    modifier discountCHI(bool _useChi) {\r\n        if(_useChi) {\r\n            uint256 gasStart = gasleft();\r\n            _;\r\n            uint256 gasSpent = 21000 + gasStart - gasleft() + 16 * msg.data.length;\r\n            chi.freeFromUpTo(msg.sender, (gasSpent + 14154) / 41130);\r\n        } else {\r\n            _;\r\n        }\r\n    }\r\n}\r\n\r\n// File: contracts/updater/interfaces/ITokenManager.sol\r\n\r\npragma solidity ^0.6.12;\r\n\r\ninterface ITokenManager {\r\n  function updateRewardParams(address payable userAddr) external returns (bool);\r\n}\r\n\r\n// File: contracts/updater/interfaces/IObserver.sol\r\n\r\npragma solidity ^0.6.12;\r\n\r\ninterface IObserver {\r\n  function updateChainMarketInfo(uint256 _idx, uint256 chainDeposit, uint256 chainBorrow) external returns (bool);\r\n}\r\n\r\n// File: contracts/updater/Updater.sol\r\n\r\npragma solidity ^0.6.12;\r\n\r\ncontract Updater is BurnChi {\r\n  address public owner;\r\n\r\n  ITokenManager public manager;\r\n  IObserver public observer;\r\n\r\n  modifier onlyOwner {\r\n\t\trequire(msg.sender == owner, \"onlyOwner\");\r\n\t\t_;\r\n\t}\r\n\r\n  constructor(address managerAddress, address observerAddress) public {\r\n    owner = msg.sender;\r\n\r\n    manager = ITokenManager(managerAddress);\r\n    observer = IObserver(observerAddress);\r\n  }\r\n\r\n  function setManager(address managerAddress) public onlyOwner returns (bool) {\r\n    manager = ITokenManager(managerAddress);\r\n    return true;\r\n  }\r\n\r\n  function setObserver(address observerAddress) public onlyOwner returns (bool) {\r\n    observer = IObserver(observerAddress);\r\n    return true;\r\n  }\r\n\r\n  function syncReward(address payable rewerder, uint256 _idx, uint256 chainDeposit, uint256 chainBorrow, bool _useChi) external onlyOwner discountCHI(_useChi) returns (bool) {\r\n    _updateChainMarketInfo(_idx, chainDeposit, chainBorrow);\r\n    _updateRewardParams(rewerder);\r\n    return true;\r\n  }\r\n\r\n  function updateRewardParams(address payable rewerder, bool _useChi) external onlyOwner discountCHI(_useChi) returns (bool) {\r\n    return _updateRewardParams(rewerder);\r\n  }\r\n\r\n  function _updateRewardParams(address payable rewerder) internal returns (bool) {\r\n    return manager.updateRewardParams(rewerder);\r\n  }\r\n\r\n  function updateChainMarketInfo(uint256 _idx, uint256 chainDeposit, uint256 chainBorrow, bool _useChi) external onlyOwner discountCHI(_useChi) returns (bool) {\r\n    return _updateChainMarketInfo(_idx, chainDeposit, chainBorrow);\r\n  }\r\n\r\n  function _updateChainMarketInfo(uint256 _idx, uint256 chainDeposit, uint256 chainBorrow) internal returns (bool) {\r\n    return observer.updateChainMarketInfo(_idx, chainDeposit, chainBorrow);\r\n  }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"managerAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"observerAddress\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"internalType\":\"contract ITokenManager\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"observer\",\"outputs\":[{\"internalType\":\"contract IObserver\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"managerAddress\",\"type\":\"address\"}],\"name\":\"setManager\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"observerAddress\",\"type\":\"address\"}],\"name\":\"setObserver\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"rewerder\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_idx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"chainDeposit\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"chainBorrow\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_useChi\",\"type\":\"bool\"}],\"name\":\"syncReward\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_idx\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"chainDeposit\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"chainBorrow\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_useChi\",\"type\":\"bool\"}],\"name\":\"updateChainMarketInfo\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address payable\",\"name\":\"rewerder\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_useChi\",\"type\":\"bool\"}],\"name\":\"updateRewardParams\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"Updater","CompilerVersion":"v0.6.12+commit.27d51765","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000c6c99a98bfe1ba7f9bd1dbaf0c9a74103e99af0d0000000000000000000000004acb9f0c1a266fbfbe455a4bbc85f14672a23b6f","EVMVersion":"Default","Library":"","LicenseType":"BSD-3-Clause","Proxy":"0","Implementation":"","SwarmSource":"ipfs://a9045019809a24c67b983ecfc3c61bb0262cfdd839a125beafb0341aa2acffea"}]}