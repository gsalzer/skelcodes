{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.6.0;\r\npragma experimental ABIEncoderV2;\r\n\r\ninterface AaveProtocolDataProvider {\r\n    function getUserReserveData(address asset, address user) external view returns (\r\n        uint256 currentATokenBalance,\r\n        uint256 currentStableDebt,\r\n        uint256 currentVariableDebt,\r\n        uint256 principalStableDebt,\r\n        uint256 scaledVariableDebt,\r\n        uint256 stableBorrowRate,\r\n        uint256 liquidityRate,\r\n        uint40 stableRateLastUpdated,\r\n        bool usageAsCollateralEnabled\r\n    );\r\n}\r\n\r\ninterface AaveLendingPool {\r\n    function getUserAccountData(address user) external view returns (\r\n        uint256 totalCollateralETH,\r\n        uint256 totalDebtETH,\r\n        uint256 availableBorrowsETH,\r\n        uint256 currentLiquidationThreshold,\r\n        uint256 ltv,\r\n        uint256 healthFactor\r\n    );\r\n}\r\n\r\ninterface AaveAddressProvider {\r\n    function getLendingPool() external view returns (address);\r\n    function getPriceOracle() external view returns (address);\r\n}\r\n\r\ninterface ChainLinkInterface {\r\n    function latestAnswer() external view returns (int256);\r\n    function decimals() external view returns (uint256);\r\n}\r\n\r\ncontract Helpers {\r\n\r\n    struct AaveData {\r\n        uint collateral;\r\n        uint debt;\r\n    }\r\n\r\n    struct data {\r\n        address user;\r\n        AaveData[] tokensData;\r\n    }\r\n    \r\n    struct datas {\r\n        AaveData[] tokensData;\r\n    }\r\n\r\n    /**\r\n     * @dev get Aave Provider Address\r\n    */\r\n    function getAaveAddressProvider() internal pure returns (address) {\r\n        return 0xB53C1a33016B2DC2fF3653530bfF1848a515c8c5; // Mainnet\r\n        // return 0x652B2937Efd0B5beA1c8d54293FC1289672AFC6b; // Kovan\r\n    }\r\n\r\n    /**\r\n     * @dev get Chainlink ETH price feed Address\r\n    */\r\n    function getChainlinkEthFeed() internal pure returns (address) {\r\n        return 0x5f4eC3Df9cbd43714FE2740f5E3616155c5b8419; //mainnet\r\n        // return 0x9326BFA02ADD2366b30bacB125260Af641031331; //kovan\r\n    }\r\n\r\n}\r\n\r\ncontract InstaAaveV2PowerResolver is Helpers {\r\n    function getEthPrice() public view returns (uint ethPrice) {\r\n        ethPrice = uint(ChainLinkInterface(getChainlinkEthFeed()).latestAnswer());\r\n    }\r\n\r\n    function getPositionByAddress(\r\n        address[] memory owners\r\n    )\r\n        public\r\n        view\r\n        returns (AaveData[] memory tokensData)\r\n    {\r\n        AaveAddressProvider addrProvider = AaveAddressProvider(getAaveAddressProvider());\r\n        AaveLendingPool aave = AaveLendingPool(addrProvider.getLendingPool());\r\n        tokensData = new AaveData[](owners.length);\r\n        for (uint i = 0; i < owners.length; i++) {\r\n            (uint256 collateral,uint256 debt,,,,) = aave.getUserAccountData(owners[i]);\r\n            tokensData[i] = AaveData(\r\n                collateral,\r\n                debt\r\n            );\r\n        }\r\n    }\r\n\r\n}","ABI":"[{\"inputs\":[],\"name\":\"getEthPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"ethPrice\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"owners\",\"type\":\"address[]\"}],\"name\":\"getPositionByAddress\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"collateral\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"debt\",\"type\":\"uint256\"}],\"internalType\":\"struct Helpers.AaveData[]\",\"name\":\"tokensData\",\"type\":\"tuple[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"InstaAaveV2PowerResolver","CompilerVersion":"v0.6.12+commit.27d51765","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":"ipfs://1bd1ae217d245b4d188eabed62d9473626de54ceb9f9b8bf74b7e8881e9e174a"}]}