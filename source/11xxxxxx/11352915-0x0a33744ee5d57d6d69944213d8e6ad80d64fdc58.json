{"status":"1","message":"OK","result":[{"SourceCode":"// File: localhost/staking/interfaces/IGrgVault.sol\r\n\r\n// SPDX-License-Identifier: Apache 2.0\r\n\r\n/*\r\n\r\n  Original work Copyright 2019 ZeroEx Intl.\r\n  Modified work Copyright 2020 Rigo Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\ninterface IGrgVault {\r\n\r\n    /// @dev Emmitted whenever a StakingProxy is set in a vault.\r\n    event StakingProxySet(address stakingProxyAddress);\r\n\r\n    /// @dev Emitted when the Staking contract is put into Catastrophic Failure Mode\r\n    /// @param sender Address of sender (`msg.sender`)\r\n    event InCatastrophicFailureMode(address sender);\r\n\r\n    /// @dev Emitted when Grg Tokens are deposited into the vault.\r\n    /// @param staker of Grg Tokens.\r\n    /// @param amount of Grg Tokens deposited.\r\n    event Deposit(\r\n        address indexed staker,\r\n        uint256 amount\r\n    );\r\n\r\n    /// @dev Emitted when Grg Tokens are withdrawn from the vault.\r\n    /// @param staker of Grg Tokens.\r\n    /// @param amount of Grg Tokens withdrawn.\r\n    event Withdraw(\r\n        address indexed staker,\r\n        uint256 amount\r\n    );\r\n\r\n    /// @dev Emitted whenever the GRG AssetProxy is set.\r\n    event GrgProxySet(address grgProxyAddress);\r\n\r\n    /// @dev Sets the address of the StakingProxy contract.\r\n    /// Note that only the contract staker can call this function.\r\n    /// @param _stakingProxyAddress Address of Staking proxy contract.\r\n    function setStakingProxy(address _stakingProxyAddress)\r\n        external;\r\n\r\n    /// @dev Vault enters into Catastrophic Failure Mode.\r\n    /// *** WARNING - ONCE IN CATOSTROPHIC FAILURE MODE, YOU CAN NEVER GO BACK! ***\r\n    /// Note that only the contract staker can call this function.\r\n    function enterCatastrophicFailure()\r\n        external;\r\n\r\n    /// @dev Sets the Grg proxy.\r\n    /// Note that only the contract staker can call this.\r\n    /// Note that this can only be called when *not* in Catastrophic Failure mode.\r\n    /// @param grgProxyAddress Address of the RigoBlock Grg Proxy.\r\n    function setGrgProxy(address grgProxyAddress)\r\n        external;\r\n\r\n    /// @dev Deposit an `amount` of Grg Tokens from `staker` into the vault.\r\n    /// Note that only the Staking contract can call this.\r\n    /// Note that this can only be called when *not* in Catastrophic Failure mode.\r\n    /// @param staker of Grg Tokens.\r\n    /// @param amount of Grg Tokens to deposit.\r\n    function depositFrom(address staker, uint256 amount)\r\n        external;\r\n\r\n    /// @dev Withdraw an `amount` of Grg Tokens to `staker` from the vault.\r\n    /// Note that only the Staking contract can call this.\r\n    /// Note that this can only be called when *not* in Catastrophic Failure mode.\r\n    /// @param staker of Grg Tokens.\r\n    /// @param amount of Grg Tokens to withdraw.\r\n    function withdrawFrom(address staker, uint256 amount)\r\n        external;\r\n\r\n    /// @dev Withdraw ALL Grg Tokens to `staker` from the vault.\r\n    /// Note that this can only be called when *in* Catastrophic Failure mode.\r\n    /// @param staker of Grg Tokens.\r\n    function withdrawAllFrom(address staker)\r\n        external\r\n        returns (uint256);\r\n\r\n    /// @dev Returns the balance in Grg Tokens of the `staker`\r\n    /// @return Balance in Grg.\r\n    function balanceOf(address staker)\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /// @dev Returns the entire balance of Grg tokens in the vault.\r\n    function balanceOfGrgVault()\r\n        external\r\n        view\r\n        returns (uint256);\r\n}\r\n\r\n// File: localhost/staking/interfaces/IStructs.sol\r\n\r\n\r\n/*\r\n\r\n  Original work Copyright 2019 ZeroEx Intl.\r\n  Modified work Copyright 2020 Rigo Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\ninterface IStructs {\r\n\r\n    /// @dev Stats for a pool that earned rewards.\r\n    /// @param feesCollected Fees collected in ETH by this pool.\r\n    /// @param weightedStake Amount of weighted stake in the pool.\r\n    /// @param membersStake Amount of non-operator stake in the pool.\r\n    struct PoolStats {\r\n        uint256 feesCollected;\r\n        uint256 weightedStake;\r\n        uint256 membersStake;\r\n    }\r\n\r\n    /// @dev Holds stats aggregated across a set of pools.\r\n    /// @param rewardsAvailable Rewards (ETH) available to the epoch\r\n    ///        being finalized (the previous epoch). This is simply the balance\r\n    ///        of the contract at the end of the epoch.\r\n    /// @param numPoolsToFinalize The number of pools that have yet to be finalized through `finalizePools()`.\r\n    /// @param totalFeesCollected The total fees collected for the epoch being finalized.\r\n    /// @param totalWeightedStake The total fees collected for the epoch being finalized.\r\n    /// @param totalRewardsFinalized Amount of rewards that have been paid during finalization.\r\n    struct AggregatedStats {\r\n        uint256 rewardsAvailable;\r\n        uint256 numPoolsToFinalize;\r\n        uint256 totalFeesCollected;\r\n        uint256 totalWeightedStake;\r\n        uint256 totalRewardsFinalized;\r\n    }\r\n\r\n    /// @dev Encapsulates a balance for the current and next epochs.\r\n    /// Note that these balances may be stale if the current epoch\r\n    /// is greater than `currentEpoch`.\r\n    /// @param currentEpoch The current epoch\r\n    /// @param currentEpochBalance Balance in the current epoch.\r\n    /// @param nextEpochBalance Balance in `currentEpoch+1`.\r\n    struct StoredBalance {\r\n        uint64 currentEpoch;\r\n        uint96 currentEpochBalance;\r\n        uint96 nextEpochBalance;\r\n    }\r\n\r\n    /// @dev Statuses that stake can exist in.\r\n    ///      Any stake can be (re)delegated effective at the next epoch\r\n    ///      Undelegated stake can be withdrawn if it is available in both the current and next epoch\r\n    enum StakeStatus {\r\n        UNDELEGATED,\r\n        DELEGATED\r\n    }\r\n\r\n    /// @dev Info used to describe a status.\r\n    /// @param status Status of the stake.\r\n    /// @param poolId Unique Id of pool. This is set when status=DELEGATED.\r\n    struct StakeInfo {\r\n        StakeStatus status;\r\n        bytes32 poolId;\r\n    }\r\n\r\n    /// @dev Struct to represent a fraction.\r\n    /// @param numerator Numerator of fraction.\r\n    /// @param denominator Denominator of fraction.\r\n    struct Fraction {\r\n        uint256 numerator;\r\n        uint256 denominator;\r\n    }\r\n\r\n    /// @dev Holds the metadata for a staking pool.\r\n    /// @param operator Operator of the pool.\r\n    /// @param operatorShare Fraction of the total balance owned by the operator, in ppm.\r\n    /// @param stakingPal Wallet that collects 10% of otherwise redistributed community rewards.\r\n    struct Pool {\r\n        address operator;\r\n        uint32 operatorShare;\r\n        address stakingPal;\r\n    }\r\n}\r\n\r\n// File: localhost/staking/libs/LibStakingRichErrors.sol\r\n\r\n\r\n/*\r\n\r\n  Original work Copyright 2019 ZeroEx Intl.\r\n  Modified work Copyright 2020 Rigo Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\n\r\n\r\nlibrary LibStakingRichErrors {\r\n\r\n    enum OperatorShareErrorCodes {\r\n        OperatorShareTooLarge,\r\n        CanOnlyDecreaseOperatorShare\r\n    }\r\n\r\n    enum InitializationErrorCodes {\r\n        MixinSchedulerAlreadyInitialized,\r\n        MixinParamsAlreadyInitialized\r\n    }\r\n\r\n    enum InvalidParamValueErrorCodes {\r\n        InvalidCobbDouglasAlpha,\r\n        InvalidRewardDelegatedStakeWeight,\r\n        InvalidMaximumMakersInPool,\r\n        InvalidMinimumPoolStake,\r\n        InvalidEpochDuration\r\n    }\r\n\r\n    enum PopManagerErrorCodes {\r\n        PopAlreadyRegistered,\r\n        PopNotRegistered\r\n    }\r\n\r\n    // bytes4(keccak256(\"OnlyCallableByExchangeError(address)\")) // TODO: amend to OnlyCallableByPopError\r\n    bytes4 internal constant ONLY_CALLABLE_BY_POP_ERROR_SELECTOR =\r\n        0xb56d2df0;\r\n\r\n    // bytes4(keccak256(\"PopManagerError(uint8,address)\"))\r\n    bytes4 internal constant POP_MANAGER_ERROR_SELECTOR =\r\n        0xb9588e43;\r\n\r\n    // bytes4(keccak256(\"InsufficientBalanceError(uint256,uint256)\"))\r\n    bytes4 internal constant INSUFFICIENT_BALANCE_ERROR_SELECTOR =\r\n        0x84c8b7c9;\r\n\r\n    // bytes4(keccak256(\"OnlyCallableByPoolOperatorError(address,bytes32)\"))\r\n    bytes4 internal constant ONLY_CALLABLE_BY_POOL_OPERATOR_ERROR_SELECTOR =\r\n        0x82ded785;\r\n\r\n    // bytes4(keccak256(\"BlockTimestampTooLowError(uint256,uint256)\"))\r\n    bytes4 internal constant BLOCK_TIMESTAMP_TOO_LOW_ERROR_SELECTOR =\r\n        0xa6bcde47;\r\n\r\n    // bytes4(keccak256(\"OnlyCallableByStakingContractError(address)\"))\r\n    bytes4 internal constant ONLY_CALLABLE_BY_STAKING_CONTRACT_ERROR_SELECTOR =\r\n        0xca1d07a2;\r\n\r\n    // bytes4(keccak256(\"OnlyCallableIfInCatastrophicFailureError()\"))\r\n    bytes internal constant ONLY_CALLABLE_IF_IN_CATASTROPHIC_FAILURE_ERROR =\r\n        hex\"3ef081cc\";\r\n\r\n    // bytes4(keccak256(\"OnlyCallableIfNotInCatastrophicFailureError()\"))\r\n    bytes internal constant ONLY_CALLABLE_IF_NOT_IN_CATASTROPHIC_FAILURE_ERROR =\r\n        hex\"7dd020ce\";\r\n\r\n    // bytes4(keccak256(\"OperatorShareError(uint8,bytes32,uint32)\"))\r\n    bytes4 internal constant OPERATOR_SHARE_ERROR_SELECTOR =\r\n        0x22df9597;\r\n\r\n    // bytes4(keccak256(\"PoolExistenceError(bytes32,bool)\"))\r\n    bytes4 internal constant POOL_EXISTENCE_ERROR_SELECTOR =\r\n        0x9ae94f01;\r\n\r\n    // bytes4(keccak256(\"ProxyDestinationCannotBeNilError()\"))\r\n    bytes internal constant PROXY_DESTINATION_CANNOT_BE_NIL_ERROR =\r\n        hex\"6eff8285\";\r\n\r\n    // bytes4(keccak256(\"InitializationError(uint8)\"))\r\n    bytes4 internal constant INITIALIZATION_ERROR_SELECTOR =\r\n        0x0b02d773;\r\n\r\n    // bytes4(keccak256(\"InvalidParamValueError(uint8)\"))\r\n    bytes4 internal constant INVALID_PARAM_VALUE_ERROR_SELECTOR =\r\n        0xfc45bd11;\r\n\r\n    // bytes4(keccak256(\"InvalidProtocolFeePaymentError(uint256,uint256)\"))\r\n    bytes4 internal constant INVALID_PROTOCOL_FEE_PAYMENT_ERROR_SELECTOR =\r\n        0x31d7a505;\r\n\r\n    // bytes4(keccak256(\"PreviousEpochNotFinalizedError(uint256,uint256)\"))\r\n    bytes4 internal constant PREVIOUS_EPOCH_NOT_FINALIZED_ERROR_SELECTOR =\r\n        0x614b800a;\r\n\r\n    // bytes4(keccak256(\"PoolNotFinalizedError(bytes32,uint256)\"))\r\n    bytes4 internal constant POOL_NOT_FINALIZED_ERROR_SELECTOR =\r\n        0x5caa0b05;\r\n\r\n    // solhint-disable func-name-mixedcase\r\n    function OnlyCallableByPopError(\r\n        address senderAddress\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            ONLY_CALLABLE_BY_POP_ERROR_SELECTOR,\r\n            senderAddress\r\n        );\r\n    }\r\n\r\n    function PopManagerError(\r\n        PopManagerErrorCodes errorCodes,\r\n        address popAddress\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            POP_MANAGER_ERROR_SELECTOR,\r\n            errorCodes,\r\n            popAddress\r\n        );\r\n    }\r\n\r\n    function InsufficientBalanceError(\r\n        uint256 amount,\r\n        uint256 balance\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            INSUFFICIENT_BALANCE_ERROR_SELECTOR,\r\n            amount,\r\n            balance\r\n        );\r\n    }\r\n\r\n    function OnlyCallableByPoolOperatorError(\r\n        address senderAddress,\r\n        bytes32 poolId\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            ONLY_CALLABLE_BY_POOL_OPERATOR_ERROR_SELECTOR,\r\n            senderAddress,\r\n            poolId\r\n        );\r\n    }\r\n\r\n    function BlockTimestampTooLowError(\r\n        uint256 epochEndTime,\r\n        uint256 currentBlockTimestamp\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            BLOCK_TIMESTAMP_TOO_LOW_ERROR_SELECTOR,\r\n            epochEndTime,\r\n            currentBlockTimestamp\r\n        );\r\n    }\r\n\r\n    function OnlyCallableByStakingContractError(\r\n        address senderAddress\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            ONLY_CALLABLE_BY_STAKING_CONTRACT_ERROR_SELECTOR,\r\n            senderAddress\r\n        );\r\n    }\r\n\r\n    function OnlyCallableIfInCatastrophicFailureError()\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return ONLY_CALLABLE_IF_IN_CATASTROPHIC_FAILURE_ERROR;\r\n    }\r\n\r\n    function OnlyCallableIfNotInCatastrophicFailureError()\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return ONLY_CALLABLE_IF_NOT_IN_CATASTROPHIC_FAILURE_ERROR;\r\n    }\r\n\r\n    function OperatorShareError(\r\n        OperatorShareErrorCodes errorCodes,\r\n        bytes32 poolId,\r\n        uint32 operatorShare\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            OPERATOR_SHARE_ERROR_SELECTOR,\r\n            errorCodes,\r\n            poolId,\r\n            operatorShare\r\n        );\r\n    }\r\n\r\n    function PoolExistenceError(\r\n        bytes32 poolId,\r\n        bool alreadyExists\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            POOL_EXISTENCE_ERROR_SELECTOR,\r\n            poolId,\r\n            alreadyExists\r\n        );\r\n    }\r\n\r\n    function InvalidProtocolFeePaymentError(\r\n        uint256 expectedProtocolFeePaid,\r\n        uint256 actualProtocolFeePaid\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            INVALID_PROTOCOL_FEE_PAYMENT_ERROR_SELECTOR,\r\n            expectedProtocolFeePaid,\r\n            actualProtocolFeePaid\r\n        );\r\n    }\r\n\r\n    function InitializationError(InitializationErrorCodes code)\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            INITIALIZATION_ERROR_SELECTOR,\r\n            uint8(code)\r\n        );\r\n    }\r\n\r\n    function InvalidParamValueError(InvalidParamValueErrorCodes code)\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            INVALID_PARAM_VALUE_ERROR_SELECTOR,\r\n            uint8(code)\r\n        );\r\n    }\r\n\r\n    function ProxyDestinationCannotBeNilError()\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return PROXY_DESTINATION_CANNOT_BE_NIL_ERROR;\r\n    }\r\n\r\n    function PreviousEpochNotFinalizedError(\r\n        uint256 unfinalizedEpoch,\r\n        uint256 unfinalizedPoolsRemaining\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            PREVIOUS_EPOCH_NOT_FINALIZED_ERROR_SELECTOR,\r\n            unfinalizedEpoch,\r\n            unfinalizedPoolsRemaining\r\n        );\r\n    }\r\n\r\n    function PoolNotFinalizedError(\r\n        bytes32 poolId,\r\n        uint256 epoch\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            POOL_NOT_FINALIZED_ERROR_SELECTOR,\r\n            poolId,\r\n            epoch\r\n        );\r\n    }\r\n}\r\n\r\n// File: localhost/utils/0xUtils/IERC20Token.sol\r\n\r\n\r\n/*\r\n\r\n  Original work Copyright 2019 ZeroEx Intl.\r\n  Modified work Copyright 2020 Rigo Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\nabstract contract IERC20Token {\r\n\r\n    // solhint-disable no-simple-event-func-name\r\n    event Transfer(\r\n        address indexed _from,\r\n        address indexed _to,\r\n        uint256 _value\r\n    );\r\n\r\n    event Approval(\r\n        address indexed _owner,\r\n        address indexed _spender,\r\n        uint256 _value\r\n    );\r\n\r\n    /// @dev send `value` token to `to` from `msg.sender`\r\n    /// @param _to The address of the recipient\r\n    /// @param _value The amount of token to be transferred\r\n    /// @return True if transfer was successful\r\n    function transfer(address _to, uint256 _value)\r\n        external\r\n        virtual\r\n        returns (bool);\r\n\r\n    /// @dev send `value` token to `to` from `from` on the condition it is approved by `from`\r\n    /// @param _from The address of the sender\r\n    /// @param _to The address of the recipient\r\n    /// @param _value The amount of token to be transferred\r\n    /// @return True if transfer was successful\r\n    function transferFrom(\r\n        address _from,\r\n        address _to,\r\n        uint256 _value\r\n    )\r\n        external\r\n        virtual\r\n        returns (bool);\r\n\r\n    /// @dev `msg.sender` approves `_spender` to spend `_value` tokens\r\n    /// @param _spender The address of the account able to transfer the tokens\r\n    /// @param _value The amount of wei to be approved for transfer\r\n    /// @return Always true if the call has enough gas to complete execution\r\n    function approve(address _spender, uint256 _value)\r\n        external\r\n        virtual\r\n        returns (bool);\r\n\r\n    /// @dev Query total supply of token\r\n    /// @return Total supply of token\r\n    function totalSupply()\r\n        external\r\n        view\r\n        virtual\r\n        returns (uint256);\r\n\r\n    /// @param _owner The address from which the balance will be retrieved\r\n    /// @return Balance of owner\r\n    function balanceOf(address _owner)\r\n        external\r\n        view\r\n        virtual\r\n        returns (uint256);\r\n\r\n    /// @param _owner The address of the account owning tokens\r\n    /// @param _spender The address of the account able to transfer the tokens\r\n    /// @return Amount of remaining tokens allowed to spent\r\n    function allowance(address _owner, address _spender)\r\n        external\r\n        view\r\n        virtual\r\n        returns (uint256);\r\n}\r\n\r\n// File: localhost/utils/0xUtils/IAssetData.sol\r\n\r\n\r\n/*\r\n\r\n  Original work Copyright 2019 ZeroEx Intl.\r\n  Modified work Copyright 2020 Rigo Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\n// solhint-disable\r\npragma solidity >=0.5.4 <0.8.0;\r\npragma experimental ABIEncoderV2;\r\n\r\n\r\n// @dev Interface of the asset proxy's assetData.\r\n// The asset proxies take an ABI encoded `bytes assetData` as argument.\r\n// This argument is ABI encoded as one of the methods of this interface.\r\ninterface IAssetData {\r\n\r\n    /// @dev Function signature for encoding ERC20 assetData.\r\n    /// @param tokenAddress Address of ERC20Token contract.\r\n    function ERC20Token(address tokenAddress)\r\n        external;\r\n\r\n    /// @dev Function signature for encoding ERC721 assetData.\r\n    /// @param tokenAddress Address of ERC721 token contract.\r\n    /// @param tokenId Id of ERC721 token to be transferred.\r\n    function ERC721Token(\r\n        address tokenAddress,\r\n        uint256 tokenId\r\n    )\r\n        external;\r\n\r\n    /// @dev Function signature for encoding ERC1155 assetData.\r\n    /// @param tokenAddress Address of ERC1155 token contract.\r\n    /// @param tokenIds Array of ids of tokens to be transferred.\r\n    /// @param values Array of values that correspond to each token id to be transferred.\r\n    ///        Note that each value will be multiplied by the amount being filled in the order before transferring.\r\n    /// @param callbackData Extra data to be passed to receiver's `onERC1155Received` callback function.\r\n    function ERC1155Assets(\r\n        address tokenAddress,\r\n        uint256[] calldata tokenIds,\r\n        uint256[] calldata values,\r\n        bytes calldata callbackData\r\n    )\r\n        external;\r\n\r\n    /// @dev Function signature for encoding MultiAsset assetData.\r\n    /// @param values Array of amounts that correspond to each asset to be transferred.\r\n    ///        Note that each value will be multiplied by the amount being filled in the order before transferring.\r\n    /// @param nestedAssetData Array of assetData fields that will be be dispatched to their correspnding AssetProxy contract.\r\n    function MultiAsset(\r\n        uint256[] calldata values,\r\n        bytes[] calldata nestedAssetData\r\n    )\r\n        external;\r\n\r\n    /// @dev Function signature for encoding StaticCall assetData.\r\n    /// @param staticCallTargetAddress Address that will execute the staticcall.\r\n    /// @param staticCallData Data that will be executed via staticcall on the staticCallTargetAddress.\r\n    /// @param expectedReturnDataHash Keccak-256 hash of the expected staticcall return data.\r\n    function StaticCall(\r\n        address staticCallTargetAddress,\r\n        bytes calldata staticCallData,\r\n        bytes32 expectedReturnDataHash\r\n    )\r\n        external;\r\n\r\n    /// @dev Function signature for encoding ERC20Bridge assetData.\r\n    /// @param tokenAddress Address of token to transfer.\r\n    /// @param bridgeAddress Address of the bridge contract.\r\n    /// @param bridgeData Arbitrary data to be passed to the bridge contract.\r\n    function ERC20Bridge(\r\n        address tokenAddress,\r\n        address bridgeAddress,\r\n        bytes calldata bridgeData\r\n    )\r\n        external;\r\n}\r\n\r\n// File: localhost/utils/0xUtils/IAssetProxy.sol\r\n\r\n\r\n/*\r\n\r\n  Original work Copyright 2019 ZeroEx Intl.\r\n  Modified work Copyright 2020 Rigo Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity >=0.5.4 <0.8.0;\r\n\r\n\r\nabstract contract IAssetProxy {\r\n\r\n    /// @dev Transfers assets. Either succeeds or throws.\r\n    /// @param assetData Byte array encoded for the respective asset proxy.\r\n    /// @param from Address to transfer asset from.\r\n    /// @param to Address to transfer asset to.\r\n    /// @param amount Amount of asset to transfer.\r\n    function transferFrom(\r\n        bytes calldata assetData,\r\n        address from,\r\n        address to,\r\n        uint256 amount\r\n    )\r\n        external\r\n        virtual;\r\n\r\n    /// @dev Gets the proxy id associated with the proxy address.\r\n    /// @return Proxy id.\r\n    function getProxyId()\r\n        external\r\n        pure\r\n        virtual\r\n        returns (bytes4);\r\n}\r\n\r\n// File: localhost/utils/0xUtils/LibSafeMathRichErrors.sol\r\n\r\n\r\npragma solidity >=0.5.4 <0.8.0;\r\n\r\n\r\nlibrary LibSafeMathRichErrors {\r\n\r\n    // bytes4(keccak256(\"Uint256BinOpError(uint8,uint256,uint256)\"))\r\n    bytes4 internal constant UINT256_BINOP_ERROR_SELECTOR =\r\n        0xe946c1bb;\r\n\r\n    // bytes4(keccak256(\"Uint256DowncastError(uint8,uint256)\"))\r\n    bytes4 internal constant UINT256_DOWNCAST_ERROR_SELECTOR =\r\n        0xc996af7b;\r\n\r\n    enum BinOpErrorCodes {\r\n        ADDITION_OVERFLOW,\r\n        MULTIPLICATION_OVERFLOW,\r\n        SUBTRACTION_UNDERFLOW,\r\n        DIVISION_BY_ZERO\r\n    }\r\n\r\n    enum DowncastErrorCodes {\r\n        VALUE_TOO_LARGE_TO_DOWNCAST_TO_UINT32,\r\n        VALUE_TOO_LARGE_TO_DOWNCAST_TO_UINT64,\r\n        VALUE_TOO_LARGE_TO_DOWNCAST_TO_UINT96\r\n    }\r\n\r\n    // solhint-disable func-name-mixedcase\r\n    function Uint256BinOpError(\r\n        BinOpErrorCodes errorCode,\r\n        uint256 a,\r\n        uint256 b\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            UINT256_BINOP_ERROR_SELECTOR,\r\n            errorCode,\r\n            a,\r\n            b\r\n        );\r\n    }\r\n\r\n    function Uint256DowncastError(\r\n        DowncastErrorCodes errorCode,\r\n        uint256 a\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            UINT256_DOWNCAST_ERROR_SELECTOR,\r\n            errorCode,\r\n            a\r\n        );\r\n    }\r\n}\r\n\r\n// File: localhost/utils/0xUtils/LibSafeMath.sol\r\n\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\n\r\n\r\nlibrary LibSafeMath {\r\n\r\n    function safeMul(uint256 a, uint256 b)\r\n        internal\r\n        pure\r\n        returns (uint256)\r\n    {\r\n        if (a == 0) {\r\n            return 0;\r\n        }\r\n        uint256 c = a * b;\r\n        if (c / a != b) {\r\n            LibRichErrors.rrevert(LibSafeMathRichErrors.Uint256BinOpError(\r\n                LibSafeMathRichErrors.BinOpErrorCodes.MULTIPLICATION_OVERFLOW,\r\n                a,\r\n                b\r\n            ));\r\n        }\r\n        return c;\r\n    }\r\n\r\n    function safeDiv(uint256 a, uint256 b)\r\n        internal\r\n        pure\r\n        returns (uint256)\r\n    {\r\n        if (b == 0) {\r\n            LibRichErrors.rrevert(LibSafeMathRichErrors.Uint256BinOpError(\r\n                LibSafeMathRichErrors.BinOpErrorCodes.DIVISION_BY_ZERO,\r\n                a,\r\n                b\r\n            ));\r\n        }\r\n        uint256 c = a / b;\r\n        return c;\r\n    }\r\n\r\n    function safeSub(uint256 a, uint256 b)\r\n        internal\r\n        pure\r\n        returns (uint256)\r\n    {\r\n        if (b > a) {\r\n            LibRichErrors.rrevert(LibSafeMathRichErrors.Uint256BinOpError(\r\n                LibSafeMathRichErrors.BinOpErrorCodes.SUBTRACTION_UNDERFLOW,\r\n                a,\r\n                b\r\n            ));\r\n        }\r\n        return a - b;\r\n    }\r\n\r\n    function safeAdd(uint256 a, uint256 b)\r\n        internal\r\n        pure\r\n        returns (uint256)\r\n    {\r\n        uint256 c = a + b;\r\n        if (c < a) {\r\n            LibRichErrors.rrevert(LibSafeMathRichErrors.Uint256BinOpError(\r\n                LibSafeMathRichErrors.BinOpErrorCodes.ADDITION_OVERFLOW,\r\n                a,\r\n                b\r\n            ));\r\n        }\r\n        return c;\r\n    }\r\n\r\n    function max256(uint256 a, uint256 b)\r\n        internal\r\n        pure\r\n        returns (uint256)\r\n    {\r\n        return a >= b ? a : b;\r\n    }\r\n\r\n    function min256(uint256 a, uint256 b)\r\n        internal\r\n        pure\r\n        returns (uint256)\r\n    {\r\n        return a < b ? a : b;\r\n    }\r\n}\r\n\r\n// File: localhost/utils/0xUtils/LibOwnableRichErrors.sol\r\n\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\nlibrary LibOwnableRichErrors {\r\n\r\n    // bytes4(keccak256(\"OnlyOwnerError(address,address)\"))\r\n    bytes4 internal constant ONLY_OWNER_ERROR_SELECTOR =\r\n        0x1de45ad1;\r\n\r\n    // bytes4(keccak256(\"TransferOwnerToZeroError()\"))\r\n    bytes internal constant TRANSFER_OWNER_TO_ZERO_ERROR_BYTES =\r\n        hex\"e69edc3e\";\r\n\r\n    // solhint-disable func-name-mixedcase\r\n    function OnlyOwnerError(\r\n        address sender,\r\n        address owner\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            ONLY_OWNER_ERROR_SELECTOR,\r\n            sender,\r\n            owner\r\n        );\r\n    }\r\n\r\n    function TransferOwnerToZeroError()\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return TRANSFER_OWNER_TO_ZERO_ERROR_BYTES;\r\n    }\r\n}\r\n\r\n// File: localhost/utils/0xUtils/interfaces/IOwnable.sol\r\n\r\n\r\n/*\r\n  Copyright 2019 ZeroEx Intl.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\nabstract contract IOwnable {\r\n\r\n    /// @dev Emitted by Ownable when ownership is transferred.\r\n    /// @param previousOwner The previous owner of the contract.\r\n    /// @param newOwner The new owner of the contract.\r\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\r\n\r\n    /// @dev Transfers ownership of the contract to a new address.\r\n    /// @param newOwner The address that will become the owner.\r\n    function transferOwnership(address newOwner)\r\n        public\r\n        virtual;\r\n}\r\n\r\n// File: localhost/utils/0xUtils/Ownable.sol\r\n\r\n\r\n/*\r\n  Copyright 2019 ZeroEx Intl.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\n\r\n\r\n\r\ncontract Ownable is\r\n    IOwnable\r\n{\r\n    /// @dev The owner of this contract.\r\n    /// @return 0 The owner address.\r\n    address public owner;\r\n\r\n    constructor ()\r\n    {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlyOwner() {\r\n        _assertSenderIsOwner();\r\n        _;\r\n    }\r\n\r\n    /// @dev Change the owner of this contract.\r\n    /// @param newOwner New owner address.\r\n    function transferOwnership(address newOwner)\r\n        public\r\n        override\r\n        onlyOwner\r\n    {\r\n        if (newOwner == address(0)) {\r\n            LibRichErrors.rrevert(LibOwnableRichErrors.TransferOwnerToZeroError());\r\n        } else {\r\n            owner = newOwner;\r\n            emit OwnershipTransferred(msg.sender, newOwner);\r\n        }\r\n    }\r\n\r\n    function _assertSenderIsOwner()\r\n        internal\r\n        view\r\n    {\r\n        if (msg.sender != owner) {\r\n            LibRichErrors.rrevert(LibOwnableRichErrors.OnlyOwnerError(\r\n                msg.sender,\r\n                owner\r\n            ));\r\n        }\r\n    }\r\n}\r\n\r\n// File: localhost/utils/0xUtils/LibRichErrors.sol\r\n\r\n\r\n/*\r\n\r\n  Copyright 2019 ZeroEx Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\nlibrary LibRichErrors {\r\n\r\n    // bytes4(keccak256(\"Error(string)\"))\r\n    bytes4 internal constant STANDARD_ERROR_SELECTOR =\r\n        0x08c379a0;\r\n\r\n    // solhint-disable func-name-mixedcase\r\n    /// @dev ABI encode a standard, string revert error payload.\r\n    ///      This is the same payload that would be included by a `revert(string)`\r\n    ///      solidity statement. It has the function signature `Error(string)`.\r\n    /// @param message The error string.\r\n    /// @return The ABI encoded error.\r\n    function StandardError(\r\n        string memory message\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            STANDARD_ERROR_SELECTOR,\r\n            bytes(message)\r\n        );\r\n    }\r\n    // solhint-enable func-name-mixedcase\r\n\r\n    /// @dev Reverts an encoded rich revert reason `errorData`.\r\n    /// @param errorData ABI encoded error data.\r\n    function rrevert(bytes memory errorData)\r\n        internal\r\n        pure\r\n    {\r\n        assembly {\r\n            revert(add(errorData, 0x20), mload(errorData))\r\n        }\r\n    }\r\n}\r\n\r\n// File: localhost/utils/0xUtils/LibAuthorizableRichErrors.sol\r\n\r\n\r\n/*\r\n  Copyright 2019 ZeroEx Intl.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\nlibrary LibAuthorizableRichErrors {\r\n\r\n    // bytes4(keccak256(\"AuthorizedAddressMismatchError(address,address)\"))\r\n    bytes4 internal constant AUTHORIZED_ADDRESS_MISMATCH_ERROR_SELECTOR =\r\n        0x140a84db;\r\n\r\n    // bytes4(keccak256(\"IndexOutOfBoundsError(uint256,uint256)\"))\r\n    bytes4 internal constant INDEX_OUT_OF_BOUNDS_ERROR_SELECTOR =\r\n        0xe9f83771;\r\n\r\n    // bytes4(keccak256(\"SenderNotAuthorizedError(address)\"))\r\n    bytes4 internal constant SENDER_NOT_AUTHORIZED_ERROR_SELECTOR =\r\n        0xb65a25b9;\r\n\r\n    // bytes4(keccak256(\"TargetAlreadyAuthorizedError(address)\"))\r\n    bytes4 internal constant TARGET_ALREADY_AUTHORIZED_ERROR_SELECTOR =\r\n        0xde16f1a0;\r\n\r\n    // bytes4(keccak256(\"TargetNotAuthorizedError(address)\"))\r\n    bytes4 internal constant TARGET_NOT_AUTHORIZED_ERROR_SELECTOR =\r\n        0xeb5108a2;\r\n\r\n    // bytes4(keccak256(\"ZeroCantBeAuthorizedError()\"))\r\n    bytes internal constant ZERO_CANT_BE_AUTHORIZED_ERROR_BYTES =\r\n        hex\"57654fe4\";\r\n\r\n    // solhint-disable func-name-mixedcase\r\n    function AuthorizedAddressMismatchError(\r\n        address authorized,\r\n        address target\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            AUTHORIZED_ADDRESS_MISMATCH_ERROR_SELECTOR,\r\n            authorized,\r\n            target\r\n        );\r\n    }\r\n\r\n    function IndexOutOfBoundsError(\r\n        uint256 index,\r\n        uint256 length\r\n    )\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            INDEX_OUT_OF_BOUNDS_ERROR_SELECTOR,\r\n            index,\r\n            length\r\n        );\r\n    }\r\n\r\n    function SenderNotAuthorizedError(address sender)\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            SENDER_NOT_AUTHORIZED_ERROR_SELECTOR,\r\n            sender\r\n        );\r\n    }\r\n\r\n    function TargetAlreadyAuthorizedError(address target)\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            TARGET_ALREADY_AUTHORIZED_ERROR_SELECTOR,\r\n            target\r\n        );\r\n    }\r\n\r\n    function TargetNotAuthorizedError(address target)\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return abi.encodeWithSelector(\r\n            TARGET_NOT_AUTHORIZED_ERROR_SELECTOR,\r\n            target\r\n        );\r\n    }\r\n\r\n    function ZeroCantBeAuthorizedError()\r\n        internal\r\n        pure\r\n        returns (bytes memory)\r\n    {\r\n        return ZERO_CANT_BE_AUTHORIZED_ERROR_BYTES;\r\n    }\r\n}\r\n\r\n// File: localhost/utils/0xUtils/interfaces/IAuthorizable.sol\r\n\r\n\r\n/*\r\n  Copyright 2019 ZeroEx Intl.\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\n\r\nabstract contract IAuthorizable is\r\n    IOwnable\r\n{\r\n    // Event logged when a new address is authorized.\r\n    event AuthorizedAddressAdded(\r\n        address indexed target,\r\n        address indexed caller\r\n    );\r\n\r\n    // Event logged when a currently authorized address is unauthorized.\r\n    event AuthorizedAddressRemoved(\r\n        address indexed target,\r\n        address indexed caller\r\n    );\r\n\r\n    /// @dev Authorizes an address.\r\n    /// @param target Address to authorize.\r\n    function addAuthorizedAddress(address target)\r\n        external\r\n        virtual;\r\n\r\n    /// @dev Removes authorizion of an address.\r\n    /// @param target Address to remove authorization from.\r\n    function removeAuthorizedAddress(address target)\r\n        external\r\n        virtual;\r\n\r\n    /// @dev Removes authorizion of an address.\r\n    /// @param target Address to remove authorization from.\r\n    /// @param index Index of target in authorities array.\r\n    function removeAuthorizedAddressAtIndex(\r\n        address target,\r\n        uint256 index\r\n    )\r\n        external\r\n        virtual;\r\n\r\n    /// @dev Gets all authorized addresses.\r\n    /// @return Array of authorized addresses.\r\n    function getAuthorizedAddresses()\r\n        external\r\n        view\r\n        virtual\r\n        returns (address[] memory);\r\n}\r\n\r\n// File: localhost/utils/0xUtils/Authorizable.sol\r\n\r\n\r\n/*\r\n\r\n  Copyright 2019 ZeroEx Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity >=0.5.9 <0.8.0;\r\n\r\n\r\n\r\n\r\n\r\n\r\n// solhint-disable no-empty-blocks\r\ncontract Authorizable is\r\n    Ownable,\r\n    IAuthorizable\r\n{\r\n    /// @dev Only authorized addresses can invoke functions with this modifier.\r\n    modifier onlyAuthorized {\r\n        _assertSenderIsAuthorized();\r\n        _;\r\n    }\r\n\r\n    /// @dev Whether an address is authorized to call privileged functions.\r\n    /// @dev 0 Address to query.\r\n    /// @return 0 Whether the address is authorized.\r\n    mapping (address => bool) public authorized;\r\n    /// @dev Whether an adderss is authorized to call privileged functions.\r\n    /// @dev 0 Index of authorized address.\r\n    /// @return 0 Authorized address.\r\n    address[] public authorities;\r\n\r\n    /// @dev Initializes the `owner` address.\r\n    constructor()\r\n        Ownable()\r\n    {}\r\n\r\n    /// @dev Authorizes an address.\r\n    /// @param target Address to authorize.\r\n    function addAuthorizedAddress(address target)\r\n        external\r\n        override\r\n        onlyOwner\r\n    {\r\n        _addAuthorizedAddress(target);\r\n    }\r\n\r\n    /// @dev Removes authorizion of an address.\r\n    /// @param target Address to remove authorization from.\r\n    function removeAuthorizedAddress(address target)\r\n        external\r\n        override\r\n        onlyOwner\r\n    {\r\n        if (!authorized[target]) {\r\n            LibRichErrors.rrevert(LibAuthorizableRichErrors.TargetNotAuthorizedError(target));\r\n        }\r\n        for (uint256 i = 0; i < authorities.length; i++) {\r\n            if (authorities[i] == target) {\r\n                _removeAuthorizedAddressAtIndex(target, i);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /// @dev Removes authorizion of an address.\r\n    /// @param target Address to remove authorization from.\r\n    /// @param index Index of target in authorities array.\r\n    function removeAuthorizedAddressAtIndex(\r\n        address target,\r\n        uint256 index\r\n    )\r\n        external\r\n        override\r\n        onlyOwner\r\n    {\r\n        _removeAuthorizedAddressAtIndex(target, index);\r\n    }\r\n\r\n    /// @dev Gets all authorized addresses.\r\n    /// @return Array of authorized addresses.\r\n    function getAuthorizedAddresses()\r\n        external\r\n        view\r\n        override\r\n        returns (address[] memory)\r\n    {\r\n        return authorities;\r\n    }\r\n\r\n    /// @dev Reverts if msg.sender is not authorized.\r\n    function _assertSenderIsAuthorized()\r\n        internal\r\n        view\r\n    {\r\n        if (!authorized[msg.sender]) {\r\n            LibRichErrors.rrevert(LibAuthorizableRichErrors.SenderNotAuthorizedError(msg.sender));\r\n        }\r\n    }\r\n\r\n    /// @dev Authorizes an address.\r\n    /// @param target Address to authorize.\r\n    function _addAuthorizedAddress(address target)\r\n        internal\r\n    {\r\n        // Ensure that the target is not the zero address.\r\n        if (target == address(0)) {\r\n            LibRichErrors.rrevert(LibAuthorizableRichErrors.ZeroCantBeAuthorizedError());\r\n        }\r\n\r\n        // Ensure that the target is not already authorized.\r\n        if (authorized[target]) {\r\n            LibRichErrors.rrevert(LibAuthorizableRichErrors.TargetAlreadyAuthorizedError(target));\r\n        }\r\n\r\n        authorized[target] = true;\r\n        authorities.push(target);\r\n        emit AuthorizedAddressAdded(target, msg.sender);\r\n    }\r\n\r\n    /// @dev Removes authorization of an address.\r\n    /// @param target Address to remove authorization from.\r\n    /// @param index Index of target in authorities array.\r\n    function _removeAuthorizedAddressAtIndex(\r\n        address target,\r\n        uint256 index\r\n    )\r\n        internal\r\n    {\r\n        if (!authorized[target]) {\r\n            LibRichErrors.rrevert(LibAuthorizableRichErrors.TargetNotAuthorizedError(target));\r\n        }\r\n        if (index >= authorities.length) {\r\n            LibRichErrors.rrevert(LibAuthorizableRichErrors.IndexOutOfBoundsError(\r\n                index,\r\n                authorities.length\r\n            ));\r\n        }\r\n        if (authorities[index] != target) {\r\n            LibRichErrors.rrevert(LibAuthorizableRichErrors.AuthorizedAddressMismatchError(\r\n                authorities[index],\r\n                target\r\n            ));\r\n        }\r\n\r\n        delete authorized[target];\r\n        authorities[index] = authorities[authorities.length - 1];\r\n        authorities.pop();\r\n        emit AuthorizedAddressRemoved(target, msg.sender);\r\n    }\r\n}\r\n\r\n// File: localhost/staking/GrgVault.sol\r\n\r\n\r\n/*\r\n\r\n  Original work Copyright 2019 ZeroEx Intl.\r\n  Modified work Copyright 2020 Rigo Intl.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \"License\");\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \"AS IS\" BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n\r\n*/\r\n\r\npragma solidity 0.7.4;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\ncontract GrgVault is\r\n    Authorizable,\r\n    IGrgVault\r\n{\r\n    using LibSafeMath for uint256;\r\n\r\n    // Address of staking proxy contract\r\n    address public stakingProxyAddress;\r\n\r\n    // True iff vault has been set to Catastrophic Failure Mode\r\n    bool public isInCatastrophicFailure;\r\n\r\n    // Mapping from staker to GRG balance\r\n    mapping (address => uint256) internal _balances;\r\n\r\n    // Grg Asset Proxy\r\n    IAssetProxy public grgAssetProxy;\r\n\r\n    // Grg Token\r\n    IERC20Token internal _grgToken;\r\n\r\n    // Asset data for the ERC20 Proxy\r\n    bytes internal _grgAssetData;\r\n\r\n    /// @dev Only stakingProxy can call this function.\r\n    modifier onlyStakingProxy() {\r\n        _assertSenderIsStakingProxy();\r\n        _;\r\n    }\r\n\r\n    /// @dev Function can only be called in catastrophic failure mode.\r\n    modifier onlyInCatastrophicFailure() {\r\n        _assertInCatastrophicFailure();\r\n        _;\r\n    }\r\n\r\n    /// @dev Function can only be called not in catastropic failure mode\r\n    modifier onlyNotInCatastrophicFailure() {\r\n        _assertNotInCatastrophicFailure();\r\n        _;\r\n    }\r\n\r\n    /// @dev Constructor.\r\n    /// @param _grgProxyAddress Address of the RigoBlock Grg Proxy.\r\n    /// @param _grgTokenAddress Address of the Grg Token.\r\n    constructor(\r\n        address _grgProxyAddress,\r\n        address _grgTokenAddress\r\n    )\r\n        Authorizable()\r\n    {\r\n        grgAssetProxy = IAssetProxy(_grgProxyAddress);\r\n        _grgToken = IERC20Token(_grgTokenAddress);\r\n        _grgAssetData = abi.encodeWithSelector(\r\n            IAssetData(address(0)).ERC20Token.selector,\r\n            _grgTokenAddress\r\n        );\r\n    }\r\n\r\n    /// @dev Sets the address of the StakingProxy contract.\r\n    /// Note that only the contract owner can call this function.\r\n    /// @param _stakingProxyAddress Address of Staking proxy contract.\r\n    function setStakingProxy(address _stakingProxyAddress)\r\n        external\r\n        override\r\n        onlyAuthorized\r\n    {\r\n        stakingProxyAddress = _stakingProxyAddress;\r\n        emit StakingProxySet(_stakingProxyAddress);\r\n    }\r\n\r\n    /// @dev Vault enters into Catastrophic Failure Mode.\r\n    /// *** WARNING - ONCE IN CATOSTROPHIC FAILURE MODE, YOU CAN NEVER GO BACK! ***\r\n    /// Note that only the contract owner can call this function.\r\n    function enterCatastrophicFailure()\r\n        external\r\n        override\r\n        onlyAuthorized\r\n        onlyNotInCatastrophicFailure\r\n    {\r\n        isInCatastrophicFailure = true;\r\n        emit InCatastrophicFailureMode(msg.sender);\r\n    }\r\n\r\n    /// @dev Sets the Grg proxy.\r\n    /// Note that only an authorized address can call this function.\r\n    /// Note that this can only be called when *not* in Catastrophic Failure mode.\r\n    /// @param _grgProxyAddress Address of the RigoBlock Grg Proxy.\r\n    function setGrgProxy(address _grgProxyAddress)\r\n        external\r\n        override\r\n        onlyAuthorized\r\n        onlyNotInCatastrophicFailure\r\n    {\r\n        grgAssetProxy = IAssetProxy(_grgProxyAddress);\r\n        emit GrgProxySet(_grgProxyAddress);\r\n    }\r\n\r\n    /// @dev Deposit an `amount` of Grg Tokens from `staker` into the vault.\r\n    /// Note that only the Staking contract can call this.\r\n    /// Note that this can only be called when *not* in Catastrophic Failure mode.\r\n    /// @param staker of Grg Tokens.\r\n    /// @param amount of Grg Tokens to deposit.\r\n    function depositFrom(address staker, uint256 amount)\r\n        external\r\n        override\r\n        onlyStakingProxy\r\n        onlyNotInCatastrophicFailure\r\n    {\r\n        // update balance\r\n        _balances[staker] = _balances[staker].safeAdd(amount);\r\n\r\n        // notify\r\n        emit Deposit(staker, amount);\r\n\r\n        // deposit GRG from staker\r\n        grgAssetProxy.transferFrom(\r\n            _grgAssetData,\r\n            staker,\r\n            address(this),\r\n            amount\r\n        );\r\n    }\r\n\r\n    /// @dev Withdraw an `amount` of Grg Tokens to `staker` from the vault.\r\n    /// Note that only the Staking contract can call this.\r\n    /// Note that this can only be called when *not* in Catastrophic Failure mode.\r\n    /// @param staker of Grg Tokens.\r\n    /// @param amount of Grg Tokens to withdraw.\r\n    function withdrawFrom(address staker, uint256 amount)\r\n        external\r\n        override\r\n        onlyStakingProxy\r\n        onlyNotInCatastrophicFailure\r\n    {\r\n        _withdrawFrom(staker, amount);\r\n    }\r\n\r\n    /// @dev Withdraw ALL Grg Tokens to `staker` from the vault.\r\n    /// Note that this can only be called when *in* Catastrophic Failure mode.\r\n    /// @param staker of Grg Tokens.\r\n    function withdrawAllFrom(address staker)\r\n        external\r\n        override\r\n        onlyInCatastrophicFailure\r\n        returns (uint256)\r\n    {\r\n        // get total balance\r\n        uint256 totalBalance = _balances[staker];\r\n\r\n        // withdraw GRG to staker\r\n        _withdrawFrom(staker, totalBalance);\r\n        return totalBalance;\r\n    }\r\n\r\n    /// @dev Returns the balance in Grg Tokens of the `staker`\r\n    /// @return Balance in Grg.\r\n    function balanceOf(address staker)\r\n        external\r\n        view\r\n        override\r\n        returns (uint256)\r\n    {\r\n        return _balances[staker];\r\n    }\r\n\r\n    /// @dev Returns the entire balance of Grg tokens in the vault.\r\n    function balanceOfGrgVault()\r\n        external\r\n        view\r\n        override\r\n        returns (uint256)\r\n    {\r\n        return _grgToken.balanceOf(address(this));\r\n    }\r\n\r\n    /// @dev Withdraw an `amount` of Grg Tokens to `staker` from the vault.\r\n    /// @param staker of Grg Tokens.\r\n    /// @param amount of Grg Tokens to withdraw.\r\n    function _withdrawFrom(address staker, uint256 amount)\r\n        internal\r\n    {\r\n        // update balance\r\n        // note that this call will revert if trying to withdraw more\r\n        // than the current balance\r\n        _balances[staker] = _balances[staker].safeSub(amount);\r\n\r\n        // notify\r\n        emit Withdraw(staker, amount);\r\n\r\n        // withdraw GRG to staker\r\n        _grgToken.transfer(\r\n            staker,\r\n            amount\r\n        );\r\n    }\r\n\r\n    /// @dev Asserts that sender is stakingProxy contract.\r\n    function _assertSenderIsStakingProxy()\r\n        private\r\n        view\r\n    {\r\n        if (msg.sender != stakingProxyAddress) {\r\n            LibRichErrors.rrevert(LibStakingRichErrors.OnlyCallableByStakingContractError(\r\n                msg.sender\r\n            ));\r\n        }\r\n    }\r\n\r\n    /// @dev Asserts that vault is in catastrophic failure mode.\r\n    function _assertInCatastrophicFailure()\r\n        private\r\n        view\r\n    {\r\n        if (!isInCatastrophicFailure) {\r\n            LibRichErrors.rrevert(LibStakingRichErrors.OnlyCallableIfInCatastrophicFailureError());\r\n        }\r\n    }\r\n\r\n    /// @dev Asserts that vault is not in catastrophic failure mode.\r\n    function _assertNotInCatastrophicFailure()\r\n        private\r\n        view\r\n    {\r\n        if (isInCatastrophicFailure) {\r\n            LibRichErrors.rrevert(LibStakingRichErrors.OnlyCallableIfNotInCatastrophicFailureError());\r\n        }\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_grgProxyAddress\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_grgTokenAddress\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"caller\",\"type\":\"address\"}],\"name\":\"AuthorizedAddressAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"caller\",\"type\":\"address\"}],\"name\":\"AuthorizedAddressRemoved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"staker\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Deposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"grgProxyAddress\",\"type\":\"address\"}],\"name\":\"GrgProxySet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"InCatastrophicFailureMode\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"stakingProxyAddress\",\"type\":\"address\"}],\"name\":\"StakingProxySet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"staker\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"Withdraw\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"addAuthorizedAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"authorities\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"authorized\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"staker\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"balanceOfGrgVault\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"staker\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"depositFrom\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"enterCatastrophicFailure\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getAuthorizedAddresses\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"grgAssetProxy\",\"outputs\":[{\"internalType\":\"contract IAssetProxy\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"isInCatastrophicFailure\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"}],\"name\":\"removeAuthorizedAddress\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"removeAuthorizedAddressAtIndex\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_grgProxyAddress\",\"type\":\"address\"}],\"name\":\"setGrgProxy\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_stakingProxyAddress\",\"type\":\"address\"}],\"name\":\"setStakingProxy\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stakingProxyAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"staker\",\"type\":\"address\"}],\"name\":\"withdrawAllFrom\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"staker\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawFrom\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"GrgVault","CompilerVersion":"v0.7.4+commit.3f05b770","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"0000000000000000000000008c96182c1b2fe5c49b1bc9d9e039e369f131ed370000000000000000000000004fbb350052bca5417566f188eb2ebce5b19bc964","EVMVersion":"Default","Library":"","LicenseType":"Apache-2.0","Proxy":"0","Implementation":"","SwarmSource":"ipfs://6a333c463bfcc182e7e7258f89e4019ecdcaecb17e4abc39a45ed164ae3f6142"}]}