{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.5.16;\r\n\r\ncontract IERC20{\r\n    function transfer(address _to, uint _value) public returns (bool success);\r\n    function balanceOf(address user) public view returns (uint256 balance);\r\n}\r\n\r\ncontract AirDrop {\r\n    IERC20 token;\r\n    address owner;\r\n    uint public reward;\r\n    uint public inviteReward;\r\n    mapping(address => address)  relationship;\r\n    mapping(address => address[]) public invitationStorage;\r\n    mapping(address => uint) public numOfInvitations;\r\n    address[] public participationList;    \r\n    mapping(address => uint) public participationIndex;\r\n    \r\n    constructor(address erc20_, uint reward_, uint inviteReward_) public{\r\n        owner = msg.sender;\r\n        token = IERC20(erc20_);\r\n        reward = reward_ * 10**18;\r\n        inviteReward = inviteReward_ * 10**18;\r\n        \r\n        participationList.push(address(0)); //\r\n    }\r\n    \r\n    modifier updateParticipationList(){\r\n       require(participationIndex[msg.sender] < 1, 'Participated!');\r\n       participationIndex[msg.sender] = participationListLength();\r\n       participationList.push(msg.sender);\r\n       \r\n        _;\r\n    }\r\n   function getAirDrop() public updateParticipationList{ //  \r\n       \r\n       _transfer(msg.sender,reward);\r\n       \r\n   }\r\n   function getAirDropByInvitation(address inviter) public updateParticipationList{\r\n       \r\n       _transfer(msg.sender,reward);\r\n       \r\n       _setInviter(msg.sender, inviter);\r\n       _transfer(inviter, inviteReward);\r\n   }\r\n   function _setInviter(address invitee , address inviter) internal{\r\n        // require(participationIndex[inviter] > 0, 'The inviter must have participated!');\r\n        relationship[invitee] = inviter;\r\n        invitationStorage[inviter].push(invitee);\r\n        numOfInvitations[inviter] = numOfInvitations[inviter] + 1;\r\n    }\r\n   function getInviter(address invitee) public view returns (address inviter){\r\n        return relationship[invitee];\r\n    }\r\n    \r\n   function participationListLength() public view returns (uint256 count){\r\n        return participationList.length;\r\n    }\r\n    \r\n   function _transfer(address _to,uint256 _amount) internal{\r\n     bool success = token.transfer(_to, _amount);  \r\n     require(success,\"failed!\");\r\n   }\r\n   \r\n   function getBalance() public view returns(uint256 balance){\r\n       return token.balanceOf(address(this));\r\n   }\r\n   \r\n   function takeOut() public{\r\n       require(msg.sender == owner);\r\n       _transfer(owner, token.balanceOf(address(this)));\r\n   }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"erc20_\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"reward_\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"inviteReward_\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"constant\":false,\"inputs\":[],\"name\":\"getAirDrop\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"address\",\"name\":\"inviter\",\"type\":\"address\"}],\"name\":\"getAirDropByInvitation\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"invitee\",\"type\":\"address\"}],\"name\":\"getInviter\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"inviter\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"invitationStorage\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"inviteReward\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"numOfInvitations\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"participationIndex\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"participationList\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"participationListLength\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"count\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"reward\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"takeOut\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"AirDrop","CompilerVersion":"v0.5.16+commit.9c3226ce","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"0000000000000000000000004551351dfe0e62447005ab0c4cc1fd197cc8ab2000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"bzzr://b9d3b3b2c2634ce77a7695260b5cac80495299c3bc6495b0d87e706993892857"}]}