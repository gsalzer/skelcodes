{"status":"1","message":"OK","result":[{"SourceCode":"// Verified using https://dapp.tools\n\n// hevm: flattened sources of src/spell.sol\npragma solidity >=0.5.15 <0.6.0;\n\n////// src/spell.sol\n// Copyright (C) 2020 Centrifuge\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\n/* pragma solidity >=0.5.15 <0.6.0; */\n\ninterface TinlakeRootLike {\n    function relyContract(address, address) external;\n    function denyContract(address, address) external;\n}\n\ninterface CoordinatorLike {\n    function file(bytes32 name, uint value) external;\n    function minimumEpochTime() external returns(uint);\n}\n\ninterface NAVFeedLike {\n    function file(bytes32 name, uint value) external;\n    function file(bytes32 name, uint risk_, uint thresholdRatio_, uint ceilingRatio_, uint rate_, uint recoveryRatePD_) external;\n    function discountRate() external returns(uint);\n}\n\n// This spell makes changes to the tinlake mainnet CF4 deployment:\n// modify discount rate in nav feed to 10.35%\n// adds new risk groups to nav feed 12-23\n// sets min epoch length to 24hrs\n// revokes permissions from old admin address on assessor 0x71d9f8CFdcCEF71B59DD81AB387e523E2834F2b8\n// revokes permissions from old admin address on coordinator 0x97b2d32FE673af5bb322409afb6253DFD02C0567\n// gives permissions to admin wrapper contract on assessor 0x533Ea66C62fad098599dE145970a8d49D6B5f9C4\ncontract TinlakeSpell {\n\n    bool public done;\n    string constant public description = \"Tinlake Mainnet Spell\";\n\n    // MAINNET ADDRESSES\n    // The contracts in this list should correspond to a tinlake deployment\n    // https://github.com/centrifuge/tinlake-pool-config/blob/master/mainnet-production.json\n\n    address constant public ROOT = 0xdB3bC9fB1893222d266762e9fF857EB74D75c7D6;\n    address constant public ASSESSOR = 0x6aaf2EE5b2B62fb9E29E021a1bF3B381454d900a;\n    address constant public COORDINATOR = 0xFc224d40Eb9c40c85c71efa773Ce24f8C95aAbAb;\n    address constant public NAV_FEED = 0x69504da6B2Cd8320B9a62F3AeD410a298d3E7Ac6;\n    \n    // permissions to be set\n    address constant public ASSESSOR_ADMIN_WRAPPER = 0x533Ea66C62fad098599dE145970a8d49D6B5f9C4;  \n\n    // permissions to be revoked                                           \n    address constant public ASSESSOR_ADMIN_TO_BE_REMOVED = 0x71d9f8CFdcCEF71B59DD81AB387e523E2834F2b8;\n    address constant public COORDINATOR_ADMIN_TO_BE_REMOVED = 0x97b2d32FE673af5bb322409afb6253DFD02C0567;\n\n    // new minEpochTime\n    uint constant public minEpochTime = 1 days;\n    // new discountRate1     \n    uint constant public discountRate = uint(1000000003281963470319634703);\n\n    uint256 constant ONE = 10**27;\n    \n    function cast() public {\n        require(!done, \"spell-already-cast\");\n        done = true;\n        execute();\n    }\n\n    function execute() internal {\n       TinlakeRootLike root = TinlakeRootLike(address(ROOT));\n       CoordinatorLike coordinator = CoordinatorLike(address(COORDINATOR));\n       NAVFeedLike navFeed = NAVFeedLike(address(NAV_FEED));\n   \n        // add permissions  \n        // Assessor\n        root.relyContract(ASSESSOR, ASSESSOR_ADMIN_WRAPPER);\n        // Coordinator\n        root.relyContract(COORDINATOR, address(this)); // required to modify min epoch time\n        // NavFeed \n        root.relyContract(NAV_FEED, address(this)); // required to file riskGroups & change discountRate\n\n        // revoke permissions\n        // Assessor\n        root.denyContract(ASSESSOR, ASSESSOR_ADMIN_TO_BE_REMOVED);\n        // Coordinator\n        root.denyContract(COORDINATOR, COORDINATOR_ADMIN_TO_BE_REMOVED);\n\n        // set minEpochTime to 24 hrs\n        coordinator.file(\"minimumEpochTime\", minEpochTime);\n\n        // change discountRate\n        navFeed.file(\"discountRate\", discountRate);\n        \n        //file risk groups\n        //risk group: 12 - ADF2, APR: 11%\n        navFeed.file(\"riskGroup\", 12, ONE, ONE, uint(1000000003488077118214104515), 99.93 * 10**25);\n        // risk group: 13 - BDF2, APR: 11.5%\n        navFeed.file(\"riskGroup\", 13, ONE, 95 * 10**25, uint(1000000003646626078132927447), 99.9 * 10**25);\n        // risk group: 14 - CDF2, APR: 11.5%\n        navFeed.file(\"riskGroup\", 14, ONE, 90*  10**25, uint(1000000003646626078132927447), 99.88 * 10**25);\n        // risk group: 15 - DDF2, APR: 12%\n        navFeed.file(\"riskGroup\", 15, ONE, 80 * 10**25, uint(1000000003805175038051750380), 99.86 * 10**25);\n        // risk group: 16 - ARF2, APR: 11%\n        navFeed.file(\"riskGroup\", 16, ONE, ONE, uint(1000000003488077118214104515), 99.92 * 10**25);\n        // risk group: 17 - BRF2, APR: 11.5%\n        navFeed.file(\"riskGroup\", 17, ONE, ONE, uint(1000000003646626078132927447), 99.9 * 10**25);\n        // risk group: 18 - CRF2, APR: 11.5%\n        navFeed.file(\"riskGroup\", 18, ONE, ONE, uint(1000000003646626078132927447), 99.88 * 10**25);\n        // risk group: 19 - DRF2, APR: 12%\n        navFeed.file(\"riskGroup\", 19, ONE, ONE, uint(1000000003805175038051750380), 99.87 * 10**25);\n        // risk group: 20 - ATF2, APR: 11%\n        navFeed.file(\"riskGroup\", 20, ONE, 80 * 10**25, uint(1000000003488077118214104515), 99.92 * 10**25);\n        // risk group: 21 - BTF2, APR: 11.5%\n        navFeed.file(\"riskGroup\", 21, ONE, 70 * 10**25, uint(1000000003646626078132927447), 99.9 * 10**25);\n        // risk group: 22 - CTF2, APR: 11.5%\n        navFeed.file(\"riskGroup\", 22, ONE, 60 * 10**25, uint(1000000003646626078132927447), 99.89 * 10**25);\n        // risk group: 23 - DTF2, APR: 12%\n        navFeed.file(\"riskGroup\", 23, ONE, 50 * 10**25, uint(1000000003805175038051750380), 99.88 * 10**25);\n     }   \n}\n","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"ASSESSOR\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ASSESSOR_ADMIN_TO_BE_REMOVED\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ASSESSOR_ADMIN_WRAPPER\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"COORDINATOR\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"COORDINATOR_ADMIN_TO_BE_REMOVED\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"NAV_FEED\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ROOT\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"cast\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"description\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"discountRate\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"done\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"minEpochTime\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"TinlakeSpell","CompilerVersion":"v0.5.15+commit.6a57276f","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"","Proxy":"0","Implementation":"","SwarmSource":""}]}