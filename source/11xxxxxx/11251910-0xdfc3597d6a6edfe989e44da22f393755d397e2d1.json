{"status":"1","message":"OK","result":[{"SourceCode":"/**\r\n *Submitted for verification at Etherscan.io on 2020-11-13\r\n*/\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n\r\n\r\n*/\r\n\r\npragma solidity 0.6.10;\r\npragma experimental \"ABIEncoderV2\";\r\n\r\n\r\n/**\r\n * @title CompoundLikeGovernanceAdapter\r\n * @author Set Protocol\r\n *\r\n * Governance adapter for Compound-like governance systems (e.g. Uniswap) that returns data for voting, delegating and making proposals\r\n */\r\ncontract CompoundLikeGovernanceAdapter {\r\n\r\n    /* ============ Constants ============ */\r\n\r\n    // Signature of the propose function in Compound Governor Alpha. This is used to encode the calldata for the propose function\r\n    string public constant PROPOSE_SIGNATURE = \"propose(address[],uint256[],string[],bytes[],string)\";\r\n    \r\n    // Signature of the delegate function in Compound Governor Alpha\r\n    string public constant DELEGATE_SIGNATURE = \"delegate(address)\";\r\n\r\n    address public constant ZERO_ADDRESS = 0x0000000000000000000000000000000000000000;\r\n\r\n    /* ============ State Variables ============ */\r\n\r\n    // Address of governance token\r\n    address public immutable governanceToken;\r\n\r\n    // Address of Compound-like Governor Alpha contract\r\n    address public immutable governorAlpha;\r\n\r\n    /* ============ Constructor ============ */\r\n\r\n    /**\r\n     * Set state variables\r\n     *\r\n     * @param _governorAlpha    Address of Governor Alpha contract\r\n     * @param _governanceToken  Address of governance token\r\n     */\r\n    constructor(address _governorAlpha, address _governanceToken) public {\r\n        governorAlpha = _governorAlpha;\r\n        governanceToken = _governanceToken;\r\n    }\r\n\r\n    /* ============ External Getter Functions ============ */\r\n\r\n    /**\r\n     * Generates the calldata to vote on a proposal. Bytes data paramater is unused in Compound\r\n     *\r\n     * @param _proposalId           ID of the proposal to vote on\r\n     * @param _support              Boolean indicating whether to support proposal\r\n     *\r\n     * @return address              Target contract address\r\n     * @return uint256              Total quantity of ETH (Set to 0)\r\n     * @return bytes                Propose calldata\r\n     */\r\n    function getVoteCalldata(uint256 _proposalId, bool _support, bytes memory /* _data */) external view returns (address, uint256, bytes memory) {\r\n        // castVote(uint256 _proposalId, bool _support)\r\n        bytes memory callData = abi.encodeWithSignature(\"castVote(uint256,bool)\", _proposalId, _support);\r\n\r\n        return (governorAlpha, 0, callData);\r\n    }\r\n\r\n    /**\r\n     * Generates the calldata to delegate votes to another ETH address. Self and zero address allowed, which is equivalent to registering and revoking in Compound\r\n     * like governance systems.\r\n     *\r\n     * @param _delegatee            Address of the delegatee\r\n     *\r\n     * @return address              Target contract address\r\n     * @return uint256              Total quantity of ETH (Set to 0)\r\n     * @return bytes                Propose calldata\r\n     */\r\n    function getDelegateCalldata(address _delegatee) external view returns (address, uint256, bytes memory) {\r\n        // delegate(address _delegatee)\r\n        bytes memory callData = abi.encodeWithSignature(DELEGATE_SIGNATURE, _delegatee);\r\n\r\n        return (governanceToken, 0, callData);\r\n    }\r\n\r\n    /**\r\n     * Generates the calldata to register for voting. This is equivalent to delegating to the SetToken address in Compound.\r\n     *\r\n     * @param _setToken             Address of SetToken\r\n     *\r\n     * @return address              Target contract address\r\n     * @return uint256              Total quantity of ETH (Set to 0)\r\n     * @return bytes                Propose calldata\r\n     */\r\n    function getRegisterCalldata(address _setToken) external view returns (address, uint256, bytes memory) {\r\n        // delegate(address _delegatee)\r\n        bytes memory callData = abi.encodeWithSignature(DELEGATE_SIGNATURE, _setToken);\r\n\r\n        return (governanceToken, 0, callData);\r\n    }\r\n\r\n    /**\r\n     * Generates the calldata to revoke voting. This is equivalent to delegating to the zero address in Compound.\r\n     *\r\n     * @return address              Target contract address\r\n     * @return uint256              Total quantity of ETH (Set to 0)\r\n     * @return bytes                Propose calldata\r\n     */\r\n    function getRevokeCalldata() external view returns (address, uint256, bytes memory) {\r\n        // delegate(address _delegatee)\r\n        bytes memory callData = abi.encodeWithSignature(DELEGATE_SIGNATURE, ZERO_ADDRESS);\r\n\r\n        return (governanceToken, 0, callData);\r\n    }\r\n\r\n    /**\r\n     * Generates the calldata to create a new proposal\r\n     *\r\n     * @param _proposalData         Byte data containing data about the proposal\r\n     *\r\n     * @return address              Target contract address\r\n     * @return uint256              Total quantity of ETH (Set to 0)\r\n     * @return bytes                Propose calldata\r\n     */\r\n    function getProposeCalldata(bytes memory _proposalData) external view returns (address, uint256, bytes memory) {\r\n        // Decode proposal data\r\n        (\r\n            address[] memory targets,\r\n            uint256[] memory values,\r\n            string[] memory signatures,\r\n            bytes[] memory calldatas,\r\n            string memory description\r\n        ) = abi.decode(_proposalData, (address[],uint256[],string[],bytes[],string));\r\n\r\n        // propose(address[],uint256[],string[],bytes[],string)\r\n        bytes memory callData = abi.encodeWithSignature(PROPOSE_SIGNATURE, targets, values, signatures, calldatas, description);\r\n\r\n        return (governorAlpha, 0, callData);\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_governorAlpha\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_governanceToken\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"DELEGATE_SIGNATURE\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"PROPOSE_SIGNATURE\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"ZERO_ADDRESS\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_delegatee\",\"type\":\"address\"}],\"name\":\"getDelegateCalldata\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"_proposalData\",\"type\":\"bytes\"}],\"name\":\"getProposeCalldata\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_setToken\",\"type\":\"address\"}],\"name\":\"getRegisterCalldata\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getRevokeCalldata\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_proposalId\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_support\",\"type\":\"bool\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"name\":\"getVoteCalldata\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"governanceToken\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"governorAlpha\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"CompoundLikeGovernanceAdapter","CompilerVersion":"v0.6.10+commit.00c0fcaf","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000c0da01a04c3f3e0be433606045bb7017a7323e38000000000000000000000000c00e94cb662c3520282e6f5717214004a7f26888","EVMVersion":"Default","Library":"","LicenseType":"Apache-2.0","Proxy":"0","Implementation":"","SwarmSource":"ipfs://921cf19d3ed7ec087c5c1e30dc65f6c1e1bb765d64fa9c76a31b94345adf00b4"}]}