{"status":"1","message":"OK","result":[{"SourceCode":"/// FsmGovernanceInterface -- governance interface for oracle security modules\r\n\r\n// Copyright (C) 2019 Maker Ecosystem Growth Holdings, INC.\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published\r\n// by the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\npragma solidity ^0.6.7;\r\n\r\nabstract contract FsmLike {\r\n    function stop() virtual external;\r\n}\r\n\r\nabstract contract AuthorityLike {\r\n    function canCall(address src, address dst, bytes4 sig) virtual public view returns (bool);\r\n}\r\n\r\ncontract FsmGovernanceInterface {\r\n    address public owner;\r\n    modifier onlyOwner { require(msg.sender == owner, \"fsm-governance-interface/only-owner\"); _;}\r\n\r\n    address public authority;\r\n    modifier isAuthorized {\r\n        require(canCall(msg.sender, msg.sig), \"fsm-governance-interface/not-authorized\");\r\n        _;\r\n    }\r\n    function canCall(address src, bytes4 sig) internal view returns (bool) {\r\n        if (src == address(this)) {\r\n            return true;\r\n        } else if (src == owner) {\r\n            return true;\r\n        } else if (authority == address(0)) {\r\n            return false;\r\n        } else {\r\n            return AuthorityLike(authority).canCall(src, address(this), sig);\r\n        }\r\n    }\r\n\r\n    mapping (bytes32 => address) public fsms;\r\n\r\n    event SetFsm(bytes32 collateralType, address fsm);\r\n    event SetOwner(address owner);\r\n    event SetAuthority(address authority);\r\n    event StopFsm(bytes32 collateralType);\r\n\r\n    constructor() public {\r\n        owner = msg.sender;\r\n        emit SetOwner(owner);\r\n    }\r\n\r\n    function setFsm(bytes32 collateralType, address fsm) external onlyOwner {\r\n        fsms[collateralType] = fsm;\r\n        emit SetFsm(collateralType, fsm);\r\n    }\r\n\r\n    function setOwner(address owner_) external onlyOwner {\r\n        owner = owner_;\r\n        emit SetOwner(owner);\r\n    }\r\n\r\n    function setAuthority(address authority_) external onlyOwner {\r\n        authority = authority_;\r\n        emit SetAuthority(authority);\r\n    }\r\n\r\n    function stopFsm(bytes32 collateralType) external isAuthorized {\r\n        FsmLike(fsms[collateralType]).stop();\r\n        emit StopFsm(collateralType);\r\n    }\r\n}","ABI":"[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"authority\",\"type\":\"address\"}],\"name\":\"SetAuthority\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"collateralType\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"fsm\",\"type\":\"address\"}],\"name\":\"SetFsm\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"SetOwner\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"collateralType\",\"type\":\"bytes32\"}],\"name\":\"StopFsm\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"authority\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"fsms\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"authority_\",\"type\":\"address\"}],\"name\":\"setAuthority\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"collateralType\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"fsm\",\"type\":\"address\"}],\"name\":\"setFsm\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner_\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"collateralType\",\"type\":\"bytes32\"}],\"name\":\"stopFsm\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"FsmGovernanceInterface","CompilerVersion":"v0.6.7+commit.b8d736ae","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"ipfs://3329c0226241f002fa5186d76eaf292c743fac644ba05b1e3de3ff8dfd864003"}]}