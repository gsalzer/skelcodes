{"status":"1","message":"OK","result":[{"SourceCode":"// SPDX-License-Identifier: bsl-1.1\r\n\r\npragma solidity ^0.8.1;\r\n\r\ninterface IKeep3rV1Oracle {\r\n    function quote(address tokenIn, uint amountIn, address tokenOut, uint granularity) external view returns (uint);\r\n    function current(address tokenIn, uint amountIn, address tokenOut) external view returns (uint);\r\n}\r\n\r\ncontract Keep3rV1OracleUSD  {\r\n    \r\n    IKeep3rV1Oracle public constant sushiswapV1Oracle = IKeep3rV1Oracle(0xf67Ab1c914deE06Ba0F264031885Ea7B276a7cDa);\r\n    IKeep3rV1Oracle public constant uniswapV1Oracle = IKeep3rV1Oracle(0x73353801921417F465377c8d898c6f4C0270282C);\r\n    address public constant WETH = 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2;\r\n    address public constant DAI = 0x6B175474E89094C44Da98b954EedeAC495271d0F;\r\n    \r\n    function assetToUsd(address asset, uint amount, uint granularity) public view returns (uint) {\r\n        return ethToUsd(assetToEth(asset, amount, granularity), granularity);\r\n    }\r\n    \r\n    function assetToEth(address asset, uint amount, uint granularity) public view returns (uint) {\r\n        if (amount == 0) {\r\n            return 0;\r\n        }\r\n        if (asset == WETH) {\r\n            return amount;\r\n        }\r\n        return quote(asset, amount, granularity);\r\n    }\r\n    \r\n    function quote(address tokenIn, uint amountIn, uint granularity) public view returns (uint amountOut) {\r\n        uint sTWAP = sushiswapV1Oracle.quote(tokenIn, amountIn, WETH, granularity);\r\n        uint uTWAP = uniswapV1Oracle.quote(tokenIn, amountIn, WETH, granularity);\r\n        return (sTWAP + uTWAP) / 2;\r\n    }\r\n    \r\n    function ethToUsd(uint ethAmount, uint granularity) public view returns (uint) {\r\n        uint sTWAP = sushiswapV1Oracle.quote(WETH, ethAmount, DAI, granularity);\r\n        uint uTWAP = uniswapV1Oracle.quote(WETH, ethAmount, DAI, granularity);\r\n        return (sTWAP + uTWAP) / 2;\r\n    }\r\n}","ABI":"[{\"inputs\":[],\"name\":\"DAI\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"WETH\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"asset\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"granularity\",\"type\":\"uint256\"}],\"name\":\"assetToEth\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"asset\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"granularity\",\"type\":\"uint256\"}],\"name\":\"assetToUsd\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"ethAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"granularity\",\"type\":\"uint256\"}],\"name\":\"ethToUsd\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"tokenIn\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amountIn\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"granularity\",\"type\":\"uint256\"}],\"name\":\"quote\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"amountOut\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"sushiswapV1Oracle\",\"outputs\":[{\"internalType\":\"contract IKeep3rV1Oracle\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"uniswapV1Oracle\",\"outputs\":[{\"internalType\":\"contract IKeep3rV1Oracle\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"Keep3rV1OracleUSD","CompilerVersion":"v0.8.1+commit.df193b15","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":"ipfs://b0063f8108b99a9ae738838c440a2c7c7fa1f61b250b7ac2ba96745d7ecc4b2d"}]}