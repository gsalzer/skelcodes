{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.5.7;\r\n\r\ncontract tokenInterface {\r\n\tfunction balanceOf(address _owner) public view returns (uint256 balance);\r\n\tfunction transfer(address _to, uint256 _value) public returns (bool);\r\n}\r\n\r\ncontract TimelockAgreement {\r\n\r\n    tokenInterface public tcj;\r\n    uint256 public id; \r\n    uint256 public totAmount;\r\n    uint8 public deadlines;\r\n    uint256 public deadlinesTime;\r\n\tuint256 public dataUnlock;\r\n\taddress payable public addrFrom;\r\n\taddress payable public addrTo;\r\n\tbool public signed;\r\n\tuint8 public currentDeadline;\r\n\r\n\tconstructor( uint256 _id, address _tcj, uint256 _tcjTotAmount, uint8 _deadlines, uint256 _deadlinesTimeDD, uint256 _dataUnlock, address payable _addrFrom, address payable _addrTo) public {\r\n\t\t\r\n\t\trequire( _tcjTotAmount > 0, \" totAmount > 0\");\r\n\t\trequire( _deadlines > 0, \" deadlines > 0\");\r\n\t\t\r\n\t\ttcj = tokenInterface(_tcj);\r\n\t\tid = _id;\r\n\t\ttotAmount = _tcjTotAmount * 1e18;\r\n\t\tdeadlines = _deadlines;\r\n\t\tdeadlinesTime = _deadlinesTimeDD * 24 * 60 * 60;\r\n\t\tdataUnlock = _dataUnlock;\r\n\t\taddrFrom = _addrFrom;\r\n\t\taddrTo = _addrTo;\r\n\t}\r\n\r\n\tfunction enabled() public view returns(bool) {\r\n\t    bool paid = tcj.balanceOf(address(this)) >= 0;\r\n\t    if(signed && paid)\r\n\t        return true;\r\n\t    else\r\n\t        return false;\r\n\t}\r\n\t\r\n    function nextDataUnlock() public view returns(uint256) {\r\n\t   return dataUnlock + ( currentDeadline * deadlinesTime );\r\n\t}\r\n\t\r\n\t function singleRate() public view returns(uint256) {\r\n\t   return totAmount / deadlines;\r\n\t}\r\n\t\r\n\tfunction () external {\r\n\t    uint256 tcj_amount = tcj.balanceOf(address(this));\r\n\t    if(enabled()) {\r\n\t        if ( msg.sender == addrTo ) {\r\n\t            require(now>nextDataUnlock(),\"now > nextDataUnlock\");\r\n\t            tcj.transfer(addrTo, singleRate());\r\n\t            currentDeadline++;\r\n\t        } else\r\n\t            revert(\"No auth.\");\r\n\t    } else {\r\n\t        if(msg.sender == addrFrom) {\r\n\t            if( tcj_amount > 0)\r\n\t                tcj.transfer(addrFrom, tcj_amount);\r\n\t        } else if(msg.sender == addrTo) {\r\n\t            require(tcj_amount > 0, \"tcj_amount > 0\");\r\n\t            signed = true;\r\n\t        }else\r\n\t            revert(\"No auth.\");\r\n\t    }\r\n\t}\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"deadlinesTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"singleRate\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"addrFrom\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"signed\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"enabled\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tcj\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dataUnlock\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"addrTo\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"currentDeadline\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"nextDataUnlock\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"id\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"deadlines\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_id\",\"type\":\"uint256\"},{\"name\":\"_tcj\",\"type\":\"address\"},{\"name\":\"_tcjTotAmount\",\"type\":\"uint256\"},{\"name\":\"_deadlines\",\"type\":\"uint8\"},{\"name\":\"_deadlinesTimeDD\",\"type\":\"uint256\"},{\"name\":\"_dataUnlock\",\"type\":\"uint256\"},{\"name\":\"_addrFrom\",\"type\":\"address\"},{\"name\":\"_addrTo\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"fallback\"}]","ContractName":"TimelockAgreement","CompilerVersion":"v0.5.7+commit.6da8b019","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000000000000000000000000000000000000000000700000000000000000000000044744e3e608d1243f55008b328fe1b09bd42e4cc000000000000000000000000000000000000000000000000000000000000012c00000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000005ee95d0000000000000000000000000091626fe8053288aa235a3bef2520e35be9ff54ef00000000000000000000000091626fe8053288aa235a3bef2520e35be9ff54ef","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"bzzr://cbc8fa1dd7568325fb0712856b49eb512b0ae59c16004b73ece4b4bfe9fcb3b0"}]}