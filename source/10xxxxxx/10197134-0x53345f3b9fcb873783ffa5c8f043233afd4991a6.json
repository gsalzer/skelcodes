{"status":"1","message":"OK","result":[{"SourceCode":"/**\r\n *Submitted for verification at Etherscan.io on 2020-06-02\r\n*/\r\n\r\npragma experimental ABIEncoderV2;\r\npragma solidity ^0.6.0;\r\n\r\n\r\ninterface IACL {\r\n    function accessible(address sender, address to, bytes4 sig)\r\n        external\r\n        view\r\n        returns (bool);\r\n}\r\n\r\ncontract Oracle {\r\n    address public ACL;\r\n\r\n    constructor (address _ACL) public {\r\n        ACL = _ACL;\r\n    }\r\n\r\n    modifier auth {\r\n        require(IACL(ACL).accessible(msg.sender, address(this), msg.sig), \"access unauthorized\");\r\n        _;\r\n    }\r\n\r\n    function setACL(\r\n        address _ACL) external {\r\n        require(msg.sender == ACL, \"require ACL\");\r\n        ACL = _ACL;\r\n    }\r\n\r\n    struct Price {\r\n        uint price;\r\n        uint  expiration;\r\n    }\r\n\r\n    mapping (address => Price) public prices;\r\n\r\n    function getExpiration(address token) external view returns (uint) {\r\n        return prices[token].expiration;\r\n    }\r\n\r\n    function getPrice(address token) external view returns (uint) {\r\n        return prices[token].price;\r\n    }\r\n\r\n    function get(address token) external view returns (uint, bool) {\r\n        return (prices[token].price, valid(token));\r\n    }\r\n\r\n    function valid(address token) public view returns (bool) {\r\n        return now < prices[token].expiration;\r\n    }\r\n\r\n    // 设置价格为 @val, 保持有效时间为 @exp second.\r\n    function set(address token, uint val, uint exp) external auth {\r\n        prices[token].price = val;\r\n        prices[token].expiration = now + exp;\r\n    }\r\n\r\n    //批量设置，减少gas使用\r\n    function batchSet(address[] calldata tokens, uint[] calldata vals, uint[] calldata exps) external auth {\r\n        uint nToken = tokens.length;\r\n        require(nToken == vals.length && vals.length == exps.length, \"invalid array length\");\r\n        for (uint i = 0; i < nToken; ++i) {\r\n            prices[tokens[i]].price = vals[i];\r\n            prices[tokens[i]].expiration = now + exps[i];\r\n        }\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ACL\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"ACL\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"tokens\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"vals\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"exps\",\"type\":\"uint256[]\"}],\"name\":\"batchSet\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"get\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"getExpiration\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"getPrice\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"prices\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiration\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"val\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"exp\",\"type\":\"uint256\"}],\"name\":\"set\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ACL\",\"type\":\"address\"}],\"name\":\"setACL\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"valid\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"Oracle","CompilerVersion":"v0.6.0+commit.26b70077","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000063ad95a0fdc69269960a257c7e9bfa3629ac4dd","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"ipfs://4f14da3e6be2e712f3792bcf1378471545eb4fe6ed0aeab106260543308a4c9e"}]}