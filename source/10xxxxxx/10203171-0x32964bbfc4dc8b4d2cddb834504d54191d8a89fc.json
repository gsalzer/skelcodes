{"status":"1","message":"OK","result":[{"SourceCode":"/*\r\n    Copyright 2018 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n/**\r\n * @title IERC20\r\n * @author Set Protocol\r\n *\r\n * Interface for using ERC20 Tokens. This interface is needed to interact with tokens that are not\r\n * fully ERC20 compliant and return something other than true on successful transfers.\r\n */\r\ninterface IERC20 {\r\n    function balanceOf(\r\n        address _owner\r\n    )\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    function allowance(\r\n        address _owner,\r\n        address _spender\r\n    )\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    function transfer(\r\n        address _to,\r\n        uint256 _quantity\r\n    )\r\n        external;\r\n\r\n    function transferFrom(\r\n        address _from,\r\n        address _to,\r\n        uint256 _quantity\r\n    )\r\n        external;\r\n\r\n    function approve(\r\n        address _spender,\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        returns (bool);\r\n\r\n    function totalSupply()\r\n        external\r\n        returns (uint256);\r\n}\r\n\r\n// File: contracts/viewer/lib/ERC20Viewer.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n/**\r\n * @title ERC20Viewer\r\n * @author Set Protocol\r\n *\r\n * Interfaces for fetching multiple ERC20 state in a single read\r\n */\r\ncontract ERC20Viewer {\r\n\r\n    /*\r\n     * Fetches multiple balances for passed in array of ERC20 contract addresses for an owner\r\n     *\r\n     * @param  _tokenAddresses    Addresses of ERC20 contracts to check balance for\r\n     * @param  _owner             Address to check balance of _tokenAddresses for\r\n     * @return  uint256[]         Array of balances for each ERC20 contract passed in\r\n     */\r\n    function batchFetchBalancesOf(\r\n        address[] calldata _tokenAddresses,\r\n        address _owner\r\n    )\r\n        external\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch balances for\r\n        uint256 _addressesCount = _tokenAddresses.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory balances = new uint256[](_addressesCount);\r\n\r\n        // Cycle through contract addresses array and fetching the balance of each for the owner\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            balances[i] = IERC20(_tokenAddresses[i]).balanceOf(_owner);\r\n        }\r\n\r\n        return balances;\r\n    }\r\n\r\n    /*\r\n     * Fetches token balances for each tokenAddress, tokenOwner pair\r\n     *\r\n     * @param  _tokenAddresses    Addresses of ERC20 contracts to check balance for\r\n     * @param  _tokenOwners       Addresses of users sequential to tokenAddress to fetch balance for\r\n     * @return  uint256[]         Array of balances for each ERC20 contract passed in\r\n     */\r\n    function batchFetchUsersBalances(\r\n        address[] calldata _tokenAddresses,\r\n        address[] calldata _tokenOwners\r\n    )\r\n        external\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch balances for\r\n        uint256 _addressesCount = _tokenAddresses.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory balances = new uint256[](_addressesCount);\r\n\r\n        // Cycle through contract addresses array and fetching the balance of each for the owner\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            balances[i] = IERC20(_tokenAddresses[i]).balanceOf(_tokenOwners[i]);\r\n        }\r\n\r\n        return balances;\r\n    }\r\n\r\n    /*\r\n     * Fetches multiple supplies for passed in array of ERC20 contract addresses\r\n     *\r\n     * @param  _tokenAddresses    Addresses of ERC20 contracts to check supply for\r\n     * @return  uint256[]         Array of supplies for each ERC20 contract passed in\r\n     */\r\n    function batchFetchSupplies(\r\n        address[] calldata _tokenAddresses\r\n    )\r\n        external\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch supplies for\r\n        uint256 _addressesCount = _tokenAddresses.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory supplies = new uint256[](_addressesCount);\r\n\r\n        // Cycle through contract addresses array and fetching the supply of each\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            supplies[i] = IERC20(_tokenAddresses[i]).totalSupply();\r\n        }\r\n\r\n        return supplies;\r\n    }\r\n}\r\n\r\n// File: set-protocol-strategies/contracts/managers/interfaces/IAssetPairManager.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n/**\r\n * @title IAssetPairManager\r\n * @author Set Protocol\r\n *\r\n * Interface for interacting with AssetPairManager contracts\r\n */\r\ninterface IAssetPairManager {\r\n    function signalConfirmationMinTime() external view returns (uint256);\r\n    function signalConfirmationMaxTime() external view returns (uint256);\r\n    function recentInitialProposeTimestamp() external view returns (uint256);\r\n}\r\n\r\n// File: set-protocol-strategies/contracts/managers/interfaces/IMACOStrategyManagerV2.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n/**\r\n * @title IMACOStrategyManagerV2\r\n * @author Set Protocol\r\n *\r\n * Interface for interacting with MACOStrategyManagerV2 contracts\r\n */\r\ninterface IMACOStrategyManagerV2 {\r\n    function crossoverConfirmationMinTime() external view returns (uint256);\r\n    function crossoverConfirmationMaxTime() external view returns (uint256);\r\n    function lastCrossoverConfirmationTimestamp() external view returns (uint256);\r\n}\r\n\r\n// File: contracts/viewer/lib/ManagerViewer.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title ManagerViewer\r\n * @author Set Protocol\r\n *\r\n * Interfaces for fetching multiple managers state in a single read\r\n */\r\ncontract ManagerViewer {\r\n\r\n    function batchFetchMACOV2CrossoverTimestamp(\r\n        IMACOStrategyManagerV2[] calldata _managers\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch owner for\r\n        uint256 _managerCount = _managers.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory timestamps = new uint256[](_managerCount);\r\n\r\n        for (uint256 i = 0; i < _managerCount; i++) {\r\n            IMACOStrategyManagerV2 manager = _managers[i];\r\n\r\n            timestamps[i] = manager.lastCrossoverConfirmationTimestamp();\r\n        }\r\n\r\n        return timestamps;\r\n    }\r\n\r\n    function batchFetchAssetPairCrossoverTimestamp(\r\n        IAssetPairManager[] calldata _managers\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch owner for\r\n        uint256 _managerCount = _managers.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory timestamps = new uint256[](_managerCount);\r\n\r\n        for (uint256 i = 0; i < _managerCount; i++) {\r\n            IAssetPairManager manager = _managers[i];\r\n\r\n            timestamps[i] = manager.recentInitialProposeTimestamp();\r\n        }\r\n\r\n        return timestamps;\r\n    }\r\n\r\n}\r\n\r\n// File: set-protocol-oracles/contracts/meta-oracles/interfaces/IOracle.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n/**\r\n * @title IOracle\r\n * @author Set Protocol\r\n *\r\n * Interface for operating with any external Oracle that returns uint256 or\r\n * an adapting contract that converts oracle output to uint256\r\n */\r\ninterface IOracle {\r\n\r\n    /**\r\n     * Returns the queried data from an oracle returning uint256\r\n     *\r\n     * @return  Current price of asset represented in uint256\r\n     */\r\n    function read()\r\n        external\r\n        view\r\n        returns (uint256);\r\n}\r\n\r\n// File: contracts/viewer/lib/OracleViewer.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n/**\r\n * @title OracleViewer\r\n * @author Set Protocol\r\n *\r\n * Contract for fetching oracle state\r\n */\r\ncontract OracleViewer {\r\n    /*\r\n     * Fetches RebalancingSetToken liquidator for an array of RebalancingSetToken instances\r\n     *\r\n     * @param  _rebalancingSetTokens[]       RebalancingSetToken contract instances\r\n     * @return address[]                     Current liquidator being used by RebalancingSetToken\r\n     */\r\n    function batchFetchOraclePrices(\r\n        IOracle[] calldata _oracles\r\n    )\r\n        external\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch states for\r\n        uint256 _addressesCount = _oracles.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory prices = new uint256[](_addressesCount);\r\n\r\n        // Cycles through contract addresses array and fetches the current price of each oracle\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            prices[i] = _oracles[i].read();\r\n        }\r\n\r\n        return prices;\r\n    }\r\n}\r\n\r\n// File: openzeppelin-solidity/contracts/token/ERC20/ERC20Detailed.sol\r\n\r\npragma solidity ^0.5.2;\r\n\r\n\r\n/**\r\n * @title ERC20Detailed token\r\n * @dev The decimals are only for visualization purposes.\r\n * All the operations are done using the smallest and indivisible token unit,\r\n * just as on Ethereum all the operations are done in wei.\r\n */\r\ncontract ERC20Detailed is IERC20 {\r\n    string private _name;\r\n    string private _symbol;\r\n    uint8 private _decimals;\r\n\r\n    constructor (string memory name, string memory symbol, uint8 decimals) public {\r\n        _name = name;\r\n        _symbol = symbol;\r\n        _decimals = decimals;\r\n    }\r\n\r\n    /**\r\n     * @return the name of the token.\r\n     */\r\n    function name() public view returns (string memory) {\r\n        return _name;\r\n    }\r\n\r\n    /**\r\n     * @return the symbol of the token.\r\n     */\r\n    function symbol() public view returns (string memory) {\r\n        return _symbol;\r\n    }\r\n\r\n    /**\r\n     * @return the number of decimals of the token.\r\n     */\r\n    function decimals() public view returns (uint8) {\r\n        return _decimals;\r\n    }\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/ISetToken.sol\r\n\r\n/*\r\n    Copyright 2018 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n/**\r\n * @title ISetToken\r\n * @author Set Protocol\r\n *\r\n * The ISetToken interface provides a light-weight, structured way to interact with the\r\n * SetToken contract from another contract.\r\n */\r\ninterface ISetToken {\r\n\r\n    /* ============ External Functions ============ */\r\n\r\n    /*\r\n     * Get natural unit of Set\r\n     *\r\n     * @return  uint256       Natural unit of Set\r\n     */\r\n    function naturalUnit()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get addresses of all components in the Set\r\n     *\r\n     * @return  componentAddresses       Array of component tokens\r\n     */\r\n    function getComponents()\r\n        external\r\n        view\r\n        returns (address[] memory);\r\n\r\n    /*\r\n     * Get units of all tokens in Set\r\n     *\r\n     * @return  units       Array of component units\r\n     */\r\n    function getUnits()\r\n        external\r\n        view\r\n        returns (uint256[] memory);\r\n\r\n    /*\r\n     * Checks to make sure token is component of Set\r\n     *\r\n     * @param  _tokenAddress     Address of token being checked\r\n     * @return  bool             True if token is component of Set\r\n     */\r\n    function tokenIsComponent(\r\n        address _tokenAddress\r\n    )\r\n        external\r\n        view\r\n        returns (bool);\r\n\r\n    /*\r\n     * Mint set token for given address.\r\n     * Can only be called by authorized contracts.\r\n     *\r\n     * @param  _issuer      The address of the issuing account\r\n     * @param  _quantity    The number of sets to attribute to issuer\r\n     */\r\n    function mint(\r\n        address _issuer,\r\n        uint256 _quantity\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Burn set token for given address\r\n     * Can only be called by authorized contracts\r\n     *\r\n     * @param  _from        The address of the redeeming account\r\n     * @param  _quantity    The number of sets to burn from redeemer\r\n     */\r\n    function burn(\r\n        address _from,\r\n        uint256 _quantity\r\n    )\r\n        external;\r\n\r\n    /**\r\n    * Transfer token for a specified address\r\n    *\r\n    * @param to The address to transfer to.\r\n    * @param value The amount to be transferred.\r\n    */\r\n    function transfer(\r\n        address to,\r\n        uint256 value\r\n    )\r\n        external;\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/lib/RebalancingLibrary.sol\r\n\r\n/*\r\n    Copyright 2018 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n/**\r\n * @title RebalancingLibrary\r\n * @author Set Protocol\r\n *\r\n * The RebalancingLibrary contains functions for facilitating the rebalancing process for\r\n * Rebalancing Set Tokens. Removes the old calculation functions\r\n *\r\n */\r\nlibrary RebalancingLibrary {\r\n\r\n    /* ============ Enums ============ */\r\n\r\n    enum State { Default, Proposal, Rebalance, Drawdown }\r\n\r\n    /* ============ Structs ============ */\r\n\r\n    struct AuctionPriceParameters {\r\n        uint256 auctionStartTime;\r\n        uint256 auctionTimeToPivot;\r\n        uint256 auctionStartPrice;\r\n        uint256 auctionPivotPrice;\r\n    }\r\n\r\n    struct BiddingParameters {\r\n        uint256 minimumBid;\r\n        uint256 remainingCurrentSets;\r\n        uint256[] combinedCurrentUnits;\r\n        uint256[] combinedNextSetUnits;\r\n        address[] combinedTokenArray;\r\n    }\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/IRebalancingSetToken.sol\r\n\r\n/*\r\n    Copyright 2018 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n/**\r\n * @title IRebalancingSetToken\r\n * @author Set Protocol\r\n *\r\n * The IRebalancingSetToken interface provides a light-weight, structured way to interact with the\r\n * RebalancingSetToken contract from another contract.\r\n */\r\n\r\ninterface IRebalancingSetToken {\r\n\r\n    /*\r\n     * Get the auction library contract used for the current rebalance\r\n     *\r\n     * @return address    Address of auction library used in the upcoming auction\r\n     */\r\n    function auctionLibrary()\r\n        external\r\n        view\r\n        returns (address);\r\n\r\n    /*\r\n     * Get totalSupply of Rebalancing Set\r\n     *\r\n     * @return  totalSupply\r\n     */\r\n    function totalSupply()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get proposalTimeStamp of Rebalancing Set\r\n     *\r\n     * @return  proposalTimeStamp\r\n     */\r\n    function proposalStartTime()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get lastRebalanceTimestamp of Rebalancing Set\r\n     *\r\n     * @return  lastRebalanceTimestamp\r\n     */\r\n    function lastRebalanceTimestamp()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get rebalanceInterval of Rebalancing Set\r\n     *\r\n     * @return  rebalanceInterval\r\n     */\r\n    function rebalanceInterval()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get rebalanceState of Rebalancing Set\r\n     *\r\n     * @return RebalancingLibrary.State    Current rebalance state of the RebalancingSetToken\r\n     */\r\n    function rebalanceState()\r\n        external\r\n        view\r\n        returns (RebalancingLibrary.State);\r\n\r\n    /*\r\n     * Get the starting amount of current SetToken for the current auction\r\n     *\r\n     * @return  rebalanceState\r\n     */\r\n    function startingCurrentSetAmount()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /**\r\n     * Gets the balance of the specified address.\r\n     *\r\n     * @param owner      The address to query the balance of.\r\n     * @return           A uint256 representing the amount owned by the passed address.\r\n     */\r\n    function balanceOf(\r\n        address owner\r\n    )\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /**\r\n     * Function used to set the terms of the next rebalance and start the proposal period\r\n     *\r\n     * @param _nextSet                      The Set to rebalance into\r\n     * @param _auctionLibrary               The library used to calculate the Dutch Auction price\r\n     * @param _auctionTimeToPivot           The amount of time for the auction to go ffrom start to pivot price\r\n     * @param _auctionStartPrice            The price to start the auction at\r\n     * @param _auctionPivotPrice            The price at which the price curve switches from linear to exponential\r\n     */\r\n    function propose(\r\n        address _nextSet,\r\n        address _auctionLibrary,\r\n        uint256 _auctionTimeToPivot,\r\n        uint256 _auctionStartPrice,\r\n        uint256 _auctionPivotPrice\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Get natural unit of Set\r\n     *\r\n     * @return  uint256       Natural unit of Set\r\n     */\r\n    function naturalUnit()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /**\r\n     * Returns the address of the current base SetToken with the current allocation\r\n     *\r\n     * @return           A address representing the base SetToken\r\n     */\r\n    function currentSet()\r\n        external\r\n        view\r\n        returns (address);\r\n\r\n    /**\r\n     * Returns the address of the next base SetToken with the post auction allocation\r\n     *\r\n     * @return  address    Address representing the base SetToken\r\n     */\r\n    function nextSet()\r\n        external\r\n        view\r\n        returns (address);\r\n\r\n    /*\r\n     * Get the unit shares of the rebalancing Set\r\n     *\r\n     * @return  unitShares       Unit Shares of the base Set\r\n     */\r\n    function unitShares()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Burn set token for given address.\r\n     * Can only be called by authorized contracts.\r\n     *\r\n     * @param  _from        The address of the redeeming account\r\n     * @param  _quantity    The number of sets to burn from redeemer\r\n     */\r\n    function burn(\r\n        address _from,\r\n        uint256 _quantity\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Place bid during rebalance auction. Can only be called by Core.\r\n     *\r\n     * @param _quantity                 The amount of currentSet to be rebalanced\r\n     * @return combinedTokenArray       Array of token addresses invovled in rebalancing\r\n     * @return inflowUnitArray          Array of amount of tokens inserted into system in bid\r\n     * @return outflowUnitArray         Array of amount of tokens taken out of system in bid\r\n     */\r\n    function placeBid(\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        returns (address[] memory, uint256[] memory, uint256[] memory);\r\n\r\n    /*\r\n     * Get combinedTokenArray of Rebalancing Set\r\n     *\r\n     * @return  combinedTokenArray\r\n     */\r\n    function getCombinedTokenArrayLength()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get combinedTokenArray of Rebalancing Set\r\n     *\r\n     * @return  combinedTokenArray\r\n     */\r\n    function getCombinedTokenArray()\r\n        external\r\n        view\r\n        returns (address[] memory);\r\n\r\n    /*\r\n     * Get failedAuctionWithdrawComponents of Rebalancing Set\r\n     *\r\n     * @return  failedAuctionWithdrawComponents\r\n     */\r\n    function getFailedAuctionWithdrawComponents()\r\n        external\r\n        view\r\n        returns (address[] memory);\r\n\r\n    /*\r\n     * Get auctionPriceParameters for current auction\r\n     *\r\n     * @return uint256[4]    AuctionPriceParameters for current rebalance auction\r\n     */\r\n    function getAuctionPriceParameters()\r\n        external\r\n        view\r\n        returns (uint256[] memory);\r\n\r\n    /*\r\n     * Get biddingParameters for current auction\r\n     *\r\n     * @return uint256[2]    BiddingParameters for current rebalance auction\r\n     */\r\n    function getBiddingParameters()\r\n        external\r\n        view\r\n        returns (uint256[] memory);\r\n\r\n    /*\r\n     * Get token inflows and outflows required for bid. Also the amount of Rebalancing\r\n     * Sets that would be generated.\r\n     *\r\n     * @param _quantity               The amount of currentSet to be rebalanced\r\n     * @return inflowUnitArray        Array of amount of tokens inserted into system in bid\r\n     * @return outflowUnitArray       Array of amount of tokens taken out of system in bid\r\n     */\r\n    function getBidPrice(\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory, uint256[] memory);\r\n\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/lib/Rebalance.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n/**\r\n * @title Rebalance\r\n * @author Set Protocol\r\n *\r\n * Types and functions for Rebalance-related data.\r\n */\r\nlibrary Rebalance {\r\n\r\n    struct TokenFlow {\r\n        address[] addresses;\r\n        uint256[] inflow;\r\n        uint256[] outflow;\r\n    }\r\n\r\n    function composeTokenFlow(\r\n        address[] memory _addresses,\r\n        uint256[] memory _inflow,\r\n        uint256[] memory _outflow\r\n    )\r\n        internal\r\n        pure\r\n        returns(TokenFlow memory)\r\n    {\r\n        return TokenFlow({addresses: _addresses, inflow: _inflow, outflow: _outflow });\r\n    }\r\n\r\n    function decomposeTokenFlow(TokenFlow memory _tokenFlow)\r\n        internal\r\n        pure\r\n        returns (address[] memory, uint256[] memory, uint256[] memory)\r\n    {\r\n        return (_tokenFlow.addresses, _tokenFlow.inflow, _tokenFlow.outflow);\r\n    }\r\n\r\n    function decomposeTokenFlowToBidPrice(TokenFlow memory _tokenFlow)\r\n        internal\r\n        pure\r\n        returns (uint256[] memory, uint256[] memory)\r\n    {\r\n        return (_tokenFlow.inflow, _tokenFlow.outflow);\r\n    }\r\n\r\n    /**\r\n     * Get token flows array of addresses, inflows and outflows\r\n     *\r\n     * @param    _rebalancingSetToken   The rebalancing Set Token instance\r\n     * @param    _quantity              The amount of currentSet to be rebalanced\r\n     * @return   combinedTokenArray     Array of token addresses\r\n     * @return   inflowArray            Array of amount of tokens inserted into system in bid\r\n     * @return   outflowArray           Array of amount of tokens returned from system in bid\r\n     */\r\n    function getTokenFlows(\r\n        IRebalancingSetToken _rebalancingSetToken,\r\n        uint256 _quantity\r\n    )\r\n        internal\r\n        view\r\n        returns (address[] memory, uint256[] memory, uint256[] memory)\r\n    {\r\n        // Get token addresses\r\n        address[] memory combinedTokenArray = _rebalancingSetToken.getCombinedTokenArray();\r\n\r\n        // Get inflow and outflow arrays for the given bid quantity\r\n        (\r\n            uint256[] memory inflowArray,\r\n            uint256[] memory outflowArray\r\n        ) = _rebalancingSetToken.getBidPrice(_quantity);\r\n\r\n        return (combinedTokenArray, inflowArray, outflowArray);\r\n    }\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/ILiquidator.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title ILiquidator\r\n * @author Set Protocol\r\n *\r\n */\r\ninterface ILiquidator {\r\n\r\n    /* ============ External Functions ============ */\r\n\r\n    function startRebalance(\r\n        ISetToken _currentSet,\r\n        ISetToken _nextSet,\r\n        uint256 _startingCurrentSetQuantity,\r\n        bytes calldata _liquidatorData\r\n    )\r\n        external;\r\n\r\n    function getBidPrice(\r\n        address _set,\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        view\r\n        returns (Rebalance.TokenFlow memory);\r\n\r\n    function placeBid(\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        returns (Rebalance.TokenFlow memory);\r\n\r\n\r\n    function settleRebalance()\r\n        external;\r\n\r\n    function endFailedRebalance() external;\r\n\r\n    // ----------------------------------------------------------------------\r\n    // Auction Price\r\n    // ----------------------------------------------------------------------\r\n\r\n    function auctionPriceParameters(address _set)\r\n        external\r\n        view\r\n        returns (RebalancingLibrary.AuctionPriceParameters memory);\r\n\r\n    // ----------------------------------------------------------------------\r\n    // Auction\r\n    // ----------------------------------------------------------------------\r\n\r\n    function hasRebalanceFailed(address _set) external view returns (bool);\r\n    function minimumBid(address _set) external view returns (uint256);\r\n    function startingCurrentSets(address _set) external view returns (uint256);\r\n    function remainingCurrentSets(address _set) external view returns (uint256);\r\n    function getCombinedCurrentSetUnits(address _set) external view returns (uint256[] memory);\r\n    function getCombinedNextSetUnits(address _set) external view returns (uint256[] memory);\r\n    function getCombinedTokenArray(address _set) external view returns (address[] memory);\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/fee-calculators/lib/PerformanceFeeLibrary.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n/**\r\n * @title PerformanceFeeLibrary\r\n * @author Set Protocol\r\n *\r\n * The PerformanceFeeLibrary contains struct definition for feeState so it can\r\n * be used elsewhere.\r\n */\r\nlibrary PerformanceFeeLibrary {\r\n\r\n    /* ============ Structs ============ */\r\n\r\n    struct FeeState {\r\n        uint256 profitFeePeriod;                // Time required between accruing profit fees\r\n        uint256 highWatermarkResetPeriod;       // Time required after last profit fee to reset high watermark\r\n        uint256 profitFeePercentage;            // Percent of profits that accrue to manager\r\n        uint256 streamingFeePercentage;         // Percent of Set that accrues to manager each year\r\n        uint256 highWatermark;                  // Value of Set at last profit fee accrual\r\n        uint256 lastProfitFeeTimestamp;         // Timestamp last profit fee was accrued\r\n        uint256 lastStreamingFeeTimestamp;      // Timestamp last streaming fee was accrued\r\n    }\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/IPerformanceFeeCalculator.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\npragma experimental ABIEncoderV2;\r\n\r\n\r\n/**\r\n * @title IPerformanceFeeCalculator\r\n * @author Set Protocol\r\n *\r\n * Interface for accessing state on PerformanceFeeCalculator (function calls defined in IFeeCalculator)\r\n */\r\ninterface IPerformanceFeeCalculator {\r\n\r\n    /* ============ External Functions ============ */\r\n\r\n    function feeState(\r\n        address _rebalancingSetToken\r\n    )\r\n        external\r\n        view\r\n        returns (PerformanceFeeLibrary.FeeState memory);\r\n\r\n    function getCalculatedFees(\r\n        address _setAddress\r\n    )\r\n        external\r\n        view\r\n        returns (uint256, uint256);\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/IFeeCalculator.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n/**\r\n * @title IFeeCalculator\r\n * @author Set Protocol\r\n *\r\n */\r\ninterface IFeeCalculator {\r\n\r\n    /* ============ External Functions ============ */\r\n\r\n    function initialize(\r\n        bytes calldata _feeCalculatorData\r\n    )\r\n        external;\r\n\r\n    function getFee()\r\n        external\r\n        view\r\n        returns(uint256);\r\n\r\n    function updateAndGetFee()\r\n        external\r\n        returns(uint256);\r\n\r\n    function adjustFee(\r\n        bytes calldata _newFeeData\r\n    )\r\n        external;\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/IRebalancingSetTokenV2.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title IRebalancingSetTokenV2\r\n * @author Set Protocol\r\n *\r\n * The IRebalancingSetTokenV2 interface provides a light-weight, structured way to interact with the\r\n * RebalancingSetTokenV2 contract from another contract.\r\n */\r\n\r\ninterface IRebalancingSetTokenV2 {\r\n\r\n    /*\r\n     * Get totalSupply of Rebalancing Set\r\n     *\r\n     * @return  totalSupply\r\n     */\r\n    function totalSupply()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /**\r\n     * Returns liquidator instance\r\n     *\r\n     * @return  ILiquidator    Liquidator instance\r\n     */\r\n    function liquidator()\r\n        external\r\n        view\r\n        returns (ILiquidator);\r\n\r\n    /*\r\n     * Get lastRebalanceTimestamp of Rebalancing Set\r\n     *\r\n     * @return  lastRebalanceTimestamp\r\n     */\r\n    function lastRebalanceTimestamp()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get rebalanceStartTime of Rebalancing Set\r\n     *\r\n     * @return  rebalanceStartTime\r\n     */\r\n    function rebalanceStartTime()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get startingCurrentSets of RebalancingSetToken\r\n     *\r\n     * @return  startingCurrentSets\r\n     */\r\n    function startingCurrentSetAmount()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get rebalanceInterval of Rebalancing Set\r\n     *\r\n     * @return  rebalanceInterval\r\n     */\r\n    function rebalanceInterval()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get array returning [startTime, timeToPivot, startPrice, endPrice]\r\n     *\r\n     * @return  AuctionPriceParameters\r\n     */\r\n    function getAuctionPriceParameters() external view returns (uint256[] memory);\r\n\r\n    /*\r\n     * Get array returning [minimumBid, remainingCurrentSets]\r\n     *\r\n     * @return  BiddingParameters\r\n     */\r\n    function getBiddingParameters() external view returns (uint256[] memory);\r\n\r\n    /*\r\n     * Get rebalanceState of Rebalancing Set\r\n     *\r\n     * @return RebalancingLibrary.State    Current rebalance state of the RebalancingSetTokenV2\r\n     */\r\n    function rebalanceState()\r\n        external\r\n        view\r\n        returns (RebalancingLibrary.State);\r\n\r\n    /**\r\n     * Gets the balance of the specified address.\r\n     *\r\n     * @param owner      The address to query the balance of.\r\n     * @return           A uint256 representing the amount owned by the passed address.\r\n     */\r\n    function balanceOf(\r\n        address owner\r\n    )\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get manager of Rebalancing Set\r\n     *\r\n     * @return  manager\r\n     */\r\n    function manager()\r\n        external\r\n        view\r\n        returns (address);\r\n\r\n    /*\r\n     * Get feeRecipient of Rebalancing Set\r\n     *\r\n     * @return  feeRecipient\r\n     */\r\n    function feeRecipient()\r\n        external\r\n        view\r\n        returns (address);\r\n\r\n    /*\r\n     * Get entryFee of Rebalancing Set\r\n     *\r\n     * @return  entryFee\r\n     */\r\n    function entryFee()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Retrieves the current expected fee from the fee calculator\r\n     * Value is returned as a scale decimal figure.\r\n     */\r\n    function rebalanceFee()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get calculator contract used to compute rebalance fees\r\n     *\r\n     * @return  rebalanceFeeCalculator\r\n     */\r\n    function rebalanceFeeCalculator()\r\n        external\r\n        view\r\n        returns (IFeeCalculator);\r\n\r\n    /*\r\n     * Initializes the RebalancingSetToken. Typically called by the Factory during creation\r\n     */\r\n    function initialize(\r\n        bytes calldata _rebalanceFeeCalldata\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Set new liquidator address. Only whitelisted addresses are valid.\r\n     */\r\n    function setLiquidator(\r\n        ILiquidator _newLiquidator\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Set new fee recipient address.\r\n     */\r\n    function setFeeRecipient(\r\n        address _newFeeRecipient\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Set new fee entry fee.\r\n     */\r\n    function setEntryFee(\r\n        uint256 _newEntryFee\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Initiates the rebalance in coordination with the Liquidator contract.\r\n     * In this step, we redeem the currentSet and pass relevant information\r\n     * to the liquidator.\r\n     *\r\n     * @param _nextSet                      The Set to rebalance into\r\n     * @param _liquidatorData               Bytecode formatted data with liquidator-specific arguments\r\n     *\r\n     * Can only be called if the rebalance interval has elapsed.\r\n     * Can only be called by manager.\r\n     */\r\n    function startRebalance(\r\n        address _nextSet,\r\n        bytes calldata _liquidatorData\r\n\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * After a successful rebalance, the new Set is issued. If there is a rebalance fee,\r\n     * the fee is paid via inflation of the Rebalancing Set to the feeRecipient.\r\n     * Full issuance functionality is now returned to set owners.\r\n     *\r\n     * Anyone can call this function.\r\n     */\r\n    function settleRebalance()\r\n        external;\r\n\r\n    /*\r\n     * Get natural unit of Set\r\n     *\r\n     * @return  uint256       Natural unit of Set\r\n     */\r\n    function naturalUnit()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /**\r\n     * Returns the address of the current base SetToken with the current allocation\r\n     *\r\n     * @return           A address representing the base SetToken\r\n     */\r\n    function currentSet()\r\n        external\r\n        view\r\n        returns (ISetToken);\r\n\r\n    /**\r\n     * Returns the address of the next base SetToken with the post auction allocation\r\n     *\r\n     * @return  address    Address representing the base SetToken\r\n     */\r\n    function nextSet()\r\n        external\r\n        view\r\n        returns (ISetToken);\r\n\r\n    /*\r\n     * Get the unit shares of the rebalancing Set\r\n     *\r\n     * @return  unitShares       Unit Shares of the base Set\r\n     */\r\n    function unitShares()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Place bid during rebalance auction. Can only be called by Core.\r\n     *\r\n     * @param _quantity                 The amount of currentSet to be rebalanced\r\n     * @return combinedTokenArray       Array of token addresses invovled in rebalancing\r\n     * @return inflowUnitArray          Array of amount of tokens inserted into system in bid\r\n     * @return outflowUnitArray         Array of amount of tokens taken out of system in bid\r\n     */\r\n    function placeBid(\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        returns (address[] memory, uint256[] memory, uint256[] memory);\r\n\r\n    /*\r\n     * Get token inflows and outflows required for bid. Also the amount of Rebalancing\r\n     * Sets that would be generated.\r\n     *\r\n     * @param _quantity               The amount of currentSet to be rebalanced\r\n     * @return inflowUnitArray        Array of amount of tokens inserted into system in bid\r\n     * @return outflowUnitArray       Array of amount of tokens taken out of system in bid\r\n     */\r\n    function getBidPrice(\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory, uint256[] memory);\r\n\r\n    /*\r\n     * Get name of Rebalancing Set\r\n     *\r\n     * @return  name\r\n     */\r\n    function name()\r\n        external\r\n        view\r\n        returns (string memory);\r\n\r\n    /*\r\n     * Get symbol of Rebalancing Set\r\n     *\r\n     * @return  symbol\r\n     */\r\n    function symbol()\r\n        external\r\n        view\r\n        returns (string memory);\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/IRebalancingSetTokenV3.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title IRebalancingSetTokenV2\r\n * @author Set Protocol\r\n *\r\n * The IRebalancingSetTokenV3 interface provides a light-weight, structured way to interact with the\r\n * RebalancingSetTokenV3 contract from another contract.\r\n */\r\n\r\ninterface IRebalancingSetTokenV3 {\r\n\r\n    /*\r\n     * Get totalSupply of Rebalancing Set\r\n     *\r\n     * @return  totalSupply\r\n     */\r\n    function totalSupply()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /**\r\n     * Returns liquidator instance\r\n     *\r\n     * @return  ILiquidator    Liquidator instance\r\n     */\r\n    function liquidator()\r\n        external\r\n        view\r\n        returns (ILiquidator);\r\n\r\n    /*\r\n     * Get lastRebalanceTimestamp of Rebalancing Set\r\n     *\r\n     * @return  lastRebalanceTimestamp\r\n     */\r\n    function lastRebalanceTimestamp()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get rebalanceStartTime of Rebalancing Set\r\n     *\r\n     * @return  rebalanceStartTime\r\n     */\r\n    function rebalanceStartTime()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get startingCurrentSets of RebalancingSetToken\r\n     *\r\n     * @return  startingCurrentSets\r\n     */\r\n    function startingCurrentSetAmount()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get rebalanceInterval of Rebalancing Set\r\n     *\r\n     * @return  rebalanceInterval\r\n     */\r\n    function rebalanceInterval()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get failAuctionPeriod of Rebalancing Set\r\n     *\r\n     * @return  failAuctionPeriod\r\n     */\r\n    function rebalanceFailPeriod()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get array returning [startTime, timeToPivot, startPrice, endPrice]\r\n     *\r\n     * @return  AuctionPriceParameters\r\n     */\r\n    function getAuctionPriceParameters() external view returns (uint256[] memory);\r\n\r\n    /*\r\n     * Get array returning [minimumBid, remainingCurrentSets]\r\n     *\r\n     * @return  BiddingParameters\r\n     */\r\n    function getBiddingParameters() external view returns (uint256[] memory);\r\n\r\n    /*\r\n     * Get rebalanceState of Rebalancing Set\r\n     *\r\n     * @return RebalancingLibrary.State    Current rebalance state of the RebalancingSetTokenV3\r\n     */\r\n    function rebalanceState()\r\n        external\r\n        view\r\n        returns (RebalancingLibrary.State);\r\n\r\n    /**\r\n     * Gets the balance of the specified address.\r\n     *\r\n     * @param owner      The address to query the balance of.\r\n     * @return           A uint256 representing the amount owned by the passed address.\r\n     */\r\n    function balanceOf(\r\n        address owner\r\n    )\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get manager of Rebalancing Set\r\n     *\r\n     * @return  manager\r\n     */\r\n    function manager()\r\n        external\r\n        view\r\n        returns (address);\r\n\r\n    /*\r\n     * Get feeRecipient of Rebalancing Set\r\n     *\r\n     * @return  feeRecipient\r\n     */\r\n    function feeRecipient()\r\n        external\r\n        view\r\n        returns (address);\r\n\r\n    /*\r\n     * Get entryFee of Rebalancing Set\r\n     *\r\n     * @return  entryFee\r\n     */\r\n    function entryFee()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Retrieves the current expected fee from the fee calculator\r\n     * Value is returned as a scale decimal figure.\r\n     */\r\n    function rebalanceFee()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Get calculator contract used to compute rebalance fees\r\n     *\r\n     * @return  rebalanceFeeCalculator\r\n     */\r\n    function rebalanceFeeCalculator()\r\n        external\r\n        view\r\n        returns (IFeeCalculator);\r\n\r\n    /*\r\n     * Initializes the RebalancingSetToken. Typically called by the Factory during creation\r\n     */\r\n    function initialize(\r\n        bytes calldata _rebalanceFeeCalldata\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Set new liquidator address. Only whitelisted addresses are valid.\r\n     */\r\n    function setLiquidator(\r\n        ILiquidator _newLiquidator\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Set new fee recipient address.\r\n     */\r\n    function setFeeRecipient(\r\n        address _newFeeRecipient\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Set new fee entry fee.\r\n     */\r\n    function setEntryFee(\r\n        uint256 _newEntryFee\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Initiates the rebalance in coordination with the Liquidator contract.\r\n     * In this step, we redeem the currentSet and pass relevant information\r\n     * to the liquidator.\r\n     *\r\n     * @param _nextSet                      The Set to rebalance into\r\n     * @param _liquidatorData               Bytecode formatted data with liquidator-specific arguments\r\n     *\r\n     * Can only be called if the rebalance interval has elapsed.\r\n     * Can only be called by manager.\r\n     */\r\n    function startRebalance(\r\n        address _nextSet,\r\n        bytes calldata _liquidatorData\r\n\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * After a successful rebalance, the new Set is issued. If there is a rebalance fee,\r\n     * the fee is paid via inflation of the Rebalancing Set to the feeRecipient.\r\n     * Full issuance functionality is now returned to set owners.\r\n     *\r\n     * Anyone can call this function.\r\n     */\r\n    function settleRebalance()\r\n        external;\r\n\r\n    /*\r\n     * During the Default stage, the incentive / rebalance Fee can be triggered. This will\r\n     * retrieve the current inflation fee from the fee calulator and mint the according\r\n     * inflation to the feeRecipient. The unit shares is then adjusted based on the new\r\n     * supply.\r\n     *\r\n     * Anyone can call this function.\r\n     */\r\n    function actualizeFee()\r\n        external;\r\n\r\n    /*\r\n     * Validate then set new streaming fee.\r\n     *\r\n     * @param  _newFeeData       Fee type and new streaming fee encoded in bytes\r\n     */\r\n    function adjustFee(\r\n        bytes calldata _newFeeData\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Get natural unit of Set\r\n     *\r\n     * @return  uint256       Natural unit of Set\r\n     */\r\n    function naturalUnit()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /**\r\n     * Returns the address of the current base SetToken with the current allocation\r\n     *\r\n     * @return           A address representing the base SetToken\r\n     */\r\n    function currentSet()\r\n        external\r\n        view\r\n        returns (ISetToken);\r\n\r\n    /**\r\n     * Returns the address of the next base SetToken with the post auction allocation\r\n     *\r\n     * @return  address    Address representing the base SetToken\r\n     */\r\n    function nextSet()\r\n        external\r\n        view\r\n        returns (ISetToken);\r\n\r\n    /*\r\n     * Get the unit shares of the rebalancing Set\r\n     *\r\n     * @return  unitShares       Unit Shares of the base Set\r\n     */\r\n    function unitShares()\r\n        external\r\n        view\r\n        returns (uint256);\r\n\r\n    /*\r\n     * Place bid during rebalance auction. Can only be called by Core.\r\n     *\r\n     * @param _quantity                 The amount of currentSet to be rebalanced\r\n     * @return combinedTokenArray       Array of token addresses invovled in rebalancing\r\n     * @return inflowUnitArray          Array of amount of tokens inserted into system in bid\r\n     * @return outflowUnitArray         Array of amount of tokens taken out of system in bid\r\n     */\r\n    function placeBid(\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        returns (address[] memory, uint256[] memory, uint256[] memory);\r\n\r\n    /*\r\n     * Get token inflows and outflows required for bid. Also the amount of Rebalancing\r\n     * Sets that would be generated.\r\n     *\r\n     * @param _quantity               The amount of currentSet to be rebalanced\r\n     * @return inflowUnitArray        Array of amount of tokens inserted into system in bid\r\n     * @return outflowUnitArray       Array of amount of tokens taken out of system in bid\r\n     */\r\n    function getBidPrice(\r\n        uint256 _quantity\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory, uint256[] memory);\r\n\r\n    /*\r\n     * Get name of Rebalancing Set\r\n     *\r\n     * @return  name\r\n     */\r\n    function name()\r\n        external\r\n        view\r\n        returns (string memory);\r\n\r\n    /*\r\n     * Get symbol of Rebalancing Set\r\n     *\r\n     * @return  symbol\r\n     */\r\n    function symbol()\r\n        external\r\n        view\r\n        returns (string memory);\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/ITWAPAuctionGetters.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n/**\r\n * @title ITWAPAuctionGetters\r\n * @author Set Protocol\r\n *\r\n * Interface for retrieving TWAPState struct\r\n */\r\ninterface ITWAPAuctionGetters {\r\n\r\n    function getOrderSize(address _set) external view returns (uint256);\r\n\r\n    function getOrderRemaining(address _set) external view returns (uint256);\r\n\r\n    function getTotalSetsRemaining(address _set) external view returns (uint256);\r\n\r\n    function getChunkSize(address _set) external view returns (uint256);\r\n\r\n    function getChunkAuctionPeriod(address _set) external view returns (uint256);\r\n\r\n    function getLastChunkAuctionEnd(address _set) external view returns (uint256);\r\n}\r\n\r\n// File: contracts/viewer/lib/RebalancingSetTokenViewer.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title RebalancingSetTokenViewer\r\n * @author Set Protocol\r\n *\r\n * Interfaces for fetching multiple RebalancingSetToken state in a single read\r\n */\r\ncontract RebalancingSetTokenViewer {\r\n\r\n    struct CollateralAndState {\r\n        address collateralSet;\r\n        RebalancingLibrary.State state;\r\n    }\r\n\r\n    struct CollateralSetInfo {\r\n        address[] components;\r\n        uint256[] units;\r\n        uint256 naturalUnit;\r\n        string name;\r\n        string symbol;\r\n    }\r\n\r\n    struct RebalancingSetRebalanceInfo {\r\n        uint256 rebalanceStartTime;\r\n        uint256 timeToPivot;\r\n        uint256 startPrice;\r\n        uint256 endPrice;\r\n        uint256 startingCurrentSets;\r\n        uint256 remainingCurrentSets;\r\n        uint256 minimumBid;\r\n        RebalancingLibrary.State rebalanceState;\r\n        ISetToken nextSet;\r\n        ILiquidator liquidator;\r\n    }\r\n\r\n    struct RebalancingSetCreateInfo {\r\n        address manager;\r\n        address feeRecipient;\r\n        ISetToken currentSet;\r\n        ILiquidator liquidator;\r\n        uint256 unitShares;\r\n        uint256 naturalUnit;\r\n        uint256 rebalanceInterval;\r\n        uint256 entryFee;\r\n        uint256 rebalanceFee;\r\n        uint256 lastRebalanceTimestamp;\r\n        RebalancingLibrary.State rebalanceState;\r\n        string name;\r\n        string symbol;\r\n    }\r\n\r\n    struct TWAPRebalanceInfo {\r\n        uint256 rebalanceStartTime;\r\n        uint256 timeToPivot;\r\n        uint256 startPrice;\r\n        uint256 endPrice;\r\n        uint256 startingCurrentSets;\r\n        uint256 remainingCurrentSets;\r\n        uint256 minimumBid;\r\n        RebalancingLibrary.State rebalanceState;\r\n        ISetToken nextSet;\r\n        ILiquidator liquidator;\r\n        uint256 orderSize;\r\n        uint256 orderRemaining;\r\n        uint256 totalSetsRemaining;\r\n        uint256 chunkSize;\r\n        uint256 chunkAuctionPeriod;\r\n        uint256 lastChunkAuctionEnd;\r\n    }\r\n\r\n    /* ============ RebalancingSetV1 Functions ============ */\r\n\r\n    /*\r\n     * Fetches all RebalancingSetToken state associated with a rebalance proposal\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return address[]                      Auction proposal library and next allocation SetToken addresses\r\n     * @return uint256[]                      Auction time to pivot, start price, and pivot price\r\n     */\r\n    function fetchRebalanceProposalStateAsync(\r\n        IRebalancingSetToken _rebalancingSetToken\r\n    )\r\n        external\r\n        returns (RebalancingLibrary.State, address[] memory, uint256[] memory)\r\n    {\r\n        // Fetch the RebalancingSetToken's current rebalance state\r\n        RebalancingLibrary.State rebalanceState = _rebalancingSetToken.rebalanceState();\r\n\r\n        // Create return address arrays\r\n        address[] memory auctionAddressParams = new address[](2);\r\n        // Fetch the addresses associated with the current rebalance\r\n        auctionAddressParams[0] = _rebalancingSetToken.nextSet();\r\n        auctionAddressParams[1] = _rebalancingSetToken.auctionLibrary();\r\n\r\n        // Create return integer array\r\n        uint256[] memory auctionIntegerParams = new uint256[](4);\r\n        auctionIntegerParams[0] = _rebalancingSetToken.proposalStartTime();\r\n\r\n        // Fetch the current rebalance's proposal parameters\r\n        uint256[] memory auctionParameters = _rebalancingSetToken.getAuctionPriceParameters();\r\n        auctionIntegerParams[1] = auctionParameters[1]; // auctionTimeToPivot\r\n        auctionIntegerParams[2] = auctionParameters[2]; // auctionStartPrice\r\n        auctionIntegerParams[3] = auctionParameters[3]; // auctionPivotPrice\r\n\r\n        return (rebalanceState, auctionAddressParams, auctionIntegerParams);\r\n    }\r\n\r\n    /*\r\n     * Fetches all RebalancingSetToken state associated with a new rebalance auction\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchRebalanceAuctionStateAsync(\r\n        IRebalancingSetToken _rebalancingSetToken\r\n    )\r\n        external\r\n        returns (RebalancingLibrary.State, uint256[] memory)\r\n    {\r\n        // Fetch the RebalancingSetToken's current rebalance state\r\n        RebalancingLibrary.State rebalanceState = _rebalancingSetToken.rebalanceState();\r\n\r\n        // Fetch the current rebalance's startingCurrentSetAmount\r\n        uint256[] memory auctionIntegerParams = new uint256[](4);\r\n        auctionIntegerParams[0] = _rebalancingSetToken.startingCurrentSetAmount();\r\n\r\n        // Fetch the current rebalance's auction parameters which are made up of various auction times and prices\r\n        uint256[] memory auctionParameters = _rebalancingSetToken.getAuctionPriceParameters();\r\n        auctionIntegerParams[1] = auctionParameters[0]; // auctionStartTime\r\n\r\n        // Fetch the current rebalance's bidding parameters which includes the minimum bid and the remaining shares\r\n        uint256[] memory biddingParameters = _rebalancingSetToken.getBiddingParameters();\r\n        auctionIntegerParams[2] = biddingParameters[0]; // minimumBid\r\n        auctionIntegerParams[3] = biddingParameters[1]; // remainingCurrentSets\r\n\r\n        return (rebalanceState, auctionIntegerParams);\r\n    }\r\n\r\n    /* ============ Event Based Fetching Functions ============ */\r\n\r\n    /*\r\n     * Fetches RebalancingSetToken details. Compatible with:\r\n     * - RebalancingSetTokenV2/V3\r\n     * - PerformanceFeeCalculator\r\n     * - Any Liquidator\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchNewRebalancingSetDetails(\r\n        IRebalancingSetTokenV3 _rebalancingSetToken\r\n    )\r\n        public\r\n        view\r\n        returns (\r\n            RebalancingSetCreateInfo memory,\r\n            PerformanceFeeLibrary.FeeState memory,\r\n            CollateralSetInfo memory,\r\n            address\r\n        )\r\n    {\r\n        RebalancingSetCreateInfo memory rbSetInfo = getRebalancingSetInfo(\r\n            address(_rebalancingSetToken)\r\n        );\r\n\r\n        PerformanceFeeLibrary.FeeState memory performanceFeeInfo = getPerformanceFeeState(\r\n            address(_rebalancingSetToken)\r\n        );\r\n\r\n        CollateralSetInfo memory collateralSetInfo = getCollateralSetInfo(\r\n            rbSetInfo.currentSet\r\n        );\r\n\r\n        address performanceFeeCalculatorAddress = address(_rebalancingSetToken.rebalanceFeeCalculator());\r\n\r\n        return (rbSetInfo, performanceFeeInfo, collateralSetInfo, performanceFeeCalculatorAddress);\r\n    }\r\n\r\n    /*\r\n     * Fetches all RebalancingSetToken state associated with a new rebalance auction. Compatible with:\r\n     * - RebalancingSetTokenV2/V3\r\n     * - Any Fee Calculator\r\n     * - Any liquidator (will omit additional TWAPLiquidator state)\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchRBSetRebalanceDetails(\r\n        IRebalancingSetTokenV2 _rebalancingSetToken\r\n    )\r\n        public\r\n        view\r\n        returns (RebalancingSetRebalanceInfo memory, CollateralSetInfo memory)\r\n    {\r\n        uint256[] memory auctionParams = _rebalancingSetToken.getAuctionPriceParameters();\r\n        uint256[] memory biddingParams = _rebalancingSetToken.getBiddingParameters();\r\n\r\n        RebalancingSetRebalanceInfo memory rbSetInfo = RebalancingSetRebalanceInfo({\r\n            rebalanceStartTime: auctionParams[0],\r\n            timeToPivot: auctionParams[1],\r\n            startPrice: auctionParams[2],\r\n            endPrice: auctionParams[3],\r\n            startingCurrentSets: _rebalancingSetToken.startingCurrentSetAmount(),\r\n            remainingCurrentSets: biddingParams[1],\r\n            minimumBid: biddingParams[0],\r\n            rebalanceState: _rebalancingSetToken.rebalanceState(),\r\n            nextSet: _rebalancingSetToken.nextSet(),\r\n            liquidator: _rebalancingSetToken.liquidator()\r\n        });\r\n\r\n        CollateralSetInfo memory collateralSetInfo = getCollateralSetInfo(_rebalancingSetToken.nextSet());\r\n\r\n        return (rbSetInfo, collateralSetInfo);\r\n    }\r\n\r\n    /*\r\n     * Fetches all RebalancingSetToken state associated with a new TWAP rebalance auction. Compatible with:\r\n     * - RebalancingSetTokenV2/V3\r\n     * - Any Fee Calculator\r\n     * - TWAPLiquidator\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchRBSetTWAPRebalanceDetails(\r\n        IRebalancingSetTokenV2 _rebalancingSetToken\r\n    )\r\n        public\r\n        view\r\n        returns (TWAPRebalanceInfo memory, CollateralSetInfo memory)\r\n    {\r\n        uint256[] memory auctionParams = _rebalancingSetToken.getAuctionPriceParameters();\r\n        uint256[] memory biddingParams = _rebalancingSetToken.getBiddingParameters();\r\n        ILiquidator liquidator = _rebalancingSetToken.liquidator();\r\n\r\n        ITWAPAuctionGetters twapStateGetters = ITWAPAuctionGetters(address(liquidator));\r\n\r\n        TWAPRebalanceInfo memory rbSetInfo = TWAPRebalanceInfo({\r\n            rebalanceStartTime: auctionParams[0],\r\n            timeToPivot: auctionParams[1],\r\n            startPrice: auctionParams[2],\r\n            endPrice: auctionParams[3],\r\n            startingCurrentSets: _rebalancingSetToken.startingCurrentSetAmount(),\r\n            remainingCurrentSets: biddingParams[1],\r\n            minimumBid: biddingParams[0],\r\n            rebalanceState: _rebalancingSetToken.rebalanceState(),\r\n            nextSet: _rebalancingSetToken.nextSet(),\r\n            liquidator: liquidator,\r\n            orderSize: twapStateGetters.getOrderSize(address(_rebalancingSetToken)),\r\n            orderRemaining: twapStateGetters.getOrderRemaining(address(_rebalancingSetToken)),\r\n            totalSetsRemaining: twapStateGetters.getTotalSetsRemaining(address(_rebalancingSetToken)),\r\n            chunkSize: twapStateGetters.getChunkSize(address(_rebalancingSetToken)),\r\n            chunkAuctionPeriod: twapStateGetters.getChunkAuctionPeriod(address(_rebalancingSetToken)),\r\n            lastChunkAuctionEnd: twapStateGetters.getLastChunkAuctionEnd(address(_rebalancingSetToken))\r\n        });\r\n\r\n        CollateralSetInfo memory collateralSetInfo = getCollateralSetInfo(_rebalancingSetToken.nextSet());\r\n\r\n        return (rbSetInfo, collateralSetInfo);\r\n    }\r\n\r\n    /* ============ Batch Fetch Functions ============ */\r\n\r\n    /*\r\n     * Fetches RebalancingSetToken states for an array of RebalancingSetToken instances\r\n     *\r\n     * @param  _rebalancingSetTokens[]       RebalancingSetToken contract instances\r\n     * @return RebalancingLibrary.State[]    Current rebalance states on the RebalancingSetToken\r\n     */\r\n    function batchFetchRebalanceStateAsync(\r\n        IRebalancingSetToken[] calldata _rebalancingSetTokens\r\n    )\r\n        external\r\n        returns (RebalancingLibrary.State[] memory)\r\n    {\r\n        // Cache length of addresses to fetch states for\r\n        uint256 _addressesCount = _rebalancingSetTokens.length;\r\n\r\n        // Instantiate output array in memory\r\n        RebalancingLibrary.State[] memory states = new RebalancingLibrary.State[](_addressesCount);\r\n\r\n        // Cycle through contract addresses array and fetching the rebalance state of each RebalancingSet\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            states[i] = _rebalancingSetTokens[i].rebalanceState();\r\n        }\r\n\r\n        return states;\r\n    }\r\n\r\n    /*\r\n     * Fetches RebalancingSetToken unitShares for an array of RebalancingSetToken instances\r\n     *\r\n     * @param  _rebalancingSetTokens[]       RebalancingSetToken contract instances\r\n     * @return uint256[]                     Current unitShares on the RebalancingSetToken\r\n     */\r\n    function batchFetchUnitSharesAsync(\r\n        IRebalancingSetToken[] calldata _rebalancingSetTokens\r\n    )\r\n        external\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch states for\r\n        uint256 _addressesCount = _rebalancingSetTokens.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory unitShares = new uint256[](_addressesCount);\r\n\r\n        // Cycles through contract addresses array and fetches the unitShares of each RebalancingSet\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            unitShares[i] = _rebalancingSetTokens[i].unitShares();\r\n        }\r\n\r\n        return unitShares;\r\n    }\r\n\r\n    /*\r\n     * Fetches RebalancingSetToken liquidator for an array of RebalancingSetToken instances\r\n     *\r\n     * @param  _rebalancingSetTokens[]       RebalancingSetToken contract instances\r\n     * @return address[]                     Current liquidator being used by RebalancingSetToken\r\n     */\r\n    function batchFetchLiquidator(\r\n        IRebalancingSetTokenV2[] calldata _rebalancingSetTokens\r\n    )\r\n        external\r\n        returns (address[] memory)\r\n    {\r\n        // Cache length of addresses to fetch states for\r\n        uint256 _addressesCount = _rebalancingSetTokens.length;\r\n\r\n        // Instantiate output array in memory\r\n        address[] memory liquidators = new address[](_addressesCount);\r\n\r\n        // Cycles through contract addresses array and fetches the liquidator addresss of each RebalancingSet\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            liquidators[i] = address(_rebalancingSetTokens[i].liquidator());\r\n        }\r\n\r\n        return liquidators;\r\n    }\r\n\r\n    /*\r\n     * Fetches RebalancingSetToken state and current collateral for an array of RebalancingSetToken instances\r\n     *\r\n     * @param  _rebalancingSetTokens[]       RebalancingSetToken contract instances\r\n     * @return CollateralAndState[]          Current collateral and state of RebalancingSetTokens\r\n     */\r\n    function batchFetchStateAndCollateral(\r\n        IRebalancingSetToken[] calldata _rebalancingSetTokens\r\n    )\r\n        external\r\n        returns (CollateralAndState[] memory)\r\n    {\r\n        // Cache length of addresses to fetch states for\r\n        uint256 _addressesCount = _rebalancingSetTokens.length;\r\n\r\n        // Instantiate output array in memory\r\n        CollateralAndState[] memory statuses = new CollateralAndState[](_addressesCount);\r\n\r\n        // Cycles through contract addresses array and fetches the liquidator addresss of each RebalancingSet\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            statuses[i].collateralSet = address(_rebalancingSetTokens[i].currentSet());\r\n            statuses[i].state = _rebalancingSetTokens[i].rebalanceState();\r\n        }\r\n\r\n        return statuses;\r\n    }\r\n\r\n    /* ============ Internal Functions ============ */\r\n\r\n    function getCollateralSetInfo(\r\n        ISetToken _collateralSet\r\n    )\r\n        internal\r\n        view\r\n        returns (CollateralSetInfo memory)\r\n    {\r\n        return CollateralSetInfo({\r\n            components: _collateralSet.getComponents(),\r\n            units: _collateralSet.getUnits(),\r\n            naturalUnit: _collateralSet.naturalUnit(),\r\n            name: ERC20Detailed(address(_collateralSet)).name(),\r\n            symbol: ERC20Detailed(address(_collateralSet)).symbol()\r\n        });\r\n    }\r\n\r\n    function getRebalancingSetInfo(\r\n        address _rebalancingSetToken\r\n    )\r\n        internal\r\n        view\r\n        returns (RebalancingSetCreateInfo memory)\r\n    {\r\n        IRebalancingSetTokenV2 rebalancingSetTokenV2Instance = IRebalancingSetTokenV2(_rebalancingSetToken);\r\n\r\n        return RebalancingSetCreateInfo({\r\n            manager: rebalancingSetTokenV2Instance.manager(),\r\n            feeRecipient: rebalancingSetTokenV2Instance.feeRecipient(),\r\n            currentSet: rebalancingSetTokenV2Instance.currentSet(),\r\n            liquidator: rebalancingSetTokenV2Instance.liquidator(),\r\n            unitShares: rebalancingSetTokenV2Instance.unitShares(),\r\n            naturalUnit: rebalancingSetTokenV2Instance.naturalUnit(),\r\n            rebalanceInterval: rebalancingSetTokenV2Instance.rebalanceInterval(),\r\n            entryFee: rebalancingSetTokenV2Instance.entryFee(),\r\n            rebalanceFee: rebalancingSetTokenV2Instance.rebalanceFee(),\r\n            lastRebalanceTimestamp: rebalancingSetTokenV2Instance.lastRebalanceTimestamp(),\r\n            rebalanceState: rebalancingSetTokenV2Instance.rebalanceState(),\r\n            name: rebalancingSetTokenV2Instance.name(),\r\n            symbol: rebalancingSetTokenV2Instance.symbol()\r\n        });\r\n    }\r\n\r\n    function getPerformanceFeeState(\r\n        address _rebalancingSetToken\r\n    )\r\n        internal\r\n        view\r\n        returns (PerformanceFeeLibrary.FeeState memory)\r\n    {\r\n        IRebalancingSetTokenV2 rebalancingSetTokenV3Instance = IRebalancingSetTokenV2(_rebalancingSetToken);\r\n\r\n        address rebalanceFeeCalculatorAddress = address(rebalancingSetTokenV3Instance.rebalanceFeeCalculator());\r\n        return IPerformanceFeeCalculator(rebalanceFeeCalculatorAddress).feeState(_rebalancingSetToken);\r\n    }\r\n}\r\n\r\n// File: set-protocol-strategies/contracts/managers/allocators/ISocialAllocator.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n/**\r\n * @title ISocialAllocator\r\n * @author Set Protocol\r\n *\r\n * Interface for interacting with SocialAllocator contracts\r\n */\r\ninterface ISocialAllocator {\r\n\r\n    /*\r\n     * Determine the next allocation to rebalance into.\r\n     *\r\n     * @param  _targetBaseAssetAllocation       Target allocation of the base asset\r\n     * @return ISetToken                        The address of the proposed nextSet\r\n     */\r\n    function determineNewAllocation(\r\n        uint256 _targetBaseAssetAllocation\r\n    )\r\n        external\r\n        returns (ISetToken);\r\n\r\n    /*\r\n     * Calculate value of passed collateral set.\r\n     *\r\n     * @param  _collateralSet        Instance of current set collateralizing RebalancingSetToken\r\n     * @return uint256               USD value of passed Set\r\n     */\r\n    function calculateCollateralSetValue(\r\n        ISetToken _collateralSet\r\n    )\r\n        external\r\n        view\r\n        returns(uint256);\r\n}\r\n\r\n// File: set-protocol-strategies/contracts/managers/lib/SocialTradingLibrary.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n/**\r\n * @title SocialTradingLibrary\r\n * @author Set Protocol\r\n *\r\n * Library for use in SocialTrading system.\r\n */\r\nlibrary SocialTradingLibrary {\r\n\r\n    /* ============ Structs ============ */\r\n    struct PoolInfo {\r\n        address trader;                 // Address allowed to make admin and allocation decisions\r\n        ISocialAllocator allocator;     // Allocator used to make collateral Sets, defines asset pair being used\r\n        uint256 currentAllocation;      // Current base asset allocation of tradingPool\r\n        uint256 newEntryFee;            // New fee percentage to change to after time lock passes, defaults to 0\r\n        uint256 feeUpdateTimestamp;     // Timestamp when fee update process can be finalized, defaults to maxUint256\r\n    }\r\n}\r\n\r\n// File: set-protocol-strategies/contracts/managers/interfaces/ISocialTradingManager.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title ISocialTradingManager\r\n * @author Set Protocol\r\n *\r\n * Interface for interacting with SocialTradingManager contracts\r\n */\r\ninterface ISocialTradingManager {\r\n\r\n    /*\r\n     * Get trading pool info.\r\n     *\r\n     * @param _tradingPool        The address of the trading pool being queried\r\n     *\r\n     * @return                    PoolInfo struct of trading pool\r\n     */\r\n    function pools(address _tradingPool) external view returns (SocialTradingLibrary.PoolInfo memory);\r\n\r\n    /*\r\n     * Create a trading pool. Create or select new collateral and create RebalancingSetToken contract to\r\n     * administer pool. Save relevant data to pool's entry in pools state variable under the Rebalancing\r\n     * Set Token address.\r\n     *\r\n     * @param _tradingPairAllocator             The address of the allocator the trader wishes to use\r\n     * @param _startingBaseAssetAllocation      Starting base asset allocation in a scaled decimal value\r\n     *                                          (e.g. 100% = 1e18, 1% = 1e16)\r\n     * @param _startingUSDValue                 Starting value of one share of the trading pool to 18 decimals of precision\r\n     * @param _name                             The name of the new RebalancingSetTokenV2\r\n     * @param _symbol                           The symbol of the new RebalancingSetTokenV2\r\n     * @param _rebalancingSetCallData           Byte string containing additional call parameters to pass to factory\r\n     */\r\n    function createTradingPool(\r\n        ISocialAllocator _tradingPairAllocator,\r\n        uint256 _startingBaseAssetAllocation,\r\n        uint256 _startingUSDValue,\r\n        bytes32 _name,\r\n        bytes32 _symbol,\r\n        bytes calldata _rebalancingSetCallData\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Update trading pool allocation. Issue new collateral Set and initiate rebalance on RebalancingSetTokenV2.\r\n     *\r\n     * @param _tradingPool        The address of the trading pool being updated\r\n     * @param _newAllocation      New base asset allocation in a scaled decimal value\r\n     *                                          (e.g. 100% = 1e18, 1% = 1e16)\r\n     * @param _liquidatorData     Extra parameters passed to the liquidator\r\n     */\r\n    function updateAllocation(\r\n        IRebalancingSetTokenV2 _tradingPool,\r\n        uint256 _newAllocation,\r\n        bytes calldata _liquidatorData\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Update trader allowed to manage trading pool.\r\n     *\r\n     * @param _tradingPool        The address of the trading pool being updated\r\n     * @param _newTrader          Address of new traders\r\n     */\r\n    function setTrader(\r\n        IRebalancingSetTokenV2 _tradingPool,\r\n        address _newTrader\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Update liquidator used by tradingPool.\r\n     *\r\n     * @param _tradingPool        The address of the trading pool being updated\r\n     * @param _newLiquidator      Address of new Liquidator\r\n     */\r\n    function setLiquidator(\r\n        IRebalancingSetTokenV2 _tradingPool,\r\n        ILiquidator _newLiquidator\r\n    )\r\n        external;\r\n\r\n    /*\r\n     * Update fee recipient of tradingPool.\r\n     *\r\n     * @param _tradingPool          The address of the trading pool being updated\r\n     * @param _newFeeRecipient      Address of new fee recipient\r\n     */\r\n    function setFeeRecipient(\r\n        IRebalancingSetTokenV2 _tradingPool,\r\n        address _newFeeRecipient\r\n    )\r\n        external;\r\n}\r\n\r\n// File: contracts/viewer/lib/TradingPoolViewer.sol\r\n\r\n/*\r\n    Copyright 2019 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title TradingPoolViewer\r\n * @author Set Protocol\r\n *\r\n * Interfaces for fetching multiple TradingPool state in a single read. Includes state\r\n * specific to managing pool as well as underlying RebalancingSetTokenV2 state.\r\n */\r\ncontract TradingPoolViewer is RebalancingSetTokenViewer {\r\n\r\n    /*\r\n     * Fetches TradingPool details. Compatible with:\r\n     * - RebalancingSetTokenV2/V3\r\n     * - Any Fee Calculator\r\n     * - Any Liquidator\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchNewTradingPoolDetails(\r\n        IRebalancingSetTokenV2 _tradingPool\r\n    )\r\n        external\r\n        view\r\n        returns (SocialTradingLibrary.PoolInfo memory, RebalancingSetCreateInfo memory, CollateralSetInfo memory)\r\n    {\r\n        RebalancingSetCreateInfo memory tradingPoolInfo = getRebalancingSetInfo(\r\n            address(_tradingPool)\r\n        );\r\n\r\n        SocialTradingLibrary.PoolInfo memory poolInfo = ISocialTradingManager(tradingPoolInfo.manager).pools(\r\n            address(_tradingPool)\r\n        );\r\n\r\n        CollateralSetInfo memory collateralSetInfo = getCollateralSetInfo(\r\n            tradingPoolInfo.currentSet\r\n        );\r\n\r\n        return (poolInfo, tradingPoolInfo, collateralSetInfo);\r\n    }\r\n\r\n    /*\r\n     * Fetches TradingPoolV2 details. Compatible with:\r\n     * - RebalancingSetTokenV2/V3\r\n     * - PerformanceFeeCalculator\r\n     * - Any Liquidator\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchNewTradingPoolV2Details(\r\n        IRebalancingSetTokenV3 _tradingPool\r\n    )\r\n        external\r\n        view\r\n        returns (\r\n            SocialTradingLibrary.PoolInfo memory,\r\n            RebalancingSetCreateInfo memory,\r\n            PerformanceFeeLibrary.FeeState memory,\r\n            CollateralSetInfo memory,\r\n            address\r\n        )\r\n    {\r\n        (\r\n            RebalancingSetCreateInfo memory tradingPoolInfo,\r\n            PerformanceFeeLibrary.FeeState memory performanceFeeInfo,\r\n            CollateralSetInfo memory collateralSetInfo,\r\n            address performanceFeeCalculatorAddress\r\n        ) = fetchNewRebalancingSetDetails(_tradingPool);\r\n\r\n        SocialTradingLibrary.PoolInfo memory poolInfo = ISocialTradingManager(tradingPoolInfo.manager).pools(\r\n            address(_tradingPool)\r\n        );\r\n\r\n        return (poolInfo, tradingPoolInfo, performanceFeeInfo, collateralSetInfo, performanceFeeCalculatorAddress);\r\n    }\r\n\r\n    /*\r\n     * Fetches all TradingPool state associated with a new rebalance auction. Compatible with:\r\n     * - RebalancingSetTokenV2/V3\r\n     * - Any Fee Calculator\r\n     * - Any liquidator (will omit additional TWAPLiquidator state)\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchTradingPoolRebalanceDetails(\r\n        IRebalancingSetTokenV2 _tradingPool\r\n    )\r\n        external\r\n        view\r\n        returns (SocialTradingLibrary.PoolInfo memory, RebalancingSetRebalanceInfo memory, CollateralSetInfo memory)\r\n    {\r\n        (\r\n            RebalancingSetRebalanceInfo memory tradingPoolInfo,\r\n            CollateralSetInfo memory collateralSetInfo\r\n        ) = fetchRBSetRebalanceDetails(_tradingPool);\r\n\r\n        address manager = _tradingPool.manager();\r\n\r\n        SocialTradingLibrary.PoolInfo memory poolInfo = ISocialTradingManager(manager).pools(\r\n            address(_tradingPool)\r\n        );\r\n\r\n        return (poolInfo, tradingPoolInfo, collateralSetInfo);\r\n    }\r\n\r\n    /*\r\n     * Fetches all TradingPool state associated with a new TWAP rebalance auction. Compatible with:\r\n     * - RebalancingSetTokenV2/V3\r\n     * - Any Fee Calculator\r\n     * - TWAP Liquidator\r\n     *\r\n     * @param  _rebalancingSetToken           RebalancingSetToken contract instance\r\n     * @return RebalancingLibrary.State       Current rebalance state on the RebalancingSetToken\r\n     * @return uint256[]                      Starting current set, start time, minimum bid, and remaining current sets\r\n     */\r\n    function fetchTradingPoolTWAPRebalanceDetails(\r\n        IRebalancingSetTokenV2 _tradingPool\r\n    )\r\n        external\r\n        view\r\n        returns (SocialTradingLibrary.PoolInfo memory, TWAPRebalanceInfo memory, CollateralSetInfo memory)\r\n    {\r\n        (\r\n            TWAPRebalanceInfo memory tradingPoolInfo,\r\n            CollateralSetInfo memory collateralSetInfo\r\n        ) = fetchRBSetTWAPRebalanceDetails(_tradingPool);\r\n\r\n        address manager = _tradingPool.manager();\r\n\r\n        SocialTradingLibrary.PoolInfo memory poolInfo = ISocialTradingManager(manager).pools(\r\n            address(_tradingPool)\r\n        );\r\n\r\n        return (poolInfo, tradingPoolInfo, collateralSetInfo);\r\n    }\r\n\r\n    function batchFetchTradingPoolOperator(\r\n        IRebalancingSetTokenV2[] calldata _tradingPools\r\n    )\r\n        external\r\n        view\r\n        returns (address[] memory)\r\n    {\r\n        // Cache length of addresses to fetch owner for\r\n        uint256 _poolCount = _tradingPools.length;\r\n\r\n        // Instantiate output array in memory\r\n        address[] memory operators = new address[](_poolCount);\r\n\r\n        for (uint256 i = 0; i < _poolCount; i++) {\r\n            IRebalancingSetTokenV2 tradingPool = _tradingPools[i];\r\n\r\n            operators[i] = ISocialTradingManager(tradingPool.manager()).pools(\r\n                address(tradingPool)\r\n            ).trader;\r\n        }\r\n\r\n        return operators;\r\n    }\r\n\r\n    function batchFetchTradingPoolEntryFees(\r\n        IRebalancingSetTokenV2[] calldata _tradingPools\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch entryFees for\r\n        uint256 _poolCount = _tradingPools.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory entryFees = new uint256[](_poolCount);\r\n\r\n        for (uint256 i = 0; i < _poolCount; i++) {\r\n            entryFees[i] = _tradingPools[i].entryFee();\r\n        }\r\n\r\n        return entryFees;\r\n    }\r\n\r\n    function batchFetchTradingPoolRebalanceFees(\r\n        IRebalancingSetTokenV2[] calldata _tradingPools\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch rebalanceFees for\r\n        uint256 _poolCount = _tradingPools.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory rebalanceFees = new uint256[](_poolCount);\r\n\r\n        for (uint256 i = 0; i < _poolCount; i++) {\r\n            rebalanceFees[i] = _tradingPools[i].rebalanceFee();\r\n        }\r\n\r\n        return rebalanceFees;\r\n    }\r\n\r\n    function batchFetchTradingPoolAccumulation(\r\n        IRebalancingSetTokenV3[] calldata _tradingPools\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory, uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch rebalanceFees for\r\n        uint256 _poolCount = _tradingPools.length;\r\n\r\n        // Instantiate streaming fees output array in memory\r\n        uint256[] memory streamingFees = new uint256[](_poolCount);\r\n\r\n        // Instantiate profit fees output array in memory\r\n        uint256[] memory profitFees = new uint256[](_poolCount);\r\n\r\n        for (uint256 i = 0; i < _poolCount; i++) {\r\n            address rebalanceFeeCalculatorAddress = address(_tradingPools[i].rebalanceFeeCalculator());\r\n\r\n            (\r\n                streamingFees[i],\r\n                profitFees[i]\r\n            ) = IPerformanceFeeCalculator(rebalanceFeeCalculatorAddress).getCalculatedFees(\r\n                address(_tradingPools[i])\r\n            );\r\n        }\r\n\r\n        return (streamingFees, profitFees);\r\n    }\r\n\r\n\r\n    function batchFetchTradingPoolFeeState(\r\n        IRebalancingSetTokenV3[] calldata _tradingPools\r\n    )\r\n        external\r\n        view\r\n        returns (PerformanceFeeLibrary.FeeState[] memory)\r\n    {\r\n        // Cache length of addresses to fetch rebalanceFees for\r\n        uint256 _poolCount = _tradingPools.length;\r\n\r\n        // Instantiate output array in memory\r\n        PerformanceFeeLibrary.FeeState[] memory feeStates = new PerformanceFeeLibrary.FeeState[](_poolCount);\r\n\r\n        for (uint256 i = 0; i < _poolCount; i++) {\r\n            feeStates[i] = getPerformanceFeeState(\r\n                address(_tradingPools[i])\r\n            );\r\n        }\r\n\r\n        return feeStates;\r\n    }\r\n}\r\n\r\n// File: set-protocol-contracts/contracts/core/interfaces/ICToken.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n/**\r\n * @title ICToken\r\n * @author Set Protocol\r\n *\r\n * Interface for interacting with Compound cTokens\r\n */\r\ninterface ICToken {\r\n\r\n    /**\r\n     * Calculates the exchange rate from the underlying to the CToken\r\n     *\r\n     * @notice Accrue interest then return the up-to-date exchange rate\r\n     * @return Calculated exchange rate scaled by 1e18\r\n     */\r\n    function exchangeRateCurrent()\r\n        external\r\n        returns (uint256);\r\n\r\n    function exchangeRateStored() external view returns (uint256);\r\n\r\n    function decimals() external view returns(uint8);\r\n\r\n    /**\r\n     * Sender supplies assets into the market and receives cTokens in exchange\r\n     *\r\n     * @notice Accrues interest whether or not the operation succeeds, unless reverted\r\n     * @param mintAmount The amount of the underlying asset to supply\r\n     * @return uint 0=success, otherwise a failure\r\n     */\r\n    function mint(uint mintAmount) external returns (uint);\r\n\r\n    /**\r\n     * @notice Sender redeems cTokens in exchange for the underlying asset\r\n     * @dev Accrues interest whether or not the operation succeeds, unless reverted\r\n     * @param redeemTokens The number of cTokens to redeem into underlying\r\n     * @return uint 0=success, otherwise a failure (see ErrorReporter.sol for details)\r\n     */\r\n    function redeem(uint redeemTokens) external returns (uint);\r\n}\r\n\r\n// File: contracts/viewer/lib/CTokenViewer.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n/**\r\n * @title CTokenViewer\r\n * @author Set Protocol\r\n *\r\n * Interface for batch fetching the on-chain Compound exchange rate\r\n */\r\ncontract CTokenViewer {\r\n\r\n    function batchFetchExchangeRateStored(\r\n        address[] calldata _cTokenAddresses\r\n    )\r\n        external\r\n        view\r\n        returns (uint256[] memory)\r\n    {\r\n        // Cache length of addresses to fetch exchange rates for\r\n        uint256 _addressesCount = _cTokenAddresses.length;\r\n\r\n        // Instantiate output array in memory\r\n        uint256[] memory cTokenExchangeRates = new uint256[](_addressesCount);\r\n\r\n        // Cycle through contract addresses array and fetching the exchange rate of each for the owner\r\n        for (uint256 i = 0; i < _addressesCount; i++) {\r\n            cTokenExchangeRates[i] = ICToken(_cTokenAddresses[i]).exchangeRateStored();\r\n        }\r\n\r\n        return cTokenExchangeRates;\r\n    }\r\n}\r\n\r\n// File: contracts/viewer/ProtocolViewer.sol\r\n\r\n/*\r\n    Copyright 2020 Set Labs Inc.\r\n\r\n    Licensed under the Apache License, Version 2.0 (the \"License\");\r\n    you may not use this file except in compliance with the License.\r\n    You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    Unless required by applicable law or agreed to in writing, software\r\n    distributed under the License is distributed on an \"AS IS\" BASIS,\r\n    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n    See the License for the specific language governing permissions and\r\n    limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.7;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title ProtocolViewer\r\n * @author Set Protocol\r\n *\r\n * Collection of view methods across various contracts in the SetProtocol system that make reads\r\n * to commonly fetch batches of state possible in a single eth_call. This reduces latency and\r\n * prevents inconsistent state from being read across multiple Ethereum nodes.\r\n */\r\n /* solium-disable-next-line no-empty-blocks */\r\ncontract ProtocolViewer is\r\n    ERC20Viewer,\r\n    TradingPoolViewer,\r\n    CTokenViewer,\r\n    ManagerViewer,\r\n    OracleViewer\r\n{}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_rebalancingSetTokens\",\"type\":\"address[]\"}],\"name\":\"batchFetchLiquidator\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_rebalancingSetToken\",\"type\":\"address\"}],\"name\":\"fetchNewRebalancingSetDetails\",\"outputs\":[{\"components\":[{\"name\":\"manager\",\"type\":\"address\"},{\"name\":\"feeRecipient\",\"type\":\"address\"},{\"name\":\"currentSet\",\"type\":\"address\"},{\"name\":\"liquidator\",\"type\":\"address\"},{\"name\":\"unitShares\",\"type\":\"uint256\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"rebalanceInterval\",\"type\":\"uint256\"},{\"name\":\"entryFee\",\"type\":\"uint256\"},{\"name\":\"rebalanceFee\",\"type\":\"uint256\"},{\"name\":\"lastRebalanceTimestamp\",\"type\":\"uint256\"},{\"name\":\"rebalanceState\",\"type\":\"uint8\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"profitFeePeriod\",\"type\":\"uint256\"},{\"name\":\"highWatermarkResetPeriod\",\"type\":\"uint256\"},{\"name\":\"profitFeePercentage\",\"type\":\"uint256\"},{\"name\":\"streamingFeePercentage\",\"type\":\"uint256\"},{\"name\":\"highWatermark\",\"type\":\"uint256\"},{\"name\":\"lastProfitFeeTimestamp\",\"type\":\"uint256\"},{\"name\":\"lastStreamingFeeTimestamp\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"components\",\"type\":\"address[]\"},{\"name\":\"units\",\"type\":\"uint256[]\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"},{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPool\",\"type\":\"address\"}],\"name\":\"fetchTradingPoolTWAPRebalanceDetails\",\"outputs\":[{\"components\":[{\"name\":\"trader\",\"type\":\"address\"},{\"name\":\"allocator\",\"type\":\"address\"},{\"name\":\"currentAllocation\",\"type\":\"uint256\"},{\"name\":\"newEntryFee\",\"type\":\"uint256\"},{\"name\":\"feeUpdateTimestamp\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"rebalanceStartTime\",\"type\":\"uint256\"},{\"name\":\"timeToPivot\",\"type\":\"uint256\"},{\"name\":\"startPrice\",\"type\":\"uint256\"},{\"name\":\"endPrice\",\"type\":\"uint256\"},{\"name\":\"startingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"remainingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"minimumBid\",\"type\":\"uint256\"},{\"name\":\"rebalanceState\",\"type\":\"uint8\"},{\"name\":\"nextSet\",\"type\":\"address\"},{\"name\":\"liquidator\",\"type\":\"address\"},{\"name\":\"orderSize\",\"type\":\"uint256\"},{\"name\":\"orderRemaining\",\"type\":\"uint256\"},{\"name\":\"totalSetsRemaining\",\"type\":\"uint256\"},{\"name\":\"chunkSize\",\"type\":\"uint256\"},{\"name\":\"chunkAuctionPeriod\",\"type\":\"uint256\"},{\"name\":\"lastChunkAuctionEnd\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"components\",\"type\":\"address[]\"},{\"name\":\"units\",\"type\":\"uint256[]\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPools\",\"type\":\"address[]\"}],\"name\":\"batchFetchTradingPoolRebalanceFees\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPools\",\"type\":\"address[]\"}],\"name\":\"batchFetchTradingPoolAccumulation\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"},{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_rebalancingSetToken\",\"type\":\"address\"}],\"name\":\"fetchRBSetRebalanceDetails\",\"outputs\":[{\"components\":[{\"name\":\"rebalanceStartTime\",\"type\":\"uint256\"},{\"name\":\"timeToPivot\",\"type\":\"uint256\"},{\"name\":\"startPrice\",\"type\":\"uint256\"},{\"name\":\"endPrice\",\"type\":\"uint256\"},{\"name\":\"startingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"remainingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"minimumBid\",\"type\":\"uint256\"},{\"name\":\"rebalanceState\",\"type\":\"uint8\"},{\"name\":\"nextSet\",\"type\":\"address\"},{\"name\":\"liquidator\",\"type\":\"address\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"components\",\"type\":\"address[]\"},{\"name\":\"units\",\"type\":\"uint256[]\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_oracles\",\"type\":\"address[]\"}],\"name\":\"batchFetchOraclePrices\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenAddresses\",\"type\":\"address[]\"},{\"name\":\"_tokenOwners\",\"type\":\"address[]\"}],\"name\":\"batchFetchUsersBalances\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPools\",\"type\":\"address[]\"}],\"name\":\"batchFetchTradingPoolEntryFees\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_managers\",\"type\":\"address[]\"}],\"name\":\"batchFetchMACOV2CrossoverTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPools\",\"type\":\"address[]\"}],\"name\":\"batchFetchTradingPoolFeeState\",\"outputs\":[{\"components\":[{\"name\":\"profitFeePeriod\",\"type\":\"uint256\"},{\"name\":\"highWatermarkResetPeriod\",\"type\":\"uint256\"},{\"name\":\"profitFeePercentage\",\"type\":\"uint256\"},{\"name\":\"streamingFeePercentage\",\"type\":\"uint256\"},{\"name\":\"highWatermark\",\"type\":\"uint256\"},{\"name\":\"lastProfitFeeTimestamp\",\"type\":\"uint256\"},{\"name\":\"lastStreamingFeeTimestamp\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPools\",\"type\":\"address[]\"}],\"name\":\"batchFetchTradingPoolOperator\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPool\",\"type\":\"address\"}],\"name\":\"fetchNewTradingPoolDetails\",\"outputs\":[{\"components\":[{\"name\":\"trader\",\"type\":\"address\"},{\"name\":\"allocator\",\"type\":\"address\"},{\"name\":\"currentAllocation\",\"type\":\"uint256\"},{\"name\":\"newEntryFee\",\"type\":\"uint256\"},{\"name\":\"feeUpdateTimestamp\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"manager\",\"type\":\"address\"},{\"name\":\"feeRecipient\",\"type\":\"address\"},{\"name\":\"currentSet\",\"type\":\"address\"},{\"name\":\"liquidator\",\"type\":\"address\"},{\"name\":\"unitShares\",\"type\":\"uint256\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"rebalanceInterval\",\"type\":\"uint256\"},{\"name\":\"entryFee\",\"type\":\"uint256\"},{\"name\":\"rebalanceFee\",\"type\":\"uint256\"},{\"name\":\"lastRebalanceTimestamp\",\"type\":\"uint256\"},{\"name\":\"rebalanceState\",\"type\":\"uint8\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"components\",\"type\":\"address[]\"},{\"name\":\"units\",\"type\":\"uint256[]\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPool\",\"type\":\"address\"}],\"name\":\"fetchNewTradingPoolV2Details\",\"outputs\":[{\"components\":[{\"name\":\"trader\",\"type\":\"address\"},{\"name\":\"allocator\",\"type\":\"address\"},{\"name\":\"currentAllocation\",\"type\":\"uint256\"},{\"name\":\"newEntryFee\",\"type\":\"uint256\"},{\"name\":\"feeUpdateTimestamp\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"manager\",\"type\":\"address\"},{\"name\":\"feeRecipient\",\"type\":\"address\"},{\"name\":\"currentSet\",\"type\":\"address\"},{\"name\":\"liquidator\",\"type\":\"address\"},{\"name\":\"unitShares\",\"type\":\"uint256\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"rebalanceInterval\",\"type\":\"uint256\"},{\"name\":\"entryFee\",\"type\":\"uint256\"},{\"name\":\"rebalanceFee\",\"type\":\"uint256\"},{\"name\":\"lastRebalanceTimestamp\",\"type\":\"uint256\"},{\"name\":\"rebalanceState\",\"type\":\"uint8\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"profitFeePeriod\",\"type\":\"uint256\"},{\"name\":\"highWatermarkResetPeriod\",\"type\":\"uint256\"},{\"name\":\"profitFeePercentage\",\"type\":\"uint256\"},{\"name\":\"streamingFeePercentage\",\"type\":\"uint256\"},{\"name\":\"highWatermark\",\"type\":\"uint256\"},{\"name\":\"lastProfitFeeTimestamp\",\"type\":\"uint256\"},{\"name\":\"lastStreamingFeeTimestamp\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"components\",\"type\":\"address[]\"},{\"name\":\"units\",\"type\":\"uint256[]\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"},{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_rebalancingSetToken\",\"type\":\"address\"}],\"name\":\"fetchRebalanceAuctionStateAsync\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_rebalancingSetTokens\",\"type\":\"address[]\"}],\"name\":\"batchFetchRebalanceStateAsync\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_rebalancingSetTokens\",\"type\":\"address[]\"}],\"name\":\"batchFetchUnitSharesAsync\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_managers\",\"type\":\"address[]\"}],\"name\":\"batchFetchAssetPairCrossoverTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_rebalancingSetToken\",\"type\":\"address\"}],\"name\":\"fetchRBSetTWAPRebalanceDetails\",\"outputs\":[{\"components\":[{\"name\":\"rebalanceStartTime\",\"type\":\"uint256\"},{\"name\":\"timeToPivot\",\"type\":\"uint256\"},{\"name\":\"startPrice\",\"type\":\"uint256\"},{\"name\":\"endPrice\",\"type\":\"uint256\"},{\"name\":\"startingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"remainingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"minimumBid\",\"type\":\"uint256\"},{\"name\":\"rebalanceState\",\"type\":\"uint8\"},{\"name\":\"nextSet\",\"type\":\"address\"},{\"name\":\"liquidator\",\"type\":\"address\"},{\"name\":\"orderSize\",\"type\":\"uint256\"},{\"name\":\"orderRemaining\",\"type\":\"uint256\"},{\"name\":\"totalSetsRemaining\",\"type\":\"uint256\"},{\"name\":\"chunkSize\",\"type\":\"uint256\"},{\"name\":\"chunkAuctionPeriod\",\"type\":\"uint256\"},{\"name\":\"lastChunkAuctionEnd\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"components\",\"type\":\"address[]\"},{\"name\":\"units\",\"type\":\"uint256[]\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_rebalancingSetToken\",\"type\":\"address\"}],\"name\":\"fetchRebalanceProposalStateAsync\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"address[]\"},{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_cTokenAddresses\",\"type\":\"address[]\"}],\"name\":\"batchFetchExchangeRateStored\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tradingPool\",\"type\":\"address\"}],\"name\":\"fetchTradingPoolRebalanceDetails\",\"outputs\":[{\"components\":[{\"name\":\"trader\",\"type\":\"address\"},{\"name\":\"allocator\",\"type\":\"address\"},{\"name\":\"currentAllocation\",\"type\":\"uint256\"},{\"name\":\"newEntryFee\",\"type\":\"uint256\"},{\"name\":\"feeUpdateTimestamp\",\"type\":\"uint256\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"rebalanceStartTime\",\"type\":\"uint256\"},{\"name\":\"timeToPivot\",\"type\":\"uint256\"},{\"name\":\"startPrice\",\"type\":\"uint256\"},{\"name\":\"endPrice\",\"type\":\"uint256\"},{\"name\":\"startingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"remainingCurrentSets\",\"type\":\"uint256\"},{\"name\":\"minimumBid\",\"type\":\"uint256\"},{\"name\":\"rebalanceState\",\"type\":\"uint8\"},{\"name\":\"nextSet\",\"type\":\"address\"},{\"name\":\"liquidator\",\"type\":\"address\"}],\"name\":\"\",\"type\":\"tuple\"},{\"components\":[{\"name\":\"components\",\"type\":\"address[]\"},{\"name\":\"units\",\"type\":\"uint256[]\"},{\"name\":\"naturalUnit\",\"type\":\"uint256\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"\",\"type\":\"tuple\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenAddresses\",\"type\":\"address[]\"}],\"name\":\"batchFetchSupplies\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_rebalancingSetTokens\",\"type\":\"address[]\"}],\"name\":\"batchFetchStateAndCollateral\",\"outputs\":[{\"components\":[{\"name\":\"collateralSet\",\"type\":\"address\"},{\"name\":\"state\",\"type\":\"uint8\"}],\"name\":\"\",\"type\":\"tuple[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenAddresses\",\"type\":\"address[]\"},{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"batchFetchBalancesOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"ProtocolViewer","CompilerVersion":"v0.5.7+commit.6da8b019","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","EVMVersion":"byzantium","Library":"","LicenseType":"Apache-2.0","Proxy":"0","Implementation":"","SwarmSource":"bzzr://a6b02f97560650e44789fa6528aae7cd91a91fda965df5da28e55eb6078312c4"}]}