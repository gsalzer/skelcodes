{"status":"1","message":"OK","result":[{"SourceCode":"/**\r\n *Submitted for verification at Etherscan.io on 2020-06-02\r\n*/\r\n\r\npragma experimental ABIEncoderV2;\r\npragma solidity ^0.6.0;\r\n\r\n\r\ninterface IACL {\r\n    function accessible(address sender, address to, bytes4 sig)\r\n        external\r\n        view\r\n        returns (bool);\r\n}\r\n\r\n/*\r\n * usr->logic(1,2,3)->route->data(1,2,3)\r\n */\r\ncontract Router {\r\n    address public ACL;\r\n\r\n    constructor(address _ACL) public {\r\n        ACL = _ACL;\r\n    }\r\n\r\n    modifier auth {\r\n        require(\r\n            IACL(ACL).accessible(msg.sender, address(this), msg.sig),\r\n            \"access unauthorized\"\r\n        );\r\n        _;\r\n    }\r\n\r\n    function setACL(\r\n        address _ACL) external {\r\n        require(msg.sender == ACL, \"require ACL\");\r\n        ACL = _ACL;\r\n    }\r\n\r\n    struct RouterData {\r\n        address defaultDataContract;\r\n        mapping(bytes32 => address) fields;\r\n    }\r\n\r\n    uint public bondNr;//total bond count\r\n    mapping(uint => RouterData) public routerDataMap;\r\n\r\n    function defaultDataContract(uint id) external view returns (address) {\r\n        return routerDataMap[id].defaultDataContract;\r\n    }\r\n    \r\n    function setDefaultContract(uint id, address _defaultDataContract) external auth {\r\n        routerDataMap[id].defaultDataContract = _defaultDataContract;\r\n    }\r\n\r\n    function addField(uint id, bytes32 field, address data) external auth {\r\n        routerDataMap[id].fields[field] = data;\r\n    }\r\n\r\n    function setBondNr(uint _bondNr) external auth {\r\n        bondNr = _bondNr;\r\n    }\r\n\r\n    //根据field找出合约地址\r\n    function f(uint id, bytes32 field) external view returns (address) {\r\n        if (routerDataMap[id].fields[field] != address(0)) {\r\n            return routerDataMap[id].fields[field];\r\n        }\r\n\r\n        return routerDataMap[id].defaultDataContract;\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ACL\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"ACL\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"field\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"data\",\"type\":\"address\"}],\"name\":\"addField\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"bondNr\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"}],\"name\":\"defaultDataContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"bytes32\",\"name\":\"field\",\"type\":\"bytes32\"}],\"name\":\"f\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"routerDataMap\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"defaultDataContract\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_ACL\",\"type\":\"address\"}],\"name\":\"setACL\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_bondNr\",\"type\":\"uint256\"}],\"name\":\"setBondNr\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_defaultDataContract\",\"type\":\"address\"}],\"name\":\"setDefaultContract\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"Router","CompilerVersion":"v0.6.0+commit.26b70077","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000063ad95a0fdc69269960a257c7e9bfa3629ac4dd","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"ipfs://6d6368c89e57e863feed0d7bab5fc8820dfeb629bea606915a36b3b0215e75f8"}]}