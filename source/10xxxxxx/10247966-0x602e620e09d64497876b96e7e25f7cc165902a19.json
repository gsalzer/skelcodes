{"status":"1","message":"OK","result":[{"SourceCode":"// Decentralize exchange for the token IQI 0xB9076BB251285aa70E05d38fB1c061474AeFdb7a\r\n\r\npragma solidity ^0.6.8;\r\n\r\ninterface Erc20 {\r\n    function balanceOf(address _owner) external view returns(uint256);\r\n\r\n    function transfer(address _to, uint256 _value) external returns (bool);\r\n\r\n    function transferFrom(address _from, address _to, uint256 _value) external returns (bool);\r\n}\r\n\r\ncontract Exchange {\r\n    address public token;\r\n\r\n    event Buy(address _buyer, uint256 _wei);\r\n\r\n    event Sell(address _seller, uint256 _wei);\r\n\r\n    constructor(address _token) public {\r\n        token = _token;\r\n    }\r\n\r\n    fallback() external payable {\r\n        emit Buy(msg.sender, msg.value);\r\n    }\r\n\r\n    function buy(uint256 _tokens) public payable {\r\n        require(msg.value >= weiToBuy(_tokens), \"not enough wei\");\r\n        Erc20(token).transfer(msg.sender, _tokens);\r\n\r\n        emit Buy(msg.sender, msg.value);\r\n    }\r\n\r\n    function sell(uint256 _tokens) public {\r\n        uint256 weiToPay = weiFromSell(_tokens);\r\n        require(weiToPay > 0, \"small _tokens\");\r\n        require(weiToPay <= address(this).balance, \"not enough wei\");\r\n        Erc20(token).transferFrom(msg.sender, address(this), _tokens);\r\n\r\n        msg.sender.transfer(weiToPay);\r\n\r\n        emit Sell(msg.sender, weiToPay);\r\n    }\r\n\r\n    function clean(address _contract, uint256 _value) public {\r\n        require(_contract != token, \"no _contract\");\r\n        Erc20(_contract).transfer(msg.sender, _value);\r\n    }\r\n\r\n    // @return current price in wei/token*10**18\r\n    function price() public view returns(uint256) {\r\n        return 10**18 - Erc20(token).balanceOf(address(this)) / 10000000;\r\n    }\r\n\r\n    // @return wei requires to buy provided number of tokens\r\n    function weiToBuy(uint256 _tokens) public view returns(uint256) {\r\n        require(_tokens < 10**23, \"big _tokens\");\r\n        uint256 price = price() + _tokens / 20000000;\r\n        return price * _tokens / 10**18;\r\n    }\r\n\r\n    // @return wei to receive if sell provided number of tokens\r\n    function weiFromSell(uint256 _tokens) public view returns(uint256) {\r\n        require(_tokens < 10**23, \"big _tokens\");\r\n        uint256 price = price() - _tokens / 20000000;\r\n        return price * _tokens / 10**18;\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_buyer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_wei\",\"type\":\"uint256\"}],\"name\":\"Buy\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"_seller\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"_wei\",\"type\":\"uint256\"}],\"name\":\"Sell\",\"type\":\"event\"},{\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_tokens\",\"type\":\"uint256\"}],\"name\":\"buy\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_contract\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"clean\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"price\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_tokens\",\"type\":\"uint256\"}],\"name\":\"sell\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"token\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_tokens\",\"type\":\"uint256\"}],\"name\":\"weiFromSell\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_tokens\",\"type\":\"uint256\"}],\"name\":\"weiToBuy\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"Exchange","CompilerVersion":"v0.6.9+commit.3e3065ac","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"000000000000000000000000b9076bb251285aa70e05d38fb1c061474aefdb7a","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"ipfs://17d38478e76fd61bc65eb117f6ee96b6350fc65144fdc4fa7045faf7658bf8f6"}]}