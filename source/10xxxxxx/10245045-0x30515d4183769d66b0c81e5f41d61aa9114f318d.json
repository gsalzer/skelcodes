{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.6.4;\r\n\r\n\r\ncontract CarrefourFactory {\r\n    struct Lotto {\r\n        bytes codice_tracciabilita;\r\n        bytes id_allevatore;\r\n        bytes10 data_nascita_pulcino;\r\n        bytes10 data_trasferimento_allevamento;\r\n        bytes id_owner_informazione;\r\n    }\r\n\r\n    struct Articolo {\r\n        bytes lotto; // Here a synonym of \"codice_tracciabilita\"\r\n        bytes codice_articolo;\r\n        bytes10 data_produzione;\r\n        bytes10 data_scadenza;\r\n        bytes id_stabilimento;\r\n    }\r\n\r\n    address private owner;\r\n\r\n    mapping(bytes => Lotto) private lotti;\r\n    mapping(bytes => bool) private lotto_exist;\r\n    mapping(bytes => Articolo) private articoli;\r\n    mapping(bytes => bool) private articolo_exist;\r\n\r\n    event lottoAdded(bytes codice_tracciabilita);\r\n    event articoloAdded(\r\n        bytes lotto,\r\n        bytes codice_articolo,\r\n        bytes10 data_scadenza\r\n    );\r\n\r\n    constructor() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlymanager() {\r\n        require(msg.sender == owner, \"Member not allowed\");\r\n        _;\r\n    }\r\n\r\n    function createLotto(\r\n        bytes memory codice_tracciabilita,\r\n        bytes memory id_allevatore,\r\n        bytes10 data_nascita_pulcino,\r\n        bytes10 data_trasferimento_allevamento,\r\n        bytes memory id_owner_informazione\r\n    ) public onlymanager {\r\n        require(\r\n            lotto_exist[codice_tracciabilita] == false,\r\n            \"Il lotto è già presente\"\r\n        );\r\n        require(\r\n            codice_tracciabilita.length > 0,\r\n            \"Codice tracciabilità non valido\"\r\n        );\r\n        require(id_allevatore.length > 0, \"Codice allevatore non valido\");\r\n        require(data_nascita_pulcino.length > 0, \"Data di nascita non valida\");\r\n        require(\r\n            data_trasferimento_allevamento.length > 0,\r\n            \"Data trasferimento allevamento non valida\"\r\n        );\r\n\r\n        Lotto memory lotto_tmp;\r\n        lotto_tmp.codice_tracciabilita = codice_tracciabilita;\r\n        lotto_tmp.id_allevatore = id_allevatore;\r\n        lotto_tmp.data_nascita_pulcino = data_nascita_pulcino;\r\n        lotto_tmp\r\n            .data_trasferimento_allevamento = data_trasferimento_allevamento;\r\n        lotto_tmp.id_owner_informazione = id_owner_informazione;\r\n\r\n        lotti[codice_tracciabilita] = lotto_tmp;\r\n        lotto_exist[codice_tracciabilita] = true;\r\n\r\n        emit lottoAdded(codice_tracciabilita);\r\n    }\r\n\r\n    function get_dati_lotto(bytes memory codice_tracciabilita)\r\n        public\r\n        view\r\n        returns (\r\n            bytes memory,\r\n            bytes10,\r\n            bytes10,\r\n            bytes memory\r\n        )\r\n    {\r\n        require(\r\n            codice_tracciabilita.length > 0,\r\n            \"Il codice tracciabiltà è obbligatorio\"\r\n        );\r\n        require(\r\n            lotto_exist[codice_tracciabilita] == true,\r\n            \"Il lotto non è stato trovato\"\r\n        );\r\n\r\n        return (\r\n            lotti[codice_tracciabilita].id_allevatore,\r\n            lotti[codice_tracciabilita].data_nascita_pulcino,\r\n            lotti[codice_tracciabilita].data_trasferimento_allevamento,\r\n            lotti[codice_tracciabilita].id_owner_informazione\r\n        );\r\n    }\r\n\r\n    function createArticolo(\r\n        bytes memory _lotto, // Here a synonym of \"codice_tracciabilita\"\r\n        bytes memory _codice_articolo,\r\n        bytes10 _data_produzione,\r\n        bytes10 _data_scadenza,\r\n        bytes memory _id_stabilimento\r\n    ) public onlymanager {\r\n        require(_lotto.length > 0, \"Codice tracciabilità vuoto\");\r\n        require(_codice_articolo.length > 0, \"Codice Art. vuoto\");\r\n        require(\r\n            articolo_exist[_codice_articolo] == false,\r\n            \"L'articolo è già presente\"\r\n        );\r\n        require(_data_produzione.length > 0, \"Data produzione vuota\");\r\n        require(_data_scadenza.length > 0, \"Data scadenza vuota\");\r\n        require(_id_stabilimento.length > 0, \"ID stabilimento vuoto\");\r\n\r\n        Articolo memory articolo_tmp;\r\n        articolo_tmp.lotto = _lotto;\r\n        articolo_tmp.codice_articolo = _codice_articolo;\r\n        articolo_tmp.data_produzione = _data_produzione;\r\n        articolo_tmp.data_scadenza = _data_scadenza;\r\n        articolo_tmp.id_stabilimento = _id_stabilimento;\r\n\r\n        articoli[_codice_articolo] = articolo_tmp;\r\n        articolo_exist[_codice_articolo] = true;\r\n\r\n        emit articoloAdded(_lotto, _codice_articolo, _data_scadenza);\r\n    }\r\n\r\n    function get_dati_articolo(\r\n        bytes memory codice_tracciabilita,\r\n        bytes memory codice_articolo,\r\n        bytes10 data_scadenza\r\n    )\r\n        public\r\n        view\r\n        returns (\r\n            bytes10,\r\n            bytes memory,\r\n            bytes memory,\r\n            bytes10,\r\n            bytes10\r\n        )\r\n    {\r\n        require(codice_tracciabilita.length > 0, \"Lotto non trovato\");\r\n        require(codice_articolo.length > 0, \"Codice articolo non trovato\");\r\n        require(data_scadenza.length > 0, \"Data Scadenza non trovata\");\r\n        require(\r\n            articolo_exist[codice_articolo] == true,\r\n            \"Articolo non trovato\"\r\n        );\r\n        bytes memory cod_lotto = articoli[codice_articolo].lotto;\r\n        Lotto memory lotto_tmp = lotti[cod_lotto];\r\n\r\n        return (\r\n            articoli[codice_articolo].data_produzione, // Here a synonym of \"codice_tracciabilita\"\r\n            articoli[codice_articolo].id_stabilimento,\r\n            lotto_tmp.id_allevatore,\r\n            lotto_tmp.data_nascita_pulcino,\r\n            lotto_tmp.data_trasferimento_allevamento\r\n        );\r\n    }\r\n}","ABI":"[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"lotto\",\"type\":\"bytes\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"codice_articolo\",\"type\":\"bytes\"},{\"indexed\":false,\"internalType\":\"bytes10\",\"name\":\"data_scadenza\",\"type\":\"bytes10\"}],\"name\":\"articoloAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"codice_tracciabilita\",\"type\":\"bytes\"}],\"name\":\"lottoAdded\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"_lotto\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"_codice_articolo\",\"type\":\"bytes\"},{\"internalType\":\"bytes10\",\"name\":\"_data_produzione\",\"type\":\"bytes10\"},{\"internalType\":\"bytes10\",\"name\":\"_data_scadenza\",\"type\":\"bytes10\"},{\"internalType\":\"bytes\",\"name\":\"_id_stabilimento\",\"type\":\"bytes\"}],\"name\":\"createArticolo\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"codice_tracciabilita\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"id_allevatore\",\"type\":\"bytes\"},{\"internalType\":\"bytes10\",\"name\":\"data_nascita_pulcino\",\"type\":\"bytes10\"},{\"internalType\":\"bytes10\",\"name\":\"data_trasferimento_allevamento\",\"type\":\"bytes10\"},{\"internalType\":\"bytes\",\"name\":\"id_owner_informazione\",\"type\":\"bytes\"}],\"name\":\"createLotto\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"codice_tracciabilita\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"codice_articolo\",\"type\":\"bytes\"},{\"internalType\":\"bytes10\",\"name\":\"data_scadenza\",\"type\":\"bytes10\"}],\"name\":\"get_dati_articolo\",\"outputs\":[{\"internalType\":\"bytes10\",\"name\":\"\",\"type\":\"bytes10\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"},{\"internalType\":\"bytes10\",\"name\":\"\",\"type\":\"bytes10\"},{\"internalType\":\"bytes10\",\"name\":\"\",\"type\":\"bytes10\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes\",\"name\":\"codice_tracciabilita\",\"type\":\"bytes\"}],\"name\":\"get_dati_lotto\",\"outputs\":[{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"},{\"internalType\":\"bytes10\",\"name\":\"\",\"type\":\"bytes10\"},{\"internalType\":\"bytes10\",\"name\":\"\",\"type\":\"bytes10\"},{\"internalType\":\"bytes\",\"name\":\"\",\"type\":\"bytes\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"CarrefourFactory","CompilerVersion":"v0.6.4+commit.1dca32f3","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"ipfs://b39196b34b2688b26a2b2bc42d9e3148811c4a61a29e98651b8b96c719842b13"}]}