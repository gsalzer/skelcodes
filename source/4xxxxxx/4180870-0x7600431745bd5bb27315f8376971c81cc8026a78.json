{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.15;\r\n\r\ncontract BMICOAffiliateProgramm\r\n{\r\n\tfunction add_referral(address referral, string promo, uint256 amount) external returns(address, uint256, uint256);\r\n}\r\n\r\ncontract BMPre_ICO {\r\n\tmapping (address => uint256) public holders;\r\n\tmapping (address => uint256) public holdersBonus;\r\n\tuint256 public amount_investments = 0;\r\n\tuint256 public amount_bonus = 0;\r\n\tuint256 public countHolders = 0;\r\n\r\n\tuint256 public preIcoStart = 1503219600; //20.08.2017 12:00 MSK\r\n\tuint256 public preIcoEnd = 1504990800; //10.00.2017 00:00 MSK\r\n\tuint256 public lastCallstopPreICO = 1503219600;\r\n\r\n\tuint256 public minSizeInvest = 100 finney;\r\n\r\n\taddress public owner;\r\n\taddress public affiliate;\r\n\tBMICOAffiliateProgramm contractAffiliate;\r\n\r\n\tevent Investment(address holder, uint256 value);\r\n\tevent EndPreICO(uint256 EndDate);\r\n\r\n\tfunction BMPre_ICO()\r\n\t{\r\n\t\towner = msg.sender;\r\n\t\taffiliate = address(0x0);\r\n\t}\r\n\r\n\tmodifier isOwner()\r\n\t{\r\n\t\tassert(msg.sender == owner);\r\n\t\t_;\r\n\t}\r\n\r\n\tfunction changeOwner(address new_owner) isOwner {\r\n\t\tassert(new_owner!=address(0x0));\r\n\t\tassert(new_owner!=address(this));\r\n\t\towner = new_owner;\r\n\t}\r\n\r\n\tfunction setAffiliateContract(address new_address) isOwner {\r\n\t\tassert(new_address!=address(0x0));\r\n\t\tassert(new_address!=address(this));\r\n\t\taffiliate = new_address;\r\n\t\tcontractAffiliate = BMICOAffiliateProgramm(new_address);\r\n\t}\r\n\r\n\tfunction getDataHolders(address holder) external constant returns(uint256)\r\n\t{\r\n\t\treturn holders[holder];\r\n\t}\r\n\r\n\tfunction getDataHoldersRefBonus(address holder) external constant returns(uint256)\r\n\t{\r\n\t\treturn holdersBonus[holder];\r\n\t}\r\n\r\n\tuint256 public stopBlock = 0;\r\n\r\n\tfunction stopPreIco_step1() {\r\n\t\tassert(now - lastCallstopPreICO > 12 hours);\r\n\t\tlastCallstopPreICO = now;\r\n\r\n\t\tstopBlock = block.number + 5;\r\n\t}\r\n\r\n\tfunction stopPreIco_step2()\r\n\t{\r\n\t\tif (stopBlock != 0 && stopBlock < block.number)\r\n\t\t{\r\n\t\t\tbytes32 hash = block.blockhash(stopBlock);\r\n\t\t\tif (uint256(hash) > 0)\r\n\t\t\t{\r\n\t\t\t\tuint8 value = uint8(uint256(sha3(hash, msg.sender)) % 100);\r\n\t\t\t\tuint8 limit = uint8((amount_investments*100)/100000000000000000000000);\r\n\r\n\t\t\t\tif(value < limit)\r\n\t\t\t\t{\r\n\t\t\t\t\tif(preIcoEnd - now > 1 days)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpreIcoEnd -= 1 days;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tEndPreICO(preIcoEnd);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tstopBlock = 0;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction sendInvestmentsToOwner() isOwner {\r\n\t\tassert(now >= preIcoEnd);\r\n\t\towner.transfer(this.balance);\r\n\t}\r\n\r\n\tfunction buy(string promo) payable {\r\n\t\tassert(now < preIcoEnd);\r\n\t\tassert(now >= preIcoStart);\r\n\t\tassert(msg.value>=minSizeInvest);\r\n\r\n\t\tif(holders[msg.sender] == 0){\r\n\t\t\tcountHolders += 1;\r\n\t\t}\r\n\t\tholders[msg.sender] += msg.value;\r\n\t\tamount_investments += msg.value;\r\n\t\tInvestment(msg.sender, msg.value);\r\n\r\n\t\tif(affiliate != address(0x0)){\r\n\t\t\tvar (partner_address, partner_bonus, referral_bonus) = contractAffiliate.add_referral(msg.sender, promo, msg.value);\r\n\t\t\tif(partner_bonus > 0 && partner_address != address(0x0)){\r\n\t\t\t\tholdersBonus[partner_address] += msg.value;\r\n\t\t\t\tamount_bonus += msg.value;\r\n\t\t\t}\r\n\t\t\tif(referral_bonus > 0){\r\n\t\t\t\tholdersBonus[msg.sender] = referral_bonus;\r\n\t\t\t\tamount_bonus += referral_bonus;\r\n\t\t\t}\r\n\t\t}\r\n\t\tstopPreIco_step2();\r\n\t}\r\n\r\n\tfunction () payable {\r\n\t\tbuy('');\r\n\t}\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"countHolders\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"minSizeInvest\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"holders\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"preIcoStart\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"holdersBonus\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"stopBlock\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"affiliate\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"promo\",\"type\":\"string\"}],\"name\":\"buy\",\"outputs\":[],\"payable\":true,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"amount_investments\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"preIcoEnd\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"amount_bonus\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"sendInvestmentsToOwner\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"new_owner\",\"type\":\"address\"}],\"name\":\"changeOwner\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"stopPreIco_step2\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"new_address\",\"type\":\"address\"}],\"name\":\"setAffiliateContract\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"holder\",\"type\":\"address\"}],\"name\":\"getDataHoldersRefBonus\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"holder\",\"type\":\"address\"}],\"name\":\"getDataHolders\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lastCallstopPreICO\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"stopPreIco_step1\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"type\":\"constructor\"},{\"payable\":true,\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"holder\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Investment\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"EndDate\",\"type\":\"uint256\"}],\"name\":\"EndPreICO\",\"type\":\"event\"}]","ContractName":"BMPre_ICO","CompilerVersion":"v0.4.15+commit.bbb8e64f","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://c5b860031172f7f2bfe2e6b51d9f95d09c18d6269b7b67dfdfde0455d5a0ebd9"}]}