{"status":"1","message":"OK","result":[{"SourceCode":"// Copyright (c) 2017 Sweetbridge Stiftung (Sweetbridge Foundation)\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\n/// math.sol -- mixin for inline numerical wizardry\r\n\r\n// Copyright (C) 2015, 2016, 2017  DappHub, LLC\r\n\r\n// Licensed under the Apache License, Version 2.0 (the \"License\").\r\n// You may not use this file except in compliance with the License.\r\n\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND (express or implied).\r\n\r\npragma solidity ^0.4.17;\r\n\r\n\r\nlibrary Math {\r\n\r\n    // standard uint256 functions\r\n    function add(uint256 x, uint256 y) pure internal returns (uint256 z) {\r\n        require((z = x + y) >= x);\r\n    }\r\n\r\n    function sub(uint256 x, uint256 y) pure internal returns (uint256 z) {\r\n        require((z = x - y) <= x);\r\n    }\r\n\r\n    function mul(uint256 x, uint256 y) pure internal returns (uint256 z) {\r\n        z = x * y;\r\n        require((z == 0 && (x == 0 || y == 0)) || z >= (x > y ? x : y));\r\n    }\r\n\r\n    //division by zero is ignored and returns zero\r\n    function div(uint256 x, uint256 y) pure internal returns (uint256 z) {\r\n        z = y > 0 ? x / y : 0;\r\n    }\r\n\r\n    function min(uint256 x, uint256 y) pure internal returns (uint256 z) {\r\n        return x <= y ? x : y;\r\n    }\r\n\r\n    function max(uint256 x, uint256 y) pure internal returns (uint256 z) {\r\n        return x >= y ? x : y;\r\n    }\r\n\r\n    /*\r\n    uint128 functions (h is for half)\r\n     */\r\n\r\n    function hadd(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        require((z = x + y) >= x);\r\n    }\r\n\r\n    function hsub(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        require((z = x - y) <= x);\r\n    }\r\n\r\n    function hmul(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        require((z = x * y) >= x);\r\n    }\r\n\r\n    function hdiv(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        require(y > 0);\r\n        z = x / y;\r\n    }\r\n\r\n    function hmin(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        return x <= y ? x : y;\r\n    }\r\n\r\n    function hmax(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        return x >= y ? x : y;\r\n    }\r\n\r\n    /*\r\n    int256 functions\r\n     */\r\n\r\n    function imin(int256 x, int256 y) pure internal returns (int256 z) {\r\n        return x <= y ? x : y;\r\n    }\r\n\r\n    function imax(int256 x, int256 y) pure internal returns (int256 z) {\r\n        return x >= y ? x : y;\r\n    }\r\n\r\n    /*\r\n    WAD math\r\n     */\r\n\r\n    uint128 constant WAD = 10 ** 18;\r\n\r\n    function wadd(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hadd(x, y);\r\n    }\r\n\r\n    function wsub(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hsub(x, y);\r\n    }\r\n\r\n    function wmul(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        z = cast((uint256(x) * y + WAD / 2) / WAD);\r\n    }\r\n\r\n    function wdiv(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        z = cast((uint256(x) * WAD + y / 2) / y);\r\n    }\r\n\r\n    function wmin(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hmin(x, y);\r\n    }\r\n\r\n    function wmax(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hmax(x, y);\r\n    }\r\n\r\n    /*\r\n    RAY math\r\n     */\r\n\r\n    uint128 constant RAY = 10 ** 27;\r\n\r\n    function radd(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hadd(x, y);\r\n    }\r\n\r\n    function rsub(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hsub(x, y);\r\n    }\r\n\r\n    function rmul(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        z = cast((uint256(x) * y + RAY / 2) / RAY);\r\n    }\r\n\r\n    function rdiv(uint128 x, uint128 y) pure internal returns (uint128 z) {\r\n        z = cast((uint256(x) * RAY + y / 2) / y);\r\n    }\r\n\r\n    function rpow(uint128 x, uint64 n) pure internal returns (uint128 z) {\r\n        // This famous algorithm is called \"exponentiation by squaring\"\r\n        // and calculates x^n with x as fixed-point and n as regular unsigned.\r\n        //\r\n        // It's O(log n), instead of O(n) for naive repeated multiplication.\r\n        //\r\n        // These facts are why it works:\r\n        //\r\n        //  If n is even, then x^n = (x^2)^(n/2).\r\n        //  If n is odd,  then x^n = x * x^(n-1),\r\n        //   and applying the equation for even x gives\r\n        //    x^n = x * (x^2)^((n-1) / 2).\r\n        //\r\n        //  Also, EVM division is flooring and\r\n        //    floor[(n-1) / 2] = floor[n / 2].\r\n\r\n        z = n % 2 != 0 ? x : RAY;\r\n\r\n        for (n /= 2; n != 0; n /= 2) {\r\n            x = rmul(x, x);\r\n\r\n            if (n % 2 != 0) {\r\n                z = rmul(z, x);\r\n            }\r\n        }\r\n    }\r\n\r\n    function rmin(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hmin(x, y);\r\n    }\r\n\r\n    function rmax(uint128 x, uint128 y) pure internal returns (uint128) {\r\n        return hmax(x, y);\r\n    }\r\n\r\n    function cast(uint256 x) pure internal returns (uint128 z) {\r\n        require((z = uint128(x)) == x);\r\n    }\r\n}\r\n\r\ncontract OwnedEvents {\r\n    event LogSetOwner (address newOwner);\r\n}\r\n\r\n\r\ncontract Owned is OwnedEvents {\r\n    address public owner;\r\n\r\n    function Owned() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlyOwner() {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    function setOwner(address owner_) public onlyOwner {\r\n        owner = owner_;\r\n        LogSetOwner(owner);\r\n    }\r\n\r\n}\r\n\r\ninterface SecuredWithRolesI {\r\n    function hasRole(string roleName) public view returns (bool);\r\n    function senderHasRole(string roleName) public view returns (bool);\r\n    function contractHash() public view returns (bytes32);\r\n}\r\n\r\n\r\ncontract SecuredWithRoles is Owned {\r\n    RolesI public roles;\r\n    bytes32 public contractHash;\r\n    bool public stopped = false;\r\n\r\n    function SecuredWithRoles(string contractName_, address roles_) public {\r\n        contractHash = keccak256(contractName_);\r\n        roles = RolesI(roles_);\r\n    }\r\n\r\n    modifier stoppable() {\r\n        require(!stopped);\r\n        _;\r\n    }\r\n\r\n    modifier onlyRole(string role) {\r\n        require(senderHasRole(role));\r\n        _;\r\n    }\r\n\r\n    modifier roleOrOwner(string role) {\r\n        require(msg.sender == owner || senderHasRole(role));\r\n        _;\r\n    }\r\n\r\n    // returns true if the role has been defined for the contract\r\n    function hasRole(string roleName) public view returns (bool) {\r\n        return roles.knownRoleNames(contractHash, keccak256(roleName));\r\n    }\r\n\r\n    function senderHasRole(string roleName) public view returns (bool) {\r\n        return hasRole(roleName) && roles.roleList(contractHash, keccak256(roleName), msg.sender);\r\n    }\r\n\r\n    function stop() public roleOrOwner(\"stopper\") {\r\n        stopped = true;\r\n    }\r\n\r\n    function restart() public roleOrOwner(\"restarter\") {\r\n        stopped = false;\r\n    }\r\n\r\n    function setRolesContract(address roles_) public onlyOwner {\r\n        // it must not be possible to change the roles contract on the roles contract itself\r\n        require(this != address(roles));\r\n        roles = RolesI(roles_);\r\n    }\r\n\r\n}\r\n\r\n\r\ninterface RolesI {\r\n    function knownRoleNames(bytes32 contractHash, bytes32 nameHash) public view returns (bool);\r\n    function roleList(bytes32 contractHash, bytes32 nameHash, address member) public view returns (bool);\r\n\r\n    function addContractRole(bytes32 ctrct, string roleName) public;\r\n    function removeContractRole(bytes32 ctrct, string roleName) public;\r\n    function grantUserRole(bytes32 ctrct, string roleName, address user) public;\r\n    function revokeUserRole(bytes32 ctrct, string roleName, address user) public;\r\n}\r\n\r\n\r\ncontract RolesEvents {\r\n    event LogRoleAdded(bytes32 contractHash, string roleName);\r\n    event LogRoleRemoved(bytes32 contractHash, string roleName);\r\n    event LogRoleGranted(bytes32 contractHash, string roleName, address user);\r\n    event LogRoleRevoked(bytes32 contractHash, string roleName, address user);\r\n}\r\n\r\n\r\ncontract Roles is RolesEvents, SecuredWithRoles {\r\n    // mapping is contract -> role -> sender_address -> boolean\r\n    mapping(bytes32 => mapping (bytes32 => mapping (address => bool))) public roleList;\r\n    // the intention is\r\n    mapping (bytes32 => mapping (bytes32 => bool)) public knownRoleNames;\r\n\r\n    function Roles() SecuredWithRoles(\"RolesRepository\", this) public {}\r\n\r\n    function addContractRole(bytes32 ctrct, string roleName) public roleOrOwner(\"admin\") {\r\n        require(!knownRoleNames[ctrct][keccak256(roleName)]);\r\n        knownRoleNames[ctrct][keccak256(roleName)] = true;\r\n        LogRoleAdded(ctrct, roleName);\r\n    }\r\n\r\n    function removeContractRole(bytes32 ctrct, string roleName) public roleOrOwner(\"admin\") {\r\n        require(knownRoleNames[ctrct][keccak256(roleName)]);\r\n        delete knownRoleNames[ctrct][keccak256(roleName)];\r\n        LogRoleRemoved(ctrct, roleName);\r\n    }\r\n\r\n    function grantUserRole(bytes32 ctrct, string roleName, address user) public roleOrOwner(\"admin\") {\r\n        require(knownRoleNames[ctrct][keccak256(roleName)]);\r\n        roleList[ctrct][keccak256(roleName)][user] = true;\r\n        LogRoleGranted(ctrct, roleName, user);\r\n    }\r\n\r\n    function revokeUserRole(bytes32 ctrct, string roleName, address user) public roleOrOwner(\"admin\") {\r\n        delete roleList[ctrct][keccak256(roleName)][user];\r\n        LogRoleRevoked(ctrct, roleName, user);\r\n    }\r\n\r\n}\r\n\r\n// Token standard API\r\n// https://github.com/ethereum/EIPs/issues/20\r\ncontract ERC20Events {\r\n    event Transfer( address indexed from, address indexed to, uint256 value);\r\n    event Approval( address indexed owner, address indexed spender, uint256 value);\r\n}\r\n\r\n\r\ncontract ERC20 is ERC20Events {\r\n    function totalSupply() public view returns (uint256 supply);\r\n    function balanceOf( address who ) public  view returns (uint256 value);\r\n    function allowance( address owner, address spender ) public view returns (uint256 _allowance);\r\n\r\n    function transfer( address to, uint256 value) public returns (bool ok);\r\n    function transferFrom( address from, address to, uint256 value) public returns (bool ok);\r\n    function approve( address spender, uint256 value ) public returns (bool ok);\r\n\r\n}\r\n\r\ncontract TokenData is Owned {\r\n    uint256 public supply;\r\n    mapping (address => uint256) public balances;\r\n    mapping (address => mapping (address => uint256)) public approvals;\r\n    address logic;\r\n\r\n    modifier onlyLogic {\r\n        assert(msg.sender == logic);\r\n        _;\r\n    }\r\n\r\n    function TokenData(address logic_, address owner_) public {\r\n        logic = logic_;\r\n        owner = owner_;\r\n        balances[owner] = supply;\r\n    }\r\n\r\n    function setTokenLogic(address logic_) public onlyLogic {\r\n        logic = logic_;\r\n    }\r\n\r\n    function setSupply(uint256 supply_) public onlyLogic {\r\n        supply = supply_;\r\n    }\r\n\r\n    function setBalances(address guy, uint256 balance) public onlyLogic {\r\n        balances[guy] = balance;\r\n    }\r\n\r\n    function setApprovals(address src, address guy, uint256 wad) public onlyLogic {\r\n        approvals[src][guy] = wad;\r\n    }\r\n\r\n\r\n}\r\n\r\ninterface TokenI {\r\n    function totalSupply() public view returns (uint256 supply);\r\n    function balanceOf( address who ) public  view returns (uint256 value);\r\n    function allowance( address owner, address spender ) public view returns (uint256 _allowance);\r\n\r\n    function triggerTransfer(address src, address dst, uint256 wad);\r\n    function transfer( address to, uint256 value) public returns (bool ok);\r\n    function transferFrom( address from, address to, uint256 value) public returns (bool ok);\r\n    function approve( address spender, uint256 value ) public returns (bool ok);\r\n\r\n    function mintFor(address recipient, uint256 wad) public;\r\n}\r\n\r\ninterface TokenLogicI {\r\n    // we have slightly different interface then ERC20, because\r\n    function totalSupply() public view returns (uint256 supply);\r\n    function balanceOf( address who ) public view returns (uint256 value);\r\n    function allowance( address owner, address spender ) public view returns (uint256 _allowance);\r\n    function transferFrom( address from, address to, uint256 value) public returns (bool ok);\r\n    // this two functions are different from ERC20. ERC20 assumes that msg.sender is the owner,\r\n    // but because logic contract is behind a proxy we need to add an owner parameter.\r\n    function transfer( address owner, address to, uint256 value) public returns (bool ok);\r\n    function approve( address owner, address spender, uint256 value ) public returns (bool ok);\r\n\r\n    function setToken(address token_) public;\r\n    function mintFor(address dest, uint256 wad) public;\r\n    function burn(address src, uint256 wad) public;\r\n}\r\n\r\n\r\ncontract TokenLogicEvents {\r\n    event WhiteListAddition(bytes32 listName);\r\n    event AdditionToWhiteList(bytes32 listName, address guy);\r\n    event WhiteListRemoval(bytes32 listName);\r\n    event RemovalFromWhiteList(bytes32 listName, address guy);\r\n}\r\n\r\n\r\ncontract TokenLogic is TokenLogicEvents, TokenLogicI, SecuredWithRoles {\r\n\r\n    TokenData public data;\r\n    Token public token;     // facade: Token.sol:Token\r\n\r\n    /* White lists are used to restrict who can transact with whom.\r\n     * Since we can't iterate over the mapping we need to store the keys separaterly in the\r\n     *   listNames\r\n     */\r\n    bytes32[] public listNames;\r\n    mapping (address => mapping (bytes32 => bool)) public whiteLists;\r\n    // by default there is no need for white listing addresses, anyone can transact freely\r\n    bool public freeTransfer = true;\r\n\r\n    function TokenLogic(\r\n        address token_,\r\n        address tokenData_,\r\n        address rolesContract) public SecuredWithRoles(\"TokenLogic\", rolesContract)\r\n    {\r\n        require(token_ != address(0x0));\r\n        require(rolesContract != address(0x0));\r\n\r\n        token = Token(token_);\r\n        if (tokenData_ == address(0x0)) {\r\n            data = new TokenData(this, msg.sender);\r\n        } else {\r\n            data = TokenData(tokenData_);\r\n        }\r\n    }\r\n\r\n    modifier tokenOnly {\r\n        assert(msg.sender == address(token));\r\n        _;\r\n    }\r\n\r\n    /* check that freeTransfer is true or that the owner is involved or both sender and recipient are in the same whitelist*/\r\n    modifier canTransfer(address src, address dst) {\r\n        require(freeTransfer || src == owner || dst == owner || sameWhiteList(src, dst));\r\n        _;\r\n    }\r\n\r\n    function sameWhiteList(address src, address dst) internal view returns(bool) {\r\n        for(uint8 i = 0; i < listNames.length; i++) {\r\n            bytes32 listName = listNames[i];\r\n            if(whiteLists[src][listName] && whiteLists[dst][listName]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function listNamesLen() public view returns (uint256) {\r\n        return listNames.length;\r\n    }\r\n\r\n    function listExists(bytes32 listName) public view returns (bool) {\r\n        var (, ok) = indexOf(listName);\r\n        return ok;\r\n    }\r\n\r\n    function indexOf(bytes32 listName) public view returns (uint8, bool) {\r\n        for(uint8 i = 0; i < listNames.length; i++) {\r\n            if(listNames[i] == listName) {\r\n                return (i, true);\r\n            }\r\n        }\r\n        return (0, false);\r\n    }\r\n\r\n    function replaceLogic(address newLogic) public onlyOwner {\r\n        token.setLogic(TokenLogicI(newLogic));\r\n        data.setTokenLogic(newLogic);\r\n        selfdestruct(owner);\r\n    }\r\n\r\n    /* creating a removeWhiteList would be too onerous. Therefore it does not exist*/\r\n    function addWhiteList(bytes32 listName) public onlyRole(\"admin\") {\r\n        require(! listExists(listName));\r\n        require(listNames.length < 256);\r\n        listNames.push(listName);\r\n        WhiteListAddition(listName);\r\n    }\r\n\r\n    function removeWhiteList(bytes32 listName) public onlyRole(\"admin\") {\r\n        var (i, ok) = indexOf(listName);\r\n        require(ok);\r\n        if(i < listNames.length - 1) {\r\n            listNames[i] = listNames[listNames.length - 1];\r\n        }\r\n        delete listNames[listNames.length - 1];\r\n        --listNames.length;\r\n        WhiteListRemoval(listName);\r\n    }\r\n\r\n    function addToWhiteList(bytes32 listName, address guy) public onlyRole(\"userManager\") {\r\n        require(listExists(listName));\r\n\r\n        whiteLists[guy][listName] = true;\r\n        AdditionToWhiteList(listName, guy);\r\n    }\r\n\r\n    function removeFromWhiteList(bytes32 listName, address guy) public onlyRole(\"userManager\") {\r\n        require(listExists(listName));\r\n\r\n        whiteLists[guy][listName] = false;\r\n        RemovalFromWhiteList(listName, guy);\r\n    }\r\n\r\n    function setFreeTransfer(bool isFree) public onlyOwner {\r\n        freeTransfer = isFree;\r\n    }\r\n\r\n    function setToken(address token_) public onlyOwner {\r\n        token = Token(token_);\r\n    }\r\n\r\n    function totalSupply() public view returns (uint256) {\r\n        return data.supply();\r\n    }\r\n\r\n    function balanceOf(address src) public view returns (uint256) {\r\n        return data.balances(src);\r\n    }\r\n\r\n    function allowance(address src, address spender) public view returns (uint256) {\r\n        return data.approvals(src, spender);\r\n    }\r\n\r\n    function transfer(address src, address dst, uint256 wad) public tokenOnly canTransfer(src, dst)  returns (bool) {\r\n        // balance check is not needed because sub(a, b) will throw if a<b\r\n        data.setBalances(src, Math.sub(data.balances(src), wad));\r\n        data.setBalances(dst, Math.add(data.balances(dst), wad));\r\n\r\n        return true;\r\n    }\r\n\r\n    function transferFrom(address src, address dst, uint256 wad) public tokenOnly canTransfer(src, dst)  returns (bool) {\r\n        // balance and approval check is not needed because sub(a, b) will throw if a<b\r\n        data.setApprovals(src, dst, Math.sub(data.approvals(src, dst), wad));\r\n        data.setBalances(src, Math.sub(data.balances(src), wad));\r\n        data.setBalances(dst, Math.add(data.balances(dst), wad));\r\n\r\n        return true;\r\n    }\r\n\r\n    function approve(address src, address dst, uint256 wad) public tokenOnly returns (bool) {\r\n        data.setApprovals(src, dst, wad);\r\n        return true;\r\n    }\r\n\r\n    function mintFor(address dst, uint256 wad) public tokenOnly {\r\n        data.setBalances(dst, Math.add(data.balances(dst), wad));\r\n        data.setSupply(Math.add(data.supply(), wad));\r\n    }\r\n\r\n    function burn(address src, uint256 wad) public tokenOnly {\r\n        data.setBalances(src, Math.sub(data.balances(src), wad));\r\n        data.setSupply(Math.sub(data.supply(), wad));\r\n    }\r\n}\r\n\r\ncontract TokenEvents {\r\n    event LogBurn(address indexed src, uint256 wad);\r\n    event LogMint(address indexed src, uint256 wad);\r\n    event LogLogicReplaced(address newLogic);\r\n    event Transfer(address indexed from, address indexed to, uint256 value);\r\n    event Approval(address indexed owner, address indexed spender, uint256 value);\r\n}\r\n\r\n/**\r\n * @title Contract that will work with ERC223 tokens.\r\n */\r\ninterface ERC223ReceivingContract {\r\n    /**\r\n     * @dev Standard ERC223 function that will handle incoming token transfers.\r\n     *\r\n     * @param src  Token sender address.\r\n     * @param wad  Amount of tokens.\r\n     * @param _data  Transaction metadata.\r\n     */\r\n    function tokenFallback(address src, uint wad, bytes _data) public;\r\n}\r\n\r\ncontract Token is TokenI, SecuredWithRoles, TokenEvents {\r\n    string public symbol;\r\n    string public name; // Optional token name\r\n    uint8 public decimals = 18; // standard token precision. override to customize\r\n    TokenLogicI public logic;\r\n\r\n    function Token(string name_, string symbol_, address rolesContract) public SecuredWithRoles(name_, rolesContract) {\r\n        // you can't create logic here, because this contract would be the owner.\r\n        name = name_;\r\n        symbol = symbol_;\r\n    }\r\n\r\n    modifier logicOnly {\r\n        require(address(logic) == address(0x0) || address(logic) == msg.sender);\r\n        _;\r\n    }\r\n\r\n    function totalSupply() public view returns (uint256) {\r\n        return logic.totalSupply();\r\n    }\r\n\r\n    function balanceOf( address who ) public view returns (uint256 value) {\r\n        return logic.balanceOf(who);\r\n    }\r\n\r\n    function allowance(address owner, address spender ) public view returns (uint256 _allowance) {\r\n        return logic.allowance(owner, spender);\r\n    }\r\n\r\n    function triggerTransfer(address src, address dst, uint256 wad) logicOnly {\r\n        Transfer(src, dst, wad);\r\n    }\r\n\r\n    function setLogic(address logic_) public logicOnly {\r\n        assert(logic_ != address(0));\r\n        logic = TokenLogicI(logic_);\r\n        LogLogicReplaced(logic);\r\n    }\r\n\r\n    /**\r\n     * @dev Transfer the specified amount of tokens to the specified address.\r\n     *      Invokes the `tokenFallback` function if the recipient is a contract.\r\n     *      The token transfer fails if the recipient is a contract\r\n     *      but does not implement the `tokenFallback` function\r\n     *      or the fallback function to receive funds.\r\n     */\r\n    function transfer(address dst, uint256 wad) public stoppable returns (bool) {\r\n        bool retVal = logic.transfer(msg.sender, dst, wad);\r\n        if (retVal) {\r\n            uint codeLength;\r\n            assembly {\r\n            // Retrieve the size of the code on target address, this needs assembly .\r\n                codeLength := extcodesize(dst)\r\n            }\r\n            if (codeLength>0) {\r\n                ERC223ReceivingContract receiver = ERC223ReceivingContract(dst);\r\n                bytes memory empty;\r\n                receiver.tokenFallback(msg.sender, wad, empty);\r\n            }\r\n\r\n            Transfer(msg.sender, dst, wad);\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    function transferFrom(address src, address dst, uint256 wad) public stoppable returns (bool) {\r\n        bool retVal = logic.transferFrom(src, dst, wad);\r\n        if (retVal) {\r\n            uint codeLength;\r\n            assembly {\r\n            // Retrieve the size of the code on target address, this needs assembly .\r\n                codeLength := extcodesize(dst)\r\n            }\r\n            if (codeLength>0) {\r\n                ERC223ReceivingContract receiver = ERC223ReceivingContract(dst);\r\n                bytes memory empty;\r\n                receiver.tokenFallback(src, wad, empty);\r\n            }\r\n\r\n            Transfer(src, dst, wad);\r\n        }\r\n        return retVal;\r\n    }\r\n\r\n    function approve(address guy, uint256 wad) public stoppable returns (bool) {\r\n        bool ok = logic.approve(msg.sender, guy, wad);\r\n        if (ok)\r\n            Approval(msg.sender, guy, wad);\r\n        return ok;\r\n    }\r\n\r\n    function pull(address src, uint256 wad) public stoppable returns (bool) {\r\n        return transferFrom(src, msg.sender, wad);\r\n    }\r\n\r\n    function mintFor(address recipient, uint256 wad) public stoppable onlyRole(\"minter\") {\r\n        logic.mintFor(recipient, wad);\r\n        LogMint(recipient, wad);\r\n        Transfer(address(0x0), recipient, wad);\r\n    }\r\n\r\n    function burn(uint256 wad) public stoppable {\r\n        logic.burn(msg.sender, wad);\r\n        LogBurn(msg.sender, wad);\r\n    }\r\n\r\n    function setName(string name_) public roleOrOwner(\"admin\") {\r\n        name = name_;\r\n    }\r\n}\r\n\r\ncontract SweetTokenLogic is TokenLogic {\r\n\r\n    function SweetTokenLogic(\r\n        address token_,\r\n        address tokenData_,\r\n        address rolesContract,\r\n        address[] initialWallets,\r\n        uint256[] initialBalances)\r\n    TokenLogic(token_, tokenData_, rolesContract) public\r\n    {\r\n        if (tokenData_ == address(0x0)) {\r\n            uint256 totalSupply;\r\n            require(initialBalances.length == initialWallets.length);\r\n            for (uint256 i = 0; i < initialWallets.length; i++) {\r\n                data.setBalances(initialWallets[i], initialBalances[i]);\r\n                token.triggerTransfer(address(0x0), initialWallets[i], initialBalances[i]);\r\n                totalSupply = Math.add(totalSupply, initialBalances[i]);\r\n            }\r\n            data.setSupply(totalSupply);\r\n        }\r\n    }\r\n\r\n    function mintFor(address, uint256) public tokenOnly {\r\n        // no more SweetTokens can be minted after the initial mint\r\n        assert(false);\r\n    }\r\n\r\n    function burn(address, uint256) public tokenOnly {\r\n        // burning is not possible\r\n        assert(false);\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[],\"name\":\"stop\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"owner_\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"token_\",\"type\":\"address\"}],\"name\":\"setToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"roleName\",\"type\":\"string\"}],\"name\":\"senderHasRole\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"restart\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"listNamesLen\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"freeTransfer\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"src\",\"type\":\"address\"},{\"name\":\"dst\",\"type\":\"address\"},{\"name\":\"wad\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"isFree\",\"type\":\"bool\"}],\"name\":\"setFreeTransfer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"roles\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"listName\",\"type\":\"bytes32\"}],\"name\":\"addWhiteList\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"listName\",\"type\":\"bytes32\"},{\"name\":\"guy\",\"type\":\"address\"}],\"name\":\"removeFromWhiteList\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"whiteLists\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"listNames\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"listName\",\"type\":\"bytes32\"},{\"name\":\"guy\",\"type\":\"address\"}],\"name\":\"addToWhiteList\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"listName\",\"type\":\"bytes32\"}],\"name\":\"indexOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"src\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"data\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"stopped\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"contractHash\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"listName\",\"type\":\"bytes32\"}],\"name\":\"listExists\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"listName\",\"type\":\"bytes32\"}],\"name\":\"removeWhiteList\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"burn\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"roles_\",\"type\":\"address\"}],\"name\":\"setRolesContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"src\",\"type\":\"address\"},{\"name\":\"dst\",\"type\":\"address\"},{\"name\":\"wad\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newLogic\",\"type\":\"address\"}],\"name\":\"replaceLogic\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"mintFor\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"src\",\"type\":\"address\"},{\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"src\",\"type\":\"address\"},{\"name\":\"dst\",\"type\":\"address\"},{\"name\":\"wad\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"roleName\",\"type\":\"string\"}],\"name\":\"hasRole\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"token\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"token_\",\"type\":\"address\"},{\"name\":\"tokenData_\",\"type\":\"address\"},{\"name\":\"rolesContract\",\"type\":\"address\"},{\"name\":\"initialWallets\",\"type\":\"address[]\"},{\"name\":\"initialBalances\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"LogSetOwner\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"listName\",\"type\":\"bytes32\"}],\"name\":\"WhiteListAddition\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"listName\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"guy\",\"type\":\"address\"}],\"name\":\"AdditionToWhiteList\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"listName\",\"type\":\"bytes32\"}],\"name\":\"WhiteListRemoval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"listName\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"guy\",\"type\":\"address\"}],\"name\":\"RemovalFromWhiteList\",\"type\":\"event\"}]","ContractName":"SweetTokenLogic","CompilerVersion":"v0.4.18+commit.9cf6e910","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"000000000000000000000000ff32d68d8a4608fba6b51f07d1f138a63a1492110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000faf52e46655b947841c0c3699b261ea5a805875e00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000006e00000000000000000000000000000000000000000000000000000000000000031000000000000000000000000011f84ec0576907ad61154046a85797aa51716b3000000000000000000000000350b12fbd92cd7b8a7373adc2543bf76214b101a000000000000000000000000f6c3b2281f8ea0c22aa67ad2e33152a39387c362000000000000000000000000f32db75e1856ba670204bac983f2c92f833b9b340000000000000000000000004d529fcb0639d2257d527611dcd1ab1382a7443d0000000000000000000000002c9adbd6321139e7db06e3a0c9ae475bd75d5329000000000000000000000000ad253ff81b741ae387163384c1062b242f595ec70000000000000000000000003334dd77778c5e286f69e9cb9003c2d672199bdd0000000000000000000000007ae33b6085870d73ea3998c29c9e1727130a5b8e000000000000000000000000d8cff476a58cc9142380fbee13710d16cb4fb0ce000000000000000000000000ebb62087b4193848bc98e7f17833175b26a46f050000000000000000000000003f8271511e4914b45f7c0f2d2836c7b6c7a05125000000000000000000000000c3c5f789e5f95f8e415e4119a67b74efcfcd8598000000000000000000000000a08ef5234c299242bf0d85ed0d06f118f5ec284a000000000000000000000000616a91a02cc076d9bad2fa8ff83808edef7ac08b0000000000000000000000008fd251152f96330d5c40da06daf8e8d86f3426a30000000000000000000000006d99254dea55eeb5dfeaef946ce6951c10bd5231000000000000000000000000c61433b46dc288565b9e4d7355cb037ebb3d52c2000000000000000000000000c25528d4c24f6aa08e9803e5ed8bf8aa9bf78246000000000000000000000000e593db5baf3cf3b5d49985330fb94044b6828d63000000000000000000000000579b1d8f7dba42757681b76b3b68fe1e07fb31eb0000000000000000000000009d1a6fdb52c01ce196109213e1be012ff26e8db80000000000000000000000005beb881700ee2842c3da859ca84f367d010b1279000000000000000000000000ba2b3bfed434a497df7ee1c50762452db9e19d4d000000000000000000000000705db14269e9b74c4663d8f340d6757fe48663e1000000000000000000000000a37eb3e97f75d15f6e39d13d75777012b9b4f674000000000000000000000000854bc7136237c3491642221c1fe17559d25c3eb5000000000000000000000000e35c9483d13026d745f4a97450ebb1d91548f4480000000000000000000000006efe071f036ed84a749c31bfdd33f4528c0755060000000000000000000000003d2af837f53392ce33d2f3fe61343e6e07ba3aa8000000000000000000000000209326115b6e1991f5afce647a56df658fb5d03800000000000000000000000069b854b6e8c709b0311a5ca525d336d120f23e870000000000000000000000004b6d23f38d69d149119d427d295c62de66028f48000000000000000000000000266d9df140d1dc4c29ecc1b9373867e1481110a200000000000000000000000029ed14f81957987f8db0e123ada33495f3a212c80000000000000000000000001564b9fb768671f19d00fbff88830bb3a85c1c05000000000000000000000000d1b3ebeee495e8d9d77a115f0311be05f819c34b0000000000000000000000008f3f424d719e4e808fb299b4fca1009b731d08f90000000000000000000000004b9ac5da0903eda059a98c04a447b4d045566378000000000000000000000000bbe3f1b60f157c53bb44674fc2adee8e68d6c75d000000000000000000000000eb618e440fd758b9bc2946ccc55ff5390f441b5b00000000000000000000000075ba63865eff3acae41b0dafd1b91a5c866b199d0000000000000000000000006d83e563e6734de9c1553de02286fe3e79ac45600000000000000000000000004e26def987165588afc70e281018ba342dd496000000000000000000000000005f7f66a65abc0337df83a2c9897a2ed003e8bff700000000000000000000000099c190465d0a359f3f89763fc844c151c8d46cd3000000000000000000000000363d97c712d94e90449ff2ceca0bf49e6f8eda30000000000000000000000000c87d9803b465cf20ccc018e0b8bcdb3f9992bc73000000000000000000000000397cbff73144824efd9c03a7d14e5dd0f01fb180000000000000000000000000000000000000000000000000000000000000003100000000000000000000000000000000000000000000070f00ed4810e2af200000000000000000000000000000000000000000000000070f00ed4810e2af20000000000000000000000000000000000000000000000005a59a57724f4ad0e0000000000000000000000000000000000000000000000001696695ded9e650e00000000000000000000000000000000000000000000000021e19e0c9bab240000000000000000000000000000000000000000000000000070f00ed4810e2af2000000000000000000000000000000000000000000000002a5a058fc295ed0000000000000000000000000000000000000000000000000000b4b34aeae0cbef20000000000000000000000000000000000000000000000000b4b34aeae0cbef20000000000000000000000000000000000000000000000000d8d726b7177a8000000000000000000000000000000000000000000000000001696695ded9e650e000000000000000000000000000000000000000000000001c3c03b5295bd92f200000000000000000000000000000000000000000000000070f00ed4810e2af2000000000000000000000000000000000000000000000000e1e01da993a13d0e0000000000000000000000000000000000000000000000001696695ded9e650e000000000000000000000000000000000000000000000003853e82ec977c53b200000000000000000000000000000000000000000000000d3c21bcecceda10000000000000000000000000000000000000000000000000069e10de76676d08000000000000000000000000000000000000000000000000069e10de76676d08000000000000000000000000000000000000000000000000069e10de76676d08000000000000000000000000000000000000000000000000069e10de76676d08000000000000000000000000000000000000000000000000034f086f3b33b68400000000000000000000000000000000000000000000000001fc3842bd1f071c0000000000000000000000000000000000000000000000000152d02c7e14af6800000000000000000000000000000000000000000000000018897f823cca8546c0000000000000000000000000000000000000000000000011349242670ce8480000000000000000000000000000000000000000000000000bbf8a2068c12ccb40000000000000000000000000000000000000000000000003181ff85d24ccbc8000000000000000000000000000000000000000000000000c60819d8b69a7de80000000000000000000000000000000000000000000000000dc94b7f5839874000000000000000000000000000000000000000000000000031b4af411c752a0400000000000000000000000000000000000000000000000069e10de76676d080000000000000000000000000000000000000000000000000145c84cf12462e2800000000000000000000000000000000000000000000000069e10de76676d08000000000000000000000000000000000000000000000000069e10de76676d08000000000000000000000000000000000000000000000000422ca8b0a00a425000000000000000000000000000000000000000000000000084595161401484a000000000000000000000000000000000000000000000000048b7cf140ef1b67a40000000000000000000000000000000000000000000000048b7cf140ef1b67a40000000000000000000000000000000000000000000000048b7cf140ef1b67a400000000000000000000000000000000000000000000000e08e3e0943df960800000000000000000000000000000000000000000000000048b7cf140ef1b67a40000000000000000000000000000000000000000000000048b7cf140ef1b67a40000000000000000000000000000000000000000000000048b7cf140ef1b67a40000000000000000000000000000000000000000000000048b7cf140ef1b67a40000000000000000000000000000000000000000000000048b7cf140ef1b67a40000000000000000000000000000000000000000000000048b7cf140ef1b67a4000000000000000000000000000000000000000000000005b198c41591cebd6800000000000000000000000000000000000000000000000030031cb524c5d23ea000","Library":"","SwarmSource":"bzzr://fa18d417d15c25c57e3d27f687b120cbf5b65dac8612775ab06f0cf0363a852a"}]}