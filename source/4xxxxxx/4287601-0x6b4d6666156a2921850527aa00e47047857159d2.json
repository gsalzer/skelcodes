{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.11;\r\n\r\ncontract ERC20Interface {\r\n\tfunction totalSupply() constant returns (uint supply);\r\n\tfunction balanceOf(address _owner) constant returns (uint balance);\r\n\tfunction transfer(address _to, uint _value) returns (bool success);\r\n\tfunction transferFrom(address _from, address _to, uint _value) returns (bool success);\r\n\tfunction approve(address _spender, uint _value) returns (bool success);\r\n\tfunction allowance(address _owner, address _spender) constant returns (uint remaining);\r\n\tevent Transfer(address indexed _from, address indexed _to, uint _value);\r\n\tevent Approval(address indexed _owner, address indexed _spender, uint _value);\r\n}\r\n\r\ncontract DeDeMasterContract {\r\n\r\n\tmapping (address => bool) public isDeDeContract;\r\n\r\n\tmapping (address => uint256) public validationTime;\r\n\tmapping (address => address) public dip;\r\n\tmapping (address => address) public scs;\r\n\tmapping (address => address) public issuer;\r\n\tmapping (address => address) public targetAddress;//if address value is zero, this contract itself posesses ethereum as target.\r\n\tmapping (address => address) public bulletAddress;//if address value is zero, this contract itself gets ethereum as bullet.\r\n\tmapping (address => uint256) public targetAmount;\r\n\tmapping (address => uint256) public bulletAmount;\r\n\r\n\tevent Issue(address indexed dip, address indexed scs, address issuer, address indexed dedeAddress);\r\n\tevent Transfer(address indexed from, address indexed to, address issuer, address indexed dedeAddress); // unused in current version\r\n\tevent Activate(address indexed dip, address indexed scs, address issuer, address indexed dedeAddress);\r\n\tevent Nullify(address indexed dip, address indexed scs, address issuer, address indexed dedeAddress);\r\n\r\n\taddress public dedeNetworkAddress;\r\n\r\n\tfunction DeDeMasterContract(address _dedeNetworkAddress){\r\n\t\tdedeNetworkAddress = _dedeNetworkAddress;\r\n\t}\r\n\r\n\tfunction changeDedeAddress(address newDedeAddress){\r\n\t\trequire(msg.sender == dedeNetworkAddress);\r\n\t\tdedeNetworkAddress = newDedeAddress;\r\n\t}\r\n\r\n\tfunction issue(uint256 _targetAmount, uint256 _bulletAmount, address _targetAddress, address _bulletAddress, uint256 _validationTime, address _issuer) payable {\r\n\t\trequire(msg.sender == dedeNetworkAddress);\r\n\t\trequire(now + 1 days < _validationTime);\r\n\t\trequire(_targetAddress != _bulletAddress);\r\n\r\n\t\tif(_targetAddress == 0){ // ether target\r\n\t\t\trequire(msg.value >= _targetAmount);\r\n\t\t\tif(msg.value > _targetAmount){\r\n\t\t\t\tmsg.sender.transfer(msg.value - _targetAmount);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\taddress dede = (new DeDeContract).value(_targetAddress == 0 ? _targetAmount : 0)(_targetAddress, _targetAmount);\r\n\t\tisDeDeContract[dede] = true;\r\n\r\n\t\tvalidationTime[dede] = _validationTime;\r\n\t\tdip[dede] = msg.sender;\r\n\t\tscs[dede] = msg.sender;\r\n\t\tissuer[dede] = _issuer;\r\n\t\ttargetAddress[dede] = _targetAddress;\r\n\t\tbulletAddress[dede] = _bulletAddress;\r\n\t\ttargetAmount[dede] = _targetAmount;\r\n\t\tbulletAmount[dede] = _bulletAmount;\r\n\r\n\t\tif(_targetAddress != 0){ // send target token to dede\r\n\t\t\tassert(ERC20Interface(_targetAddress).transferFrom(msg.sender, dede, _targetAmount));\r\n\t\t}\r\n\r\n\t\tIssue(msg.sender, msg.sender, _issuer, dede);\r\n\t}\r\n\tfunction activate(address dede) payable {\r\n\t\tvar _dede = DeDeContract(dede);\r\n\r\n\t\trequire(isDeDeContract[dede]);\r\n\r\n\t\trequire(msg.sender == scs[dede]);\r\n\t\trequire(now >= validationTime[dede] && now < validationTime[dede] + 1 days);\r\n\r\n\t\tisDeDeContract[dede] = false;\r\n\r\n\t\tActivate(dip[dede], scs[dede], issuer[dede], dede);\r\n\r\n\t\tif(bulletAddress[dede] == 0){\r\n\t\t\trequire(msg.value >= bulletAmount[dede]);\r\n\t\t\tif(msg.value > bulletAmount[dede]){\r\n\t\t\t\tmsg.sender.transfer(msg.value - bulletAmount[dede]);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tassert(ERC20Interface(bulletAddress[dede]).transferFrom(scs[dede], dip[dede], bulletAmount[dede])); // send bullet token to dip\r\n\t\t}\r\n\r\n\t\tif(targetAddress[dede] != 0){\r\n\t\t\tassert(ERC20Interface(targetAddress[dede]).transferFrom(dede, scs[dede], targetAmount[dede])); // send target token to scs\r\n\t\t}\r\n\t\t_dede.activate.value(bulletAddress[dede] == 0 ? bulletAmount[dede] : 0)(bulletAddress[dede] == 0 ? dip[dede] : scs[dede]); // send target ether to scs (or bullet ether to dip) and suicide dede\r\n\t}\r\n\tfunction nullify(address dede){\r\n\t\tvar _dede = DeDeContract(dede);\r\n\r\n\t\trequire(isDeDeContract[dede]);\r\n\r\n\t\trequire(now >= (validationTime[dede] + 1 days) && (msg.sender == dip[dede] || msg.sender == scs[dede]));\r\n\r\n\t\tisDeDeContract[dede] = false;\r\n\r\n\t\tNullify(dip[dede], scs[dede], issuer[dede], dede);\r\n\t\r\n\t\tif(targetAddress[dede] != 0){\r\n\t\t\tassert(ERC20Interface(targetAddress[dede]).transferFrom(dede, dip[dede], targetAmount[dede])); // send target token to dip\r\n\t\t}\r\n\t\t_dede.nullify(dip[dede]); // send target ether to dip and suicide dede\r\n\t}\r\n\r\n\tfunction transfer(address receiver, address dede){ // unused in current version\r\n\t\trequire(isDeDeContract[dede]);\r\n\r\n\t\trequire(msg.sender == scs[dede]);\r\n\r\n\t\tTransfer(scs[dede], receiver, issuer[dede], dede);\r\n\r\n\t\tscs[dede] = receiver;\r\n\t}\r\n}\r\n\r\n\r\ncontract DeDeContract {\r\n\r\n\taddress public masterContract;//master smart contract address\r\n\r\n\tfunction DeDeContract(address targetAddress, uint256 targetAmount) payable {\r\n\t\tmasterContract = msg.sender;\r\n\t\tif(targetAddress != 0){\r\n\t\t\tassert(ERC20Interface(targetAddress).approve(msg.sender, targetAmount));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction activate(address destination) payable {\r\n\t\trequire(msg.sender == masterContract);\r\n\r\n\t\tsuicide(destination);\r\n\t}\r\n\tfunction nullify(address destination) {\r\n\t\trequire(msg.sender == masterContract);\r\n\r\n\t\tsuicide(destination);\r\n\t}\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_targetAmount\",\"type\":\"uint256\"},{\"name\":\"_bulletAmount\",\"type\":\"uint256\"},{\"name\":\"_targetAddress\",\"type\":\"address\"},{\"name\":\"_bulletAddress\",\"type\":\"address\"},{\"name\":\"_validationTime\",\"type\":\"uint256\"},{\"name\":\"_issuer\",\"type\":\"address\"}],\"name\":\"issue\",\"outputs\":[],\"payable\":true,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"bulletAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"targetAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"dede\",\"type\":\"address\"}],\"name\":\"activate\",\"outputs\":[],\"payable\":true,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"isDeDeContract\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"issuer\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"targetAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"dip\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"validationTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"receiver\",\"type\":\"address\"},{\"name\":\"dede\",\"type\":\"address\"}],\"name\":\"transfer\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newDedeAddress\",\"type\":\"address\"}],\"name\":\"changeDedeAddress\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dedeNetworkAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"bulletAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"dede\",\"type\":\"address\"}],\"name\":\"nullify\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"scs\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_dedeNetworkAddress\",\"type\":\"address\"}],\"payable\":false,\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"dip\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"scs\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"issuer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"dedeAddress\",\"type\":\"address\"}],\"name\":\"Issue\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"issuer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"dedeAddress\",\"type\":\"address\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"dip\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"scs\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"issuer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"dedeAddress\",\"type\":\"address\"}],\"name\":\"Activate\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"dip\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"scs\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"issuer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"dedeAddress\",\"type\":\"address\"}],\"name\":\"Nullify\",\"type\":\"event\"}]","ContractName":"DeDeMasterContract","CompilerVersion":"v0.4.11+commit.68ef5810","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000432e6ada6c4730993683520566f7b167da2657af","Library":"","SwarmSource":"bzzr://0b0d7b5feead85134f1032df017bcac78188465140278c008cac817e3bb38e42"}]}