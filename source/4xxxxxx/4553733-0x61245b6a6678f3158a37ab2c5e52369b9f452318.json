{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.15;\r\n\r\ncontract Oracle {\r\n    event NewSymbol(string _symbol, uint8 _decimals);\r\n    function getTimestamp(string symbol) constant returns(uint256);\r\n    function getRateFor(string symbol) returns (uint256);\r\n    function getCost(string symbol) constant returns (uint256);\r\n    function getDecimals(string symbol) constant returns (uint256);\r\n}\r\n\r\ncontract Token {\r\n    function transfer(address _to, uint _value) returns (bool success);\r\n    function transferFrom(address _from, address _to, uint256 _value) returns (bool success);\r\n    function allowance(address _owner, address _spender) constant returns (uint256 remaining);\r\n    function approve(address _spender, uint256 _value) returns (bool success);\r\n    function increaseApproval (address _spender, uint _addedValue) public returns (bool success);\r\n}\r\n\r\n\r\ncontract LightOracle is Oracle {\r\n    Token public token = Token(0xF970b8E36e23F7fC3FD752EeA86f8Be8D83375A6);\r\n\r\n    address public owner;\r\n    address public provider1;\r\n    address public provider2;\r\n    address public collector = this;\r\n\r\n    string public currency = \"ARS\";\r\n    uint8 public decimals = 2;\r\n\r\n    uint256 private rate;\r\n    uint256 private cost;\r\n\r\n    uint256 public updateTimestamp;\r\n\r\n    bool public deprecated;\r\n\r\n    mapping(address => bool) public blacklist;\r\n\r\n    event RateDelivered(uint256 _rate, uint256 _cost, uint256 _timestamp);\r\n\r\n    function LightOracle() public {\r\n        owner = msg.sender;\r\n        NewSymbol(currency, decimals);\r\n    }\r\n\r\n    function updateRate(uint256 _rate) public {\r\n        require(msg.sender == provider1 || msg.sender == provider2 || msg.sender == owner);\r\n        rate = _rate;\r\n        updateTimestamp = block.timestamp;\r\n    }\r\n    \r\n    function updateCost(uint256 _cost) public {\r\n        require(msg.sender == provider1 || msg.sender == provider2 || msg.sender == owner);\r\n        cost = _cost;\r\n    }\r\n\r\n    function getTimestamp(string symbol) constant returns (uint256) {\r\n        require(isCurrency(symbol));\r\n        return updateTimestamp;\r\n    }\r\n    \r\n    function getRateFor(string symbol) public returns (uint256) {\r\n        require(isCurrency(symbol));\r\n        require(!blacklist[msg.sender]);\r\n        uint256 costRcn = cost * rate;\r\n        require(token.transferFrom(msg.sender, collector, costRcn));\r\n        RateDelivered(rate, costRcn, updateTimestamp);\r\n        return rate;\r\n    }\r\n\r\n    function isContract(address addr) internal returns (bool) {\r\n        uint size;\r\n        assembly { size := extcodesize(addr) }\r\n        return size > 0;\r\n    }\r\n\r\n    function getCost(string symbol) constant returns (uint256) {\r\n        require(isCurrency(symbol));\r\n        require(!blacklist[msg.sender]);\r\n        return cost * rate;\r\n    }\r\n\r\n    function getDecimals(string symbol) constant returns (uint256) {\r\n        require(isCurrency(symbol));\r\n        return decimals;\r\n    }\r\n\r\n    function getRateForExternal(string symbol) constant returns (uint256) {\r\n        require(isCurrency(symbol));\r\n        require(!blacklist[msg.sender]);\r\n        require(!isContract(msg.sender));\r\n        return rate;\r\n    }\r\n\r\n    function setProvider1(address _provider) public returns (bool) {\r\n        require(msg.sender == owner);\r\n        provider1 = _provider;\r\n        return true;\r\n    }\r\n\r\n    function setProvider2(address _provider) public returns (bool) {\r\n        require(msg.sender == owner);\r\n        provider2 = _provider;\r\n        return true;\r\n    }\r\n\r\n    function transfer(address to) public returns (bool) {\r\n        require(msg.sender == owner);\r\n        require(to != address(0));\r\n        owner = to;\r\n        return true;\r\n    }\r\n\r\n    function setDeprecated(bool _deprecated) public returns (bool) {\r\n        require(msg.sender == owner);\r\n        deprecated = _deprecated;\r\n        return true;\r\n    }\r\n\r\n    function withdrawal(Token _token, address to, uint256 amount) returns (bool) {\r\n        require (msg.sender == owner);\r\n        require (to != address(0));\r\n        require (_token != to);\r\n        return _token.transfer(to, amount);\r\n    }\r\n\r\n    function setBlacklist(address to, bool blacklisted) returns (bool) {\r\n        require (msg.sender == owner);\r\n        blacklist[to] = blacklisted;\r\n        return true;\r\n    }\r\n\r\n    function setCollector(address _collector) returns (bool) {\r\n        require (msg.sender == owner);\r\n        collector = _collector;\r\n        return true;\r\n    }\r\n\r\n    function isCurrency(string target) internal returns (bool) {\r\n        bytes memory t = bytes(target);\r\n        bytes memory c = bytes(currency);\r\n        if (t.length != c.length) return false;\r\n        if (t[0] != c[0]) return false;\r\n        if (t[1] != c[1]) return false;\r\n        if (t[2] != c[2]) return false;\r\n        return true;\r\n    } \r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"},{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawal\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"deprecated\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"blacklisted\",\"type\":\"bool\"}],\"name\":\"setBlacklist\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"to\",\"type\":\"address\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"updateTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_cost\",\"type\":\"uint256\"}],\"name\":\"updateCost\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"provider1\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"getTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_provider\",\"type\":\"address\"}],\"name\":\"setProvider2\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"getRateFor\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"getRateForExternal\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_rate\",\"type\":\"uint256\"}],\"name\":\"updateRate\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"collector\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"getCost\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"symbol\",\"type\":\"string\"}],\"name\":\"getDecimals\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_provider\",\"type\":\"address\"}],\"name\":\"setProvider1\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"provider2\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_deprecated\",\"type\":\"bool\"}],\"name\":\"setDeprecated\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"currency\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"blacklist\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_collector\",\"type\":\"address\"}],\"name\":\"setCollector\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"token\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_rate\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_cost\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_timestamp\",\"type\":\"uint256\"}],\"name\":\"RateDelivered\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_symbol\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_decimals\",\"type\":\"uint8\"}],\"name\":\"NewSymbol\",\"type\":\"event\"}]","ContractName":"LightOracle","CompilerVersion":"v0.4.15+commit.bbb8e64f","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://6f20485763be4e89a3bed152879adb1acaca1059fb32c1bc9cd29f3c9b349dac"}]}