{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.19;\r\n\r\ncontract Storage{\r\n    address public founder;\r\n    bool public changeable;\r\n    mapping( address => bool) public adminStatus;\r\n    mapping( address => uint256) public slot;\r\n    \r\n    event Update(address whichAdmin, address whichUser, uint256 data);\r\n    event Set(address whichAdmin, address whichUser, uint256 data);\r\n    event Admin(address addr, bool yesno);\r\n\r\n    modifier onlyFounder() {\r\n        require(msg.sender==founder);\r\n        _;\r\n    }\r\n    \r\n    modifier onlyAdmin() {\r\n        assert (adminStatus[msg.sender]==true);\r\n        _;\r\n    }\r\n    \r\n    function Storage() public {\r\n        founder=msg.sender;\r\n        adminStatus[founder]=true;\r\n        changeable=true;\r\n    }\r\n    \r\n    function update(address userAddress,uint256 data) public onlyAdmin(){\r\n        assert(changeable==true);\r\n        assert(slot[userAddress]+data>slot[userAddress]);\r\n        slot[userAddress]+=data;\r\n        Update(msg.sender,userAddress,data);\r\n    }\r\n    \r\n    function set(address userAddress, uint256 data) public onlyAdmin() {\r\n        require(changeable==true || msg.sender==founder);\r\n        slot[userAddress]=data;\r\n        Set(msg.sender,userAddress,data);\r\n    }\r\n    \r\n    function admin(address addr) public onlyFounder(){\r\n        adminStatus[addr] = !adminStatus[addr];\r\n        Admin(addr, adminStatus[addr]);\r\n    }\r\n    \r\n    function halt() public onlyFounder(){\r\n        changeable=!changeable;\r\n    }\r\n    \r\n    function() public{\r\n        revert();\r\n    }\r\n    \r\n}\r\n\r\n\r\n\r\npragma solidity ^0.4.19;\r\n\r\ncontract Payee{\r\n    \r\n    uint256 public price;\r\n    address public storageAddress;\r\n    address public founder;\r\n    bool public changeable;\r\n    mapping( address => bool) public adminStatus;\r\n\r\n    \r\n    \r\n    Storage s;\r\n    event Buy(address addr, uint256 count);\r\n    event SetPrice(address addr, uint256 price);\r\n    event Admin(address addr, bool yesno);\r\n\r\n    \r\n    modifier onlyAdmin() {\r\n        assert (adminStatus[msg.sender]==true);\r\n        _;\r\n    }\r\n    \r\n    modifier onlyFounder() {\r\n        require(msg.sender==founder);\r\n        _;\r\n    }\r\n    \r\n    function admin(address addr) public onlyFounder(){\r\n        adminStatus[addr] = !adminStatus[addr];\r\n        Admin(addr, adminStatus[addr]);\r\n    }\r\n    \r\n    function Payee(address addr) public {\r\n        founder=msg.sender;\r\n        price=3000000000000000; //default price will be 0.003 ether($2);\r\n        adminStatus[founder]=true;\r\n        storageAddress=addr;\r\n        s=Storage(storageAddress);\r\n        changeable=true;\r\n        \r\n    }\r\n    \r\n    function setPrice(uint256 _price) public onlyAdmin(){\r\n        price=_price;\r\n        SetPrice(msg.sender, price);\r\n    }\r\n    \r\n    function setStorageAddress(address _addr) public onlyAdmin(){\r\n        storageAddress=_addr;\r\n        s=Storage(storageAddress);\r\n\r\n    }\r\n    \r\n    function halt() public onlyFounder(){\r\n        changeable=!changeable;\r\n    }\r\n    \r\n    function pay(address _addr, uint256 count) public payable {\r\n        assert(changeable==true);\r\n        assert(msg.value >= price*count);\r\n        if(!founder.call.value(price*count)() || !msg.sender.call.value(msg.value-price*count)()){\r\n            revert();\r\n        }\r\n        s.update(_addr,count);\r\n        Buy(msg.sender,count);\r\n    }\r\n    \r\n    function () public payable {\r\n        pay(msg.sender,1);\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"adminStatus\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"founder\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_addr\",\"type\":\"address\"}],\"name\":\"setStorageAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"halt\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"admin\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"storageAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_price\",\"type\":\"uint256\"}],\"name\":\"setPrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"changeable\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"price\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_addr\",\"type\":\"address\"},{\"name\":\"count\",\"type\":\"uint256\"}],\"name\":\"pay\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"addr\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"addr\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"count\",\"type\":\"uint256\"}],\"name\":\"Buy\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"addr\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"price\",\"type\":\"uint256\"}],\"name\":\"SetPrice\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"addr\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"yesno\",\"type\":\"bool\"}],\"name\":\"Admin\",\"type\":\"event\"}]","ContractName":"Payee","CompilerVersion":"v0.4.19+commit.c4cbbb05","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"000000000000000000000000fd49214d24b241097f2193d3166ebcc60096c1a6","Library":"","SwarmSource":"bzzr://c07d09eb02a26b2fa11e8028cf3ece8e4284022e3eb29c25c178663882671c69"}]}