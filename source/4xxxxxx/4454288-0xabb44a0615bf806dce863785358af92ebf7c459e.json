{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.15;\r\n\r\ncontract ContractCatalog {\r\n    function validateContract(Versionable target) constant returns (bool);\r\n}\r\n\r\ncontract Versionable {\r\n    string public versionCode;\r\n\r\n    function getVersionByte(uint index) constant returns (bytes1) { \r\n        return bytes(versionCode)[index];\r\n    }\r\n\r\n    function getVersionLength() constant returns (uint256) {\r\n        return bytes(versionCode).length;\r\n    }\r\n}\r\n\r\ncontract Loan is Versionable {\r\n    uint8 public constant STATUS_INITIAL = 1;\r\n    uint8 public constant STATUS_LENT = 2;\r\n    uint8 public constant STATUS_PAID = 3;\r\n    uint8 public constant STATUS_DESTROYED = 4;\r\n\r\n    string public versionCode;\r\n    \r\n    address public borrower;\r\n    address public lender;\r\n\r\n    uint8 public status;\r\n\r\n    uint256 public amount;\r\n    uint256 public paid;\r\n\r\n    event ApprovedBy(address _address);\r\n    event DestroyedBy(address _address);\r\n    event PartialPayment(address _sender, address _from, uint256 _amount);\r\n    event Transfer(address _from, address _to);\r\n    event TotalPayment();\r\n\r\n    function pay(uint256 _amount, address _from) returns (bool);\r\n    function destroy() returns (bool);\r\n    function lend() returns (bool);\r\n    function approve() returns (bool);\r\n    function isApproved() returns (bool);\r\n}\r\n\r\ncontract LoanDirectory {\r\n    uint256 public constant VERSION = 2;\r\n\r\n    ContractCatalog public catalog;\r\n    Loan[] public loans;\r\n    \r\n    function LoanDirectory() {\r\n        catalog = ContractCatalog(0x50fD51B624Ca86Be3DBc640515ebC407A163cd6C);\r\n    }\r\n\r\n    function validateLoan(Loan loan) private returns (bool) {\r\n        require(loan.status() == loan.STATUS_INITIAL());\r\n        require(catalog.validateContract(loan));\r\n    }\r\n\r\n    function registerLoan(Loan loan) {\r\n        validateLoan(loan);\r\n        loans.push(loan);\r\n    }\r\n    \r\n    function registerLoanReplace(Loan loan, uint256 indexReplace) {\r\n        require(indexReplace < loans.length);\r\n        Loan replaceLoan = loans[indexReplace];\r\n        require(replaceLoan.status() != replaceLoan.STATUS_INITIAL());\r\n        validateLoan(loan);\r\n        loans[indexReplace] = loan;\r\n    }\r\n\r\n    function registerLoanReplaceDuplicated(Loan loan, uint256 replaceA, uint256 replaceB) {\r\n        require(replaceA < loans.length && replaceB < loans.length);\r\n        require(replaceA != replaceB);\r\n        require(loans[replaceA] == loans[replaceB]);\r\n        validateLoan(loan);\r\n        loans[replaceA] = loan;\r\n    }\r\n\r\n    function getAllLoans() constant returns (Loan[]) {\r\n        return loans;\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"catalog\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"loan\",\"type\":\"address\"}],\"name\":\"registerLoan\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"loan\",\"type\":\"address\"},{\"name\":\"replaceA\",\"type\":\"uint256\"},{\"name\":\"replaceB\",\"type\":\"uint256\"}],\"name\":\"registerLoanReplaceDuplicated\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"loan\",\"type\":\"address\"},{\"name\":\"indexReplace\",\"type\":\"uint256\"}],\"name\":\"registerLoanReplace\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAllLoans\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"loans\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"VERSION\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"type\":\"constructor\"}]","ContractName":"LoanDirectory","CompilerVersion":"v0.4.15+commit.bbb8e64f","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://b3253161d68529589e20177041eda9b606564eec3305e8990b68072e8934ec05"}]}