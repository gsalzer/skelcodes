{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.13;\r\n\r\ncontract EthereumLottery {\r\n    function admin() constant returns (address);\r\n    function needsInitialization() constant returns (bool);\r\n    function initLottery(uint _jackpot, uint _numTickets,\r\n                         uint _ticketPrice, int _durationInBlocks) payable;\r\n    function needsFinalization() constant returns (bool);\r\n    function finalizeLottery(uint _steps);\r\n}\r\n\r\ncontract LotteryAdmin {\r\n    address public owner;\r\n    address public admin;\r\n    address public proposedOwner;\r\n\r\n    address public ethereumLottery;\r\n\r\n    uint public dailyAdminAllowance;\r\n    uint public maximumJackpot;\r\n    int public minimumDurationInBlocks;\r\n\r\n    uint public lastAllowancePaymentTimestamp;\r\n    uint public nextProfile;\r\n\r\n    event Deposit(address indexed _from, uint _value);\r\n\r\n    modifier onlyOwner {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    modifier onlyAdminOrOwner {\r\n        require(msg.sender == owner || msg.sender == admin);\r\n        _;\r\n    }\r\n\r\n    function LotteryAdmin(address _ethereumLottery) {\r\n        owner = msg.sender;\r\n        admin = msg.sender;\r\n        ethereumLottery = _ethereumLottery;\r\n\r\n        dailyAdminAllowance = 50 finney;\r\n        maximumJackpot = 100 ether;\r\n        minimumDurationInBlocks = 6;\r\n    }\r\n\r\n    function () payable {\r\n        Deposit(msg.sender, msg.value);\r\n    }\r\n\r\n    function allowsAllowance() constant returns (bool) {\r\n        return now - lastAllowancePaymentTimestamp >= 24 hours;\r\n    }\r\n\r\n    function requestAllowance() onlyAdminOrOwner {\r\n        require(allowsAllowance());\r\n\r\n        lastAllowancePaymentTimestamp = now;\r\n        admin.transfer(dailyAdminAllowance);\r\n    }\r\n\r\n    function needsAdministration() constant returns (bool) {\r\n        if (EthereumLottery(ethereumLottery).admin() != address(this)) {\r\n            return false;\r\n        }\r\n\r\n        return EthereumLottery(ethereumLottery).needsFinalization();\r\n    }\r\n\r\n    function administrate(uint _steps) onlyAdminOrOwner {\r\n        EthereumLottery(ethereumLottery).finalizeLottery(_steps);\r\n    }\r\n\r\n    function needsInitialization() constant returns (bool) {\r\n        if (EthereumLottery(ethereumLottery).admin() != address(this)) {\r\n            return false;\r\n        }\r\n\r\n        return EthereumLottery(ethereumLottery).needsInitialization();\r\n    }\r\n\r\n    function initLottery(uint _nextProfile,\r\n                         uint _jackpot, uint _numTickets,\r\n                         uint _ticketPrice, int _durationInBlocks)\r\n             onlyAdminOrOwner {\r\n        require(_jackpot <= maximumJackpot);\r\n        require(_durationInBlocks >= minimumDurationInBlocks);\r\n\r\n        nextProfile = _nextProfile;\r\n        EthereumLottery(ethereumLottery).initLottery.value(_jackpot)(\r\n            _jackpot, _numTickets, _ticketPrice, _durationInBlocks);\r\n    }\r\n\r\n    function withdraw(uint _value) onlyOwner {\r\n        owner.transfer(_value);\r\n    }\r\n\r\n    function setConfiguration(uint _dailyAdminAllowance,\r\n                              uint _maximumJackpot,\r\n                              int _minimumDurationInBlocks)\r\n             onlyOwner {\r\n        dailyAdminAllowance = _dailyAdminAllowance;\r\n        maximumJackpot = _maximumJackpot;\r\n        minimumDurationInBlocks = _minimumDurationInBlocks;\r\n    }\r\n\r\n    function setLottery(address _ethereumLottery) onlyOwner {\r\n        ethereumLottery = _ethereumLottery;\r\n    }\r\n\r\n    function setAdmin(address _admin) onlyOwner {\r\n        admin = _admin;\r\n    }\r\n\r\n    function proposeOwner(address _owner) onlyOwner {\r\n        proposedOwner = _owner;\r\n    }\r\n\r\n    function acceptOwnership() {\r\n        require(proposedOwner != 0);\r\n        require(msg.sender == proposedOwner);\r\n        owner = proposedOwner;\r\n    }\r\n\r\n    function destruct() onlyOwner {\r\n        selfdestruct(owner);\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_nextProfile\",\"type\":\"uint256\"},{\"name\":\"_jackpot\",\"type\":\"uint256\"},{\"name\":\"_numTickets\",\"type\":\"uint256\"},{\"name\":\"_ticketPrice\",\"type\":\"uint256\"},{\"name\":\"_durationInBlocks\",\"type\":\"int256\"}],\"name\":\"initLottery\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"destruct\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"allowsAllowance\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"nextProfile\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lastAllowancePaymentTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"requestAllowance\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_admin\",\"type\":\"address\"}],\"name\":\"setAdmin\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ethereumLottery\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"acceptOwnership\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_dailyAdminAllowance\",\"type\":\"uint256\"},{\"name\":\"_maximumJackpot\",\"type\":\"uint256\"},{\"name\":\"_minimumDurationInBlocks\",\"type\":\"int256\"}],\"name\":\"setConfiguration\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dailyAdminAllowance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_steps\",\"type\":\"uint256\"}],\"name\":\"administrate\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"proposeOwner\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"needsInitialization\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"minimumDurationInBlocks\",\"outputs\":[{\"name\":\"\",\"type\":\"int256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"proposedOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"needsAdministration\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"maximumJackpot\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_ethereumLottery\",\"type\":\"address\"}],\"name\":\"setLottery\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_ethereumLottery\",\"type\":\"address\"}],\"payable\":false,\"type\":\"constructor\"},{\"payable\":true,\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Deposit\",\"type\":\"event\"}]","ContractName":"LotteryAdmin","CompilerVersion":"v0.4.15+commit.bbb8e64f","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000c0adf1ccc703a0a3393892600883a1a91a4e38de","Library":"","SwarmSource":"bzzr://6a37fb5b3280c431841b2d66b104e537b8f33ead6afa178f89334d0ad008b684"}]}