{"status":"1","message":"OK","result":[{"SourceCode":"contract SafeMath {\r\n\r\n  function safeMul(uint a, uint b) returns (uint) {\r\n    if (a == 0) {\r\n      return 0;\r\n    } else {\r\n      uint c = a * b;\r\n      require(c / a == b);\r\n      return c;\r\n    }\r\n  }\r\n\r\n  function safeDiv(uint a, uint b) returns (uint) {\r\n    require(b > 0);\r\n    uint c = a / b;\r\n    require(a == b * c + a % b);\r\n    return c;\r\n  }\r\n\r\n}\r\n\r\n\r\ncontract token {\r\n    function balanceOf( address who ) constant returns (uint value);\r\n    function transfer( address to, uint value) returns (bool ok);\r\n}\r\n\r\n\r\ncontract Exchange is SafeMath {\r\n\r\n    uint public priceInWei;\r\n    address public creator;\r\n    token public tokenExchanged;\r\n    bool public exchangeState = false;\r\n    uint public multiplier = 1000000000000000000; //Token decimals\r\n\r\n    event TokenTransfer(address _sender, uint _tokenAmount);\r\n    event TokenExchangeFailed(address _sender, uint _tokenAmount);\r\n    event EthFundTransfer(uint _ethAmount);\r\n    event TokenFundTransfer(uint _tokenAmount);\r\n\r\n\r\n    function Exchange(\r\n        uint tokenPriceInWei,\r\n        address addressOfTokenExchanged\r\n    ) {\r\n        creator = msg.sender;\r\n        priceInWei = tokenPriceInWei;\r\n        tokenExchanged = token(addressOfTokenExchanged);\r\n    }\r\n\r\n\r\n    modifier isCreator() {\r\n        require(msg.sender == creator);\r\n        _;\r\n    }\r\n\r\n\r\n    function setTokenPriceInWei(uint _price) isCreator() returns (bool result){\r\n      require(!exchangeState);\r\n      priceInWei = _price;\r\n      return true;\r\n    }\r\n\r\n\r\n    function stopExchange() isCreator() returns (bool result){\r\n      exchangeState = false;\r\n      return true;\r\n    }\r\n\r\n\r\n    function startExchange() isCreator() returns (bool result){\r\n      exchangeState = true;\r\n      return true;\r\n    }\r\n\r\n\r\n    function () payable {\r\n        require(exchangeState);\r\n        uint _etherAmountInWei = msg.value;\r\n        uint _tokenAmount = safeDiv(safeMul(_etherAmountInWei, multiplier), priceInWei);\r\n        if ( _tokenAmount <= tokenExchanged.balanceOf(this) ){\r\n          tokenExchanged.transfer(msg.sender, _tokenAmount);\r\n          TokenTransfer(msg.sender, _tokenAmount);\r\n        } else {\r\n          TokenExchangeFailed(msg.sender, _tokenAmount);\r\n          throw;\r\n        }\r\n    }\r\n\r\n\r\n    function drainEther() isCreator() returns (bool success){\r\n      require(!exchangeState);\r\n      if ( creator.send(this.balance) ) {\r\n        EthFundTransfer(this.balance);\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n\r\n    function drainTokens() isCreator() returns (bool success){\r\n      require(!exchangeState);\r\n      if ( tokenExchanged.transfer(creator, tokenExchanged.balanceOf(this) ) ) {\r\n        TokenFundTransfer(this.balance);\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n\r\n\r\n    function removeContract() public isCreator() {\r\n        require(!exchangeState);\r\n        selfdestruct(msg.sender);\r\n    }\r\n\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"creator\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"exchangeState\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"drainEther\",\"outputs\":[{\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"multiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"priceInWei\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"startExchange\",\"outputs\":[{\"name\":\"result\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenExchanged\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"a\",\"type\":\"uint256\"},{\"name\":\"b\",\"type\":\"uint256\"}],\"name\":\"safeDiv\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_price\",\"type\":\"uint256\"}],\"name\":\"setTokenPriceInWei\",\"outputs\":[{\"name\":\"result\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"a\",\"type\":\"uint256\"},{\"name\":\"b\",\"type\":\"uint256\"}],\"name\":\"safeMul\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"stopExchange\",\"outputs\":[{\"name\":\"result\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"drainTokens\",\"outputs\":[{\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"removeContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"tokenPriceInWei\",\"type\":\"uint256\"},{\"name\":\"addressOfTokenExchanged\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_tokenAmount\",\"type\":\"uint256\"}],\"name\":\"TokenTransfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_tokenAmount\",\"type\":\"uint256\"}],\"name\":\"TokenExchangeFailed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_ethAmount\",\"type\":\"uint256\"}],\"name\":\"EthFundTransfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_tokenAmount\",\"type\":\"uint256\"}],\"name\":\"TokenFundTransfer\",\"type\":\"event\"}]","ContractName":"Exchange","CompilerVersion":"v0.4.19+commit.c4cbbb05","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"00000000000000000000000000000000000000000000d3c21bcecceda100000000000000000000000000000086fa049857e0209aa7d9e616f7eb3b3b78ecfdb0","Library":"","SwarmSource":"bzzr://bee61c458e436e778d386780b52a31c4d2ab7c0460fdc2c0cc1095d2e91b4510"}]}