{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity 0.4.17;\r\n\r\n// import \"./FunderSmartToken.sol\";\r\n\r\ncontract PreSale {\r\n\r\n  address private deployer;\r\n\r\n  // for performing allowed transfer\r\n  address private FunderSmartTokenAddress = 0x0;\r\n  address private FundersTokenCentral = 0x0;\r\n\r\n  // 1 eth = 150 fst\r\n  uint256 public oneEtherIsHowMuchFST = 150;\r\n\r\n  // uint256 public startTime = 0;\r\n  uint256 public startTime = 1506052800; // 2017/09/22\r\n  uint256 public endTime   = 1508731200; // 2017/10/22\r\n\r\n  uint256 public soldTokenValue = 0;\r\n  uint256 public preSaleHardCap = 330000000 * (10 ** 18) * 2 / 100; // presale 2% hard cap amount\r\n\r\n  event BuyEvent (address buyer, string email, uint256 etherValue, uint256 tokenValue);\r\n\r\n  function PreSale () public {\r\n    deployer = msg.sender;\r\n  }\r\n\r\n  // PreSale Contract 必須先從 Funder Smart Token approve 過\r\n  function buyFunderSmartToken (string _email, string _code) payable public returns (bool) {\r\n    require(FunderSmartTokenAddress != 0x0); // 需初始化過 token contract 位址\r\n    require(FundersTokenCentral != 0x0); // 需初始化過 fstk 中央帳戶\r\n    require(msg.value >= 1 ether); // 人們要至少用 1 ether 買 token\r\n    require(now >= startTime && now <= endTime); // presale 舉辦期間\r\n    require(soldTokenValue <= preSaleHardCap); // 累積 presale 量不得超過 fst 總發行量 2%\r\n\r\n    uint256 _tokenValue = msg.value * oneEtherIsHowMuchFST;\r\n\r\n    // 35%\r\n    if (keccak256(_code) == 0xde7683d6497212fbd59b6a6f902a01c91a09d9a070bba7506dcc0b309b358eed) {\r\n      _tokenValue = _tokenValue * 135 / 100;\r\n    }\r\n\r\n    // 30%\r\n    if (keccak256(_code) == 0x65b236bfb931f493eb9e6f3db8d461f1f547f2f3a19e33a7aeb24c7e297c926a) {\r\n      _tokenValue = _tokenValue * 130 / 100;\r\n    }\r\n\r\n    // 25%\r\n    if (keccak256(_code) == 0x274125681e11c33f71574f123a20cfd59ed25e64d634078679014fa3a872575c) {\r\n      _tokenValue = _tokenValue * 125 / 100;\r\n    }\r\n\r\n    // 將 FST 從 FundersTokenCentral 轉至 msg.sender\r\n    if (FunderSmartTokenAddress.call(bytes4(keccak256(\"transferFrom(address,address,uint256)\")), FundersTokenCentral, msg.sender, _tokenValue) != true) {\r\n      revert();\r\n    }\r\n\r\n    BuyEvent(msg.sender, _email, msg.value, _tokenValue);\r\n\r\n    soldTokenValue = soldTokenValue + _tokenValue;\r\n\r\n    return true;\r\n  }\r\n\r\n  // 把以太幣傳出去\r\n  function transferOut (address _to, uint256 _etherValue) public returns (bool) {\r\n    require(msg.sender == deployer);\r\n    _to.transfer(_etherValue);\r\n    return true;\r\n  }\r\n\r\n  // 指定 FST Token Contract (FunderSmartTokenAddress)\r\n  function setFSTAddress (address _funderSmartTokenAddress) public returns (bool) {\r\n    require(msg.sender == deployer);\r\n    FunderSmartTokenAddress = _funderSmartTokenAddress;\r\n    return true;\r\n  }\r\n\r\n  // 指定 FSTK 主帳 (FundersTokenCentral)\r\n  function setFSTKCentral (address _fundersTokenCentral) public returns (bool) {\r\n    require(msg.sender == deployer);\r\n    FundersTokenCentral = _fundersTokenCentral;\r\n    return true;\r\n  }\r\n\r\n  function () public {}\r\n\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"preSaleHardCap\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_email\",\"type\":\"string\"},{\"name\":\"_code\",\"type\":\"string\"}],\"name\":\"buyFunderSmartToken\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"soldTokenValue\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"endTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_etherValue\",\"type\":\"uint256\"}],\"name\":\"transferOut\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"startTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"oneEtherIsHowMuchFST\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_funderSmartTokenAddress\",\"type\":\"address\"}],\"name\":\"setFSTAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_fundersTokenCentral\",\"type\":\"address\"}],\"name\":\"setFSTKCentral\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"buyer\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"email\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"etherValue\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"tokenValue\",\"type\":\"uint256\"}],\"name\":\"BuyEvent\",\"type\":\"event\"}]","ContractName":"PreSale","CompilerVersion":"v0.4.17+commit.bdeb9e52","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://6ac4ebed2ec6511d6162e80aa63f26cf226834d8cc591aeb2c01c339a506ab0e"}]}