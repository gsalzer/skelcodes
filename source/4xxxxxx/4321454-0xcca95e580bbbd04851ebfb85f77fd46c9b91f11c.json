{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.15;\r\n\r\ncontract ERC20 {\r\n  event Transfer(address indexed from, address indexed to, uint value);\r\n  function balanceOf( address who ) public constant returns (uint value);\r\n  function transfer( address to, uint value) public returns (bool ok);\r\n  function approve( address to, uint value) public returns (bool ok);\r\n  function transferFrom(address from, address to, uint value) public returns (bool ok);\r\n}\r\n\r\ncontract Owned {\r\n    address public owner;\r\n\r\n    function Owned() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlyOwner {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    function transferOwnership(address newOwner) onlyOwner public {\r\n        owner = newOwner;\r\n    }\r\n}\r\n\r\ncontract TerraformReserve is Owned {\r\n\r\n  /* Storing a balance for each user */\r\n  mapping (address => uint256) public lockedBalance;\r\n  \r\n  /* Store the total sum locked */\r\n  uint public totalLocked;\r\n  \r\n  /* Reference to the token */\r\n  ERC20 public manaToken;\r\n  \r\n  /* Contract that will assign the LAND and burn/return tokens */\r\n  address public landClaim;\r\n  \r\n  /* Prevent the token from accepting deposits */\r\n  bool public acceptingDeposits;\r\n\r\n  event LockedBalance(address user, uint mana);\r\n  event LandClaimContractSet(address target);\r\n  event LandClaimExecuted(address user, uint value, bytes data);\r\n  event AcceptingDepositsChanged(bool _acceptingDeposits);\r\n\r\n  function TerraformReserve(address _token) {\r\n    require(_token != 0);\r\n    manaToken = ERC20(_token);\r\n    acceptingDeposits = true;\r\n  }\r\n\r\n  /**\r\n   * Lock MANA into the contract.\r\n   * This contract does not have another way to take the tokens out other than\r\n   * through the target contract.\r\n   */\r\n  function lockMana(address _from, uint256 mana) public {\r\n    require(acceptingDeposits);\r\n    require(mana >= 1000 * 1e18);\r\n    require(manaToken.transferFrom(_from, this, mana));\r\n\r\n    lockedBalance[_from] += mana; \r\n    totalLocked += mana;\r\n    LockedBalance(_from, mana);\r\n  }\r\n  \r\n  /**\r\n   * Allows the owner of the contract to pause acceptingDeposits\r\n   */\r\n  function changeContractState(bool _acceptingDeposits) public onlyOwner {\r\n    acceptingDeposits = _acceptingDeposits;\r\n    AcceptingDepositsChanged(acceptingDeposits);\r\n  }\r\n  \r\n  /**\r\n   * Set the contract that can move the staked MANA.\r\n   * Calls the `approve` function of the ERC20 token with the total amount.\r\n   */\r\n  function setTargetContract(address target) public onlyOwner {\r\n    landClaim = target;\r\n    manaToken.approve(landClaim, totalLocked);\r\n    LandClaimContractSet(target);\r\n  }\r\n\r\n  /**\r\n   * Prevent payments to the contract\r\n   */\r\n  function () public payable {\r\n    revert();\r\n  }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"target\",\"type\":\"address\"}],\"name\":\"setTargetContract\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalLocked\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_acceptingDeposits\",\"type\":\"bool\"}],\"name\":\"changeContractState\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"mana\",\"type\":\"uint256\"}],\"name\":\"lockMana\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"manaToken\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"landClaim\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"lockedBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"acceptingDeposits\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"}],\"payable\":false,\"type\":\"constructor\"},{\"payable\":true,\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"mana\",\"type\":\"uint256\"}],\"name\":\"LockedBalance\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"target\",\"type\":\"address\"}],\"name\":\"LandClaimContractSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"data\",\"type\":\"bytes\"}],\"name\":\"LandClaimExecuted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_acceptingDeposits\",\"type\":\"bool\"}],\"name\":\"AcceptingDepositsChanged\",\"type\":\"event\"}]","ContractName":"TerraformReserve","CompilerVersion":"v0.4.15+commit.bbb8e64f","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"0000000000000000000000000f5d2fb29fb7d3cfee444a200298f468908cc942","Library":"","SwarmSource":"bzzr://6fe8501df1c5236403021a4816bbbc844e8a18a89c6abf2feb764f82908230f7"}]}