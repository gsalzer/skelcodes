{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.17;\r\ncontract SafeMath {\r\n    function safeAdd(uint x, uint y) pure internal returns(uint) {\r\n      uint z = x + y;\r\n      assert((z >= x) && (z >= y));\r\n      return z;\r\n    }\r\n\r\n    function safeSubtract(uint x, uint y) pure internal returns(uint) {\r\n      assert(x >= y);\r\n      uint z = x - y;\r\n      return z;\r\n    }\r\n\r\n    function safeMult(uint x, uint y) pure internal returns(uint) {\r\n      uint z = x * y;\r\n      assert((x == 0)||(z/x == y));\r\n      return z;\r\n    }\r\n\r\n    function getRandomNumber(uint16 maxRandom, uint8 min, address privateAddress) constant public returns(uint8) {\r\n        uint256 genNum = uint256(block.blockhash(block.number-1)) + uint256(privateAddress);\r\n        return uint8(genNum % (maxRandom - min + 1)+min);\r\n    }\r\n}\r\n\r\ncontract Enums {\r\n    enum ResultCode {\r\n        SUCCESS,\r\n        ERROR_CLASS_NOT_FOUND,\r\n        ERROR_LOW_BALANCE,\r\n        ERROR_SEND_FAIL,\r\n        ERROR_NOT_OWNER,\r\n        ERROR_NOT_ENOUGH_MONEY,\r\n        ERROR_INVALID_AMOUNT\r\n    }\r\n\r\n    enum AngelAura { \r\n        Blue, \r\n        Yellow, \r\n        Purple, \r\n        Orange, \r\n        Red, \r\n        Green \r\n    }\r\n}\r\n\r\ncontract AccessControl {\r\n    address public creatorAddress;\r\n    uint16 public totalSeraphims = 0;\r\n    mapping (address => bool) public seraphims;\r\n\r\n    bool public isMaintenanceMode = true;\r\n \r\n    modifier onlyCREATOR() {\r\n        require(msg.sender == creatorAddress);\r\n        _;\r\n    }\r\n\r\n    modifier onlySERAPHIM() {\r\n        require(seraphims[msg.sender] == true);\r\n        _;\r\n    }\r\n    \r\n    modifier isContractActive {\r\n        require(!isMaintenanceMode);\r\n        _;\r\n    }\r\n    \r\n    // Constructor\r\n    function AccessControl() public {\r\n        creatorAddress = msg.sender;\r\n    }\r\n    \r\n\r\n    function addSERAPHIM(address _newSeraphim) onlyCREATOR public {\r\n        if (seraphims[_newSeraphim] == false) {\r\n            seraphims[_newSeraphim] = true;\r\n            totalSeraphims += 1;\r\n        }\r\n    }\r\n    \r\n    function removeSERAPHIM(address _oldSeraphim) onlyCREATOR public {\r\n        if (seraphims[_oldSeraphim] == true) {\r\n            seraphims[_oldSeraphim] = false;\r\n            totalSeraphims -= 1;\r\n        }\r\n    }\r\n\r\n    function updateMaintenanceMode(bool _isMaintaining) onlyCREATOR public {\r\n        isMaintenanceMode = _isMaintaining;\r\n    }\r\n\r\n  \r\n} \r\n\r\n\r\n\r\n\r\ncontract IPetCardData is AccessControl, Enums {\r\n    uint8 public totalPetCardSeries;    \r\n    uint64 public totalPets;\r\n    \r\n    // write\r\n    function createPetCardSeries(uint8 _petCardSeriesId, uint32 _maxTotal) onlyCREATOR public returns(uint8);\r\n    function setPet(uint8 _petCardSeriesId, address _owner, string _name, uint8 _luck, uint16 _auraRed, uint16 _auraYellow, uint16 _auraBlue) onlySERAPHIM external returns(uint64);\r\n    function setPetAuras(uint64 _petId, uint8 _auraRed, uint8 _auraBlue, uint8 _auraYellow) onlySERAPHIM external;\r\n    function setPetLastTrainingTime(uint64 _petId) onlySERAPHIM external;\r\n    function setPetLastBreedingTime(uint64 _petId) onlySERAPHIM external;\r\n    function addPetIdMapping(address _owner, uint64 _petId) private;\r\n    function transferPet(address _from, address _to, uint64 _petId) onlySERAPHIM public returns(ResultCode);\r\n    function ownerPetTransfer (address _to, uint64 _petId)  public;\r\n    function setPetName(string _name, uint64 _petId) public;\r\n\r\n    // read\r\n    function getPetCardSeries(uint8 _petCardSeriesId) constant public returns(uint8 petCardSeriesId, uint32 currentPetTotal, uint32 maxPetTotal);\r\n    function getPet(uint _petId) constant public returns(uint petId, uint8 petCardSeriesId, string name, uint8 luck, uint16 auraRed, uint16 auraBlue, uint16 auraYellow, uint64 lastTrainingTime, uint64 lastBreedingTime, address owner);\r\n    function getOwnerPetCount(address _owner) constant public returns(uint);\r\n    function getPetByIndex(address _owner, uint _index) constant public returns(uint);\r\n    function getTotalPetCardSeries() constant public returns (uint8);\r\n    function getTotalPets() constant public returns (uint);\r\n}\r\n\r\n\r\n\r\ncontract PetCardData is IPetCardData, SafeMath {\r\n    /*** EVENTS ***/\r\n    event CreatedPet(uint64 petId);\r\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\r\n\r\n    /*** DATA TYPES ***/\r\n    struct PetCardSeries {\r\n        uint8 petCardSeriesId;\r\n        uint32 currentPetTotal;\r\n        uint32 maxPetTotal;\r\n    }\r\n\r\n    struct Pet {\r\n        uint64 petId;\r\n        uint8 petCardSeriesId;\r\n        address owner;\r\n        string name;\r\n        uint8 luck;\r\n        uint16 auraRed;\r\n        uint16 auraYellow;\r\n        uint16 auraBlue;\r\n        uint64 lastTrainingTime;\r\n        uint64 lastBreedingTime;\r\n        uint price; \r\n    }\r\n\r\n\r\n    /*** STORAGE ***/\r\n  \r\n    mapping(uint8 => PetCardSeries) public petCardSeriesCollection;\r\n    mapping(uint => Pet) public petCollection;\r\n    mapping(address => uint64[]) public ownerPetCollection;\r\n    \r\n    /*** FUNCTIONS ***/\r\n    //*** Write Access ***//\r\n    function PetCardData() public {\r\n        \r\n    }\r\n\r\n    //*** Pets ***/\r\n    function createPetCardSeries(uint8 _petCardSeriesId, uint32 _maxTotal) onlyCREATOR public returns(uint8) {\r\n     if ((now > 1516642200) || (totalPetCardSeries >= 19)) {revert();}\r\n        //This confirms that no one, even the develoopers, can create any angel series after JAN/22/2018 @ 0530pm (UTC) or more than the original 24 series.\r\n      \r\n       PetCardSeries storage petCardSeries = petCardSeriesCollection[_petCardSeriesId];\r\n        petCardSeries.petCardSeriesId = _petCardSeriesId;\r\n        petCardSeries.maxPetTotal = _maxTotal;\r\n        totalPetCardSeries += 1;\r\n        return totalPetCardSeries;\r\n    }\r\n\t\r\n\tfunction setPet(uint8 _petCardSeriesId, address _owner, string _name, uint8 _luck, uint16 _auraRed, uint16 _auraYellow, uint16 _auraBlue) onlySERAPHIM external returns(uint64) { \r\n        PetCardSeries storage series = petCardSeriesCollection[_petCardSeriesId];\r\n\r\n        if (series.currentPetTotal >= series.maxPetTotal) {\r\n            revert();\r\n        }\r\n        else {\r\n        totalPets += 1;\r\n        series.currentPetTotal +=1;\r\n        Pet storage pet = petCollection[totalPets];\r\n        pet.petId = totalPets;\r\n        pet.petCardSeriesId = _petCardSeriesId;\r\n        pet.owner = _owner;\r\n        pet.name = _name;\r\n        pet.luck = _luck;\r\n        pet.auraRed = _auraRed;\r\n        pet.auraYellow = _auraYellow;\r\n        pet.auraBlue = _auraBlue;\r\n        pet.lastTrainingTime = 0;\r\n        pet.lastBreedingTime = 0;\r\n        addPetIdMapping(_owner, pet.petId);\r\n        }\r\n    }\r\n\r\n    function setPetAuras(uint64 _petId, uint8 _auraRed, uint8 _auraBlue, uint8 _auraYellow) onlySERAPHIM external {\r\n        Pet storage pet = petCollection[_petId];\r\n        if (pet.petId == _petId) {\r\n            pet.auraRed = _auraRed;\r\n            pet.auraBlue = _auraBlue;\r\n            pet.auraYellow = _auraYellow;\r\n        }\r\n    }\r\n\r\n    function setPetName(string _name, uint64 _petId) public {\r\n        Pet storage pet = petCollection[_petId];\r\n        if ((pet.petId == _petId) && (msg.sender == pet.owner)) {\r\n            pet.name = _name;\r\n        }\r\n    }\r\n\r\n\r\n    function setPetLastTrainingTime(uint64 _petId) onlySERAPHIM external {\r\n        Pet storage pet = petCollection[_petId];\r\n        if (pet.petId == _petId) {\r\n            pet.lastTrainingTime = uint64(now);\r\n        }\r\n    }\r\n\r\n    function setPetLastBreedingTime(uint64 _petId) onlySERAPHIM external {\r\n        Pet storage pet = petCollection[_petId];\r\n        if (pet.petId == _petId) {\r\n            pet.lastBreedingTime = uint64(now);\r\n        }\r\n    }\r\n    \r\n    function addPetIdMapping(address _owner, uint64 _petId) private {\r\n            uint64[] storage owners = ownerPetCollection[_owner];\r\n            owners.push(_petId);\r\n            Pet storage pet = petCollection[_petId];\r\n            pet.owner = _owner;\r\n            //this is a map of ALL the pets an address has EVER owned. \r\n            //We check that they are still the current owner in javascrpit and other places on chain. \r\n        \r\n    }\r\n\t\r\n\tfunction transferPet(address _from, address _to, uint64 _petId) onlySERAPHIM public returns(ResultCode) {\r\n        Pet storage pet = petCollection[_petId];\r\n        if (pet.owner != _from) {\r\n            return ResultCode.ERROR_NOT_OWNER;\r\n        }\r\n        if (_from == _to) {revert();}\r\n        addPetIdMapping(_to, _petId);\r\n        pet.owner = _to;\r\n        return ResultCode.SUCCESS;\r\n    }\r\n    \r\n    //Anyone can transfer a pet they own by calling this function. \r\n    \r\n  function ownerPetTransfer (address _to, uint64 _petId)  public  {\r\n     \r\n        if ((_petId > totalPets) || (_petId == 0)) {revert();}\r\n       if (msg.sender == _to) {revert();} //can't send to yourself. \r\n        if (pet.owner != msg.sender) {\r\n            revert();\r\n        }\r\n        else {\r\n      Pet storage pet = petCollection[_petId];\r\n        pet.owner = _to;\r\n        addPetIdMapping(_to, _petId);\r\n        }\r\n    }\r\n\r\n    //*** Read Access ***//\r\n    function getPetCardSeries(uint8 _petCardSeriesId) constant public returns(uint8 petCardSeriesId, uint32 currentPetTotal, uint32 maxPetTotal) {\r\n        PetCardSeries memory series = petCardSeriesCollection[_petCardSeriesId];\r\n        petCardSeriesId = series.petCardSeriesId;\r\n        currentPetTotal = series.currentPetTotal;\r\n        maxPetTotal = series.maxPetTotal;\r\n    }\r\n\t\r\n\tfunction getPet(uint _petId) constant public returns(uint petId, uint8 petCardSeriesId, string name, uint8 luck, uint16 auraRed, uint16 auraBlue, uint16 auraYellow, uint64 lastTrainingTime, uint64 lastBreedingTime, address owner) {\r\n        Pet memory pet = petCollection[_petId];\r\n        petId = pet.petId;\r\n        petCardSeriesId = pet.petCardSeriesId;\r\n        name = pet.name;\r\n        luck = pet.luck;\r\n        auraRed = pet.auraRed;\r\n        auraBlue = pet.auraBlue;\r\n        auraYellow = pet.auraYellow;\r\n        lastTrainingTime = pet.lastTrainingTime;\r\n        lastBreedingTime = pet.lastBreedingTime;\r\n        owner = pet.owner;\r\n    }\r\n\t\r\n\tfunction getOwnerPetCount(address _owner) constant public returns(uint) {\r\n        return ownerPetCollection[_owner].length;\r\n    }\r\n\t\r\n\tfunction getPetByIndex(address _owner, uint _index) constant public returns(uint) {\r\n        if (_index >= ownerPetCollection[_owner].length)\r\n            return 0;\r\n        return ownerPetCollection[_owner][_index];\r\n    }\r\n\r\n    function getTotalPetCardSeries() constant public returns (uint8) {\r\n        return totalPetCardSeries;\r\n    }\r\n\r\n    function getTotalPets() constant public returns (uint) {\r\n        return totalPets;\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"getTotalPetCardSeries\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_petId\",\"type\":\"uint64\"}],\"name\":\"ownerPetTransfer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"seraphims\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getPetByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"petCollection\",\"outputs\":[{\"name\":\"petId\",\"type\":\"uint64\"},{\"name\":\"petCardSeriesId\",\"type\":\"uint8\"},{\"name\":\"owner\",\"type\":\"address\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"luck\",\"type\":\"uint8\"},{\"name\":\"auraRed\",\"type\":\"uint16\"},{\"name\":\"auraYellow\",\"type\":\"uint16\"},{\"name\":\"auraBlue\",\"type\":\"uint16\"},{\"name\":\"lastTrainingTime\",\"type\":\"uint64\"},{\"name\":\"lastBreedingTime\",\"type\":\"uint64\"},{\"name\":\"price\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_isMaintaining\",\"type\":\"bool\"}],\"name\":\"updateMaintenanceMode\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_petCardSeriesId\",\"type\":\"uint8\"},{\"name\":\"_maxTotal\",\"type\":\"uint32\"}],\"name\":\"createPetCardSeries\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_petCardSeriesId\",\"type\":\"uint8\"}],\"name\":\"getPetCardSeries\",\"outputs\":[{\"name\":\"petCardSeriesId\",\"type\":\"uint8\"},{\"name\":\"currentPetTotal\",\"type\":\"uint32\"},{\"name\":\"maxPetTotal\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_petId\",\"type\":\"uint256\"}],\"name\":\"getPet\",\"outputs\":[{\"name\":\"petId\",\"type\":\"uint256\"},{\"name\":\"petCardSeriesId\",\"type\":\"uint8\"},{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"luck\",\"type\":\"uint8\"},{\"name\":\"auraRed\",\"type\":\"uint16\"},{\"name\":\"auraBlue\",\"type\":\"uint16\"},{\"name\":\"auraYellow\",\"type\":\"uint16\"},{\"name\":\"lastTrainingTime\",\"type\":\"uint64\"},{\"name\":\"lastBreedingTime\",\"type\":\"uint64\"},{\"name\":\"owner\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"maxRandom\",\"type\":\"uint16\"},{\"name\":\"min\",\"type\":\"uint8\"},{\"name\":\"privateAddress\",\"type\":\"address\"}],\"name\":\"getRandomNumber\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"getOwnerPetCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_petCardSeriesId\",\"type\":\"uint8\"},{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_name\",\"type\":\"string\"},{\"name\":\"_luck\",\"type\":\"uint8\"},{\"name\":\"_auraRed\",\"type\":\"uint16\"},{\"name\":\"_auraYellow\",\"type\":\"uint16\"},{\"name\":\"_auraBlue\",\"type\":\"uint16\"}],\"name\":\"setPet\",\"outputs\":[{\"name\":\"\",\"type\":\"uint64\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isMaintenanceMode\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_oldSeraphim\",\"type\":\"address\"}],\"name\":\"removeSERAPHIM\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"name\":\"petCardSeriesCollection\",\"outputs\":[{\"name\":\"petCardSeriesId\",\"type\":\"uint8\"},{\"name\":\"currentPetTotal\",\"type\":\"uint32\"},{\"name\":\"maxPetTotal\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTotalPets\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_petId\",\"type\":\"uint64\"}],\"name\":\"setPetLastBreedingTime\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_name\",\"type\":\"string\"},{\"name\":\"_petId\",\"type\":\"uint64\"}],\"name\":\"setPetName\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"ownerPetCollection\",\"outputs\":[{\"name\":\"\",\"type\":\"uint64\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalPets\",\"outputs\":[{\"name\":\"\",\"type\":\"uint64\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_petId\",\"type\":\"uint64\"}],\"name\":\"setPetLastTrainingTime\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalPetCardSeries\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSeraphims\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_petId\",\"type\":\"uint64\"},{\"name\":\"_auraRed\",\"type\":\"uint8\"},{\"name\":\"_auraBlue\",\"type\":\"uint8\"},{\"name\":\"_auraYellow\",\"type\":\"uint8\"}],\"name\":\"setPetAuras\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_petId\",\"type\":\"uint64\"}],\"name\":\"transferPet\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newSeraphim\",\"type\":\"address\"}],\"name\":\"addSERAPHIM\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"creatorAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"petId\",\"type\":\"uint64\"}],\"name\":\"CreatedPet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"tokenId\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"}]","ContractName":"PetCardData","CompilerVersion":"v0.4.19+commit.c4cbbb05","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://37ebb528280e581a760edc4d122bc9e6c30a49033afeb33064a4050a4b5bd314"}]}