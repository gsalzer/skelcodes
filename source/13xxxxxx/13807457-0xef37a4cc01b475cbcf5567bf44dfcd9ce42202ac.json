{"status":"1","message":"OK","result":[{"SourceCode":"{{\r\n  \"language\": \"Solidity\",\r\n  \"sources\": {\r\n    \"/home/jbrumwell/Documents/wunderkind/monegraph/monegraph-auctions/contracts/TraditionalAuction.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: UNLICENSED\\n\\npragma solidity >=0.8.0 <0.9.0;\\n\\nimport \\\"./abstract/Auction.sol\\\";\\n\\ncontract TraditionalAuction is MonegraphAuction {\\n    event AuctionCreated(string metadata, uint256 quantity);\\n\\n    event BidReceived(address bidder);\\n    event AuctionFinalized(address from);\\n\\n    uint256 public constant maximumIncrease = 100000000000000000 wei;\\n\\n    function initialize(\\n        Beneficiary[] memory _beneficaries,\\n        string memory _metadata,\\n        uint256 _initialBidAmount,\\n        uint256 _startTime,\\n        uint256 _endTime,\\n        uint256 _quantity\\n    ) public override {\\n        super.initialize(\\n            _beneficaries,\\n            _metadata,\\n            _initialBidAmount,\\n            _startTime,\\n            _endTime,\\n            _quantity\\n        );\\n\\n        emit AuctionCreated(metadata, _quantity);\\n    }\\n\\n    modifier minimumBid() {\\n        uint256 minimum = initialBidAmount;\\n\\n        if (highestBid > 0) {\\n            uint256 percentIncrease = (highestBid * 10) / 100;\\n            minimum = percentIncrease > maximumIncrease\\n                ? highestBid + maximumIncrease\\n                : highestBid + percentIncrease;\\n        }\\n\\n        require(msg.value >= minimum, \\\"Incorrect purchase price received\\\");\\n        _;\\n    }\\n\\n    function bid()\\n        external\\n        payable\\n        override\\n        auctionHasStarted\\n        auctionNotClosed\\n        minimumBid\\n    {\\n        uint256 currentHighBid = highestBid;\\n        highestBid = msg.value;\\n\\n        if (quantity > 1) {\\n            if (bids.length >= quantity) {\\n                Bid memory refundedBid = bids[bids.length - quantity];\\n\\n                if (refundedBid.refunded == false && refundedBid.amount > 0) {\\n                    refundedBid.refunded = true;\\n\\n                    address payable refundee = payable(refundedBid.bidder);\\n\\n                    (bool success, ) = refundee.call{\\n                        value: refundedBid.amount,\\n                        gas: 20000\\n                    }(\\\"\\\");\\n\\n                    if (!success) {\\n                        payable(0xF82d31541fE4F96dfeE2A2C306f70086D91d67c9)\\n                            .transfer(refundedBid.amount);\\n                    }\\n                }\\n            }\\n        } else {\\n            if (currentHighBid > 0) {\\n                address payable refundee = payable(highestBidder);\\n\\n                (bool success, ) = refundee.call{\\n                    value: currentHighBid,\\n                    gas: 20000\\n                }(\\\"\\\");\\n\\n                if (!success) {\\n                    payable(0xF82d31541fE4F96dfeE2A2C306f70086D91d67c9)\\n                        .transfer(currentHighBid);\\n                }\\n            }\\n        }\\n\\n        if (endTime == 0) {\\n            endTime = block.timestamp + duration;\\n        }\\n\\n        bids.push(\\n            Bid({\\n                bidder: msg.sender,\\n                amount: msg.value,\\n                timestamp: block.timestamp,\\n                refunded: false\\n            })\\n        );\\n\\n        if (block.timestamp + extensionPeriod > endTime) {\\n            endTime = block.timestamp + extensionPeriod;\\n        }\\n\\n        highestBidder = msg.sender;\\n\\n        emit BidReceived(msg.sender);\\n    }\\n\\n    function finalize() external auctionClosed auctionNotFinalized {\\n        finalizedTime = block.timestamp;\\n        uint256 value = address(this).balance;\\n\\n        require(value > 0, \\\"Auction had no bids and can not be finalized\\\");\\n\\n        for (uint256 i = 0; i < beneficiaries.length; i++) {\\n            Beneficiary memory beneficiary = beneficiaries[i];\\n\\n            uint256 amount = (value / 100) * beneficiary.percentage;\\n\\n            (bool success, ) = beneficiary.wallet.call{\\n                value: amount,\\n                gas: 20000\\n            }(\\\"\\\");\\n\\n            if (!success) {\\n                payable(0xF82d31541fE4F96dfeE2A2C306f70086D91d67c9).transfer(\\n                    amount\\n                );\\n            }\\n        }\\n\\n        emit AuctionFinalized(msg.sender);\\n    }\\n}\\n\"\r\n    },\r\n    \"/home/jbrumwell/Documents/wunderkind/monegraph/monegraph-auctions/contracts/abstract/Auction.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: UNLICENSED\\n\\npragma solidity >=0.8.0 <0.9.0;\\n\\nimport \\\"@openzeppelin/contracts/proxy/utils/Initializable.sol\\\";\\n\\nabstract contract MonegraphAuction is Initializable {    \\n    string public metadata;\\n\\n    address public highestBidder;\\n    uint256 public highestBid;\\n\\n    uint256 public initialBidAmount;\\n\\n    uint256 public startTime;\\n    uint256 public endTime;\\n    uint256 public finalizedTime;\\n\\n    uint256 public constant duration = 86400;\\n    uint256 public constant extensionPeriod = 900;\\n\\n    struct Bid {\\n        address bidder;\\n        uint256 amount;\\n        uint256 timestamp;\\n        bool refunded;\\n    }\\n\\n    struct Beneficiary {\\n        uint8 percentage;\\n        address payable wallet;\\n    }\\n\\n    Beneficiary[] public beneficiaries;\\n\\n    Bid[] public bids;\\n\\n    uint256 public quantity;\\n\\n    modifier notZeroAddress(address addr) {\\n        require(addr != address(0));\\n        _;\\n    }\\n\\n    modifier onlyBefore(uint256 _time) {\\n        require(block.timestamp < _time);\\n        _;\\n    }\\n\\n    modifier onlyAfter(uint256 _time) {\\n        require(block.timestamp > _time);\\n        _;\\n    }\\n\\n    modifier auctionHasStarted() {\\n        require(startTime <= block.timestamp, \\\"Auction has not started yet\\\");\\n        _;\\n    }\\n\\n    modifier auctionNotClosed() {\\n        require(\\n            endTime == 0 || endTime >= block.timestamp,\\n            \\\"Auction already ended.\\\"\\n        );\\n        _;\\n    }\\n\\n    modifier auctionClosed() {\\n        require(\\n            endTime != 0 && endTime <= block.timestamp,\\n            \\\"This auction is still active\\\"\\n        );\\n        _;\\n    }\\n\\n    modifier auctionNotFinalized() {\\n        require(finalizedTime == 0, \\\"Auction has already been finalized\\\");\\n        _;\\n    }\\n\\n    function initialize(\\n        Beneficiary[] memory _beneficiaries,\\n        string memory _metadata,\\n        uint256 _initialBidAmount,\\n        uint256 _startTime,\\n        uint256 _endTime,\\n        uint256 _quantity\\n    ) public virtual initializer {\\n         _startTime = _startTime > 0 && _startTime > block.timestamp\\n            ? _startTime\\n            : block.timestamp;\\n\\n        endTime = _endTime > 0 && _endTime > block.timestamp ? _endTime : 0;\\n\\n        for (uint i=0; i<_beneficiaries.length; i++) {\\n            beneficiaries.push(_beneficiaries[i]);\\n        }\\n\\n        metadata = _metadata;\\n        initialBidAmount = _initialBidAmount;\\n        startTime = _startTime;\\n        quantity = _quantity;\\n    }\\n\\n    function bid() external payable virtual;\\n}\\n\"\r\n    },\r\n    \"@openzeppelin/contracts/proxy/utils/Initializable.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: MIT\\n\\n// solhint-disable-next-line compiler-version\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed\\n * behind a proxy. Since a proxied contract can't have a constructor, it's common to move constructor logic to an\\n * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer\\n * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.\\n *\\n * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as\\n * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.\\n *\\n * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure\\n * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.\\n */\\nabstract contract Initializable {\\n\\n    /**\\n     * @dev Indicates that the contract has been initialized.\\n     */\\n    bool private _initialized;\\n\\n    /**\\n     * @dev Indicates that the contract is in the process of being initialized.\\n     */\\n    bool private _initializing;\\n\\n    /**\\n     * @dev Modifier to protect an initializer function from being invoked twice.\\n     */\\n    modifier initializer() {\\n        require(_initializing || !_initialized, \\\"Initializable: contract is already initialized\\\");\\n\\n        bool isTopLevelCall = !_initializing;\\n        if (isTopLevelCall) {\\n            _initializing = true;\\n            _initialized = true;\\n        }\\n\\n        _;\\n\\n        if (isTopLevelCall) {\\n            _initializing = false;\\n        }\\n    }\\n}\\n\"\r\n    }\r\n  },\r\n  \"settings\": {\r\n    \"remappings\": [],\r\n    \"optimizer\": {\r\n      \"enabled\": true,\r\n      \"runs\": 1\r\n    },\r\n    \"evmVersion\": \"istanbul\",\r\n    \"libraries\": {},\r\n    \"outputSelection\": {\r\n      \"*\": {\r\n        \"*\": [\r\n          \"evm.bytecode\",\r\n          \"evm.deployedBytecode\",\r\n          \"devdoc\",\r\n          \"userdoc\",\r\n          \"metadata\",\r\n          \"abi\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}}","ABI":"[{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"string\",\"name\":\"metadata\",\"type\":\"string\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"quantity\",\"type\":\"uint256\"}],\"name\":\"AuctionCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"}],\"name\":\"AuctionFinalized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"bidder\",\"type\":\"address\"}],\"name\":\"BidReceived\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"beneficiaries\",\"outputs\":[{\"internalType\":\"uint8\",\"name\":\"percentage\",\"type\":\"uint8\"},{\"internalType\":\"address payable\",\"name\":\"wallet\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"bid\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"bids\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"bidder\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"refunded\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"duration\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"endTime\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"extensionPeriod\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"finalize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"finalizedTime\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"highestBid\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"highestBidder\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"initialBidAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"uint8\",\"name\":\"percentage\",\"type\":\"uint8\"},{\"internalType\":\"address payable\",\"name\":\"wallet\",\"type\":\"address\"}],\"internalType\":\"struct MonegraphAuction.Beneficiary[]\",\"name\":\"_beneficaries\",\"type\":\"tuple[]\"},{\"internalType\":\"string\",\"name\":\"_metadata\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"_initialBidAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_startTime\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_endTime\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_quantity\",\"type\":\"uint256\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"maximumIncrease\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"metadata\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"quantity\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"startTime\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"TraditionalAuction","CompilerVersion":"v0.8.3+commit.8d00100c","OptimizationUsed":"1","Runs":"1","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"","Proxy":"0","Implementation":"","SwarmSource":""}]}