{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.8.4;\r\n\r\n/// @title a PCV Deposit interface for only balance getters\r\n/// @author Fei Protocol\r\ninterface IPCVDepositBalances {\r\n    \r\n    // ----------- Getters -----------\r\n    \r\n    /// @notice gets the effective balance of \"balanceReportedIn\" token if the deposit were fully withdrawn\r\n    function balance() external view returns (uint256);\r\n\r\n    /// @notice gets the token address in which this deposit returns its balance\r\n    function balanceReportedIn() external view returns (address);\r\n\r\n    /// @notice gets the resistant token balance and protocol owned fei of this deposit\r\n    function resistantBalanceAndFei() external view returns (uint256, uint256);\r\n}\r\n\r\n/**\r\n  @notice a lightweight contract to wrap old PCV deposits to use the new interface \r\n  @author Fei Protocol\r\n  When upgrading the PCVDeposit interface, there are many old contracts which do not support it.\r\n  The main use case for the new interface is to add read methods for the Collateralization Oracle.\r\n  Most PCVDeposits resistant balance method is simply returning the balance as a pass-through\r\n  If the PCVDeposit holds FEI it may be considered as protocol FEI\r\n\r\n  This wrapper can be used in the CR oracle which reduces the number of contract upgrades and reduces the complexity and risk of the upgrade\r\n*/\r\ncontract PCVDepositWrapper is IPCVDepositBalances {\r\n   \r\n    /// @notice the referenced PCV Deposit\r\n    IPCVDepositBalances public pcvDeposit;\r\n\r\n    /// @notice the balance reported in token\r\n    address public token;\r\n\r\n    /// @notice a flag for whether to report the balance as protocol owned FEI\r\n    bool public isProtocolFeiDeposit;\r\n\r\n    constructor(IPCVDepositBalances _pcvDeposit, address _token, bool _isProtocolFeiDeposit) {\r\n        pcvDeposit = _pcvDeposit;\r\n        token = _token;\r\n        isProtocolFeiDeposit = _isProtocolFeiDeposit;\r\n    }\r\n\r\n    /// @notice returns total balance of PCV in the Deposit\r\n    function balance() public view override returns (uint256) {\r\n        return pcvDeposit.balance();\r\n    }\r\n\r\n    /// @notice returns the resistant balance and FEI in the deposit\r\n    function resistantBalanceAndFei() public view override returns (uint256, uint256) {\r\n        uint256 resistantBalance = balance();\r\n        uint256 reistantFei = isProtocolFeiDeposit ? resistantBalance : 0;\r\n        return (resistantBalance, reistantFei);\r\n    }\r\n\r\n    /// @notice display the related token of the balance reported\r\n    function balanceReportedIn() public view override returns (address) {\r\n        return token;\r\n    }\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"contract IPCVDepositBalances\",\"name\":\"_pcvDeposit\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_token\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_isProtocolFeiDeposit\",\"type\":\"bool\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"balance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"balanceReportedIn\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"isProtocolFeiDeposit\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pcvDeposit\",\"outputs\":[{\"internalType\":\"contract IPCVDepositBalances\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"resistantBalanceAndFei\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"token\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"PCVDepositWrapper","CompilerVersion":"v0.8.4+commit.c7e474f2","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"00000000000000000000000017305f0e18318994a57b494078cac866a857f7b6000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000000000000000000000000000000000000000000000","EVMVersion":"Default","Library":"","LicenseType":"Unknown","Proxy":"0","Implementation":"","SwarmSource":"ipfs://a48f6909c78bd3a802cdfbc434c70e9ba4ac61a47ff9077a45b0e9f94eb0950c"}]}