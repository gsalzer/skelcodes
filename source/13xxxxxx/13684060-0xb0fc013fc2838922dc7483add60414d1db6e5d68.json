{"status":"1","message":"OK","result":[{"SourceCode":"// SPDX-License-Identifier: UNLICENSED\r\n\r\npragma solidity ^0.8.4;\r\n\r\ncontract Parent {\r\n  event Upgraded(address indexed implementation);\r\n  event ProxyAdminChanged(address);\r\n  bytes32 internal constant IMPLEMENTATION_SLOT = 0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc;\r\n  address public proxyAdmin;\r\n\r\n  constructor() {\r\n      proxyAdmin=msg.sender;\r\n      emit ProxyAdminChanged(msg.sender);\r\n  }\r\n  \r\n  function setProxyAdmin(address newProxyAdmin) public onlyProxyAdmin(){\r\n      proxyAdmin=newProxyAdmin;\r\n      emit ProxyAdminChanged(newProxyAdmin);\r\n  }\r\n \r\n  function getImplementation() public view returns (address impl){\r\n      bytes32 slot = IMPLEMENTATION_SLOT;\r\n      assembly {\r\n          impl := sload(slot)\r\n      }\r\n    }\r\n    \r\n  fallback() external payable {\r\n    address adrs=getImplementation();\r\n    assembly {\r\n      calldatacopy(0, 0, calldatasize())\r\n      let result := delegatecall(gas(), adrs, 0, calldatasize(), 0, 0)\r\n      // Copy the returned data.\r\n      returndatacopy(0, 0, returndatasize())\r\n      switch result\r\n        case 0 {\r\n          revert(0, returndatasize())\r\n        }\r\n        default {\r\n          return(0, returndatasize())\r\n        }\r\n    }\r\n  }\r\n  modifier onlyProxyAdmin() {\r\n    require(msg.sender==proxyAdmin,\"Must be a proxy admin\");\r\n    _;\r\n  }\r\n\r\n  function isContract(address _addr) internal view returns (bool) {\r\n    bytes32 codehash;\r\n    bytes32 accountHash = 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470;\r\n    assembly { codehash := extcodehash(_addr) }\r\n    return (codehash != 0x0 && codehash != accountHash);\r\n  }\r\n\r\n  function setImplementation(address newImplementation) public onlyProxyAdmin{\r\n      require(isContract(newImplementation), \"Cannot set a proxy implementation to a non-contract address\");\r\n      require(msg.sender==proxyAdmin);\r\n      bytes32 slot = IMPLEMENTATION_SLOT;\r\n      assembly {\r\n        sstore(slot, newImplementation)\r\n      }\r\n      emit Upgraded(newImplementation);\r\n      (bool success, bytes memory data) = newImplementation.delegatecall(\r\n        abi.encodeWithSignature(\"initialize()\")\r\n      );\r\n  }\r\n}","ABI":"[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"ProxyAdminChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"Upgraded\",\"type\":\"event\"},{\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"inputs\":[],\"name\":\"getImplementation\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"impl\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"proxyAdmin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newImplementation\",\"type\":\"address\"}],\"name\":\"setImplementation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newProxyAdmin\",\"type\":\"address\"}],\"name\":\"setProxyAdmin\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"Parent","CompilerVersion":"v0.8.7+commit.e28d00a7","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"ipfs://40f1d3471818d3c1b0b6aec064c959719ab770796ad4da54060d82daefd8b583"}]}