{"status":"1","message":"OK","result":[{"SourceCode":"# @version 0.2.15\r\n# @author skozin\r\n# @licence MIT\r\n\r\ninterface LidoOracle:\r\n    def getLastCompletedEpochId() -> uint256: view\r\n    def getBeaconSpec() -> (uint256, uint256, uint256, uint256): view\r\n\r\ninterface AnchorVault:\r\n    def last_liquidation_time() -> uint256: view\r\n\r\n\r\nLIDO_ORACLE: constant(address) = 0x442af784A788A5bd6F42A01Ebe9F287a871243fb\r\nANCHOR_VAULT: constant(address) = 0xA2F987A546D4CD1c607Ee8141276876C26b72Bdf\r\n\r\n\r\nadmin: public(address)\r\noracle_report_period: public(uint256)\r\nmax_oracle_report_inclusion_delay: public(uint256)\r\nmax_rewards_liquidation_delay: public(uint256)\r\n\r\n\r\n@external\r\ndef __init__(admin: address):\r\n    self.admin = admin\r\n\r\n\r\n@external\r\ndef set_admin(new_admin: address):\r\n    assert msg.sender == self.admin # dev: unauthorized\r\n    self.admin = new_admin\r\n\r\n\r\n@external\r\ndef configure(\r\n    oracle_report_period: uint256,\r\n    max_oracle_report_inclusion_delay: uint256,\r\n    max_rewards_liquidation_delay: uint256,\r\n):\r\n    assert msg.sender == self.admin # dev: unauthorized\r\n    self.oracle_report_period = oracle_report_period\r\n    self.max_oracle_report_inclusion_delay = max_oracle_report_inclusion_delay\r\n    self.max_rewards_liquidation_delay = max_rewards_liquidation_delay\r\n\r\n\r\n@internal\r\n@view\r\ndef _last_reported_epoch_time() -> uint256:\r\n    _: uint256 = 0\r\n    slots_per_epoch: uint256 = 0\r\n    seconds_per_slot: uint256 = 0\r\n    genesis_time: uint256 = 0\r\n    (_, slots_per_epoch, seconds_per_slot, genesis_time) = LidoOracle(LIDO_ORACLE).getBeaconSpec()\r\n    epoch_id: uint256 = LidoOracle(LIDO_ORACLE).getLastCompletedEpochId()\r\n    return genesis_time + epoch_id * slots_per_epoch * seconds_per_slot\r\n\r\n\r\n@internal\r\n@view\r\ndef _last_rewards_liquidation_time() -> uint256:\r\n    return AnchorVault(ANCHOR_VAULT).last_liquidation_time()\r\n\r\n\r\n@internal\r\n@view\r\ndef _time_since_last_liquidation() -> uint256:\r\n    last_liquidation_at: uint256 = self._last_rewards_liquidation_time()\r\n    return block.timestamp - last_liquidation_at\r\n\r\n@external\r\n@view\r\ndef time_since_last_liquidation() -> uint256:\r\n    return self._time_since_last_liquidation()\r\n\r\n\r\n@internal\r\n@view\r\ndef _max_time_since_last_liquidation() -> uint256:\r\n    return self.oracle_report_period + self.max_rewards_liquidation_delay\r\n\r\n@external\r\n@view\r\ndef max_time_since_last_liquidation() -> uint256:\r\n    return self._max_time_since_last_liquidation()\r\n\r\n\r\n@internal\r\n@view\r\ndef _time_without_liquidation_since_reported_epoch() -> uint256:\r\n    reported_epoch_time: uint256 = self._last_reported_epoch_time()\r\n    last_liquidation_at: uint256 = self._last_rewards_liquidation_time()\r\n    if last_liquidation_at > reported_epoch_time:\r\n        return 0\r\n    return block.timestamp - reported_epoch_time\r\n\r\n@external\r\n@view\r\ndef time_without_liquidation_since_reported_epoch() -> uint256:\r\n    return self._time_without_liquidation_since_reported_epoch()\r\n\r\n\r\n@internal\r\n@view\r\ndef _max_time_without_liquidation_since_reported_epoch() -> uint256:\r\n    return self.max_oracle_report_inclusion_delay + self.max_rewards_liquidation_delay\r\n\r\n@external\r\n@view\r\ndef max_time_without_liquidation_since_reported_epoch() -> uint256:\r\n    return self._max_time_without_liquidation_since_reported_epoch()\r\n\r\n\r\n@external\r\n@view\r\ndef is_rewards_liquidation_overdue_1() -> bool:\r\n    return self._time_since_last_liquidation() > self._max_time_since_last_liquidation()\r\n\r\n\r\n@external\r\n@view\r\ndef is_rewards_liquidation_overdue_2() -> bool:\r\n    return (\r\n        self._time_without_liquidation_since_reported_epoch() >\r\n        self._max_time_without_liquidation_since_reported_epoch()\r\n    )","ABI":"[{\"stateMutability\":\"nonpayable\",\"type\":\"constructor\",\"inputs\":[{\"name\":\"admin\",\"type\":\"address\"}],\"outputs\":[]},{\"stateMutability\":\"nonpayable\",\"type\":\"function\",\"name\":\"set_admin\",\"inputs\":[{\"name\":\"new_admin\",\"type\":\"address\"}],\"outputs\":[],\"gas\":37545},{\"stateMutability\":\"nonpayable\",\"type\":\"function\",\"name\":\"configure\",\"inputs\":[{\"name\":\"oracle_report_period\",\"type\":\"uint256\"},{\"name\":\"max_oracle_report_inclusion_delay\",\"type\":\"uint256\"},{\"name\":\"max_rewards_liquidation_delay\",\"type\":\"uint256\"}],\"outputs\":[],\"gas\":107493},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"time_since_last_liquidation\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"gas\":6528},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"max_time_since_last_liquidation\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"gas\":5223},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"time_without_liquidation_since_reported_epoch\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"gas\":19830},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"max_time_without_liquidation_since_reported_epoch\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"gas\":5343},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"is_rewards_liquidation_overdue_1\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"gas\":11511},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"is_rewards_liquidation_overdue_2\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"gas\":24843},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"admin\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"gas\":2628},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"oracle_report_period\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"gas\":2658},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"max_oracle_report_inclusion_delay\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"gas\":2688},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"max_rewards_liquidation_delay\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"gas\":2718}]","ContractName":"Vyper_contract","CompilerVersion":"vyper:0.2.15","OptimizationUsed":"0","Runs":"0","ConstructorArguments":"000000000000000000000000e19fc582dd93fa876cf4061eb5456f310144f57b","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":""}]}