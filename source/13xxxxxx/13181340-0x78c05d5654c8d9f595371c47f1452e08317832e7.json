{"status":"1","message":"OK","result":[{"SourceCode":"//SPDX-License-Identifier: MIT\r\n\r\npragma solidity ^0.8.0;\r\n\r\nabstract contract IMarketplaceV0 {\r\n    struct Order {\r\n        uint price;\r\n        address seller;\r\n        uint timestamp;\r\n        bool exists;\r\n    }\r\n\r\n    function jinglesOnSale(uint256) public view virtual returns(uint);\r\n\r\n    function numOrders() public view virtual returns (uint);\r\n\r\n    function sellOrders(uint256) public view virtual returns (Order memory);\r\n}\r\n\r\nabstract contract ISampleV0 {\r\n    function getTokenType(uint _sampleId) public virtual view returns (uint);\r\n    function getSamplesForOwner(address _owner) public virtual view returns (uint[] memory);\r\n}\r\n\r\nabstract contract IJingleV0 {\r\n\r\n    function ownerOf(uint256 _tokenId) public virtual view returns (address owner);\r\n    function getAllJingles(address _owner) external virtual view returns(uint[] memory);\r\n    function getMetaInfo(uint _jingleId) external virtual view returns(string memory, string memory);\r\n\r\n    function getSamplesForJingle(uint _jingleId) external virtual view returns(uint[] memory);\r\n\r\n}\r\n\r\ncontract JingleViewV0 {\r\n\r\n    address public constant SAMPLE_V0_ADDR = 0x6ac9E08B3AA6b501E5FB29B3D65E4c12305Ba721;\r\n    address public constant MARKET_PLACE_V0 = 0xb8E392da7aBb836CfF06d827531A7e5F1B00BeD2;\r\n    address public constant JINGLE_V0_ADDR = 0x5AF7Af54E8Bc34b293e356ef11fffE51d6f9Ae78;\r\n\r\n    struct JingleData {\r\n        uint256 id;\r\n        string name;\r\n        string author;\r\n        bool onSale;\r\n        uint256 price;\r\n        address owner;\r\n        uint256[] sampleIds;\r\n        uint256[] sampleTypes;\r\n    }\r\n\r\n    struct SampleData {\r\n        uint sampleId;\r\n        uint sampleType;\r\n    }\r\n\r\n    function getFullJingleData(uint256 _jingleId) public view returns (JingleData memory) {\r\n        IJingleV0 jingleContract = IJingleV0(JINGLE_V0_ADDR);\r\n\r\n        (string memory name, string memory author) = jingleContract.getMetaInfo(_jingleId);\r\n\r\n        uint256[] memory sampleIds = jingleContract.getSamplesForJingle(_jingleId);\r\n\r\n        uint256[] memory sampleTypes = new uint256[](sampleIds.length);\r\n\r\n        for(uint256 i = 0; i < sampleIds.length; ++i) {\r\n            sampleTypes[i] = ISampleV0(SAMPLE_V0_ADDR).getTokenType(sampleIds[i]);\r\n        }\r\n\r\n        IMarketplaceV0.Order memory order = IMarketplaceV0(MARKET_PLACE_V0).sellOrders(_jingleId);\r\n        return JingleData({\r\n            id: _jingleId,\r\n            name: name,\r\n            author: author,\r\n            onSale: order.exists,\r\n            price: order.price,\r\n            owner: jingleContract.ownerOf(_jingleId),\r\n            sampleIds: sampleIds,\r\n            sampleTypes: sampleTypes\r\n        });\r\n    }\r\n\r\n    function getFullJingleDataForUser(address _user) public view returns (JingleData[] memory jingles) {\r\n        IJingleV0 jingleContract = IJingleV0(JINGLE_V0_ADDR);\r\n\r\n        uint256[] memory jingleIds = jingleContract.getAllJingles(_user);\r\n\r\n        jingles = new JingleData[](jingleIds.length);\r\n\r\n        for(uint256 i = 0; i < jingles.length; ++i) {\r\n            jingles[i] = getFullJingleData(jingleIds[i]);\r\n        }\r\n    }\r\n\r\n    function getSamplesForUser(address _owner) public view returns (SampleData[] memory samples) {\r\n        uint256[] memory sampleIds = ISampleV0(SAMPLE_V0_ADDR).getSamplesForOwner(_owner);\r\n\r\n        samples = new SampleData[](sampleIds.length);\r\n\r\n        for(uint256 i = 0; i < samples.length; ++i) {\r\n            samples[i] = SampleData({\r\n                sampleId: sampleIds[i],\r\n                sampleType: ISampleV0(SAMPLE_V0_ADDR).getTokenType(sampleIds[i])\r\n            });\r\n        }\r\n    }\r\n\r\n    function getPaginatedJingles(uint _page, uint _perPage) public view returns (JingleData[] memory) {\r\n        JingleData[] memory strategiesPerPage = new JingleData[](_perPage);\r\n\r\n        uint start = _page * _perPage;\r\n        uint end = start + _perPage;\r\n\r\n        end = (end > strategiesPerPage.length) ? strategiesPerPage.length : end;\r\n\r\n        uint count = 0;\r\n        for (uint i = start; i < end; i++) {\r\n            strategiesPerPage[count] = getFullJingleData(i);\r\n            count++;\r\n        }\r\n\r\n        return strategiesPerPage;\r\n    }\r\n\r\n    function getJinglesOnSale() public view returns (JingleData[] memory jinglesOnSale) {\r\n        uint numOrders = IMarketplaceV0(MARKET_PLACE_V0).numOrders();\r\n        uint256[] memory jingleIds = new uint256[](numOrders);\r\n\r\n        for (uint i = 0; i < jingleIds.length; ++i) {\r\n            jingleIds[i] = IMarketplaceV0(MARKET_PLACE_V0).jinglesOnSale(i);\r\n        }\r\n\r\n        jinglesOnSale = new JingleData[](jingleIds.length);\r\n\r\n        for(uint256 i = 0; i < jinglesOnSale.length; ++i) {\r\n            jinglesOnSale[i] = getFullJingleData(jingleIds[i]);\r\n        }\r\n\r\n        return jinglesOnSale;\r\n    }\r\n}","ABI":"[{\"inputs\":[],\"name\":\"JINGLE_V0_ADDR\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MARKET_PLACE_V0\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"SAMPLE_V0_ADDR\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_jingleId\",\"type\":\"uint256\"}],\"name\":\"getFullJingleData\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"internalType\":\"bool\",\"name\":\"onSale\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleIds\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleTypes\",\"type\":\"uint256[]\"}],\"internalType\":\"struct JingleViewV0.JingleData\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getFullJingleDataForUser\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"internalType\":\"bool\",\"name\":\"onSale\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleIds\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleTypes\",\"type\":\"uint256[]\"}],\"internalType\":\"struct JingleViewV0.JingleData[]\",\"name\":\"jingles\",\"type\":\"tuple[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getJinglesOnSale\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"internalType\":\"bool\",\"name\":\"onSale\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleIds\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleTypes\",\"type\":\"uint256[]\"}],\"internalType\":\"struct JingleViewV0.JingleData[]\",\"name\":\"jinglesOnSale\",\"type\":\"tuple[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_page\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_perPage\",\"type\":\"uint256\"}],\"name\":\"getPaginatedJingles\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"author\",\"type\":\"string\"},{\"internalType\":\"bool\",\"name\":\"onSale\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"price\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleIds\",\"type\":\"uint256[]\"},{\"internalType\":\"uint256[]\",\"name\":\"sampleTypes\",\"type\":\"uint256[]\"}],\"internalType\":\"struct JingleViewV0.JingleData[]\",\"name\":\"\",\"type\":\"tuple[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"getSamplesForUser\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"sampleId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"sampleType\",\"type\":\"uint256\"}],\"internalType\":\"struct JingleViewV0.SampleData[]\",\"name\":\"samples\",\"type\":\"tuple[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"JingleViewV0","CompilerVersion":"v0.8.7+commit.e28d00a7","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":"ipfs://bb903c3ab764c1deb46fbeb7283c437286f1809c636fca57150985342ec0d336"}]}