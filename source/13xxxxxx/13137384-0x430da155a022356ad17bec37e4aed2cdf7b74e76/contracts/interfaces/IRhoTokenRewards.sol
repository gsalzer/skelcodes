//SPDX-License-Identifier: MIT
pragma solidity 0.8.4;

import {IFlurryStakingRewards} from "../interfaces/IFlurryStakingRewards.sol";

/**
 * @title RhoToken Rewards Interface
 * @notice Interface for bonus FLURRY token rewards contract for RhoToken holders
 */
interface IRhoTokenRewards {
    /**
     * @notice checks whether the rewards for a rhoToken is supported by the reward scheme
     * @param rhoToken address of rhoToken contract
     * @return true if the reward scheme supports `rhoToken`, false otherwise
     */
    function isSupported(address rhoToken) external returns (bool);

    /**
     * @return list of addresses of rhoTokens registered in this contract
     */
    function getRhoTokenList() external view returns (address[] memory);

    /**
     * @return amount of FLURRY distributed for all rhoTokens per block
     */
    function rewardsRate() external view returns (uint256);

    /**
     * @notice Admin function - set reward rate earned for all rhoTokens per block
     * @param newRewardsRate amount of FLURRY (in wei) per block
     */
    function setRewardsRate(uint256 newRewardsRate) external;

    /**
     * @notice A method to allow a stakeholder to check his rewards.
     * @param user The stakeholder to check rewards for.
     * @param rhoToken Address of rhoToken contract
     * @return Accumulated rewards of addr holder (in wei)
     */
    function rewardOf(address user, address rhoToken) external view returns (uint256);

    /**
     * @notice A method to allow a stakeholder to check his rewards for all rhoToken
     * @param user The stakeholder to check rewards for
     * @return Accumulated rewards of addr holder (in wei)
     */
    function totalRewardOf(address user) external view returns (uint256);

    // function setRewardSpeed(uint256 flurrySpeed) public

    /**
     * @notice Total accumulated reward per token
     * @param rhoToken Address of rhoToken contract
     * @return Reward entitlement for rho token
     */
    function rewardsPerToken(address rhoToken) external view returns (uint256);

    /**
     * @notice current reward rate per token staked
     * @param rhoToken Address of rhoToken contract
     * @return reward rate denominated in FLURRY per block
     */
    function rewardRatePerRhoToken(address rhoToken) external view returns (uint256);

    /**
     * @notice Admin function - A method to set reward duration
     * @param rhoToken Address of rhoToken contract
     * @param rewardDuration Reward duration in number of blocks
     */
    function startRewards(address rhoToken, uint256 rewardDuration) external;

    /**
     * @notice Admin function - End Rewards distribution earlier, if there is one running
     * @param rhoToken Address of rhoToken contract
     */
    function endRewards(address rhoToken) external;

    /**
     * @notice Calculate and allocate rewards token for address holder
     * Rewards should accrue from _lastUpdateBlock to lastBlockApplicable
     * rewardsPerToken is based on the total supply of the RhoToken, hence
     * this function needs to be called every time total supply changes
     * @dev intended to be called externally by RhoToken contract modifier, and internally
     * @param user the user to update reward for
     * @param rhoToken the rhoToken to update reward for
     */
    function updateReward(address user, address rhoToken) external;

    /**
     * @notice NOT for external use
     * @dev allows Flurry Staking Rewards contract to claim rewards for one rhoToken on behalf of a user
     * @param onBehalfOf address of the user to claim rewards for
     * @param rhoToken Address of rhoToken contract
     */
    function claimReward(address onBehalfOf, address rhoToken) external;

    /**
     * @notice A method to allow a rhoToken holder to claim his rewards for one rhoToken
     * @param rhoToken Address of rhoToken contract
     * Note: If stakingRewards contract do not have enough tokens to pay,
     * this will fail silently and user rewards remains as a credit in this contract
     */
    function claimReward(address rhoToken) external;

    /**
     * @notice NOT for external use
     * @dev allows Flurry Staking Rewards contract to claim rewards for all rhoTokens on behalf of a user
     * @param onBehalfOf address of the user to claim rewards for
     */
    function claimAllReward(address onBehalfOf) external;

    /**
     * @notice A method to allow a rhoToken holder to claim his rewards for all rhoTokens
     * Note: If stakingRewards contract do not have enough tokens to pay,
     * this will fail silently and user rewards remains as a credit in this contract
     */
    function claimAllReward() external;

    /**
     * @notice Admin function - register a rhoToken to this contract
     * @param rhoToken address of the rhoToken to be registered
     * @param allocPoint allocation points (weight) assigned to the given rhoToken
     */
    function addRhoToken(address rhoToken, uint256 allocPoint) external;

    /**
     * @notice Admin function - change the allocation points of a rhoToken registered in this contract
     * @param rhoToken address of the rhoToken subject to change
     * @param allocPoint allocation points (weight) assigned to the given rhoToken
     */
    function setRhoToken(address rhoToken, uint256 allocPoint) external;

    /**
     * @notice Admin function - withdraw random token transfer to this contract
     * @param token ERC20 token address to be sweeped
     * @param to address for sending sweeped tokens to
     */
    function sweepERC20Token(address token, address to) external;

    /**
     * @return reference to RhoToken Rewards contract
     */
    function flurryStakingRewards() external returns (IFlurryStakingRewards);
}

