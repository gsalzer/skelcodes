{"status":"1","message":"OK","result":[{"SourceCode":"// Verified using https://dapp.tools\n\n// hevm: flattened sources of src/borrower/deployer.sol\n// SPDX-License-Identifier: AGPL-3.0-only\npragma solidity >=0.7.6;\n\n////// src/borrower/fabs/interfaces.sol\n/* pragma solidity >=0.7.6; */\n\ninterface NAVFeedFabLike {\n    function newFeed() external returns (address);\n}\n\ninterface TitleFabLike {\n    function newTitle(string calldata, string calldata) external returns (address);\n}\n\ninterface PileFabLike {\n    function newPile() external returns (address);\n}\n\ninterface ShelfFabLike {\n    function newShelf(address, address, address, address) external returns (address);\n}\n\n\n\n////// src/fixed_point.sol\n/* pragma solidity >=0.7.6; */\n\nabstract contract FixedPoint {\n    struct Fixed27 {\n        uint value;\n    }\n}\n\n////// src/borrower/deployer.sol\n/* pragma solidity >=0.7.6; */\n\n/* import { ShelfFabLike, PileFabLike, TitleFabLike } from \"./fabs/interfaces.sol\"; */\n/* import { FixedPoint } from \"./../fixed_point.sol\"; */\n\ninterface DependLike_1 {\n    function depend(bytes32, address) external;\n}\n\ninterface AuthLike_1 {\n    function rely(address) external;\n    function deny(address) external;\n}\n\ninterface NAVFeedLike_1 {\n    function init() external;\n}\n\ninterface FeedFabLike {\n    function newFeed() external returns(address);\n}\n\ninterface FileLike_1 {\n    function file(bytes32 name, uint value) external;\n}\n\ncontract BorrowerDeployer is FixedPoint {\n    address      public immutable root;\n\n    TitleFabLike     public immutable titlefab;\n    ShelfFabLike     public immutable shelffab;\n    PileFabLike      public immutable pilefab;\n    FeedFabLike      public immutable feedFab;\n\n    address public title;\n    address public shelf;\n    address public pile;\n    address public immutable currency;\n    address public feed;\n\n    string  public titleName;\n    string  public titleSymbol;\n    Fixed27 public discountRate;\n\n    address constant ZERO = address(0);\n    bool public wired;\n\n    constructor (\n      address root_,\n      address titlefab_,\n      address shelffab_,\n      address pilefab_,\n      address feedFab_,\n      address currency_,\n      string memory titleName_,\n      string memory titleSymbol_,\n      uint discountRate_\n    ) {\n        root = root_;\n\n        titlefab = TitleFabLike(titlefab_);\n        shelffab = ShelfFabLike(shelffab_);\n\n        pilefab = PileFabLike(pilefab_);\n        feedFab = FeedFabLike(feedFab_);\n\n        currency = currency_;\n\n        titleName = titleName_;\n        titleSymbol = titleSymbol_;\n        discountRate = Fixed27(discountRate_);\n    }\n\n    function deployPile() public {\n        require(pile == ZERO);\n        pile = pilefab.newPile();\n        AuthLike_1(pile).rely(root);\n    }\n\n    function deployTitle() public {\n        require(title == ZERO);\n        title = titlefab.newTitle(titleName, titleSymbol);\n        AuthLike_1(title).rely(root);\n    }\n\n    function deployShelf() public {\n        require(shelf == ZERO && title != ZERO && pile != ZERO && feed != ZERO);\n        shelf = shelffab.newShelf(currency, address(title), address(pile), address(feed));\n        AuthLike_1(shelf).rely(root);\n    }\n\n    function deployFeed() public {\n        require(feed == ZERO);\n        feed = feedFab.newFeed();\n        AuthLike_1(feed).rely(root);\n    }\n\n    function deploy(bool initNAVFeed) public {\n        // ensures all required deploy methods were called\n        require(shelf != ZERO);\n        require(!wired, \"borrower contracts already wired\"); // make sure borrower contracts only wired once\n        wired = true;\n\n        // shelf allowed to call\n        AuthLike_1(pile).rely(shelf);\n\n        DependLike_1(feed).depend(\"shelf\", address(shelf));\n        DependLike_1(feed).depend(\"pile\", address(pile));\n\n        // allow nftFeed to update rate groups\n        AuthLike_1(pile).rely(feed);\n\n        DependLike_1(shelf).depend(\"subscriber\", address(feed));\n\n        AuthLike_1(feed).rely(shelf);\n        AuthLike_1(title).rely(shelf);\n        \n        FileLike_1(feed).file(\"discountRate\", discountRate.value);\n\n        if (initNAVFeed) {\n            NAVFeedLike_1(feed).init();\n        }\n    }\n\n\n    function deploy() public {\n        deploy(false);\n    }\n}\n","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"root_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"titlefab_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"shelffab_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"pilefab_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"feedFab_\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"currency_\",\"type\":\"address\"},{\"internalType\":\"string\",\"name\":\"titleName_\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"titleSymbol_\",\"type\":\"string\"},{\"internalType\":\"uint256\",\"name\":\"discountRate_\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"currency\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bool\",\"name\":\"initNAVFeed\",\"type\":\"bool\"}],\"name\":\"deploy\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deploy\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deployFeed\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deployPile\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deployShelf\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deployTitle\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"discountRate\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feed\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"feedFab\",\"outputs\":[{\"internalType\":\"contract FeedFabLike\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pile\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pilefab\",\"outputs\":[{\"internalType\":\"contract PileFabLike\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"root\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"shelf\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"shelffab\",\"outputs\":[{\"internalType\":\"contract ShelfFabLike\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"title\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"titleName\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"titleSymbol\",\"outputs\":[{\"internalType\":\"string\",\"name\":\"\",\"type\":\"string\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"titlefab\",\"outputs\":[{\"internalType\":\"contract TitleFabLike\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"wired\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"BorrowerDeployer","CompilerVersion":"v0.7.6+commit.7338295f","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"0000000000000000000000003b03863bd553c4ce07eabf2278016533451c9101000000000000000000000000f390fc373ece176c5ba51443c1f53da97e7d663f000000000000000000000000f24cfc20c977d6e274a5ed30340c0b4cd1f8e2280000000000000000000000006bded76c5901b1933dc92036d4158eec2c187946000000000000000000000000dbee688b664c151bd9d6b88afaa70655157b241c0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000001600000000000000000000000000000000000000000033b2e3ccbd21504ad61b99a000000000000000000000000000000000000000000000000000000000000001254696e6c616b65204c6f616e20546f6b656e00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005544c4e4654000000000000000000000000000000000000000000000000000000","EVMVersion":"Default","Library":"","LicenseType":"","Proxy":"0","Implementation":"","SwarmSource":""}]}