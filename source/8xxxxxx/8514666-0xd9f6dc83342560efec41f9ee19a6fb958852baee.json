{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.5.8;\r\n\r\ncontract Eth2daiInterface {\r\n    // sellAllAmount(ERC20 pay_gem, uint pay_amt, ERC20 buy_gem, uint min_fill_amount)\r\n    function sellAllAmount(address, uint, address, uint) public returns (uint);\r\n}\r\n\r\ncontract TokenInterface {\r\n    function balanceOf(address) public returns (uint);\r\n    function allowance(address, address) public returns (uint);\r\n    function approve(address, uint) public;\r\n    function transfer(address,uint) public returns (bool);\r\n    function transferFrom(address, address, uint) public returns (bool);\r\n    function deposit() public payable;\r\n    function withdraw(uint) public;\r\n}\r\n\r\ncontract Eth2daiDirect {\r\n\r\n    Eth2daiInterface public constant eth2dai = Eth2daiInterface(0x39755357759cE0d7f32dC8dC45414CCa409AE24e);\r\n    TokenInterface public constant wethToken = TokenInterface(0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2);\r\n    TokenInterface public constant daiToken = TokenInterface(0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359);\r\n\r\n    function marketBuyEth(\r\n        uint256 payDaiAmount,\r\n        uint256 minBuyEthAmount\r\n    )\r\n        public\r\n    {\r\n        daiToken.transferFrom(msg.sender, address(this), payDaiAmount);\r\n        uint256 fillAmount = eth2dai.sellAllAmount(address(daiToken), payDaiAmount, address(wethToken), minBuyEthAmount);\r\n        wethToken.withdraw(fillAmount);\r\n        msg.sender.transfer(fillAmount);\r\n    }\r\n\r\n    function marketSellEth(\r\n        uint256 payEthAmount,\r\n        uint256 minBuyDaiAmount\r\n    )\r\n        public\r\n        payable\r\n    {\r\n        require(msg.value == payEthAmount, \"MSG_VALUE_NOT_MATCH\");\r\n        wethToken.deposit.value(msg.value)();\r\n        uint256 fillAmount = eth2dai.sellAllAmount(address(wethToken), payEthAmount, address(daiToken), minBuyDaiAmount);\r\n        daiToken.transfer(msg.sender, fillAmount);\r\n    }\r\n\r\n    function() external payable {\r\n        require(msg.sender == address(wethToken), \"CONTRACT_NOT_PAYABLE\");\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"payDaiAmount\",\"type\":\"uint256\"},{\"name\":\"minBuyEthAmount\",\"type\":\"uint256\"}],\"name\":\"marketBuyEth\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"wethToken\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"eth2dai\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"daiToken\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"payEthAmount\",\"type\":\"uint256\"},{\"name\":\"minBuyDaiAmount\",\"type\":\"uint256\"}],\"name\":\"marketSellEth\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"}]","ContractName":"Eth2daiDirect","CompilerVersion":"v0.5.8+commit.23d335f2","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","LicenseType":"None","SwarmSource":"bzzr://352bf82d555c4eacd55ea9ee65db563b5f08554313534d37967272924a662066"}]}