{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.5.0;\r\n\r\ninterface Poap\r\n{\r\n\tfunction tokenEvent(uint256 tokenId) external view returns (uint256);\r\n}\r\n\r\nlibrary Set\r\n{\r\n\tstruct set\r\n\t{\r\n\t\tuint256[] members;\r\n\t\tmapping(uint256 => uint256) indexes;\r\n\t}\r\n\r\n\tfunction length(set storage _list)\r\n\tinternal view returns (uint256)\r\n\t{\r\n\t\treturn _list.members.length;\r\n\t}\r\n\r\n\tfunction at(set storage _list, uint256 _index)\r\n\tinternal view returns (uint256)\r\n\t{\r\n\t\treturn _list.members[_index - 1];\r\n\t}\r\n\r\n\tfunction indexOf(set storage _list, uint256 _value)\r\n\tinternal view returns (uint256)\r\n\t{\r\n\t\treturn _list.indexes[_value];\r\n\t}\r\n\r\n\tfunction contains(set storage _list, uint256 _value)\r\n\tinternal view returns (bool)\r\n\t{\r\n\t\treturn indexOf(_list, _value) != 0;\r\n\t}\r\n\r\n\tfunction content(set storage _list)\r\n\tinternal view returns (uint256[] memory)\r\n\t{\r\n\t\treturn _list.members;\r\n\t}\r\n\r\n\tfunction add(set storage _list, uint256 _value)\r\n\tinternal returns (bool)\r\n\t{\r\n\t\tif (contains(_list, _value))\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t_list.indexes[_value] = _list.members.push(_value);\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction remove(set storage _list, uint256 _value)\r\n\tinternal returns (bool)\r\n\t{\r\n\t\tif (!contains(_list, _value))\r\n\t\t{\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tuint256 i    = indexOf(_list, _value);\r\n\t\tuint256 last = length(_list);\r\n\r\n\t\tif (i != last)\r\n\t\t{\r\n\t\t\tuint256 swapValue = _list.members[last - 1];\r\n\t\t\t_list.members[i - 1] = swapValue;\r\n\t\t\t_list.indexes[swapValue] = i;\r\n\t\t}\r\n\r\n\t\tdelete _list.indexes[_value];\r\n\t\t--_list.members.length;\r\n\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\ncontract PoapIndex\r\n{\r\n\tusing Set for Set.set;\r\n\r\n\t// Poap token address\r\n\tPoap public poap;\r\n\r\n\t// event to tokens\r\n\tmapping(uint256 => Set.set) private m_tokensEvent;\r\n\r\n\tevent TokenAdded(uint256 indexed tokenId, uint256 indexed eventId);\r\n\r\n\tconstructor(Poap _poap)\r\n\tpublic\r\n\t{\r\n\t\tpoap = _poap;\r\n\t}\r\n\r\n\tfunction addToken(uint256 _tokenId) external\r\n\t{\r\n\t\t_addToken(_tokenId);\r\n\t}\r\n\r\n\tfunction addTokens(uint256[] calldata _tokenIds) external\r\n\t{\r\n\t\tfor (uint256 i = 0; i < _tokenIds.length; ++i)\r\n\t\t{\r\n\t\t\t_addToken(_tokenIds[i]);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction _addToken(uint256 _tokenId) internal\r\n\t{\r\n\t\tuint256 eventId = poap.tokenEvent(_tokenId);\r\n\t\tif (eventId != 0 && m_tokensEvent[eventId].add(_tokenId))\r\n\t\t{\r\n\t\t\temit TokenAdded(_tokenId, eventId);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction viewTokens(uint256 _eventId) external view returns (uint256[] memory)\r\n\t{\r\n\t\treturn m_tokensEvent[_eventId].content();\r\n\t}\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"contract Poap\",\"name\":\"_poap\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"tokenId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"eventId\",\"type\":\"uint256\"}],\"name\":\"TokenAdded\",\"type\":\"event\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"addToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"internalType\":\"uint256[]\",\"name\":\"_tokenIds\",\"type\":\"uint256[]\"}],\"name\":\"addTokens\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"poap\",\"outputs\":[{\"internalType\":\"contract Poap\",\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_eventId\",\"type\":\"uint256\"}],\"name\":\"viewTokens\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"PoapIndex","CompilerVersion":"v0.5.12+commit.7709ece9","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"00000000000000000000000022c1f6050e56d2876009903609a2cc3fef83b415","Library":"","LicenseType":"None","SwarmSource":"bzzr://5f00cb379e435e31594daf7418daa18e2b97a3505793e805fba3f4febd9e826e"}]}