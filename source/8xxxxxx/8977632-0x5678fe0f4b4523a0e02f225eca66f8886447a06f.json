{"status":"1","message":"OK","result":[{"SourceCode":"/**\r\n *Submitted for verification at Etherscan.io on 2019-09-09\r\n * BEB dapp for www.betbeb.com\r\n*/\r\npragma solidity^0.4.24;  \r\ninterface tokenTransfer {\r\n    function transfer(address receiver, uint amount);\r\n    function transferFrom(address _from, address _to, uint256 _value);\r\n    function balanceOf(address receiver) returns(uint256);\r\n}\r\n\r\ncontract Ownable {\r\n  address public owner;\r\n \r\n    function Ownable () public {\r\n        owner = msg.sender;\r\n    }\r\n \r\n    modifier onlyOwner {\r\n        require (msg.sender == owner);\r\n        _;\r\n    }\r\n \r\n    /**\r\n     * @param  newOwner address\r\n     */\r\n    function transferOwnership(address newOwner) onlyOwner public {\r\n        if (newOwner != address(0)) {\r\n        owner = newOwner;\r\n      }\r\n    }\r\n}\r\n\r\ncontract Landlord is Ownable{\r\n    struct user{\r\n        uint256 amount;\r\n        uint256 PlayerOf;\r\n        uint256 LandlordOpen;\r\n        uint256 bz;\r\n    }\r\ntokenTransfer public bebTokenTransfer; //代币 \r\n    string LandlordName;\r\n    uint256 LandlordAmount;\r\n    uint256 LandlordTime;\r\n    address LandlordAddress;\r\n    uint256 BETMIN;\r\n    uint256 BETMAX;\r\n    mapping(address=>user)public users;\r\n    event bomus(address to,uint256 amountBouns,string lx);\r\n    function Landlord(address _tokenAddress){\r\n         bebTokenTransfer = tokenTransfer(_tokenAddress);\r\n     }\r\n     function BetLandlord(uint256 _value,uint256 _amount) public{\r\n         require(tx.origin == msg.sender);\r\n         user storage _user=users[msg.sender];\r\n         uint256 amount=_amount* 10 ** 18;//下注金额\r\n         uint256 _time=now;//现在时间戳\r\n         uint256 Player=_value;//玩家出石头或者剪刀或者布1=石头，2=剪刀，3=布\r\n         require(amount>=BETMIN && amount<=BETMAX);//下注金额必须大于等于下限，小于等于上限\r\n         require(LandlordAmount>=amount);//下注金额必须大于等于地主余额\r\n         require(amount>0);//下注金额必须大于0\r\n         bebTokenTransfer.transferFrom(msg.sender,address(this),amount);\r\n         uint256 _amoun=amount*96/100;//需要赔付的金额\r\n         uint256 _amountt=amount*98/100;//需要赔付的金额\r\n         uint256 random2 = random(block.difficulty+_time+amount*91/100);\r\n         if(random2==1){//判断如果地址是1=石头\r\n             if(Player==1){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=2;\r\n                 //如果玩家也是1石，那么就是和，资金100%原路退回\r\n                 bebTokenTransfer.transfer(msg.sender,amount);\r\n             }\r\n             if(Player==2){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=1;\r\n                 //如果玩家也是2剪刀，那么玩家输了\r\n                 LandlordAmount+=_amountt;//地主余额增加\r\n             }\r\n             if(Player==3){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=_amoun;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=0;\r\n                 //如果玩家也是3布，那么玩家赢了\r\n                 LandlordAmount-=_amountt;//地址余额减少\r\n                 //赔付给玩家196%的金额\r\n                 bebTokenTransfer.transfer(msg.sender,amount+_amoun);\r\n             }\r\n         }\r\n         if(random2==2){//地主如果是2=剪刀\r\n             if(Player==1){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=_amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=0;\r\n                 LandlordAmount-=_amountt;//地址余额减少\r\n                 bebTokenTransfer.transfer(msg.sender,amount+_amoun);\r\n             }\r\n             if(Player==2){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=2;\r\n                 bebTokenTransfer.transfer(msg.sender,amount);\r\n             }\r\n             if(Player==3){\r\n                 _user.PlayerOf=Player;\r\n                 _user.amount=amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=1;\r\n                 LandlordAmount+=_amountt;\r\n             }\r\n         }\r\n         if(random2==3){//如果地主是3=布\r\n             if(Player==1){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=1;\r\n                 LandlordAmount+=_amountt;//地主余额增加\r\n             }\r\n             if(Player==2){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=0;\r\n                 LandlordAmount-=_amountt;//地址余额减少\r\n                 bebTokenTransfer.transfer(msg.sender,amount+_amoun);\r\n             }\r\n             if(Player==3){\r\n                 _user.PlayerOf=Player;//记录玩家出拳\r\n                 _user.amount=amount;\r\n                 _user.LandlordOpen=random2;\r\n                 _user.bz=2;\r\n                 bebTokenTransfer.transfer(msg.sender,amount);\r\n             }\r\n         }\r\n     }\r\n     function setdizhu(uint256 _BETMIN,uint256 _BETMAX,string _name)onlyOwner{\r\n         BETMIN=_BETMIN* 10 ** 18;\r\n         BETMAX=_BETMAX* 10 ** 18;\r\n         LandlordName=_name;\r\n     }\r\n     function QiangDiZhu(string name,uint256 amount,uint256 BETMAXs) public{\r\n         require(tx.origin == msg.sender);\r\n         uint256 _amount=amount* 10 ** 18;\r\n         uint256 _BETMAX=BETMAXs* 10 ** 18;\r\n         uint256 _time=now-LandlordTime;\r\n         require(_amount>BETMAX && _BETMAX>BETMIN,\"Must be greater than the maximum amount\");//抢地主最低BETMAX\r\n         require(LandlordAmount<BETMAX || _time >86400 || LandlordTime==0,\"We can't rob landlords now\");//当前地主金额少于BETMAX或者做地主时间超过24小时即可抢地主\r\n         bebTokenTransfer.transferFrom(msg.sender,address(this),_amount);//转入BEB\r\n         if(LandlordAmount>0){\r\n         bebTokenTransfer.transfer(LandlordAddress,LandlordAmount);//原路退回BEB\r\n         }\r\n         BETMAX=_BETMAX;//最大下注金额\r\n         LandlordAmount=_amount;//地主余额重置成新地主余额\r\n         LandlordAddress=msg.sender;//地主地主重置成新地主\r\n         LandlordTime=now;//做地主时间重置成现在\r\n         LandlordName=name;//重置地主昵称\r\n         \r\n     }\r\n     //退地主\r\n     function TuiDiZhu()public{\r\n         require(tx.origin == msg.sender);\r\n         require(LandlordAddress==msg.sender);//必须当前地主\r\n         //msg.sender.transfer(LandlordAmount);//所有余额转账给地主\r\n         bebTokenTransfer.transfer(LandlordAddress,LandlordAmount);//原路退回BEB\r\n         LandlordAmount=0;\r\n         LandlordAddress=0;\r\n         LandlordTime=0;\r\n         LandlordName=\"空闲\";\r\n     }\r\n     //地主充值\r\n     function ChongZhi(uint256 _amount) public{\r\n         require(tx.origin == msg.sender);\r\n         require(LandlordAddress==msg.sender);//必须当前地主\r\n         uint256 amount=_amount* 10 ** 18;\r\n         bebTokenTransfer.transferFrom(msg.sender,address(this),amount);//转入BEB\r\n         LandlordAmount+=amount;\r\n     }\r\n     function withdrawAmount(uint256 amount) onlyOwner {\r\n        uint256 _amount=amount* 10 ** 18;\r\n        require(getTokenBalance()>=_amount,\"Insufficient contract balance\");\r\n        bebTokenTransfer.transfer(owner,_amount);//原路退回BEB\r\n    }\r\n    function getTokenBalance() public view returns(uint256){\r\n         return bebTokenTransfer.balanceOf(address(this));\r\n    }\r\n     function getRandom()public view returns(uint256,uint256,uint256,uint256,uint256,uint256){\r\n        user storage _user=users[msg.sender];\r\n        //返回前端LandlordOpen地主出拳结果，玩家出拳结果，amount输赢金额\r\n        return (_user.LandlordOpen,_user.PlayerOf,_user.amount,_user.bz,BETMIN,BETMAX);\r\n    }\r\n    //查询地主信息，昵称、地址、余额\r\n    function LandlordNames()public view returns(string,address,uint256){\r\n        return (LandlordName,LandlordAddress,LandlordAmount);\r\n    }\r\n     //生成随机数\r\n     function random(uint256 randomyType)  internal returns(uint256 num){\r\n        uint256 random = uint256(keccak256(randomyType,now));\r\n         uint256 randomNum = random%4;\r\n         if(randomNum<1){\r\n             randomNum=1;\r\n         }\r\n         if(randomNum>3){\r\n            randomNum=3; \r\n         }\r\n         \r\n         return randomNum;\r\n    }\r\n    function ()payable{\r\n        \r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawAmount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bebTokenTransfer\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_BETMIN\",\"type\":\"uint256\"},{\"name\":\"_BETMAX\",\"type\":\"uint256\"},{\"name\":\"_name\",\"type\":\"string\"}],\"name\":\"setdizhu\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_value\",\"type\":\"uint256\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"BetLandlord\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"LandlordNames\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"},{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTokenBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"users\",\"outputs\":[{\"name\":\"amount\",\"type\":\"uint256\"},{\"name\":\"PlayerOf\",\"type\":\"uint256\"},{\"name\":\"LandlordOpen\",\"type\":\"uint256\"},{\"name\":\"bz\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getRandom\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"TuiDiZhu\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"name\",\"type\":\"string\"},{\"name\":\"amount\",\"type\":\"uint256\"},{\"name\":\"BETMAXs\",\"type\":\"uint256\"}],\"name\":\"QiangDiZhu\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"ChongZhi\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_tokenAddress\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amountBouns\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"lx\",\"type\":\"string\"}],\"name\":\"bomus\",\"type\":\"event\"}]","ContractName":"Landlord","CompilerVersion":"v0.4.24+commit.e67f0147","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"0000000000000000000000006798cc8ad079a7e663536f83ee26d63aabe03da9","Library":"","LicenseType":"None","SwarmSource":"bzzr://f94352de855ed09bbeccdf19176a0904daa10fbcf680e45d5cde1d12c435a6c2"}]}