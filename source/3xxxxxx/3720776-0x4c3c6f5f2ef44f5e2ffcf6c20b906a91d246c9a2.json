{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.4;\r\n\r\n/**\r\n * @title Contract for object that have an owner\r\n */\r\ncontract Owned {\r\n    /**\r\n     * Contract owner address\r\n     */\r\n    address public owner;\r\n\r\n    /**\r\n     * @dev Delegate contract to another person\r\n     * @param _owner New owner address \r\n     */\r\n    function setOwner(address _owner) onlyOwner\r\n    { owner = _owner; }\r\n\r\n    /**\r\n     * @dev Owner check modifier\r\n     */\r\n    modifier onlyOwner { if (msg.sender != owner) throw; _; }\r\n}\r\n\r\n/**\r\n * @title Common pattern for destroyable contracts \r\n */\r\ncontract Destroyable {\r\n    address public hammer;\r\n\r\n    /**\r\n     * @dev Hammer setter\r\n     * @param _hammer New hammer address\r\n     */\r\n    function setHammer(address _hammer) onlyHammer\r\n    { hammer = _hammer; }\r\n\r\n    /**\r\n     * @dev Destroy contract and scrub a data\r\n     * @notice Only hammer can call it \r\n     */\r\n    function destroy() onlyHammer\r\n    { suicide(msg.sender); }\r\n\r\n    /**\r\n     * @dev Hammer check modifier\r\n     */\r\n    modifier onlyHammer { if (msg.sender != hammer) throw; _; }\r\n}\r\n\r\n/**\r\n * @title Generic owned destroyable contract\r\n */\r\ncontract Object is Owned, Destroyable {\r\n    function Object() {\r\n        owner  = msg.sender;\r\n        hammer = msg.sender;\r\n    }\r\n}\r\n\r\n// Standard token interface (ERC 20)\r\n// https://github.com/ethereum/EIPs/issues/20\r\ncontract ERC20 \r\n{\r\n// Functions:\r\n    /// @return total amount of tokens\r\n    uint256 public totalSupply;\r\n\r\n    /// @param _owner The address from which the balance will be retrieved\r\n    /// @return The balance\r\n    function balanceOf(address _owner) constant returns (uint256);\r\n\r\n    /// @notice send `_value` token to `_to` from `msg.sender`\r\n    /// @param _to The address of the recipient\r\n    /// @param _value The amount of token to be transferred\r\n    /// @return Whether the transfer was successful or not\r\n    function transfer(address _to, uint256 _value) returns (bool);\r\n\r\n    /// @notice send `_value` token to `_to` from `_from` on the condition it is approved by `_from`\r\n    /// @param _from The address of the sender\r\n    /// @param _to The address of the recipient\r\n    /// @param _value The amount of token to be transferred\r\n    /// @return Whether the transfer was successful or not\r\n    function transferFrom(address _from, address _to, uint256 _value) returns (bool);\r\n\r\n    /// @notice `msg.sender` approves `_addr` to spend `_value` tokens\r\n    /// @param _spender The address of the account able to transfer the tokens\r\n    /// @param _value The amount of wei to be approved for transfer\r\n    /// @return Whether the approval was successful or not\r\n    function approve(address _spender, uint256 _value) returns (bool);\r\n\r\n    /// @param _owner The address of the account owning tokens\r\n    /// @param _spender The address of the account able to transfer the tokens\r\n    /// @return Amount of remaining tokens allowed to spent\r\n    function allowance(address _owner, address _spender) constant returns (uint256);\r\n\r\n// Events:\r\n    event Transfer(address indexed _from, address indexed _to, uint256 _value);\r\n    event Approval(address indexed _owner, address indexed _spender, uint256 _value);\r\n}\r\n\r\ncontract Presale is Object {\r\n    ERC20   public token;\r\n    uint256 public bounty;\r\n    uint256 public donation;\r\n\r\n    /**\r\n     * @dev Presale contract constructor\r\n     * @param _token Bounty token address\r\n     * @param _bounty Bount value by donation\r\n     * @param _donation Donation value\r\n     */\r\n    function Presale(address _token, uint256 _bounty, uint256 _donation) {\r\n        token    = ERC20(_token);\r\n        bounty   = _bounty;\r\n        donation = _donation;\r\n    }\r\n\r\n    /**\r\n     * @dev Cancel presale contract by owner, bounty refunded to owner\r\n     */\r\n    function cancel() onlyOwner {\r\n        if (!token.transfer(owner, bounty)) throw;\r\n    }\r\n\r\n    /**\r\n    * @dev Accept presale contract,\r\n    *      bounty transfered to sender - donation to owner\r\n    */\r\n    function () payable {\r\n        if (msg.value != donation) throw;\r\n        if (!token.transfer(msg.sender, bounty)) throw;\r\n        if (!owner.send(msg.value)) throw;\r\n    }\r\n}\r\n\r\nlibrary CreatorPresale {\r\n    function create(address _token, uint256 _bounty, uint256 _donation) returns (Presale)\r\n    { return new Presale(_token, _bounty, _donation); }\r\n\r\n    function version() constant returns (string)\r\n    { return \"v0.6.3\"; }\r\n\r\n    function abi() constant returns (string)\r\n    { return '[{\"constant\":false,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"hammer\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"destroy\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"donation\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bounty\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_hammer\",\"type\":\"address\"}],\"name\":\"setHammer\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"cancel\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"token\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"},{\"name\":\"_bounty\",\"type\":\"uint256\"},{\"name\":\"_donation\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"constructor\"},{\"payable\":true,\"type\":\"fallback\"}]'; }\r\n}\r\n\r\n/**\r\n * @title Builder based contract\r\n */\r\ncontract Builder is Object {\r\n    /**\r\n     * @dev this event emitted for every builded contract\r\n     */\r\n    event Builded(address indexed client, address indexed instance);\r\n \r\n    /* Addresses builded contracts at sender */\r\n    mapping(address => address[]) public getContractsOf;\r\n \r\n    /**\r\n     * @dev Get last address\r\n     * @return last address contract\r\n     */\r\n    function getLastContract() constant returns (address) {\r\n        var sender_contracts = getContractsOf[msg.sender];\r\n        return sender_contracts[sender_contracts.length - 1];\r\n    }\r\n\r\n    /* Building beneficiary */\r\n    address public beneficiary;\r\n\r\n    /**\r\n     * @dev Set beneficiary\r\n     * @param _beneficiary is address of beneficiary\r\n     */\r\n    function setBeneficiary(address _beneficiary) onlyOwner\r\n    { beneficiary = _beneficiary; }\r\n\r\n    /* Building cost  */\r\n    uint public buildingCostWei;\r\n\r\n    /**\r\n     * @dev Set building cost\r\n     * @param _buildingCostWei is cost\r\n     */\r\n    function setCost(uint _buildingCostWei) onlyOwner\r\n    { buildingCostWei = _buildingCostWei; }\r\n\r\n    /* Security check report */\r\n    string public securityCheckURI;\r\n\r\n    /**\r\n     * @dev Set security check report URI\r\n     * @param _uri is an URI to report\r\n     */\r\n    function setSecurityCheck(string _uri) onlyOwner\r\n    { securityCheckURI = _uri; }\r\n}\r\n//\r\n// AIRA Builder for Congress contract\r\n//\r\ncontract BuilderPresale is Builder {\r\n    /**\r\n     * @dev Run script creation contract\r\n     * @return address new contract\r\n     */\r\n    function create(address _token,\r\n                    uint256 _bounty,\r\n                    uint256 _donation,\r\n                    address _client) payable returns (address) {\r\n        if (buildingCostWei > 0 && beneficiary != 0) {\r\n            // Too low value\r\n            if (msg.value < buildingCostWei) throw;\r\n            // Beneficiary send\r\n            if (!beneficiary.send(buildingCostWei)) throw;\r\n            // Refund\r\n            if (msg.value > buildingCostWei) {\r\n                if (!msg.sender.send(msg.value - buildingCostWei)) throw;\r\n            }\r\n        } else {\r\n            // Refund all\r\n            if (msg.value > 0) {\r\n                if (!msg.sender.send(msg.value)) throw;\r\n            }\r\n        }\r\n\r\n        if (_client == 0)\r\n            _client = msg.sender;\r\n \r\n        var inst = CreatorPresale.create(_token, _bounty, _donation);\r\n        inst.setOwner(_client);\r\n        inst.setHammer(_client);\r\n        getContractsOf[_client].push(inst);\r\n        Builded(_client, inst);\r\n        return inst;\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_uri\",\"type\":\"string\"}],\"name\":\"setSecurityCheck\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_beneficiary\",\"type\":\"address\"}],\"name\":\"setBeneficiary\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"beneficiary\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_buildingCostWei\",\"type\":\"uint256\"}],\"name\":\"setCost\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"hammer\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"buildingCostWei\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"destroy\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"},{\"name\":\"_bounty\",\"type\":\"uint256\"},{\"name\":\"_donation\",\"type\":\"uint256\"},{\"name\":\"_client\",\"type\":\"address\"}],\"name\":\"create\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":true,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getLastContract\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_hammer\",\"type\":\"address\"}],\"name\":\"setHammer\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"getContractsOf\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"securityCheckURI\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"client\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"instance\",\"type\":\"address\"}],\"name\":\"Builded\",\"type\":\"event\"}]","ContractName":"BuilderPresale","CompilerVersion":"v0.4.9+commit.364da425","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"CreatorPresale:7ca240A2F7Db1dDa2A1E84F67214216f85542d90","SwarmSource":"bzzr://0639f8831882bbff94eb876614444122e10feaac29a436ea1ee70cf8d1737177"}]}