{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.11;\r\ncontract MinerShare {\r\n\t// 合約的創建者\r\n\taddress public owner = 0x0;\r\n\t// 已經被提領的總量\r\n\tuint public totalWithdrew = 0;\r\n\t// 目前有多少位股東\r\n\tuint public userNumber = 0;\r\n\t// 監聽新增股東的事件\r\n\tevent LogAddUser(address newUser);\r\n\t// 監聽移除股東的事件\r\n\tevent LogRmUser(address rmUser);\r\n\t// 監聽股東提領的事件\r\n\tevent LogWithdrew(address sender, uint amount);\r\n\t// 儲存股東們的 ETH Address\r\n\tmapping(address => uint) public usersAddress;\r\n\t// 紀錄每個股東已經提領的數量\r\n\tmapping(address => uint) public usersWithdrew;\r\n\r\n\tmodifier onlyOwner() {\r\n\t\trequire(owner == msg.sender);\r\n\t\t_;\r\n\t}\r\n\r\n\tmodifier onlyMember() {\r\n\t\trequire(usersAddress[msg.sender] != 0);\r\n\t\t_;\r\n\t}\r\n\r\n\t// 創建實體，註冊創建者\r\n\tfunction MinerShare() {\r\n\t\towner = msg.sender;\r\n\t}\r\n\r\n\t// 新增股東\r\n\tfunction AddUser(address newUser) onlyOwner{\r\n\t\tif (usersAddress[newUser] == 0) {\r\n\t\t\tusersAddress[newUser] = 1;\r\n\t\t\tuserNumber += 1;\r\n\t\t\tLogAddUser(newUser);\r\n\t\t}\r\n\t}\r\n\r\n\t// 移除股東\r\n\tfunction RemoveUser(address rmUser) onlyOwner {\r\n\t\tif (usersAddress[rmUser] == 1) {\r\n\t\t\tusersAddress[rmUser] = 0;\r\n\t\t\tuserNumber -= 1;\r\n\t\t\tLogRmUser(rmUser);\r\n\t\t}\r\n\t}\r\n\r\n\t// 股東提領\r\n\tfunction Withdrew() onlyMember {\r\n\t\t// 實際總額為此 contract 的 balance 與已經提領數量的總和\r\n\t\tuint totalMined = this.balance + totalWithdrew;\r\n\t\t// 可以提領的數量為 實際總額除以股東總數 減去 該股東已經提領的數量\r\n\t\tuint avaliableWithdrew = totalMined/userNumber - usersWithdrew[msg.sender];\r\n\t\t// 改變提領數量\r\n\t\tusersWithdrew[msg.sender] += avaliableWithdrew;\r\n\t\t// 改變總提領數量\r\n\t\ttotalWithdrew += avaliableWithdrew;\r\n\t\t// 檢查是否為合法的提領\r\n\t\tif (avaliableWithdrew > 0) {\r\n\t\t\t// 轉移 ETH 至股東的 address\r\n\t\t\tmsg.sender.transfer(avaliableWithdrew);\r\n\t\t\tLogWithdrew(msg.sender, avaliableWithdrew);\r\n\t\t} else\r\n\t\t\tthrow;\r\n\t}\r\n\r\n\t// 讓此 contract 可以收錢\r\n\tfunction () payable {}\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"rmUser\",\"type\":\"address\"}],\"name\":\"RemoveUser\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"Withdrew\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"userNumber\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"usersAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"usersWithdrew\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newUser\",\"type\":\"address\"}],\"name\":\"AddUser\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalWithdrew\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"type\":\"constructor\"},{\"payable\":true,\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"newUser\",\"type\":\"address\"}],\"name\":\"LogAddUser\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"rmUser\",\"type\":\"address\"}],\"name\":\"LogRmUser\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"LogWithdrew\",\"type\":\"event\"}]","ContractName":"MinerShare","CompilerVersion":"v0.4.11+commit.68ef5810","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://383fd466a60d499498cff22cb29b12ad0501261410226badc862fc870622b023"}]}