{"status":"1","message":"OK","result":[{"SourceCode":"/* A contract to store a state of goods (single item). Buy orders obtainable as events. */\r\n\r\n/* Deployment:\r\n*/\r\n\r\ncontract goods {\r\n\r\n    address public owner;\r\n    //status of the goods: Available, Pending, Sold, Canceled\r\n    uint16 public status;\r\n    //how many for sale\r\n    uint16 public count;\r\n    //price per item\r\n    uint public price;\r\n\r\n    uint16 public availableCount;\r\n    uint16 public pendingCount;\r\n\r\n    event log_event(string message);\r\n    event content(string datainfo, uint indexed version, uint indexed datatype, address indexed sender, uint count, uint payment);\r\n    modifier onlyowner { if (msg.sender == owner) _ } \r\n    \r\n    function goods(uint16 _count, uint _price) {\r\n        owner = msg.sender;\r\n        //status = Available\r\n        status = 1;\r\n        count = _count;\r\n        price = _price;\r\n\r\n        availableCount = count;\r\n        pendingCount = 0;\r\n    }\r\n    \r\n    function kill() onlyowner { suicide(owner); }\r\n\r\n    function flush() onlyowner {\r\n        owner.send(this.balance);\r\n    }\r\n\r\n    function log(string message) private {\r\n        log_event(message);\r\n    }\r\n\r\n    function buy(string datainfo, uint _version, uint16 _count) {\r\n        if(status != 1) { log(\"status != 1\"); throw; }\r\n        if(msg.value < (price * _count)) { log(\"msg.value < (price * _count)\"); throw; }\r\n        if(_count > availableCount) { log(\"_count > availableCount\"); throw; }\r\n\r\n        pendingCount += _count;\r\n\r\n        //Buy order to event log\r\n        content(datainfo, _version, 1, msg.sender, _count, msg.value);\r\n    }\r\n\r\n    function accept(string datainfo, uint _version, uint16 _count) onlyowner {\r\n        if(_count > availableCount) { log(\"_count > availableCount\"); return; }\r\n        if(_count > pendingCount) { log(\"_count > pendingCount\"); return; }\r\n        \r\n        pendingCount -= _count;\r\n        availableCount -= _count;\r\n\r\n        //Accept order to event log\r\n        content(datainfo, _version, 2, msg.sender, _count, 0);\r\n    }\r\n\r\n    function reject(string datainfo, uint _version, uint16 _count, address recipient, uint amount) onlyowner {\r\n        if(_count > pendingCount) { log(\"_count > pendingCount\"); return; }\r\n\r\n        pendingCount -= _count;\r\n        //send money back\r\n        recipient.send(amount);\r\n\r\n        //Reject order to event log\r\n        content(datainfo, _version, 3, msg.sender, _count, amount);\r\n    }\r\n\r\n    function cancel(string datainfo, uint _version) onlyowner {\r\n        //Canceled status\r\n        status = 2;\r\n\r\n        //Cancel order to event log\r\n        content(datainfo, _version, 4, msg.sender, availableCount, 0);\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"count\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"datainfo\",\"type\":\"string\"},{\"name\":\"_version\",\"type\":\"uint256\"}],\"name\":\"cancel\",\"outputs\":[],\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"status\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"flush\",\"outputs\":[],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"datainfo\",\"type\":\"string\"},{\"name\":\"_version\",\"type\":\"uint256\"},{\"name\":\"_count\",\"type\":\"uint16\"},{\"name\":\"recipient\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"reject\",\"outputs\":[],\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"datainfo\",\"type\":\"string\"},{\"name\":\"_version\",\"type\":\"uint256\"},{\"name\":\"_count\",\"type\":\"uint16\"}],\"name\":\"buy\",\"outputs\":[],\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"availableCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"price\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"datainfo\",\"type\":\"string\"},{\"name\":\"_version\",\"type\":\"uint256\"},{\"name\":\"_count\",\"type\":\"uint16\"}],\"name\":\"accept\",\"outputs\":[],\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"pendingCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"type\":\"function\"},{\"inputs\":[{\"name\":\"_count\",\"type\":\"uint16\"},{\"name\":\"_price\",\"type\":\"uint256\"}],\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"message\",\"type\":\"string\"}],\"name\":\"log_event\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"datainfo\",\"type\":\"string\"},{\"indexed\":true,\"name\":\"version\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"datatype\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"sender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"count\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"payment\",\"type\":\"uint256\"}],\"name\":\"content\",\"type\":\"event\"}]","ContractName":"goods","CompilerVersion":"v0.3.2-2016-05-06-9e36bdd","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000001f4","Library":"","SwarmSource":""}]}