{"status":"1","message":"OK","result":[{"SourceCode":"contract MyEtherBank\r\n{\r\n    /* LICENSE :\r\n\r\n    MIT License\r\n\r\n    Copyright (c) 2016 Consent Development\r\n\r\n    Permission is hereby granted, free of charge, to any person obtaining a copy\r\n    of this software and associated documentation files (the \"Software\"), to deal\r\n    in the Software without restriction, including without limitation the rights\r\n    to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n    copies of the Software, and to permit persons to whom the Software is\r\n    furnished to do so, subject to the following conditions:\r\n\r\n    The above copyright notice and this permission notice shall be included in all\r\n    copies or substantial portions of the Software.\r\n\r\n    THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n    SOFTWARE.\r\n\r\n    */\r\n\t\r\n    // Author : Alex Darby \r\n    // Contact email : consentdev@gmail.com \r\n    // Version : 1.0 - initial release\r\n\t// GitHub : https://github.com/ConsentDevelopment/EtherBank\r\n    //\r\n    // \r\n\t// This smart contract is free to use but donations are always welcome :\r\n\t//   Donate Ether - 0x65850dfd9c511a5da3132461d57817f56acc1906\r\n    //   Donate Bitcoin - 36XRasACPNEvd3YxbLoWWeUfSgCUyZ69z8\r\n\r\n    /* -------- State data -------- */\r\n\r\n    // Owner\r\n    address private _owner;\r\n    uint256 private _bankDonationsBalance = 0;\r\n    bool private _connectBankAccountToNewOwnerAddressEnabled = true;\r\n\r\n    // Bank accounts    \r\n    struct BankAccount\r\n    {\r\n        // Members placed in order for optimization, not readability\r\n        bool passwordSha3HashSet;\r\n        uint32 number; \r\n        uint32 passwordAttempts;\r\n        uint256 balance;\r\n        address owner;       \r\n        bytes32 passwordSha3Hash;   \r\n        mapping(bytes32 => bool) passwordSha3HashesUsed;\r\n    }   \r\n\r\n    struct BankAccountAddress\r\n    {\r\n        bool accountSet;\r\n        uint32 accountNumber; // accountNumber member is used to index the bank accounts array\r\n    }\r\n \r\n    uint32 private _totalBankAccounts = 0;\r\n    BankAccount[] private _bankAccountsArray; \r\n    mapping(address => BankAccountAddress) private _bankAccountAddresses;  \r\n\r\n\r\n    /* -------- Constructor -------- */\r\n\r\n    function MyEtherBank() public\r\n    {\r\n        // Set the contract owner\r\n        _owner = msg.sender; \r\n    }\r\n\r\n\r\n    /* -------- Events -------- */\r\n\r\n    // Donation\r\n    event event_donationMadeToBank_ThankYou(uint256 donationAmount);\r\n    event event_getBankDonationsBalance(uint256 donationBalance);\r\n    event event_bankDonationsWithdrawn(uint256 donationsAmount);\r\n\r\n    // General banking\r\n    event event_bankAccountOpened_Successful(address indexed bankAccountOwner, uint32 indexed bankAccountNumber, uint256 indexed depositAmount);\r\n    event event_getBankAccountNumber_Successful(uint32 indexed bankAccountNumber);\r\n    event event_getBankAccountBalance_Successful(uint32 indexed bankAccountNumber, uint256 indexed balance);\r\n    event event_depositMadeToBankAccount_Successful(uint32 indexed bankAccountNumber, uint256 indexed depositAmount); \r\n    event event_depositMadeToBankAccount_Failed(uint32 indexed bankAccountNumber, uint256 indexed depositAmount); \r\n    event event_depositMadeToBankAccountFromDifferentAddress_Successful(uint32 indexed bankAccountNumber, address indexed addressFrom, uint256 indexed depositAmount);\r\n    event event_depositMadeToBankAccountFromDifferentAddress_Failed(uint32 indexed bankAccountNumber, address indexed addressFrom, uint256 indexed depositAmount);\r\n    event event_withdrawalMadeFromBankAccount_Successful(uint32 indexed bankAccountNumber, uint256 indexed withdrawalAmount); \r\n    event event_withdrawalMadeFromBankAccount_Failed(uint32 indexed bankAccountNumber, uint256 indexed withdrawalAmount); \r\n    event event_transferMadeFromBankAccountToAddress_Successful(uint32 indexed bankAccountNumber, uint256 indexed transferalAmount, address indexed destinationAddress); \r\n    event event_transferMadeFromBankAccountToAddress_Failed(uint32 indexed bankAccountNumber, uint256 indexed transferalAmount, address indexed destinationAddress); \r\n\r\n    // Security\r\n    event event_securityConnectingABankAccountToANewOwnerAddressIsDisabled();\r\n    event event_securityHasPasswordSha3HashBeenAddedToBankAccount_Yes(uint32 indexed bankAccountNumber);\r\n    event event_securityHasPasswordSha3HashBeenAddedToBankAccount_No(uint32 indexed bankAccountNumber);\r\n\tevent event_securityPasswordSha3HashAddedToBankAccount_Successful(uint32 indexed bankAccountNumber);\r\n    event event_securityPasswordSha3HashAddedToBankAccount_Failed_PasswordHashPreviouslyUsed(uint32 indexed bankAccountNumber);\r\n    event event_securityBankAccountConnectedToNewAddressOwner_Successful(uint32 indexed bankAccountNumber, address indexed newAddressOwner);\r\n    event event_securityBankAccountConnectedToNewAddressOwner_Failed_PasswordHashHasNotBeenAddedToBankAccount(uint32 indexed bankAccountNumber);\r\n    event event_securityBankAccountConnectedToNewAddressOwner_Failed_SentPasswordDoesNotMatchAccountPasswordHash(uint32 indexed bankAccountNumber, uint32 indexed passwordAttempts);\r\n    event event_securityGetNumberOfAttemptsToConnectBankAccountToANewOwnerAddress(uint32 indexed bankAccountNumber, uint32 indexed attempts);\r\n\r\n\r\n    /* -------- Modifiers -------- */\r\n\r\n    modifier modifier_isContractOwner()\r\n    { \r\n        // Contact owner?\r\n        if (msg.sender != _owner)\r\n        {\r\n            throw;       \r\n        }\r\n        _ \r\n    }\r\n\r\n    modifier modifier_doesSenderHaveABankAccount() \r\n    { \r\n        // Does this sender have a bank account?\r\n        if (_bankAccountAddresses[msg.sender].accountSet == false)\r\n        {\r\n            throw;\r\n        }\r\n        else\r\n        {\r\n            // Does the bank account owner address match the sender address?\r\n            uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber;\r\n            if (msg.sender != _bankAccountsArray[accountNumber_].owner)\r\n            {\r\n                // Sender address previously had a bank account that was transfered to a new owner address\r\n                throw;        \r\n            }\r\n        }\r\n        _ \r\n    }\r\n\r\n    modifier modifier_wasValueSent()\r\n    { \r\n        // Value sent?\r\n        if (msg.value > 0)\r\n        {\r\n            // Prevent users from sending value accidentally\r\n            throw;        \r\n        }\r\n        _ \r\n    }\r\n\r\n\r\n    /* -------- Contract owner functions -------- */\r\n\r\n    function Donate() public\r\n    {\r\n        if (msg.value > 0)\r\n        {\r\n            _bankDonationsBalance += msg.value;\r\n            event_donationMadeToBank_ThankYou(msg.value);\r\n        }\r\n    }\r\n\r\n    function BankOwner_GetDonationsBalance() public      \r\n        modifier_isContractOwner()\r\n        modifier_wasValueSent()\r\n        returns (uint256)\r\n    {\r\n        event_getBankDonationsBalance(_bankDonationsBalance);\r\n  \t    return _bankDonationsBalance;\r\n    }\r\n\r\n    function BankOwner_WithdrawDonations() public\r\n        modifier_isContractOwner()\r\n        modifier_wasValueSent()\r\n    { \r\n        if (_bankDonationsBalance > 0)\r\n        {\r\n            uint256 amount_ = _bankDonationsBalance;\r\n            _bankDonationsBalance = 0;\r\n\r\n            // Check if using send() is successful\r\n            if (msg.sender.send(amount_))\r\n            {\r\n                event_bankDonationsWithdrawn(amount_);\r\n            }\r\n            // Check if using call.value() is successful\r\n            else if (msg.sender.call.value(amount_)())\r\n            {  \r\n                event_bankDonationsWithdrawn(amount_);\r\n            }\r\n            else\r\n            {\r\n                // Set the previous balance\r\n                _bankDonationsBalance = amount_;\r\n            }\r\n        }\r\n    }\r\n\r\n    function BankOwner_EnableConnectBankAccountToNewOwnerAddress() public\r\n        modifier_isContractOwner()\r\n    { \r\n        if (_connectBankAccountToNewOwnerAddressEnabled == false)\r\n        {\r\n            _connectBankAccountToNewOwnerAddressEnabled = true;\r\n        }\r\n    }\r\n\r\n    function  BankOwner_DisableConnectBankAccountToNewOwnerAddress() public\r\n        modifier_isContractOwner()\r\n    { \r\n        if (_connectBankAccountToNewOwnerAddressEnabled)\r\n        {\r\n            _connectBankAccountToNewOwnerAddressEnabled = false;\r\n        }\r\n    }\r\n\r\n\r\n    /* -------- General bank account functions -------- */\r\n\r\n    // Open bank account\r\n    function OpenBankAccount() public\r\n        returns (uint32 newBankAccountNumber) \r\n    {\r\n        // Does this sender already have a bank account or a previously used address for a bank account?\r\n        if (_bankAccountAddresses[msg.sender].accountSet)\r\n        {\r\n            throw;\r\n        }\r\n\r\n        // Assign the new bank account number\r\n        newBankAccountNumber = _totalBankAccounts;\r\n\r\n        // Add new bank account to the array\r\n        _bankAccountsArray.push( \r\n            BankAccount(\r\n            {\r\n                passwordSha3HashSet: false,\r\n                passwordAttempts: 0,\r\n                number: newBankAccountNumber,\r\n                balance: 0,\r\n                owner: msg.sender,\r\n                passwordSha3Hash: \"0\",\r\n            }\r\n            ));\r\n\r\n        // Prevent people using \"password\" or \"Password\" sha3 hash for the Security_AddPasswordSha3HashToBankAccount() function\r\n        bytes32 passwordHash_ = sha3(\"password\");\r\n        _bankAccountsArray[newBankAccountNumber].passwordSha3HashesUsed[passwordHash_] = true;\r\n        passwordHash_ = sha3(\"Password\");\r\n        _bankAccountsArray[newBankAccountNumber].passwordSha3HashesUsed[passwordHash_] = true;\r\n\r\n        // Add the new account\r\n        _bankAccountAddresses[msg.sender].accountSet = true;\r\n        _bankAccountAddresses[msg.sender].accountNumber = newBankAccountNumber;\r\n\r\n        // Value sent?\r\n        if (msg.value > 0)\r\n        {         \r\n            _bankAccountsArray[newBankAccountNumber].balance += msg.value;\r\n        }\r\n\r\n        // Move to the next bank account\r\n        _totalBankAccounts++;\r\n\r\n        // Event\r\n        event_bankAccountOpened_Successful(msg.sender, newBankAccountNumber, msg.value);\r\n        return newBankAccountNumber;\r\n    }\r\n\r\n    // Get account number from a owner address\r\n    function GetBankAccountNumber() public      \r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (uint32)\r\n    {\r\n        event_getBankAccountNumber_Successful(_bankAccountAddresses[msg.sender].accountNumber);\r\n\t    return _bankAccountAddresses[msg.sender].accountNumber;\r\n    }\r\n\r\n    function GetBankAccountBalance() public\r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (uint256)\r\n    {   \r\n        uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber;\r\n        event_getBankAccountBalance_Successful(accountNumber_, _bankAccountsArray[accountNumber_].balance);\r\n        return _bankAccountsArray[accountNumber_].balance;\r\n    }\r\n\r\n\r\n    /* -------- Deposit functions -------- */\r\n\r\n    function DepositToBankAccount() public\r\n        modifier_doesSenderHaveABankAccount()\r\n        returns (bool)\r\n    {\r\n        // Value sent?\r\n        if (msg.value > 0)\r\n        {\r\n            uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber; \r\n\r\n            // Check for overflow  \r\n            if ((_bankAccountsArray[accountNumber_].balance + msg.value) < _bankAccountsArray[accountNumber_].balance)\r\n            {\r\n                throw;\r\n            }\r\n\r\n            _bankAccountsArray[accountNumber_].balance += msg.value; \r\n            event_depositMadeToBankAccount_Successful(accountNumber_, msg.value);\r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            event_depositMadeToBankAccount_Failed(accountNumber_, msg.value);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function DepositToBankAccountFromDifferentAddress(uint32 bankAccountNumber) public\r\n        returns (bool)\r\n    {\r\n        // Check if bank account number is valid\r\n        if (bankAccountNumber >= _totalBankAccounts)\r\n        {\r\n           event_depositMadeToBankAccountFromDifferentAddress_Failed(bankAccountNumber, msg.sender, msg.value);\r\n           return false;     \r\n        }    \r\n            \r\n        // Value sent?\r\n        if (msg.value > 0)\r\n        {   \r\n            // Check for overflow  \r\n            if ((_bankAccountsArray[bankAccountNumber].balance + msg.value) < _bankAccountsArray[bankAccountNumber].balance)\r\n            {\r\n                throw;\r\n            }\r\n\r\n            _bankAccountsArray[bankAccountNumber].balance += msg.value; \r\n            event_depositMadeToBankAccountFromDifferentAddress_Successful(bankAccountNumber, msg.sender, msg.value);\r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            event_depositMadeToBankAccountFromDifferentAddress_Failed(bankAccountNumber, msg.sender, msg.value);\r\n            return false;\r\n        }\r\n    }\r\n    \r\n\r\n    /* -------- Withdrawal / transfer functions -------- */\r\n\r\n    function WithdrawAmountFromBankAccount(uint256 amount) public\r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (bool)\r\n    {\r\n        bool withdrawalSuccessful_ = false;\r\n        uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber; \r\n\r\n        // Bank account has value that can be withdrawn?\r\n        if (amount > 0 && _bankAccountsArray[accountNumber_].balance >= amount)\r\n        {\r\n            // Reduce the account balance \r\n            _bankAccountsArray[accountNumber_].balance -= amount;\r\n\r\n            // Check if using send() is successful\r\n            if (msg.sender.send(amount))\r\n            {\r\n \t            withdrawalSuccessful_ = true;\r\n            }\r\n            // Check if using call.value() is successful\r\n            else if (msg.sender.call.value(amount)())\r\n            {  \r\n                withdrawalSuccessful_ = true;\r\n            }  \r\n            else\r\n            {\r\n                // Set the previous balance\r\n                _bankAccountsArray[accountNumber_].balance += amount;\r\n            }\r\n        }\r\n\r\n        if (withdrawalSuccessful_)\r\n        {\r\n            event_withdrawalMadeFromBankAccount_Successful(accountNumber_, amount); \r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            event_withdrawalMadeFromBankAccount_Failed(accountNumber_, amount); \r\n            return false;\r\n        }\r\n    }\r\n\r\n    function WithdrawFullBalanceFromBankAccount() public\r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (bool)\r\n    {\r\n        bool withdrawalSuccessful_ = false;\r\n        uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber; \r\n        uint256 fullBalance_ = 0;\r\n\r\n        // Bank account has value that can be withdrawn?\r\n        if (_bankAccountsArray[accountNumber_].balance > 0)\r\n        {\r\n            fullBalance_ = _bankAccountsArray[accountNumber_].balance;\r\n\r\n            // Reduce the account balance \r\n            _bankAccountsArray[accountNumber_].balance = 0;\r\n\r\n            // Check if using send() is successful\r\n            if (msg.sender.send(fullBalance_))\r\n            {\r\n \t            withdrawalSuccessful_ = true;\r\n            }\r\n            // Check if using call.value() is successful\r\n            else if (msg.sender.call.value(fullBalance_)())\r\n            {  \r\n                withdrawalSuccessful_ = true;\r\n            }  \r\n            else\r\n            {\r\n                // Set the previous balance\r\n                _bankAccountsArray[accountNumber_].balance = fullBalance_;\r\n            }\r\n        }  \r\n\r\n        if (withdrawalSuccessful_)\r\n        {\r\n            event_withdrawalMadeFromBankAccount_Successful(accountNumber_, fullBalance_); \r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            event_withdrawalMadeFromBankAccount_Failed(accountNumber_, fullBalance_); \r\n            return false;\r\n        }\r\n    }\r\n\r\n    function TransferAmountFromBankAccountToAddress(uint256 amount, address destinationAddress) public\r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (bool)\r\n    {\r\n        bool transferSuccessful_ = false; \r\n        uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber; \r\n\r\n        // Bank account has value that can be transfered?\r\n        if (amount > 0 && _bankAccountsArray[accountNumber_].balance >= amount)\r\n        {\r\n            // Reduce the account balance \r\n            _bankAccountsArray[accountNumber_].balance -= amount; \r\n\r\n            // Check if using send() is successful\r\n            if (destinationAddress.send(amount))\r\n            {\r\n \t            transferSuccessful_ = true;\r\n            }\r\n            // Check if using call.value() is successful\r\n            else if (destinationAddress.call.value(amount)())\r\n            {  \r\n                transferSuccessful_ = true;\r\n            }  \r\n            else\r\n            {\r\n                // Set the previous balance\r\n                _bankAccountsArray[accountNumber_].balance += amount;\r\n            }\r\n        }  \r\n\r\n        if (transferSuccessful_)\r\n        {\r\n            event_transferMadeFromBankAccountToAddress_Successful(accountNumber_, amount, destinationAddress); \r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            event_transferMadeFromBankAccountToAddress_Failed(accountNumber_, amount, destinationAddress); \r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n    /* -------- Security functions -------- */\r\n\r\n    function Security_HasPasswordSha3HashBeenAddedToBankAccount() public\r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (bool)\r\n    {\r\n        uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber; \r\n\r\n        // Password sha3 hash added to the account?\r\n        if (_bankAccountsArray[accountNumber_].passwordSha3HashSet)\r\n        {\r\n            event_securityHasPasswordSha3HashBeenAddedToBankAccount_Yes(accountNumber_);\r\n            return true;\r\n        }\r\n        else\r\n        {\r\n            event_securityHasPasswordSha3HashBeenAddedToBankAccount_No(accountNumber_);\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function Security_AddPasswordSha3HashToBankAccount(bytes32 sha3Hash) public\r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (bool)\r\n    {\r\n        // VERY IMPORTANT -\r\n        // \r\n        // Ethereum uses KECCAK-256. It should be noted that it does not follow the FIPS-202 based standard (a.k.a SHA-3), \r\n        // which was finalized in August 2015.\r\n        // \r\n        // Keccak-256 generator link (produces same output as solidity sha3()) - http://emn178.github.io/online-tools/keccak_256.html\r\n            \r\n        uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber; \r\n\r\n        // Has this password hash been used before for this account?\r\n        if (_bankAccountsArray[accountNumber_].passwordSha3HashesUsed[sha3Hash] == true)\r\n        {\r\n            event_securityPasswordSha3HashAddedToBankAccount_Failed_PasswordHashPreviouslyUsed(accountNumber_);\r\n            return false;        \r\n        }\r\n\r\n        // Set the account password sha3 hash\r\n        _bankAccountsArray[accountNumber_].passwordSha3HashSet = true;\r\n        _bankAccountsArray[accountNumber_].passwordSha3Hash = sha3Hash;\r\n        _bankAccountsArray[accountNumber_].passwordSha3HashesUsed[sha3Hash] = true;\r\n\r\n        // Reset password attempts\r\n        _bankAccountsArray[accountNumber_].passwordAttempts = 0;\r\n\r\n        event_securityPasswordSha3HashAddedToBankAccount_Successful(accountNumber_);\r\n        return true;\r\n    }\r\n\r\n    function Security_ConnectBankAccountToNewOwnerAddress(uint32 bankAccountNumber, string password) public\r\n        modifier_wasValueSent()\r\n        returns (bool)\r\n    {\r\n        // VERY IMPORTANT -\r\n        // \r\n        // Ethereum uses KECCAK-256. It should be noted that it does not follow the FIPS-202 based standard (a.k.a SHA-3), \r\n        // which was finalized in August 2015.\r\n        // \r\n        // Keccak-256 generator link (produces same output as solidity sha3()) - http://emn178.github.io/online-tools/keccak_256.html\r\n\r\n        // Can bank accounts be connected to a new owner address?\r\n        if (_connectBankAccountToNewOwnerAddressEnabled == false)\r\n        {\r\n            event_securityConnectingABankAccountToANewOwnerAddressIsDisabled();\r\n            return false;        \r\n        }\r\n\r\n        // Check if bank account number is valid\r\n        if (bankAccountNumber >= _totalBankAccounts)\r\n        {\r\n            return false;     \r\n        }    \r\n\r\n        // Does the sender already have a bank account?\r\n        if (_bankAccountAddresses[msg.sender].accountSet)\r\n        {\r\n            // A owner address can only have one bank account\r\n            return false;\r\n        }\r\n\r\n        // Has password sha3 hash been set?\r\n        if (_bankAccountsArray[bankAccountNumber].passwordSha3HashSet == false)\r\n        {\r\n            event_securityBankAccountConnectedToNewAddressOwner_Failed_PasswordHashHasNotBeenAddedToBankAccount(bankAccountNumber);\r\n            return false;           \r\n        }\r\n\r\n        // Check if the password sha3 hash matches.\r\n        bytes memory passwordString = bytes(password);\r\n        if (sha3(passwordString) != _bankAccountsArray[bankAccountNumber].passwordSha3Hash)\r\n        {\r\n            // Keep track of the number of attempts to connect a bank account to a new owner address\r\n            _bankAccountsArray[bankAccountNumber].passwordAttempts++;  \r\n            event_securityBankAccountConnectedToNewAddressOwner_Failed_SentPasswordDoesNotMatchAccountPasswordHash(bankAccountNumber, _bankAccountsArray[bankAccountNumber].passwordAttempts); \r\n            return false;        \r\n        }\r\n\r\n        // Set new bank account address owner and the update the owner address details \r\n        _bankAccountsArray[bankAccountNumber].owner = msg.sender;\r\n        _bankAccountAddresses[msg.sender].accountSet = true;\r\n        _bankAccountAddresses[msg.sender].accountNumber = bankAccountNumber;\r\n\r\n        // Reset password sha3 hash\r\n        _bankAccountsArray[bankAccountNumber].passwordSha3HashSet = false;\r\n        _bankAccountsArray[bankAccountNumber].passwordSha3Hash = \"0\";\r\n       \r\n        // Reset password attempts\r\n        _bankAccountsArray[bankAccountNumber].passwordAttempts = 0;\r\n\r\n        event_securityBankAccountConnectedToNewAddressOwner_Successful(bankAccountNumber, msg.sender);\r\n        return true;\r\n    }\r\n\r\n    function Security_GetNumberOfAttemptsToConnectBankAccountToANewOwnerAddress() public\r\n        modifier_doesSenderHaveABankAccount()\r\n        modifier_wasValueSent()\r\n        returns (uint64)\r\n    {\r\n        uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber; \r\n        event_securityGetNumberOfAttemptsToConnectBankAccountToANewOwnerAddress(accountNumber_, _bankAccountsArray[accountNumber_].passwordAttempts);\r\n        return _bankAccountsArray[accountNumber_].passwordAttempts;\r\n    }\r\n\r\n\r\n    /* -------- Default function -------- */\r\n\r\n    function() \r\n    {    \r\n        // Does this sender have a bank account?\r\n        if (_bankAccountAddresses[msg.sender].accountSet)\r\n        {\r\n            // Does the bank account owner address match the sender address?\r\n            uint32 accountNumber_ = _bankAccountAddresses[msg.sender].accountNumber;\r\n            address accountOwner_ = _bankAccountsArray[accountNumber_].owner;\r\n            if (msg.sender == accountOwner_) \r\n            {\r\n                // Value sent?\r\n                if (msg.value > 0)\r\n                {                \r\n                    // Check for overflow\r\n                    if ((_bankAccountsArray[accountNumber_].balance + msg.value) < _bankAccountsArray[accountNumber_].balance)\r\n                    {\r\n                        throw;\r\n                    }\r\n \r\n                    // Update the bank account balance\r\n                    _bankAccountsArray[accountNumber_].balance += msg.value;\r\n                    event_depositMadeToBankAccount_Successful(accountNumber_, msg.value);\r\n                }\r\n                else\r\n                {\r\n                    throw;\r\n                }\r\n            }\r\n            else\r\n            {\r\n                // Sender address previously had a bank account that was transfered to a new owner address\r\n                throw;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            // Open a new bank account for the sender address - this function will also add any value sent to the bank account balance\r\n            OpenBankAccount();\r\n        }\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[],\"name\":\"BankOwner_WithdrawDonations\",\"outputs\":[],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"WithdrawAmountFromBankAccount\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"amount\",\"type\":\"uint256\"},{\"name\":\"destinationAddress\",\"type\":\"address\"}],\"name\":\"TransferAmountFromBankAccountToAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"GetBankAccountNumber\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"BankOwner_EnableConnectBankAccountToNewOwnerAddress\",\"outputs\":[],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"OpenBankAccount\",\"outputs\":[{\"name\":\"newBankAccountNumber\",\"type\":\"uint32\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"bankAccountNumber\",\"type\":\"uint32\"}],\"name\":\"DepositToBankAccountFromDifferentAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"name\":\"password\",\"type\":\"string\"}],\"name\":\"Security_ConnectBankAccountToNewOwnerAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"WithdrawFullBalanceFromBankAccount\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"sha3Hash\",\"type\":\"bytes32\"}],\"name\":\"Security_AddPasswordSha3HashToBankAccount\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"DepositToBankAccount\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"BankOwner_DisableConnectBankAccountToNewOwnerAddress\",\"outputs\":[],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"Security_HasPasswordSha3HashBeenAddedToBankAccount\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"BankOwner_GetDonationsBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"GetBankAccountBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"Donate\",\"outputs\":[],\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"Security_GetNumberOfAttemptsToConnectBankAccountToANewOwnerAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"uint64\"}],\"type\":\"function\"},{\"inputs\":[],\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"donationAmount\",\"type\":\"uint256\"}],\"name\":\"event_donationMadeToBank_ThankYou\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"donationBalance\",\"type\":\"uint256\"}],\"name\":\"event_getBankDonationsBalance\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"donationsAmount\",\"type\":\"uint256\"}],\"name\":\"event_bankDonationsWithdrawn\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"depositAmount\",\"type\":\"uint256\"}],\"name\":\"event_bankAccountOpened_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"}],\"name\":\"event_getBankAccountNumber_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"balance\",\"type\":\"uint256\"}],\"name\":\"event_getBankAccountBalance_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"depositAmount\",\"type\":\"uint256\"}],\"name\":\"event_depositMadeToBankAccount_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"depositAmount\",\"type\":\"uint256\"}],\"name\":\"event_depositMadeToBankAccount_Failed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"addressFrom\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"depositAmount\",\"type\":\"uint256\"}],\"name\":\"event_depositMadeToBankAccountFromDifferentAddress_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"addressFrom\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"depositAmount\",\"type\":\"uint256\"}],\"name\":\"event_depositMadeToBankAccountFromDifferentAddress_Failed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"withdrawalAmount\",\"type\":\"uint256\"}],\"name\":\"event_withdrawalMadeFromBankAccount_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"withdrawalAmount\",\"type\":\"uint256\"}],\"name\":\"event_withdrawalMadeFromBankAccount_Failed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"transferalAmount\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"destinationAddress\",\"type\":\"address\"}],\"name\":\"event_transferMadeFromBankAccountToAddress_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"transferalAmount\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"destinationAddress\",\"type\":\"address\"}],\"name\":\"event_transferMadeFromBankAccountToAddress_Failed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"event_securityConnectingABankAccountToANewOwnerAddressIsDisabled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"}],\"name\":\"event_securityHasPasswordSha3HashBeenAddedToBankAccount_Yes\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"}],\"name\":\"event_securityHasPasswordSha3HashBeenAddedToBankAccount_No\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"}],\"name\":\"event_securityPasswordSha3HashAddedToBankAccount_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"}],\"name\":\"event_securityPasswordSha3HashAddedToBankAccount_Failed_PasswordHashPreviouslyUsed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"newAddressOwner\",\"type\":\"address\"}],\"name\":\"event_securityBankAccountConnectedToNewAddressOwner_Successful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"}],\"name\":\"event_securityBankAccountConnectedToNewAddressOwner_Failed_PasswordHashHasNotBeenAddedToBankAccount\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"passwordAttempts\",\"type\":\"uint32\"}],\"name\":\"event_securityBankAccountConnectedToNewAddressOwner_Failed_SentPasswordDoesNotMatchAccountPasswordHash\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"bankAccountNumber\",\"type\":\"uint32\"},{\"indexed\":true,\"name\":\"attempts\",\"type\":\"uint32\"}],\"name\":\"event_securityGetNumberOfAttemptsToConnectBankAccountToANewOwnerAddress\",\"type\":\"event\"}]","ContractName":"MyEtherBank","CompilerVersion":"v0.3.1-2016-03-31-c492d9b","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":""}]}