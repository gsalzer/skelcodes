{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity 0.4.24;\r\n\r\n/**\r\n * Utility library of inline functions on addresses\r\n */\r\nlibrary Address {\r\n    /**\r\n     * Returns whether the target address is a contract\r\n     * @dev This function will return false if invoked during the constructor of a contract,\r\n     * as the code is not actually created until after the constructor finishes.\r\n     * @param account address of the account to check\r\n     * @return whether the target address is a contract\r\n     */\r\n    function isContract(address account) internal view returns (bool) {\r\n        uint256 size;\r\n        // XXX Currently there is no better way to check if there is a contract in an address\r\n        // than to check the size of the code at that address.\r\n        // See https://ethereum.stackexchange.com/a/14016/36603\r\n        // for more details about how this works.\r\n        // TODO Check this again before the Serenity release, because all addresses will be\r\n        // contracts then.\r\n        // solium-disable-next-line security/no-inline-assembly\r\n        assembly { size := extcodesize(account) }\r\n        return size > 0;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n * @title Ownable\r\n * @dev The Ownable contract has an owner address, and provides basic authorization control\r\n * functions, this simplifies the implementation of \"user permissions\".\r\n */\r\ncontract Ownable {\r\n    address private _owner;\r\n\r\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\r\n\r\n    /**\r\n     * @dev The Ownable constructor sets the original `owner` of the contract to the sender\r\n     * account.\r\n     */\r\n    constructor () internal {\r\n        _owner = msg.sender;\r\n        emit OwnershipTransferred(address(0), _owner);\r\n    }\r\n\r\n    /**\r\n     * @return the address of the owner.\r\n     */\r\n    function owner() public view returns (address) {\r\n        return _owner;\r\n    }\r\n\r\n    /**\r\n     * @dev Throws if called by any account other than the owner.\r\n     */\r\n    modifier onlyOwner() {\r\n        require(isOwner());\r\n        _;\r\n    }\r\n\r\n    /**\r\n     * @return true if `msg.sender` is the owner of the contract.\r\n     */\r\n    function isOwner() public view returns (bool) {\r\n        return msg.sender == _owner;\r\n    }\r\n\r\n    /**\r\n     * @dev Allows the current owner to relinquish control of the contract.\r\n     * @notice Renouncing to ownership will leave the contract without an owner.\r\n     * It will not be possible to call the functions with the `onlyOwner`\r\n     * modifier anymore.\r\n     */\r\n    function renounceOwnership() public onlyOwner {\r\n        emit OwnershipTransferred(_owner, address(0));\r\n        _owner = address(0);\r\n    }\r\n\r\n    /**\r\n     * @dev Allows the current owner to transfer control of the contract to a newOwner.\r\n     * @param newOwner The address to transfer ownership to.\r\n     */\r\n    function transferOwnership(address newOwner) public onlyOwner {\r\n        _transferOwnership(newOwner);\r\n    }\r\n\r\n    /**\r\n     * @dev Transfers control of the contract to a newOwner.\r\n     * @param newOwner The address to transfer ownership to.\r\n     */\r\n    function _transferOwnership(address newOwner) internal {\r\n        require(newOwner != address(0));\r\n        emit OwnershipTransferred(_owner, newOwner);\r\n        _owner = newOwner;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/**\r\n* @dev Contract Version Manager for non-upgradeable contracts\r\n*/\r\ncontract ContractManager is Ownable {\r\n\r\n    event VersionAdded(\r\n        string contractName,\r\n        string versionName,\r\n        address indexed implementation\r\n    );\r\n\r\n    event VersionUpdated(\r\n        string contractName,\r\n        string versionName,\r\n        Status status,\r\n        BugLevel bugLevel\r\n    );\r\n\r\n    event VersionRecommended(string contractName, string versionName);\r\n\r\n    event RecommendedVersionRemoved(string contractName);\r\n\r\n    /**\r\n    * @dev Signifies the status of a version\r\n    */\r\n    enum Status {BETA, RC, PRODUCTION, DEPRECATED}\r\n\r\n    /**\r\n    * @dev Indicated the highest level of bug found in the version\r\n    */\r\n    enum BugLevel {NONE, LOW, MEDIUM, HIGH, CRITICAL}\r\n\r\n    /**\r\n    * @dev A struct to encode version details\r\n    */\r\n    struct Version {\r\n        // the version number string ex. \"v1.0\"\r\n        string versionName;\r\n\r\n        Status status;\r\n\r\n        BugLevel bugLevel;\r\n        // the address of the instantiation of the version\r\n        address implementation;\r\n        // the date when this version was registered with the contract\r\n        uint256 dateAdded;\r\n    }\r\n\r\n    /**\r\n    * @dev List of all contracts registered (append-only)\r\n    */\r\n    string[] internal contracts;\r\n\r\n    /**\r\n    * @dev Mapping to keep track which contract names have been registered.\r\n    * Used to save gas when checking for redundant contract names\r\n    */\r\n    mapping(string=>bool) internal contractExists;\r\n\r\n    /**\r\n    * @dev Mapping to keep track of all version names for easch contract name\r\n    */\r\n    mapping(string=>string[]) internal contractVsVersionString;\r\n\r\n    /**\r\n    * @dev Mapping from contract names to version names to version structs\r\n    */\r\n    mapping(string=>mapping(string=>Version)) internal contractVsVersions;\r\n\r\n    /**\r\n    * @dev Mapping from contract names to the version names of their\r\n    * recommended versions\r\n    */\r\n    mapping(string=>string) internal contractVsRecommendedVersion;\r\n\r\n    modifier nonZeroAddress(address _address) {\r\n        require(\r\n            _address != address(0),\r\n            \"The provided address is the 0 address\"\r\n        );\r\n        _;\r\n    }\r\n\r\n    modifier contractRegistered(string contractName) {\r\n\r\n        require(contractExists[contractName], \"Contract does not exists\");\r\n        _;\r\n    }\r\n\r\n    modifier versionExists(string contractName, string versionName) {\r\n        require(\r\n            contractVsVersions[contractName][versionName].implementation != address(0),\r\n            \"Version does not exists for contract\"\r\n        );\r\n        _;\r\n    }\r\n\r\n    /**\r\n    * @dev Allows owner to register a new version of a contract\r\n    * @param contractName The contract name of the contract to be added\r\n    * @param versionName The name of the version to be added\r\n    * @param status Status of the version to be added\r\n    * @param implementation The address of the implementation of the version\r\n    */\r\n    function addVersion(\r\n        string contractName,\r\n        string versionName,\r\n        Status status,\r\n        address implementation\r\n    )\r\n        external\r\n        onlyOwner\r\n        nonZeroAddress(implementation)\r\n    {\r\n        // version name must not be the empty string\r\n        require(bytes(versionName).length>0, \"Empty string passed as version\");\r\n\r\n        // contract name must not be the empty string\r\n        require(\r\n            bytes(contractName).length>0,\r\n            \"Empty string passed as contract name\"\r\n        );\r\n\r\n        // implementation must be a contract\r\n        require(\r\n            Address.isContract(implementation),\r\n            \"Cannot set an implementation to a non-contract address\"\r\n        );\r\n\r\n        if (!contractExists[contractName]) {\r\n            contracts.push(contractName);\r\n            contractExists[contractName] = true;\r\n        }\r\n\r\n        // the version name should not already be registered for\r\n        // the given contract\r\n        require(\r\n            contractVsVersions[contractName][versionName].implementation == address(0),\r\n            \"Version already exists for contract\"\r\n        );\r\n        contractVsVersionString[contractName].push(versionName);\r\n\r\n        contractVsVersions[contractName][versionName] = Version({\r\n            versionName:versionName,\r\n            status:status,\r\n            bugLevel:BugLevel.NONE,\r\n            implementation:implementation,\r\n            dateAdded:block.timestamp\r\n        });\r\n\r\n        emit VersionAdded(contractName, versionName, implementation);\r\n    }\r\n\r\n    /**\r\n    * @dev Allows owner to update a contract version\r\n    * @param contractName Name of the contract\r\n    * @param versionName Version of the contract\r\n    * @param status Status of the contract\r\n    * @param bugLevel New bug level for the contract\r\n    */\r\n    function updateVersion(\r\n        string contractName,\r\n        string versionName,\r\n        Status status,\r\n        BugLevel bugLevel\r\n    )\r\n        external\r\n        onlyOwner\r\n        contractRegistered(contractName)\r\n        versionExists(contractName, versionName)\r\n    {\r\n\r\n        contractVsVersions[contractName][versionName].status = status;\r\n        contractVsVersions[contractName][versionName].bugLevel = bugLevel;\r\n\r\n        emit VersionUpdated(\r\n            contractName,\r\n            versionName,\r\n            status,\r\n            bugLevel\r\n        );\r\n    }\r\n\r\n    /**\r\n    * @dev Allows owner to set the recommended version\r\n    * @param contractName Name of the contract\r\n    * @param versionName Version of the contract\r\n    */\r\n    function markRecommendedVersion(\r\n        string contractName,\r\n        string versionName\r\n    )\r\n        external\r\n        onlyOwner\r\n        contractRegistered(contractName)\r\n        versionExists(contractName, versionName)\r\n    {\r\n        // set the version name as the recommended version\r\n        contractVsRecommendedVersion[contractName] = versionName;\r\n\r\n        emit VersionRecommended(contractName, versionName);\r\n    }\r\n\r\n    /**\r\n    * @dev Get recommended version for the contract.\r\n    * @return Details of recommended version\r\n    */\r\n    function getRecommendedVersion(\r\n        string contractName\r\n    )\r\n        external\r\n        view\r\n        contractRegistered(contractName)\r\n        returns (\r\n            string versionName,\r\n            Status status,\r\n            BugLevel bugLevel,\r\n            address implementation,\r\n            uint256 dateAdded\r\n        )\r\n    {\r\n        versionName = contractVsRecommendedVersion[contractName];\r\n\r\n        Version storage recommendedVersion = contractVsVersions[\r\n            contractName\r\n        ][\r\n            versionName\r\n        ];\r\n\r\n        status = recommendedVersion.status;\r\n        bugLevel = recommendedVersion.bugLevel;\r\n        implementation = recommendedVersion.implementation;\r\n        dateAdded = recommendedVersion.dateAdded;\r\n\r\n        return (\r\n            versionName,\r\n            status,\r\n            bugLevel,\r\n            implementation,\r\n            dateAdded\r\n        );\r\n    }\r\n\r\n    /**\r\n    * @dev Allows owner to remove a version from being recommended\r\n    * @param contractName Name of the contract\r\n    */\r\n    function removeRecommendedVersion(string contractName)\r\n        external\r\n        onlyOwner\r\n        contractRegistered(contractName)\r\n    {\r\n        // delete the recommended version name from the mapping\r\n        delete contractVsRecommendedVersion[contractName];\r\n\r\n        emit RecommendedVersionRemoved(contractName);\r\n    }\r\n\r\n    /**\r\n    * @dev Get total count of contracts registered\r\n    */\r\n    function getTotalContractCount() external view returns (uint256 count) {\r\n        count = contracts.length;\r\n        return count;\r\n    }\r\n\r\n    /**\r\n    * @dev Get total count of versions for the contract\r\n    * @param contractName Name of the contract\r\n    */\r\n    function getVersionCountForContract(string contractName)\r\n        external\r\n        view\r\n        returns (uint256 count)\r\n    {\r\n        count = contractVsVersionString[contractName].length;\r\n        return count;\r\n    }\r\n\r\n    /**\r\n    * @dev Returns the contract at a given index in the contracts array\r\n    * @param index The index to be searched for\r\n    */\r\n    function getContractAtIndex(uint256 index)\r\n        external\r\n        view\r\n        returns (string contractName)\r\n    {\r\n        contractName = contracts[index];\r\n        return contractName;\r\n    }\r\n\r\n    /**\r\n    * @dev Returns the version name of a contract at specific index in a\r\n    * contractVsVersionString[contractName] array\r\n    * @param contractName Name of the contract\r\n    * @param index The index to be searched for\r\n    */\r\n    function getVersionAtIndex(string contractName, uint256 index)\r\n        external\r\n        view\r\n        returns (string versionName)\r\n    {\r\n        versionName = contractVsVersionString[contractName][index];\r\n        return versionName;\r\n    }\r\n\r\n    /**\r\n    * @dev Returns the version details for the given contract and version name\r\n    * @param contractName Name of the contract\r\n    * @param versionName Version string for the contract\r\n    */\r\n    function getVersionDetails(string contractName, string versionName)\r\n        external\r\n        view\r\n        returns (\r\n            string versionString,\r\n            Status status,\r\n            BugLevel bugLevel,\r\n            address implementation,\r\n            uint256 dateAdded\r\n        )\r\n    {\r\n        Version storage v = contractVsVersions[contractName][versionName];\r\n\r\n        versionString = v.versionName;\r\n        status = v.status;\r\n        bugLevel = v.bugLevel;\r\n        implementation = v.implementation;\r\n        dateAdded = v.dateAdded;\r\n\r\n        return (\r\n            versionString,\r\n            status,\r\n            bugLevel,\r\n            implementation,\r\n            dateAdded\r\n        );\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"},{\"name\":\"versionName\",\"type\":\"string\"},{\"name\":\"status\",\"type\":\"uint8\"},{\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"addVersion\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"},{\"name\":\"versionName\",\"type\":\"string\"},{\"name\":\"status\",\"type\":\"uint8\"},{\"name\":\"bugLevel\",\"type\":\"uint8\"}],\"name\":\"updateVersion\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTotalContractCount\",\"outputs\":[{\"name\":\"count\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"}],\"name\":\"getRecommendedVersion\",\"outputs\":[{\"name\":\"versionName\",\"type\":\"string\"},{\"name\":\"status\",\"type\":\"uint8\"},{\"name\":\"bugLevel\",\"type\":\"uint8\"},{\"name\":\"implementation\",\"type\":\"address\"},{\"name\":\"dateAdded\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"},{\"name\":\"versionName\",\"type\":\"string\"}],\"name\":\"getVersionDetails\",\"outputs\":[{\"name\":\"versionString\",\"type\":\"string\"},{\"name\":\"status\",\"type\":\"uint8\"},{\"name\":\"bugLevel\",\"type\":\"uint8\"},{\"name\":\"implementation\",\"type\":\"address\"},{\"name\":\"dateAdded\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"getContractAtIndex\",\"outputs\":[{\"name\":\"contractName\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"}],\"name\":\"removeRecommendedVersion\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"},{\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"getVersionAtIndex\",\"outputs\":[{\"name\":\"versionName\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"},{\"name\":\"versionName\",\"type\":\"string\"}],\"name\":\"markRecommendedVersion\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"contractName\",\"type\":\"string\"}],\"name\":\"getVersionCountForContract\",\"outputs\":[{\"name\":\"count\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"contractName\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"versionName\",\"type\":\"string\"},{\"indexed\":true,\"name\":\"implementation\",\"type\":\"address\"}],\"name\":\"VersionAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"contractName\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"versionName\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"status\",\"type\":\"uint8\"},{\"indexed\":false,\"name\":\"bugLevel\",\"type\":\"uint8\"}],\"name\":\"VersionUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"contractName\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"versionName\",\"type\":\"string\"}],\"name\":\"VersionRecommended\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"contractName\",\"type\":\"string\"}],\"name\":\"RecommendedVersionRemoved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]","ContractName":"ContractManager","CompilerVersion":"v0.4.24+commit.e67f0147","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://1c9762dc89c27ff832268e843a733316af11da998c30363281b91337840b210b"}]}