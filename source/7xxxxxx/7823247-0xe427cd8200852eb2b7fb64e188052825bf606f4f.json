{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity 0.5.1;\r\ncontract Medianizer {\r\n\tfunction peek() external pure returns (bytes32,bool) {}\r\n}\r\n\r\ncontract FiatContract {\r\n\tfunction USD(uint _id) external pure returns (uint256);\r\n}\r\ncontract EtherLoans {\r\n\tuint nIsDEV = 0;\r\n\tMedianizer gobjMakerDAOContract;\r\n\tFiatContract gobjFiatContract;\r\n\t\r\n\taddress payable gadrOwner;\r\n\tuint gnOwnerBalance = 0;\r\n\tuint gnLastLenderOfferID = 0;\r\n\tuint gnLastBorrowerOfferID = 0;\r\n\tuint gnLastLoanID = 0;\r\n\tuint gnFee = 0;\r\n\tuint gnLoanID = 0;\r\n\r\n\tstruct clsTempForFinalize {\r\n\t\tbytes3 b3FinalizedByLender;\r\n\t\tuint nAmountToSendLender;\r\n\t\tuint nAmountToSendBorrower;\r\n\t\tuint nAppreciation;\r\n\t\tuint nFinalInterest_FromBorrower;\r\n\t}\t\r\n\t\r\n\tstruct clsLenderOffer {\r\n\t\tuint nFee;\r\n\t\taddress payable adrLenderAddress;\r\n\t\tuint nEtherDeposited;\r\n\t\tuint nInterestRatePerSecond;\r\n\t\tuint nInterest_SecondsToPrepay;\r\n\t\tuint nDateCancelled;\r\n\t\tuint nDateMatched;\r\n\t}\r\n\r\n\tstruct clsBorrowerOffer {\r\n\t\tuint nFee;\r\n\t\taddress payable adrBorrowerAddress;\r\n\t\tuint nEtherToBorrow;\r\n\t\tuint nEtherDeposited;\r\n\t\tuint nInterestRatePerSecond;\r\n\t\tuint nDateCancelled;\r\n\t\tuint nDateMatched;\r\n\t}\r\n\r\n\tstruct clsLoan {\r\n\t\tuint nLoanNumber;\r\n\t\tuint nFee;\r\n\t\tuint nDateCreated;\r\n\t\tuint nAcceptedByLender;\r\n\t\taddress payable adrLenderAddress;\r\n\t\taddress payable adrBorrowerAddress;\r\n\t\tuint nEtherDeposited_Lender;\r\n\t\tuint nEtherDeposited_Borrower;\r\n\t\tuint nInterestRatePerSecond;\r\n\t\tuint nStarting_ETH_USD;\r\n\t\tuint nEnding_ETH_USD;\r\n\t\tuint nDateFinalized;\r\n\t\tuint nFinalizedByLender;\r\n\t}\r\n\r\n\tmapping(uint => clsLenderOffer) gmapLenderOffers;\r\n\tmapping(uint => clsBorrowerOffer) gmapBorrowerOffers;\r\n\tmapping(uint => clsLoan) gmapLoans;\r\n\r\n\tconstructor() public {\r\n\t\tgadrOwner = msg.sender; \r\n\t\tif (nIsDEV == 1) {\r\n\t\t\tgobjFiatContract = FiatContract(0x2CDe56E5c8235D6360CCbb0c57Ce248Ca9C80909);\r\n\t\t} else {\r\n\t\t\tgobjMakerDAOContract = Medianizer(0x729D19f657BD0614b4985Cf1D82531c67569197B);\r\n\t\t}\r\n\t}\r\n\r\n\tmodifier OnlyByOwner()\r\n\t{\r\n\t\trequire(msg.sender == gadrOwner);\r\n\t\t_;\r\n\t}\r\n\r\n\tevent LenderOffersCreated(uint indexed LoanNumber, address indexed Lender, uint EtherDeposited, uint APR, uint Interest_DaysToPrepay, uint Fee_Percent);\r\n\tevent LenderOffersCancelled(uint indexed LoanNumber, address indexed Lender, uint EtherRefunded);\r\n\tevent BorrowerOffersCreated(uint indexed LoanNumber, address indexed Borrower, uint EtherToBorrow, uint EtherDeposited, uint APR, uint Fee_Percent);\r\n\tevent BorrowerOffersCancelled(uint indexed LoanNumber, address indexed Borrower, uint EtherRefunded);\r\n\tevent LoansCreated (uint indexed LoanNumber, bytes3 OfferedByLender, address indexed Lender, address indexed Borrower, uint EtherFromLender, uint EtherFromBorrower, uint APR, uint Interest_DaysPrepaid, uint Starting_ETH_USD, uint Fee_Percent);\r\n\tevent LoansFinalized (uint indexed LoanNumber, address indexed Lender, address indexed Borrower, bytes3 FinalizedByLender, uint Starting_ETH_USD, uint Ending_ETH_USD, uint EthToLender, uint EthToBorrower, uint Appreciation, uint StartTime, uint APR, uint Interest, uint Fee_Percent);\r\n\r\n\tfunction () external payable {}\r\n\t\r\n\tfunction zLenderCancelsOffer(uint nOfferID) external{\r\n\t\trequire(gmapLenderOffers[nOfferID].adrLenderAddress == msg.sender && gmapLenderOffers[nOfferID].nDateCancelled == 0 && gmapLenderOffers[nOfferID].nDateMatched == 0);\r\n\t\tgmapLenderOffers[nOfferID].nDateCancelled = block.timestamp;\r\n\t\tmsg.sender.transfer(gmapLenderOffers[nOfferID].nEtherDeposited);\r\n\r\n\t\temit LenderOffersCancelled(\r\n\t\t\tnOfferID,\r\n\t\t\tmsg.sender,\r\n\t\t\tgmapLenderOffers[nOfferID].nEtherDeposited\r\n\t\t);\t\t\r\n\t}\r\n\r\n\tfunction zBorrowerCancelsOffer(uint nOfferID) external{\r\n\t\trequire(gmapBorrowerOffers[nOfferID].adrBorrowerAddress == msg.sender && gmapBorrowerOffers[nOfferID].nDateCancelled == 0 && gmapBorrowerOffers[nOfferID].nDateMatched == 0);\r\n\t\tgmapBorrowerOffers[nOfferID].nDateCancelled = block.timestamp;\r\n\t\tmsg.sender.transfer(gmapBorrowerOffers[nOfferID].nEtherDeposited);\r\n\r\n\t\temit BorrowerOffersCancelled(\r\n\t\t\tnOfferID + 1000000,\r\n\t\t\tmsg.sender,\r\n\t\t\tgmapBorrowerOffers[nOfferID].nEtherDeposited\r\n\t\t);\t\t\r\n\t}\r\n\r\n\tfunction zCreateLoan(uint nAcceptedByLender, uint nOfferID) external payable {\r\n\t\trequire(msg.value > 0);\r\n\t\tuint nCurrent_ETH_USD;\r\n\t\tif (nIsDEV == 1) {\r\n\t\t\tnCurrent_ETH_USD = 1e34 / gobjFiatContract.USD(0);\r\n\t\t} else {\r\n\t\t\t(bytes32 b32_Current_ETH_USD, bool bValid_ETH_USD) = gobjMakerDAOContract.peek();\r\n\t\t\trequire (bValid_ETH_USD == true);\r\n\t\t\tnCurrent_ETH_USD = uint(b32_Current_ETH_USD);\r\n\t\t}\r\n\t\t\r\n\t\tif (nAcceptedByLender == 0) {\r\n\t\t\trequire (gmapLenderOffers[nOfferID].nDateCancelled == 0 && gmapLenderOffers[nOfferID].nDateMatched == 0);\r\n\t\t\trequire (msg.value >= (gmapLenderOffers[nOfferID].nEtherDeposited * gmapLenderOffers[nOfferID].nInterest_SecondsToPrepay * gmapLenderOffers[nOfferID].nInterestRatePerSecond) / 1.01 ether);\r\n\t\t} else {\r\n\t\t\trequire (gmapBorrowerOffers[nOfferID].nDateCancelled == 0 && gmapBorrowerOffers[nOfferID].nDateMatched == 0);\r\n\t\t\trequire (msg.value == gmapBorrowerOffers[nOfferID].nEtherToBorrow);\r\n\t\t}\r\n\t\tgnLastLoanID++;\r\n\t\tgmapLoans[gnLastLoanID].nDateCreated = block.timestamp;\r\n\t\tgmapLoans[gnLastLoanID].nAcceptedByLender = nAcceptedByLender;\r\n\t\tgmapLoans[gnLastLoanID].nStarting_ETH_USD = nCurrent_ETH_USD;\r\n\r\n\t\tbytes3 b3OfferedByLender;\r\n\t\tif (nAcceptedByLender == 0) {\r\n\t\t\tb3OfferedByLender = \"Yes\";\r\n\t\t\tgmapLenderOffers[nOfferID].nDateMatched = block.timestamp;\r\n\t\t\tgmapLoans[gnLastLoanID].nLoanNumber = nOfferID;\r\n\t\t\tgmapLoans[gnLastLoanID].nFee = gmapLenderOffers[nOfferID].nFee;\r\n\t\t\tgmapLoans[gnLastLoanID].adrLenderAddress = gmapLenderOffers[nOfferID].adrLenderAddress;\r\n\t\t\tgmapLoans[gnLastLoanID].adrBorrowerAddress = msg.sender;\r\n\t\t\tgmapLoans[gnLastLoanID].nEtherDeposited_Lender = gmapLenderOffers[nOfferID].nEtherDeposited;\r\n\t\t\tgmapLoans[gnLastLoanID].nEtherDeposited_Borrower = msg.value;\r\n\t\t\tgmapLoans[gnLastLoanID].nInterestRatePerSecond = gmapLenderOffers[nOfferID].nInterestRatePerSecond;\r\n\t\t} else {\r\n\t\t\tb3OfferedByLender = \"No\";\r\n\t\t\tgmapBorrowerOffers[nOfferID].nDateMatched = block.timestamp;\r\n\t\t\tgmapLoans[gnLastLoanID].nLoanNumber = nOfferID + 1000000;\r\n\t\t\tgmapLoans[gnLastLoanID].nFee = gmapBorrowerOffers[nOfferID].nFee;\r\n\t\t\tgmapLoans[gnLastLoanID].adrLenderAddress = msg.sender;\r\n\t\t\tgmapLoans[gnLastLoanID].adrBorrowerAddress = gmapBorrowerOffers[nOfferID].adrBorrowerAddress;\r\n\t\t\tgmapLoans[gnLastLoanID].nEtherDeposited_Lender = msg.value;\r\n\t\t\tgmapLoans[gnLastLoanID].nEtherDeposited_Borrower = gmapBorrowerOffers[nOfferID].nEtherDeposited;\r\n\t\t\tgmapLoans[gnLastLoanID].nInterestRatePerSecond = gmapBorrowerOffers[nOfferID].nInterestRatePerSecond;\r\n\t\t}\r\n\r\n\t\temit LoansCreated(\r\n\t\t\tgmapLoans[gnLastLoanID].nLoanNumber,\r\n\t\t\tb3OfferedByLender,\r\n\t\t\tgmapLoans[gnLastLoanID].adrLenderAddress,\r\n\t\t\tgmapLoans[gnLastLoanID].adrBorrowerAddress,\r\n\t\t\tgmapLoans[gnLastLoanID].nEtherDeposited_Lender,\r\n\t\t\tgmapLoans[gnLastLoanID].nEtherDeposited_Borrower,\r\n\t\t\tgmapLoans[gnLastLoanID].nInterestRatePerSecond,\r\n\t\t\tgmapLoans[gnLastLoanID].nEtherDeposited_Borrower / ((gmapLoans[gnLastLoanID].nInterestRatePerSecond * gmapLoans[gnLastLoanID].nEtherDeposited_Lender) / 1 ether),\r\n\t\t\tgmapLoans[gnLastLoanID].nStarting_ETH_USD,\r\n\t\t\tgnFee\r\n\t\t\t);\r\n\t}\r\n\t\r\n\tfunction zCreateLenderOffer(uint nInterestRatePerSecond, uint nInterest_SecondsToPrepay) external payable {\r\n\t\trequire(msg.value > 0);\r\n\t\tgnLastLenderOfferID++;\r\n\t\tgmapLenderOffers[gnLastLenderOfferID].nFee = gnFee;\r\n\t\tgmapLenderOffers[gnLastLenderOfferID].adrLenderAddress = msg.sender;\r\n\t\tgmapLenderOffers[gnLastLenderOfferID].nEtherDeposited = msg.value;\r\n\t\tgmapLenderOffers[gnLastLenderOfferID].nInterestRatePerSecond = nInterestRatePerSecond;\r\n\t\tgmapLenderOffers[gnLastLenderOfferID].nInterest_SecondsToPrepay = nInterest_SecondsToPrepay;\r\n\t\t\r\n\t\temit LenderOffersCreated(\r\n\t\t\tgnLastLenderOfferID,\r\n\t\t\tmsg.sender,\r\n\t\t\tmsg.value,\r\n\t\t\tnInterestRatePerSecond,\r\n\t\t\tnInterest_SecondsToPrepay,\r\n\t\t\tgnFee\r\n\t\t\t);\r\n\t}\r\n\t\r\n\tfunction zCreateBorrowerOffer(uint nEtherToBorrow, uint nInterestRatePerSecond) external payable {\r\n\t\trequire(msg.value > 0);\r\n\t\tgnLastBorrowerOfferID++;\r\n\t\tgmapBorrowerOffers[gnLastBorrowerOfferID].nFee = gnFee;\r\n\t\tgmapBorrowerOffers[gnLastBorrowerOfferID].adrBorrowerAddress = msg.sender;\r\n\t\tgmapBorrowerOffers[gnLastBorrowerOfferID].nEtherToBorrow = nEtherToBorrow;\r\n\t\tgmapBorrowerOffers[gnLastBorrowerOfferID].nEtherDeposited = msg.value;\r\n\t\tgmapBorrowerOffers[gnLastBorrowerOfferID].nInterestRatePerSecond = nInterestRatePerSecond;\r\n\r\n\t\temit BorrowerOffersCreated(\r\n\t\t\tgnLastBorrowerOfferID + 1000000,\r\n\t\t\tmsg.sender,\r\n\t\t\tnEtherToBorrow,\r\n\t\t\tmsg.value,\r\n\t\t\tnInterestRatePerSecond,\r\n\t\t\tgnFee\r\n\t\t\t);\r\n\t}\r\n\r\n\tfunction zGetLoans1() external view returns (uint[] memory anFee, uint[] memory anDateCreated, uint[] memory anAcceptedByLender, address[] memory aadrLenderAddress, address[] memory aadrBorrowerAddress,\r\n\t\t\t\t\t\t\tuint[] memory anEtherDeposited_Lender, uint[] memory anEtherDeposited_Borrower) {\r\n\t\tanFee = new uint[](gnLastLoanID+1);\r\n\t\tanDateCreated = new uint[](gnLastLoanID+1);\r\n\t\tanAcceptedByLender = new uint[](gnLastLoanID+1);\r\n\t\taadrLenderAddress = new address[](gnLastLoanID+1);\r\n\t\taadrBorrowerAddress = new address[](gnLastLoanID+1);\r\n\t\tanEtherDeposited_Lender = new uint[](gnLastLoanID+1);\r\n\t\tanEtherDeposited_Borrower = new uint[](gnLastLoanID+1);\r\n\r\n\t\tfor (uint i = 1; i <= gnLastLoanID; i++) {\r\n\t\t\tanFee[i] = gmapLoans[i].nFee;\r\n\t\t\tanDateCreated[i] = gmapLoans[i].nDateCreated;\r\n\t\t\tanAcceptedByLender[i] = gmapLoans[i].nAcceptedByLender;\r\n\t\t\t\taadrLenderAddress[i] = gmapLoans[i].adrLenderAddress;\r\n\t\t\taadrBorrowerAddress[i] = gmapLoans[i].adrBorrowerAddress;\r\n\t\t\tanEtherDeposited_Lender[i] = gmapLoans[i].nEtherDeposited_Lender;\r\n\t\t\tanEtherDeposited_Borrower[i] = gmapLoans[i].nEtherDeposited_Borrower;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction zGetLoans2() external view returns (uint[] memory anInterestRatePerSecond, uint[] memory anStarting_ETH_USD, uint[] memory nEnding_ETH_USD, uint[] memory nDateFinalized, uint[] memory nFinalizedByLender) {\r\n\t\tanInterestRatePerSecond = new uint[](gnLastLoanID+1);\r\n\t\tanStarting_ETH_USD = new uint[](gnLastLoanID+1);\r\n\t\tnEnding_ETH_USD = new uint[](gnLastLoanID+1);\r\n\t\tnDateFinalized = new uint[](gnLastLoanID+1);\r\n\t\tnFinalizedByLender = new uint[](gnLastLoanID+1);\r\n\r\n\t\tfor (uint i = 1; i <= gnLastLoanID; i++) {\r\n\t\t\tanInterestRatePerSecond[i] = gmapLoans[i].nInterestRatePerSecond;\r\n\t\t\tanStarting_ETH_USD[i] = gmapLoans[i].nStarting_ETH_USD;\r\n\t\t\tnEnding_ETH_USD[i] = gmapLoans[i].nEnding_ETH_USD;\r\n\t\t\tnDateFinalized[i] = gmapLoans[i].nDateFinalized;\r\n\t\t\tnFinalizedByLender[i] = gmapLoans[i].nFinalizedByLender;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction zSetFee(uint nFee) OnlyByOwner() external {\r\n\t\tgnFee = nFee;\r\n\t}\r\n\r\n\tfunction zGetOwnerBalance() OnlyByOwner() external view returns (uint nFee, uint nOwnerBalance) {\r\n\t\tnFee = gnFee;\r\n\t\tnOwnerBalance = gnOwnerBalance;\r\n\t}\r\n\r\n\tfunction zOwnerWithdrawBalance() OnlyByOwner() external {\r\n\t\tuint nTemp = gnOwnerBalance;\r\n\t\tgnOwnerBalance = 0;\r\n\t\tgadrOwner.transfer(nTemp);\r\n\t}\r\n\r\n\tfunction zGetLenderOffers() external view returns (uint[] memory anFee, address[] memory aadrLenderAddress, uint[] memory anEtherDeposited, uint[] memory anInterestRatePerSecond,\r\n\t\t\t\t\t uint[] memory anInterest_SecondsToPrepay, uint[] memory anDateCancelled, uint[] memory anDateMatched) {\r\n\t\tanFee = new uint[](gnLastLenderOfferID+1);\r\n\t\taadrLenderAddress = new address[](gnLastLenderOfferID+1);\r\n\t\tanEtherDeposited = new uint[](gnLastLenderOfferID+1);\r\n\t\tanInterestRatePerSecond = new uint[](gnLastLenderOfferID+1);\r\n\t\tanInterest_SecondsToPrepay = new uint[](gnLastLenderOfferID+1);\r\n\t\tanDateCancelled = new uint[](gnLastLenderOfferID+1);\r\n\t\tanDateMatched = new uint[](gnLastLenderOfferID+1);\r\n\r\n\t\tfor (uint i = 1; i <= gnLastLenderOfferID; i++) {\r\n\t\t\tanFee[i] = gmapLenderOffers[i].nFee;\r\n\t\t\taadrLenderAddress[i] = gmapLenderOffers[i].adrLenderAddress;\r\n\t\t\tanEtherDeposited[i] = gmapLenderOffers[i].nEtherDeposited;\r\n\t\t\tanInterestRatePerSecond[i] = gmapLenderOffers[i].nInterestRatePerSecond;\r\n\t\t\tanInterest_SecondsToPrepay[i] = gmapLenderOffers[i].nInterest_SecondsToPrepay;\r\n\t\t\tanDateCancelled[i] = gmapLenderOffers[i].nDateCancelled;\r\n\t\t\tanDateMatched[i] = gmapLenderOffers[i].nDateMatched;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction zGetBorrowerOffers() external view returns (uint[] memory anFee, address[] memory aadrBorrowerAddress, uint[] memory anEtherToBorrow, uint[] memory anEtherDeposited, uint[] memory anInterestRatePerSecond,\r\n\t\t\t\tuint[] memory anDateCancelled, uint[] memory anDateMatched) {\r\n\t\tanFee = new uint[](gnLastBorrowerOfferID+1);\r\n\t\taadrBorrowerAddress = new address[](gnLastBorrowerOfferID+1);\r\n\t\tanEtherToBorrow = new uint[](gnLastBorrowerOfferID+1);\r\n\t\tanEtherDeposited = new uint[](gnLastBorrowerOfferID+1);\r\n\t\tanInterestRatePerSecond = new uint[](gnLastBorrowerOfferID+1);\r\n\t\tanDateCancelled = new uint[](gnLastBorrowerOfferID+1);\r\n\t\tanDateMatched = new uint[](gnLastBorrowerOfferID+1);\r\n\r\n\t\tfor (uint i = 1; i <= gnLastBorrowerOfferID; i++) {\r\n\t\t\tanFee[i] = gmapBorrowerOffers[i].nFee;\r\n\t\t\taadrBorrowerAddress[i] = gmapBorrowerOffers[i].adrBorrowerAddress;\r\n\t\t\tanEtherToBorrow[i] = gmapBorrowerOffers[i].nEtherToBorrow;\r\n\t\t\tanEtherDeposited[i] = gmapBorrowerOffers[i].nEtherDeposited;\r\n\t\t\tanInterestRatePerSecond[i] = gmapBorrowerOffers[i].nInterestRatePerSecond;\r\n\t\t\tanDateCancelled[i] = gmapBorrowerOffers[i].nDateCancelled;\r\n\t\t\tanDateMatched[i] = gmapBorrowerOffers[i].nDateMatched;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction zFinalizeLoan(uint nFinalizedByLender, uint nLoanID) external {\r\n\t\tbytes3 b3FinalizedByLender = \"No\";\r\n\t\tuint nCurrent_ETH_USD;\r\n\t\tif (nFinalizedByLender == 1) {\r\n\t\t\tif (gmapLoans[nLoanID].adrLenderAddress != msg.sender && msg.sender == gadrOwner) {\r\n\t\t\t\tb3FinalizedByLender = \"n/a\";\r\n\t\t\t} else {\r\n\t\t\t\trequire(gmapLoans[nLoanID].adrLenderAddress == msg.sender);\r\n\t\t\t\tb3FinalizedByLender = \"Yes\";\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\trequire(gmapLoans[nLoanID].adrBorrowerAddress == msg.sender);\r\n\t\t}\r\n\t\trequire(gmapLoans[nLoanID].nDateFinalized == 0);\r\n\t\t\r\n\t\tif (nIsDEV == 1) {\r\n\t\t\tnCurrent_ETH_USD = 1e34 / gobjFiatContract.USD(0);\r\n\t\t} else {\r\n\t\t\t(bytes32 b32_Current_ETH_USD, bool bValid_ETH_USD) = gobjMakerDAOContract.peek();\r\n\t\t\trequire (bValid_ETH_USD == true);\r\n\t\t\tnCurrent_ETH_USD = uint(b32_Current_ETH_USD);\r\n\t\t}\r\n\r\n\t\tgmapLoans[nLoanID].nDateFinalized = block.timestamp;\r\n\t\tgmapLoans[nLoanID].nFinalizedByLender = nFinalizedByLender;\r\n\t\tgmapLoans[nLoanID].nEnding_ETH_USD = nCurrent_ETH_USD;\r\n\t\tuint nFinalInterest_FromBorrower = (gmapLoans[nLoanID].nEtherDeposited_Lender * (block.timestamp - gmapLoans[nLoanID].nDateCreated) * gmapLoans[nLoanID].nInterestRatePerSecond) / 1 ether;\r\n\t\tif (nFinalInterest_FromBorrower > gmapLoans[nLoanID].nEtherDeposited_Borrower) {\r\n\t\t\tnFinalInterest_FromBorrower = gmapLoans[nLoanID].nEtherDeposited_Borrower;\r\n\t\t}\r\n\r\n\t\tuint nFee_Interest = (nFinalInterest_FromBorrower * gnFee) / 100;\r\n\t\tuint nFinalInterest_ToLender = nFinalInterest_FromBorrower - nFee_Interest;\r\n\t\tuint nAmountToSendOwner = nFee_Interest;\r\n\r\n\t\tuint nAmountToSendLender = gmapLoans[nLoanID].nEtherDeposited_Lender;\r\n\t\tuint nAmountToSendBorrower = gmapLoans[nLoanID].nEtherDeposited_Borrower;\r\n\t\tuint nAppreciation = 0;\r\n\t\tif (nCurrent_ETH_USD > gmapLoans[nLoanID].nStarting_ETH_USD) {\r\n\t\t\tnAmountToSendLender = (gmapLoans[nLoanID].nStarting_ETH_USD * gmapLoans[nLoanID].nEtherDeposited_Lender) / nCurrent_ETH_USD;\r\n\t\t\tnAppreciation = gmapLoans[nLoanID].nEtherDeposited_Lender - nAmountToSendLender;\r\n\t\t\tuint nFee_Appreciation = (nAppreciation * gnFee) / 100;\r\n\t\t\tnAmountToSendBorrower = (nAmountToSendBorrower + nAppreciation) - nFee_Appreciation;\r\n\t\t\tnAmountToSendOwner += nFee_Appreciation;\r\n\t\t}\r\n\r\n\t\tnAmountToSendLender += nFinalInterest_ToLender;\r\n\t\tnAmountToSendBorrower -= nFinalInterest_FromBorrower;\r\n\r\n\t\tgmapLoans[nLoanID].adrLenderAddress.transfer(nAmountToSendLender);\r\n\t\tgmapLoans[nLoanID].adrBorrowerAddress.transfer(nAmountToSendBorrower);\r\n\t\tgnOwnerBalance += nAmountToSendOwner;\r\n\r\n\t\tclsTempForFinalize memory objTempForFinalize;\r\n\t\tobjTempForFinalize.nAmountToSendLender = nAmountToSendLender;\r\n\t\tobjTempForFinalize.nAmountToSendBorrower = nAmountToSendBorrower;\r\n\t\tobjTempForFinalize.nAppreciation = nAppreciation;\r\n\t\tobjTempForFinalize.nFinalInterest_FromBorrower = nFinalInterest_FromBorrower;\r\n\t\tobjTempForFinalize.b3FinalizedByLender = b3FinalizedByLender;\r\n\t\tgnLoanID = nLoanID;\r\n\t\t\r\n\t\temit LoansFinalized(\r\n\t\t\tgmapLoans[gnLoanID].nLoanNumber,\r\n\t\t\tgmapLoans[gnLoanID].adrLenderAddress,\r\n\t\t\tgmapLoans[gnLoanID].adrBorrowerAddress,\r\n\t\t\tobjTempForFinalize.b3FinalizedByLender,\r\n\t\t\tgmapLoans[gnLoanID].nStarting_ETH_USD,\r\n\t\t\tgmapLoans[gnLoanID].nEnding_ETH_USD,\r\n\t\t\tobjTempForFinalize.nAmountToSendLender,\r\n\t\t\tobjTempForFinalize.nAmountToSendBorrower,\r\n\t\t\tobjTempForFinalize.nAppreciation,\r\n\t\t\tgmapLoans[gnLoanID].nDateCreated,\r\n\t\t\tgmapLoans[gnLoanID].nInterestRatePerSecond,\r\n\t\t\tobjTempForFinalize.nFinalInterest_FromBorrower,\r\n\t\t\tgnFee\r\n\t\t\t);\r\n\t}\r\n\t\r\n\tfunction zGetGlobals() external view returns (uint nFee, uint nCurrent_ETH_USD, bool bPriceFeedIsValid, uint nTimeStamp) {\r\n\t\tnFee = gnFee;\r\n\r\n\t\tif (nIsDEV == 1) {\r\n\t\t\tnCurrent_ETH_USD = 1e34 / gobjFiatContract.USD(0);\r\n\t\t\tbPriceFeedIsValid = true;\r\n\t\t} else {\t\t\r\n\t\t\t(bytes32 b32_Current_ETH_USD, bool bValid_ETH_USD) = gobjMakerDAOContract.peek();\r\n\t\t\tnCurrent_ETH_USD = uint(b32_Current_ETH_USD);\r\n\t\t\tbPriceFeedIsValid = bValid_ETH_USD;\r\n\t\t}\r\n\t\t\r\n\t\tnTimeStamp = block.timestamp;\r\n\t}\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"zGetOwnerBalance\",\"outputs\":[{\"name\":\"nFee\",\"type\":\"uint256\"},{\"name\":\"nOwnerBalance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"nFee\",\"type\":\"uint256\"}],\"name\":\"zSetFee\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"zGetLoans1\",\"outputs\":[{\"name\":\"anFee\",\"type\":\"uint256[]\"},{\"name\":\"anDateCreated\",\"type\":\"uint256[]\"},{\"name\":\"anAcceptedByLender\",\"type\":\"uint256[]\"},{\"name\":\"aadrLenderAddress\",\"type\":\"address[]\"},{\"name\":\"aadrBorrowerAddress\",\"type\":\"address[]\"},{\"name\":\"anEtherDeposited_Lender\",\"type\":\"uint256[]\"},{\"name\":\"anEtherDeposited_Borrower\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"zOwnerWithdrawBalance\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"zGetBorrowerOffers\",\"outputs\":[{\"name\":\"anFee\",\"type\":\"uint256[]\"},{\"name\":\"aadrBorrowerAddress\",\"type\":\"address[]\"},{\"name\":\"anEtherToBorrow\",\"type\":\"uint256[]\"},{\"name\":\"anEtherDeposited\",\"type\":\"uint256[]\"},{\"name\":\"anInterestRatePerSecond\",\"type\":\"uint256[]\"},{\"name\":\"anDateCancelled\",\"type\":\"uint256[]\"},{\"name\":\"anDateMatched\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"zGetLoans2\",\"outputs\":[{\"name\":\"anInterestRatePerSecond\",\"type\":\"uint256[]\"},{\"name\":\"anStarting_ETH_USD\",\"type\":\"uint256[]\"},{\"name\":\"nEnding_ETH_USD\",\"type\":\"uint256[]\"},{\"name\":\"nDateFinalized\",\"type\":\"uint256[]\"},{\"name\":\"nFinalizedByLender\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"nAcceptedByLender\",\"type\":\"uint256\"},{\"name\":\"nOfferID\",\"type\":\"uint256\"}],\"name\":\"zCreateLoan\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"zGetGlobals\",\"outputs\":[{\"name\":\"nFee\",\"type\":\"uint256\"},{\"name\":\"nCurrent_ETH_USD\",\"type\":\"uint256\"},{\"name\":\"bPriceFeedIsValid\",\"type\":\"bool\"},{\"name\":\"nTimeStamp\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"nOfferID\",\"type\":\"uint256\"}],\"name\":\"zBorrowerCancelsOffer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"nOfferID\",\"type\":\"uint256\"}],\"name\":\"zLenderCancelsOffer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"nFinalizedByLender\",\"type\":\"uint256\"},{\"name\":\"nLoanID\",\"type\":\"uint256\"}],\"name\":\"zFinalizeLoan\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"nEtherToBorrow\",\"type\":\"uint256\"},{\"name\":\"nInterestRatePerSecond\",\"type\":\"uint256\"}],\"name\":\"zCreateBorrowerOffer\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"nInterestRatePerSecond\",\"type\":\"uint256\"},{\"name\":\"nInterest_SecondsToPrepay\",\"type\":\"uint256\"}],\"name\":\"zCreateLenderOffer\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"zGetLenderOffers\",\"outputs\":[{\"name\":\"anFee\",\"type\":\"uint256[]\"},{\"name\":\"aadrLenderAddress\",\"type\":\"address[]\"},{\"name\":\"anEtherDeposited\",\"type\":\"uint256[]\"},{\"name\":\"anInterestRatePerSecond\",\"type\":\"uint256[]\"},{\"name\":\"anInterest_SecondsToPrepay\",\"type\":\"uint256[]\"},{\"name\":\"anDateCancelled\",\"type\":\"uint256[]\"},{\"name\":\"anDateMatched\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"LoanNumber\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"Lender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"EtherDeposited\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"APR\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Interest_DaysToPrepay\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Fee_Percent\",\"type\":\"uint256\"}],\"name\":\"LenderOffersCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"LoanNumber\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"Lender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"EtherRefunded\",\"type\":\"uint256\"}],\"name\":\"LenderOffersCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"LoanNumber\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"Borrower\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"EtherToBorrow\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"EtherDeposited\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"APR\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Fee_Percent\",\"type\":\"uint256\"}],\"name\":\"BorrowerOffersCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"LoanNumber\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"Borrower\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"EtherRefunded\",\"type\":\"uint256\"}],\"name\":\"BorrowerOffersCancelled\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"LoanNumber\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"OfferedByLender\",\"type\":\"bytes3\"},{\"indexed\":true,\"name\":\"Lender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"Borrower\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"EtherFromLender\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"EtherFromBorrower\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"APR\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Interest_DaysPrepaid\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Starting_ETH_USD\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Fee_Percent\",\"type\":\"uint256\"}],\"name\":\"LoansCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"LoanNumber\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"Lender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"Borrower\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"FinalizedByLender\",\"type\":\"bytes3\"},{\"indexed\":false,\"name\":\"Starting_ETH_USD\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Ending_ETH_USD\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"EthToLender\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"EthToBorrower\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Appreciation\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"StartTime\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"APR\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Interest\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"Fee_Percent\",\"type\":\"uint256\"}],\"name\":\"LoansFinalized\",\"type\":\"event\"}]","ContractName":"EtherLoans","CompilerVersion":"v0.5.1+commit.c8a2cb62","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://e7e88ed4f72924731a42b5232fddf77b442a046f71f969c528eee3c6c3ed0106"}]}