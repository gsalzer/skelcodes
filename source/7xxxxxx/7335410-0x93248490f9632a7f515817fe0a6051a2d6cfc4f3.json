{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.17;\r\n\r\ncontract TokenERC20 {\r\n\r\n    address[] public players;\r\n    address public manager;\r\n    uint256 existValue=0;\r\n    string public name;\r\n    string public symbol;\r\n    uint8 public decimals;\r\n    uint256 public totalSupply;\r\n    //当天公司已经发出去币的数量\r\n    uint256 oneDaySendCoin = 0;\r\n    event Transfer(address indexed to, uint256 value);\r\n    mapping (address => uint256) public exchangeCoin;\r\n    mapping (address => uint256) public balanceOf;\r\n\r\n     function TokenERC20(uint256 initialSupply,string tokenName,string tokenSymbol,uint8 tokenDecimals) public {\r\n        require(initialSupply < 2**256 - 1);\r\n        require(tokenDecimals < 2**8 -1);\r\n        totalSupply = initialSupply * 10 ** uint256(tokenDecimals);\r\n        balanceOf[msg.sender] = totalSupply;\r\n        name = tokenName;\r\n        symbol = tokenSymbol;\r\n        decimals = tokenDecimals;\r\n        manager = msg.sender;\r\n    }\r\n    //查询当天已经发了多少币\r\n    function checkSend() public view returns(uint256){\r\n        return oneDaySendCoin;\r\n    }\r\n    //新的一天把oneDaySendCoin清零\r\n    function restore() public onlyManagerCanCall{\r\n        oneDaySendCoin = 0;\r\n    }\r\n    //给合约转钱\r\n    function enter() payable public{\r\n    }\r\n    //转账(根据做任务获取积分)\r\n    function send(address _to, uint256 _a, uint256 _b, uint256 _oneDayTotalCoin, uint256 _maxOneDaySendCoin) public onlyManagerCanCall {\r\n        //防止越界问题\r\n        if(_a > 2**256 - 1){\r\n            _a = 2**256 - 1;\r\n        }\r\n        if(_b > 2**256 - 1){\r\n            _b = 2**256 - 1;\r\n        }\r\n        if(_oneDayTotalCoin > 2**256 - 1){\r\n            _oneDayTotalCoin = 2**256 - 1;\r\n        }\r\n        if(_maxOneDaySendCoin > 2**256 - 1){\r\n            _maxOneDaySendCoin = 2**256 - 1;\r\n        }\r\n        require(_a <= _b);\r\n        //每天转账的总数量必须<=规定的每天发币数\r\n        require(oneDaySendCoin <= _oneDayTotalCoin);\r\n        uint less = _a * _oneDayTotalCoin / _b;\r\n        if(less < _maxOneDaySendCoin){\r\n            require(totalSupply>=less);\r\n            require(_to != 0x0);\r\n            require(balanceOf[msg.sender] >= less);\r\n            require(balanceOf[_to] + less >= balanceOf[_to]);\r\n            uint256 previousBalances = balanceOf[msg.sender] + balanceOf[_to];\r\n            balanceOf[msg.sender] -= less;\r\n            balanceOf[_to] += less;\r\n             Transfer(_to, less);\r\n            assert(balanceOf[msg.sender] + balanceOf[_to] == previousBalances);\r\n            totalSupply -= less;\r\n            //转账完成后, 总数量加上转账的数量\r\n            oneDaySendCoin += less;\r\n            //存储数据，更新数据\r\n            exchangeCoin[_to] = existValue;\r\n            exchangeCoin[_to] = less+existValue;\r\n            existValue = existValue + less;\r\n        }else{\r\n            require(totalSupply>=_maxOneDaySendCoin);\r\n            require(_to != 0x0);\r\n            require(balanceOf[msg.sender] >= less);\r\n            require(balanceOf[_to] + _maxOneDaySendCoin >= balanceOf[_to]);\r\n            previousBalances = balanceOf[msg.sender] + balanceOf[_to];\r\n            balanceOf[msg.sender] -= _maxOneDaySendCoin;\r\n            balanceOf[_to] += _maxOneDaySendCoin;\r\n             Transfer(_to, _maxOneDaySendCoin);\r\n            assert(balanceOf[msg.sender] + balanceOf[_to] == previousBalances);\r\n            totalSupply -= _maxOneDaySendCoin;\r\n            //转账完成后, 总数量加上转账的数量\r\n            oneDaySendCoin += _maxOneDaySendCoin;\r\n            //存储数据，更新数据\r\n            exchangeCoin[_to] = existValue;\r\n            exchangeCoin[_to] = _maxOneDaySendCoin+existValue;\r\n            existValue = existValue + _maxOneDaySendCoin;\r\n        }\r\n        // 转账完成之后,将调用者扔进players\r\n        players.push(_to);\r\n    }\r\n    // 获取用户每天获得的币\r\n    function getUserCoin() public view returns (uint256){\r\n        return exchangeCoin[msg.sender];\r\n    }\r\n    // 设置管理员权限\r\n    modifier onlyManagerCanCall(){\r\n        require(msg.sender == manager);\r\n        _;\r\n    }\r\n    // 获取所有参与任务人员地址\r\n    function getAllPlayers() public view returns (address[]){\r\n        return players;\r\n    }\r\n    function setPlayers() public {\r\n        players.push(msg.sender);\r\n    }\r\n    function getManager() public view returns(address){\r\n        return manager;\r\n    }\r\n        //获取合约里面的余额(ether的余额)\r\n    function getBalance() public view returns(uint256){\r\n        return this.balance;\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_a\",\"type\":\"uint256\"},{\"name\":\"_b\",\"type\":\"uint256\"},{\"name\":\"_oneDayTotalCoin\",\"type\":\"uint256\"},{\"name\":\"_maxOneDaySendCoin\",\"type\":\"uint256\"}],\"name\":\"send\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getUserCoin\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"restore\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"exchangeCoin\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"checkSend\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getManager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"setPlayers\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"enter\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAllPlayers\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"players\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"initialSupply\",\"type\":\"uint256\"},{\"name\":\"tokenName\",\"type\":\"string\"},{\"name\":\"tokenSymbol\",\"type\":\"string\"},{\"name\":\"tokenDecimals\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"}]","ContractName":"TokenERC20","CompilerVersion":"v0.4.17+commit.bdeb9e52","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"000000000000000000000000000000000000000000000000000000034e62ce00000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000009586959696e436f696e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000035859430000000000000000000000000000000000000000000000000000000000","Library":"","SwarmSource":"bzzr://36d64f09720fbbce6fc3aad805184d7e4ef8be0b4500d2a0128b2cab7a2648e8"}]}