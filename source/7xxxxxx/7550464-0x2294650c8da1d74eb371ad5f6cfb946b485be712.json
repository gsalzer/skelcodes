{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.25;\r\n\r\ncontract IERC721 {\r\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\r\n    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\r\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\r\n\r\n    function balanceOf(address owner) public view returns (uint256 balance);\r\n    function ownerOf(uint256 tokenId) public view returns (address owner);\r\n\r\n    function approve(address to, uint256 tokenId) public;\r\n    function getApproved(uint256 tokenId) public view returns (address operator);\r\n\r\n    function setApprovalForAll(address operator, bool _approved) public;\r\n    function isApprovedForAll(address owner, address operator) public view returns (bool);\r\n\r\n    function transferFrom(address from, address to, uint256 tokenId) public;\r\n    function safeTransferFrom(address from, address to, uint256 tokenId) public;\r\n\r\n    function safeTransferFrom(address from, address to, uint256 tokenId, bytes memory data) public;\r\n}\r\n/**\r\n * @title ERC20Basic\r\n * @dev Simpler version of ERC20 interface\r\n * @dev see https://github.com/ethereum/EIPs/issues/179\r\n */\r\ncontract ERC20BasicInterface {\r\n    function totalSupply() public view returns (uint256);\r\n    function balanceOf(address who) public view returns (uint256);\r\n    function transfer(address to, uint256 value) public returns (bool);\r\n    function transferFrom(address from, address to, uint256 value) public returns (bool);\r\n    event Transfer(address indexed from, address indexed to, uint256 value);\r\n\r\n    uint8 public decimals;\r\n}\r\ncontract Bussiness {\r\n  IERC721 public erc721Address;\r\n  ERC20BasicInterface usdtToken = ERC20BasicInterface(0xdac17f958d2ee523a2206206994597c13d831ec7);\r\n  constructor(IERC721 token) public {\r\n     erc721Address = token;\r\n  }\r\n  struct Price {\r\n    address tokenOwner;\r\n    uint256 price;\r\n  }\r\n\r\n  mapping(uint256 => Price) public prices;\r\n  mapping(uint256 => Price) public usdtPrices;\r\n  function ownerOf(uint256 _tokenId) public view returns (address){\r\n      return erc721Address.ownerOf(_tokenId);\r\n  }\r\n  function setPrice(uint256 _tokenId, uint256 _ethPrice, uint256 _usdtPrice) public {\r\n      require(erc721Address.ownerOf(_tokenId) == msg.sender);\r\n      prices[_tokenId] = Price(msg.sender, _ethPrice);\r\n      usdtPrices[_tokenId] = Price(msg.sender, _usdtPrice);\r\n  }\r\n  function removePrice(uint256 tokenId) public returns (uint256){\r\n      require(erc721Address.ownerOf(tokenId) == msg.sender);\r\n      resetPrice(tokenId);\r\n      return prices[tokenId].price;\r\n  }\r\n\r\n  function getPrice(uint256 tokenId) public returns (address, address, uint256, uint256){\r\n      address currentOwner = erc721Address.ownerOf(tokenId);\r\n      if(prices[tokenId].tokenOwner != currentOwner){\r\n           resetPrice(tokenId);\r\n       }\r\n      return (currentOwner, prices[tokenId].tokenOwner, prices[tokenId].price, usdtPrices[tokenId].price);\r\n\r\n  }\r\n  function buy(uint256 tokenId) public payable {\r\n    require(erc721Address.getApproved(tokenId) == address(this));\r\n    require(prices[tokenId].price == msg.value);\r\n    erc721Address.transferFrom(prices[tokenId].tokenOwner, msg.sender, tokenId);\r\n    prices[tokenId].tokenOwner.transfer(msg.value);\r\n    resetPrice(tokenId);\r\n  }\r\n  function buyByUsdt(uint256 tokenId) public {\r\n    require(erc721Address.getApproved(tokenId) == address(this));\r\n    require(usdtToken.transferFrom(msg.sender, usdtPrices[tokenId].tokenOwner, usdtPrices[tokenId].price));\r\n\r\n    erc721Address.transferFrom(usdtPrices[tokenId].tokenOwner, msg.sender, tokenId);\r\n    usdtPrices[tokenId].tokenOwner.transfer(msg.value);\r\n    resetPrice(tokenId);\r\n\r\n  }\r\n  function resetPrice(uint256 tokenId) private {\r\n    prices[tokenId] = Price(address(0), 0);\r\n    usdtPrices[tokenId] = Price(address(0), 0);\r\n  }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"erc721Address\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"ownerOf\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\"}],\"name\":\"buyByUsdt\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\"}],\"name\":\"removePrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"name\":\"_ethPrice\",\"type\":\"uint256\"},{\"name\":\"_usdtPrice\",\"type\":\"uint256\"}],\"name\":\"setPrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"prices\",\"outputs\":[{\"name\":\"tokenOwner\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\"}],\"name\":\"buy\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\"}],\"name\":\"getPrice\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"usdtPrices\",\"outputs\":[{\"name\":\"tokenOwner\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"token\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]","ContractName":"Bussiness","CompilerVersion":"v0.4.25+commit.59dbf8f1","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"0000000000000000000000006ebeaf8e8e946f0716e6533a6f2cefc83f60e8ab","Library":"","SwarmSource":"bzzr://2e0128b86cd344741a68840263b899da2e930ae551ab66957d959166439ffc15"}]}