{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity 0.4.24;\r\n\r\ncontract HouseChain {\r\n    uint PRICE = 1 ether;\r\n    \r\n    struct Review {\r\n        address reviewer;\r\n        uint score; // max 10\r\n        string review;\r\n    }\r\n    \r\n    struct House {\r\n        string houseName;\r\n        uint houseNum;\r\n        uint price;\r\n        address owner;\r\n        string home_address;\r\n        uint numOfUser;\r\n        mapping(uint => Review) reviewList;\r\n        uint numOfReview;\r\n    }\r\n    \r\n    mapping(uint => House) public houseList;\r\n    mapping(uint => uint) public balances;\r\n    uint[] public houseNumList;\r\n    uint public houseNum;\r\n   \r\n    constructor() public {\r\n        houseNum = 0;\r\n    }\r\n    \r\n    modifier onlyHouseOwner(uint _houseNum) {\r\n        require(msg.sender == houseList[_houseNum].owner);\r\n        _;\r\n    }\r\n    \r\n    modifier enoughBalance(uint _houseNum) {\r\n        uint amount = houseList[_houseNum].price * PRICE;\r\n        require(amount == msg.value);\r\n        _;\r\n    }\r\n    \r\n    function addHouse(string _houseName, uint _price, string _address, uint _numOfUser) public returns(uint) {\r\n        House memory newHouse;\r\n    \r\n        newHouse.houseName = _houseName;\r\n        newHouse.houseNum = houseNum;\r\n        newHouse.price = _price;\r\n        newHouse.owner = msg.sender;\r\n        newHouse.home_address = _address;\r\n        newHouse.numOfUser = _numOfUser;\r\n        newHouse.numOfReview = 0;\r\n        \r\n        houseList[houseNum] = newHouse;\r\n        houseNumList.push(houseNum);\r\n        \r\n        return houseNum++;\r\n    }\r\n    \r\n    function removeHouse(uint _houseNum) onlyHouseOwner(_houseNum) public {\r\n        delete houseList[_houseNum];\r\n        delete houseNumList[_houseNum];\r\n    }\r\n    \r\n    function addReview(uint _houseNum, uint _score, string _review) public {\r\n        Review memory review;\r\n        review.reviewer = msg.sender;\r\n        review.score = _score;\r\n        review.review = _review;\r\n        houseList[_houseNum].reviewList[houseList[_houseNum].numOfReview++] = review;\r\n    }\r\n    \r\n    function getHouseArray() public view returns(uint[]) {\r\n        return houseNumList;\r\n    }\r\n    \r\n    function getHouseInfo(uint _num) public view returns(string, uint, address, string, uint, uint) {\r\n        House memory house = houseList[_num];\r\n        return (\r\n            house.houseName,\r\n            house.price, \r\n            house.owner, \r\n            house.home_address, \r\n            house.numOfUser, \r\n            house.numOfReview\r\n        );\r\n    }\r\n    \r\n    function getReview(uint _houseNum, uint _reviewNum) public view returns(address, uint, string) {\r\n        Review memory review = houseList[_houseNum].reviewList[_reviewNum];\r\n        return (\r\n            review.reviewer, \r\n            review.score, \r\n            review.review\r\n        );\r\n    }\r\n    \r\n    function payHouse(uint _houseNum) enoughBalance(_houseNum) public payable {\r\n        if (balances[_houseNum] > 0) {\r\n            balances[_houseNum] += msg.value;\r\n        } else {\r\n            balances[_houseNum] = msg.value;\r\n        }\r\n    }\r\n    \r\n    function withdraw(uint _houseNum) onlyHouseOwner(_houseNum) public {\r\n        uint amount = balances[_houseNum];\r\n        require(amount > 0);\r\n        balances[_houseNum] = 0;\r\n        msg.sender.transfer(amount);\r\n    }\r\n\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_houseName\",\"type\":\"string\"},{\"name\":\"_price\",\"type\":\"uint256\"},{\"name\":\"_address\",\"type\":\"string\"},{\"name\":\"_numOfUser\",\"type\":\"uint256\"}],\"name\":\"addHouse\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_houseNum\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_houseNum\",\"type\":\"uint256\"},{\"name\":\"_score\",\"type\":\"uint256\"},{\"name\":\"_review\",\"type\":\"string\"}],\"name\":\"addReview\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"balances\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"houseNum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_houseNum\",\"type\":\"uint256\"}],\"name\":\"payHouse\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_houseNum\",\"type\":\"uint256\"}],\"name\":\"removeHouse\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"houseNumList\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_num\",\"type\":\"uint256\"}],\"name\":\"getHouseInfo\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"string\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"houseList\",\"outputs\":[{\"name\":\"houseName\",\"type\":\"string\"},{\"name\":\"houseNum\",\"type\":\"uint256\"},{\"name\":\"price\",\"type\":\"uint256\"},{\"name\":\"owner\",\"type\":\"address\"},{\"name\":\"home_address\",\"type\":\"string\"},{\"name\":\"numOfUser\",\"type\":\"uint256\"},{\"name\":\"numOfReview\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getHouseArray\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_houseNum\",\"type\":\"uint256\"},{\"name\":\"_reviewNum\",\"type\":\"uint256\"}],\"name\":\"getReview\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]","ContractName":"HouseChain","CompilerVersion":"v0.4.24+commit.e67f0147","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://661fe3a066ffbef0cfda8157b350272be28e704d1c46342f9a06cb8cac7b43f7"}]}