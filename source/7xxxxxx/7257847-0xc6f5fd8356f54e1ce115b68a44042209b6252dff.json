{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.5.3;\r\n\r\ninterface Membership {\r\n  function isMember( address who ) external returns (bool);\r\n}\r\n\r\ninterface Token {\r\n  function transfer( address to, uint amount ) external;\r\n  function transferFrom( address from, address to, uint amount ) external;\r\n}\r\n\r\ncontract Owned {\r\n  address payable public owner_;\r\n  constructor() public { owner_ = msg.sender; }\r\n  function changeOwner( address payable newOwner ) isOwner public {\r\n    owner_ = newOwner;\r\n  }\r\n\r\n  modifier isOwner {\r\n    require( msg.sender == owner_ );\r\n    _;\r\n  }\r\n}\r\n\r\ncontract Votes is Owned {\r\n\r\n  event Vote( address indexed voter,\r\n              uint    indexed blocknum,\r\n              string          hash );\r\n\r\n  Membership      public membership_;\r\n  address payable public treasury_;\r\n  Token           public token_;\r\n\r\n  uint256 public fee_;\r\n  uint256 public tokenFee_;\r\n  uint256 public dao_;\r\n\r\n  constructor() public {\r\n    dao_ = uint256(100);\r\n  }\r\n\r\n  function setMembership( address _contract ) isOwner public {\r\n    membership_ = Membership( _contract );\r\n  }\r\n\r\n  function setTreasury( address payable _treasury ) isOwner public {\r\n    treasury_ = _treasury;\r\n  }\r\n\r\n  function setToken( address _token ) isOwner public {\r\n    token_ = Token(_token);\r\n  }\r\n\r\n  function setFee( uint _newfee ) isOwner public {\r\n    fee_ = _newfee;\r\n  }\r\n\r\n  function setTokenFee( uint256 _fee ) isOwner public {\r\n    tokenFee_ = _fee;\r\n  }\r\n\r\n  function setDao( uint _dao ) isOwner public {\r\n    dao_ = _dao;\r\n  }\r\n\r\n  function vote( uint _blocknum, string memory _hash ) payable public {\r\n    require( msg.value >= fee_ );\r\n\r\n    if (treasury_ != address(0))\r\n      treasury_.transfer( msg.value - msg.value / dao_ );\r\n\r\n    vote_int( _blocknum, _hash );\r\n  }\r\n\r\n  function vote_t( uint _blocknum, string memory _hash ) public {\r\n    token_.transferFrom( msg.sender, address(this), tokenFee_ );\r\n\r\n    if (treasury_ != address(0)) {\r\n      token_.transfer( treasury_, tokenFee_ - tokenFee_/dao_ );\r\n    }\r\n\r\n    vote_int( _blocknum, _hash );\r\n  }\r\n\r\n  function vote_int( uint _blocknum, string memory _hash ) internal {\r\n    require( membership_.isMember(msg.sender) );\r\n\r\n    emit Vote( msg.sender, _blocknum, _hash );\r\n  }\r\n\r\n  function withdraw( uint amt ) isOwner public {\r\n    owner_.transfer( amt );\r\n  }\r\n\r\n  function sendTok( address _tok, address _to, uint _qty ) isOwner public {\r\n    Token(_tok).transfer( _to, _qty );\r\n  }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"}],\"name\":\"setToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dao_\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"treasury_\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_blocknum\",\"type\":\"uint256\"},{\"name\":\"_hash\",\"type\":\"string\"}],\"name\":\"vote\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"amt\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_fee\",\"type\":\"uint256\"}],\"name\":\"setTokenFee\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenFee_\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_contract\",\"type\":\"address\"}],\"name\":\"setMembership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tok\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_qty\",\"type\":\"uint256\"}],\"name\":\"sendTok\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newfee\",\"type\":\"uint256\"}],\"name\":\"setFee\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_dao\",\"type\":\"uint256\"}],\"name\":\"setDao\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_blocknum\",\"type\":\"uint256\"},{\"name\":\"_hash\",\"type\":\"string\"}],\"name\":\"vote_t\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"changeOwner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"membership_\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"fee_\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"token_\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner_\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_treasury\",\"type\":\"address\"}],\"name\":\"setTreasury\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"voter\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"blocknum\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"hash\",\"type\":\"string\"}],\"name\":\"Vote\",\"type\":\"event\"}]","ContractName":"Votes","CompilerVersion":"v0.5.3+commit.10d17f24","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://da755e42a2b964c3bb4085dddc7bb8fa1ea0aab23584c26c6f61a61e91cd900d"}]}