{"status":"1","message":"OK","result":[{"SourceCode":"// Verified by Darwinia Network\n\n// hevm: flattened sources of src/Formula.sol\npragma solidity >=0.4.23 >=0.4.24 <0.7.0 >=0.6.7 <0.7.0;\n\n////// lib/ds-auth/src/auth.sol\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n\n// You should have received a copy of the GNU General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n/* pragma solidity >=0.4.23; */\n\ninterface DSAuthority {\n    function canCall(\n        address src, address dst, bytes4 sig\n    ) external view returns (bool);\n}\n\ncontract DSAuthEvents {\n    event LogSetAuthority (address indexed authority);\n    event LogSetOwner     (address indexed owner);\n}\n\ncontract DSAuth is DSAuthEvents {\n    DSAuthority  public  authority;\n    address      public  owner;\n\n    constructor() public {\n        owner = msg.sender;\n        emit LogSetOwner(msg.sender);\n    }\n\n    function setOwner(address owner_)\n        public\n        auth\n    {\n        owner = owner_;\n        emit LogSetOwner(owner);\n    }\n\n    function setAuthority(DSAuthority authority_)\n        public\n        auth\n    {\n        authority = authority_;\n        emit LogSetAuthority(address(authority));\n    }\n\n    modifier auth {\n        require(isAuthorized(msg.sender, msg.sig), \"ds-auth-unauthorized\");\n        _;\n    }\n\n    function isAuthorized(address src, bytes4 sig) internal view returns (bool) {\n        if (src == address(this)) {\n            return true;\n        } else if (src == owner) {\n            return true;\n        } else if (authority == DSAuthority(0)) {\n            return false;\n        } else {\n            return authority.canCall(src, address(this), sig);\n        }\n    }\n}\n\n////// lib/zeppelin-solidity/src/proxy/Initializable.sol\n// SPDX-License-Identifier: MIT\n\n// solhint-disable-next-line compiler-version\n/* pragma solidity >=0.4.24 <0.7.0; */\n\n\n/**\n * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed\n * behind a proxy. Since a proxied contract can't have a constructor, it's common to move constructor logic to an\n * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer\n * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.\n * \n * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as\n * possible by providing the encoded function call as the `_data` argument to {UpgradeableProxy-constructor}.\n * \n * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure\n * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.\n */\nabstract contract Initializable {\n\n    /**\n     * @dev Indicates that the contract has been initialized.\n     */\n    bool private _initialized;\n\n    /**\n     * @dev Indicates that the contract is in the process of being initialized.\n     */\n    bool private _initializing;\n\n    /**\n     * @dev Modifier to protect an initializer function from being invoked twice.\n     */\n    modifier initializer() {\n        require(_initializing || _isConstructor() || !_initialized, \"Initializable: contract is already initialized\");\n\n        bool isTopLevelCall = !_initializing;\n        if (isTopLevelCall) {\n            _initializing = true;\n            _initialized = true;\n        }\n\n        _;\n\n        if (isTopLevelCall) {\n            _initializing = false;\n        }\n    }\n\n    /// @dev Returns true if and only if the function is running in the constructor\n    function _isConstructor() private view returns (bool) {\n        // extcodesize checks the size of the code stored in an address, and\n        // address returns the current address. Since the code is still not\n        // deployed when running a constructor, any checks on its code size will\n        // yield zero, making it an effective way to detect if a contract is\n        // under construction or not.\n        address self = address(this);\n        uint256 cs;\n        // solhint-disable-next-line no-inline-assembly\n        assembly { cs := extcodesize(self) }\n        return cs == 0;\n    }\n}\n\n////// src/FurnaceSettingIds.sol\n/* pragma solidity ^0.6.7; */\n\ncontract FurnaceSettingIds {\n\tuint256 public constant PREFER_GOLD = 1 << 1;\n\tuint256 public constant PREFER_WOOD = 1 << 2;\n\tuint256 public constant PREFER_WATER = 1 << 3;\n\tuint256 public constant PREFER_FIRE = 1 << 4;\n\tuint256 public constant PREFER_SOIL = 1 << 5;\n\n\tuint8 public constant DRILL_OBJECT_CLASS = 4; // Drill\n\tuint8 public constant ITEM_OBJECT_CLASS = 5; // Item\n\tuint8 public constant DARWINIA_OBJECT_CLASS = 254; // Darwinia\n\n\t//0x4655524e4143455f415050000000000000000000000000000000000000000000\n\tbytes32 public constant FURNACE_APP = \"FURNACE_APP\";\n\n\t//0x4655524e4143455f4954454d5f4d494e455f4645450000000000000000000000\n\tbytes32 public constant FURNACE_ITEM_MINE_FEE = \"FURNACE_ITEM_MINE_FEE\";\n\n\tuint128 public constant RATE_PRECISION = 10**8;\n\n\t// 0x434f4e54524143545f494e5445525354454c4c41525f454e434f444552000000\n\tbytes32 public constant CONTRACT_INTERSTELLAR_ENCODER =\n\t\t\"CONTRACT_INTERSTELLAR_ENCODER\";\n\n\t// 0x434f4e54524143545f4c414e445f4954454d5f42415200000000000000000000\n\tbytes32 public constant CONTRACT_LAND_ITEM_BAR = \"CONTRACT_LAND_ITEM_BAR\";\n\n\t// 0x434f4e54524143545f41504f53544c455f4954454d5f42415200000000000000\n\tbytes32 public constant CONTRACT_APOSTLE_ITEM_BAR =\n\t\t\"CONTRACT_APOSTLE_ITEM_BAR\";\n\n\t// 0x434f4e54524143545f4954454d5f424153450000000000000000000000000000\n\tbytes32 public constant CONTRACT_ITEM_BASE = \"CONTRACT_ITEM_BASE\";\n\n\t// 0x434f4e54524143545f4452494c4c5f4241534500000000000000000000000000\n\tbytes32 public constant CONTRACT_DRILL_BASE = \"CONTRACT_DRILL_BASE\";\n\n\t// 0x434f4e54524143545f44415257494e49415f49544f5f42415345000000000000\n\tbytes32 public constant CONTRACT_DARWINIA_ITO_BASE = \"CONTRACT_DARWINIA_ITO_BASE\";\n\n\t// 0x434f4e54524143545f4c414e445f424153450000000000000000000000000000\n\tbytes32 public constant CONTRACT_LAND_BASE = \"CONTRACT_LAND_BASE\";\n\n\t// 0x434f4e54524143545f4f424a4543545f4f574e45525348495000000000000000\n\tbytes32 public constant CONTRACT_OBJECT_OWNERSHIP =\n\t\t\"CONTRACT_OBJECT_OWNERSHIP\";\n\n\t// 0x434f4e54524143545f4552433732315f4745474f000000000000000000000000\n\tbytes32 public constant CONTRACT_ERC721_GEGO = \"CONTRACT_ERC721_GEGO\";\n\n\t// 0x434f4e54524143545f464f524d554c4100000000000000000000000000000000\n\tbytes32 public constant CONTRACT_FORMULA = \"CONTRACT_FORMULA\";\n\n\t// 0x434f4e54524143545f4d455441444154415f54454c4c45520000000000000000\n\tbytes32 public constant CONTRACT_METADATA_TELLER =\n\t\t\"CONTRACT_METADATA_TELLER\";\n\n\t//0x434f4e54524143545f4c505f454c454d454e545f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_LP_ELEMENT_TOKEN = \n\t\t\"CONTRACT_LP_ELEMENT_TOKEN\";\n\n\t// 0x434f4e54524143545f4c505f474f4c445f45524332305f544f4b454e00000000\n\tbytes32 public constant CONTRACT_LP_GOLD_ERC20_TOKEN =\n\t\t\"CONTRACT_LP_GOLD_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f4c505f574f4f445f45524332305f544f4b454e00000000\n\tbytes32 public constant CONTRACT_LP_WOOD_ERC20_TOKEN =\n\t\t\"CONTRACT_LP_WOOD_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f4c505f57415445525f45524332305f544f4b454e000000\n\tbytes32 public constant CONTRACT_LP_WATER_ERC20_TOKEN =\n\t\t\"CONTRACT_LP_WATER_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f4c505f464952455f45524332305f544f4b454e00000000\n\tbytes32 public constant CONTRACT_LP_FIRE_ERC20_TOKEN =\n\t\t\"CONTRACT_LP_FIRE_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f4c505f534f494c5f45524332305f544f4b454e00000000\n\tbytes32 public constant CONTRACT_LP_SOIL_ERC20_TOKEN =\n\t\t\"CONTRACT_LP_SOIL_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f52494e475f45524332305f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_RING_ERC20_TOKEN =\n\t\t\"CONTRACT_RING_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f4b544f4e5f45524332305f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_KTON_ERC20_TOKEN =\n\t\t\"CONTRACT_KTON_ERC20_TOKEN\";\n\n\t//0x434f4e54524143545f454c454d454e545f544f4b454e00000000000000000000\n\tbytes32 public constant CONTRACT_ELEMENT_TOKEN = \n\t\t\"CONTRACT_ELEMENT_TOKEN\";\n\n\t// 0x434f4e54524143545f474f4c445f45524332305f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_GOLD_ERC20_TOKEN =\n\t\t\"CONTRACT_GOLD_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f574f4f445f45524332305f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_WOOD_ERC20_TOKEN =\n\t\t\"CONTRACT_WOOD_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f57415445525f45524332305f544f4b454e000000000000\n\tbytes32 public constant CONTRACT_WATER_ERC20_TOKEN =\n\t\t\"CONTRACT_WATER_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f464952455f45524332305f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_FIRE_ERC20_TOKEN =\n\t\t\"CONTRACT_FIRE_ERC20_TOKEN\";\n\n\t// 0x434f4e54524143545f534f494c5f45524332305f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_SOIL_ERC20_TOKEN =\n\t\t\"CONTRACT_SOIL_ERC20_TOKEN\";\n}\n\n////// src/interfaces/IFormula.sol\n/* pragma solidity ^0.6.7; */\n\n/**\n@title IFormula\n@author echo.hu@itering.com\n*/\ninterface IFormula {\n\tstruct FormulaEntry {\n\t\t// item name\n\t\tbytes32 name;\n\t\t// strength rate\n\t\tuint128 rate;\n\t\t// extension of `ObjectClass`\n\t\tuint16 objClassExt;\n\t\tuint16 class;\n\t\tuint16 grade;\n\t\tbool canDisenchant;\n\t\t// if it is removed\n\t\t// uint256 enchantTime;\n\t\t// uint256 disenchantTime;\n\t\t// uint256 loseRate;\n\n\t\tbool disable;\n\n\t\t// minor material info\n\t\tbytes32 minor;\n\t\tuint256 amount;\n\t\t// major material info\n\t\t// [address token, uint16 objectClassExt, uint16 class, uint16 grade]\n\t\taddress majorAddr;\n\t\tuint16 majorObjClassExt;\n\t\tuint16 majorClass;\n\t\tuint16 majorGrade;\n\t}\n\n\tevent AddFormula(\n\t\tuint256 indexed index,\n\t\tbytes32 name,\n\t\tuint128 rate,\n\t\tuint16 objClassExt,\n\t\tuint16 class,\n\t\tuint16 grade,\n\t\tbool canDisenchant,\n\t\tbytes32 minor,\n\t\tuint256 amount,\n\t\taddress majorAddr,\n\t\tuint16 majorObjClassExt,\n\t\tuint16 majorClass,\n\t\tuint16 majorGrade\n\t);\n\tevent DisableFormula(uint256 indexed index);\n\tevent EnableFormula(uint256 indexed index);\n\n\t/**\n        @notice Only governance can add `formula`.\n        @dev Add a formula rule.\n        MUST revert if length of `_majors` is not the same as length of `_class`.\n        MUST revert if length of `_minors` is not the same as length of `_mins` and `_maxs.\n        MUST revert on any other error.        \n        @param _name         New enchanted NFT name.\n        @param _rate         New enchanted NFT rate.\n        @param _objClassExt  New enchanted NFT objectClassExt.\n        @param _class        New enchanted NFT class.\n        @param _grade        New enchanted NFT grade.\n        @param _minor        FT Token address of minor meterail for enchanting.\n        @param _amount       FT Token amount of minor meterail for enchanting.\n        @param _majorAddr    FT token address of major meterail for enchanting.\n        @param _majorObjClassExt   FT token objectClassExt of major meterail for enchanting.\n        @param _majorClass   FT token class of major meterail for enchanting.\n        @param _majorGrade   FT token grade of major meterail for enchanting.\n    */\n\tfunction insert(\n\t\tbytes32 _name,\n\t\tuint128 _rate,\n\t\tuint16 _objClassExt,\n\t\tuint16 _class,\n\t\tuint16 _grade,\n\t\tbool _canDisenchant,\n\t\tbytes32 _minor,\n\t\tuint256 _amount,\n\t\taddress _majorAddr,\n\t\tuint16 _majorObjClassExt,\n\t\tuint16 _majorClass,\n\t\tuint16 _majorGrade\n\t) external;\n\n\t/**\n        @notice Only governance can enable `formula`.\n        @dev Enable a formula rule.\n        MUST revert on any other error.        \n        @param _index  index of formula.\n    */\n\tfunction disable(uint256 _index) external;\n\n\t/**\n        @notice Only governance can disble `formula`.\n        @dev Disble a formula rule.\n        MUST revert on any other error.        \n        @param _index  index of formula.\n    */\n\tfunction enable(uint256 _index) external;\n\n\t/**\n        @dev Returns the length of the formula.\n\t         0x1f7b6d32\n     */\n\tfunction length() external view returns (uint256);\n\n\t/**\n        @dev Returns the availability of the formula.\n     */\n\tfunction isDisable(uint256 _index) external view returns (bool);\n\n\t/**\n        @dev returns the minor material of the formula.\n     */\n\tfunction getMinor(uint256 _index)\n\t\texternal\n\t\tview\n\t\treturns (bytes32, uint256);\n\n\t/**\n        @dev Decode major info of the major.\n\t         0x6ef2fd27\n\t\t@return {\n\t\t\t\"token\": \"Major token address.\",\n\t\t\t\"objClassExt\": \"Major token objClassExt.\",\n\t\t\t\"class\": \"Major token class.\",\n\t\t\t\"grade\": \"Major token address.\"\n\t\t}\n     */\n\tfunction getMajorInfo(uint256 _index)\n\t\texternal\n\t\tview\t\n\t\treturns (\n\t\t\taddress,\n\t\t\tuint16,\n\t\t\tuint16,\n\t\t\tuint16\n\t\t);\n\n\t/**\n        @dev Returns meta info of the item.\n\t         0x78533046\n\t\t@return {\n\t\t\t\"objClassExt\": \"Major token objClassExt.\",\n\t\t\t\"class\": \"Major token class.\",\n\t\t\t\"grade\": \"Major token address.\",\n\t\t\t\"base\":  \"Base strength rate.\",\n\t\t\t\"enhance\": \"Enhance strength rate.\",\n\t\t}\n     */\n\tfunction getMetaInfo(uint256 _index)\n\t\texternal\n\t\tview\n\t\treturns (\n\t\t\tuint16,\n\t\t\tuint16,\n\t\t\tuint16,\n\t\t\tuint128\n\t\t);\n\n\t/**\n        @dev returns canDisenchant of the formula.\n     */\n\tfunction canDisenchant(uint256 _index) external view returns (bool);\n}\n\n////// src/interfaces/ISettingsRegistry.sol\n/* pragma solidity ^0.6.7; */\n\ninterface ISettingsRegistry {\n    function uintOf(bytes32 _propertyName) external view returns (uint256);\n\n    function stringOf(bytes32 _propertyName) external view returns (string memory);\n\n    function addressOf(bytes32 _propertyName) external view returns (address);\n\n    function bytesOf(bytes32 _propertyName) external view returns (bytes memory);\n\n    function boolOf(bytes32 _propertyName) external view returns (bool);\n\n    function intOf(bytes32 _propertyName) external view returns (int);\n\n    function setUintProperty(bytes32 _propertyName, uint _value) external;\n\n    function setStringProperty(bytes32 _propertyName, string calldata _value) external;\n\n    function setAddressProperty(bytes32 _propertyName, address _value) external;\n\n    function setBytesProperty(bytes32 _propertyName, bytes calldata _value) external;\n\n    function setBoolProperty(bytes32 _propertyName, bool _value) external;\n\n    function setIntProperty(bytes32 _propertyName, int _value) external;\n\n    function getValueTypeOf(bytes32 _propertyName) external view returns (uint /* SettingsValueTypes */ );\n\n    event ChangeProperty(bytes32 indexed _propertyName, uint256 _type);\n}\n\n////// src/Formula.sol\n/* pragma solidity ^0.6.7; */\n\n/* import \"zeppelin-solidity/proxy/Initializable.sol\"; */\n/* import \"ds-auth/auth.sol\"; */\n/* import \"./interfaces/IFormula.sol\"; */\n/* import \"./interfaces/ISettingsRegistry.sol\"; */\n/* import \"./FurnaceSettingIds.sol\"; */\n\ncontract Formula is Initializable, DSAuth, IFormula {\n\tevent SetStrength(uint256 indexed inde, uint128 rate);\n\n\tevent SetAmount(uint256 indexed index, uint256 amount);\n\n\t// 0x434f4e54524143545f4552433732315f4745474f000000000000000000000000\n\tbytes32 public constant CONTRACT_ERC721_GEGO = \"CONTRACT_ERC721_GEGO\";\n\n\t// 0x434f4e54524143545f4f424a4543545f4f574e45525348495000000000000000\n\tbytes32 public constant CONTRACT_OBJECT_OWNERSHIP =\n\t\t\"CONTRACT_OBJECT_OWNERSHIP\";\n\n\t//0x434f4e54524143545f454c454d454e545f544f4b454e00000000000000000000\n\tbytes32 public constant CONTRACT_ELEMENT_TOKEN = \n\t\t\"CONTRACT_ELEMENT_TOKEN\";\n\n\t//0x434f4e54524143545f4c505f454c454d454e545f544f4b454e00000000000000\n\tbytes32 public constant CONTRACT_LP_ELEMENT_TOKEN = \n\t\t\"CONTRACT_LP_ELEMENT_TOKEN\";\n\n\tuint128 public constant RATE_DECIMALS = 10 ** 6;\n\tuint256 public constant UNIT = 10 ** 18;\n\n\t/*** STORAGE ***/\n\n\tISettingsRegistry public registry;\n\tFormulaEntry[] public formulas;\n\n\tfunction initialize(address _registry) public initializer {\n\t\towner = msg.sender;\n\t\temit LogSetOwner(msg.sender);\n\t\tregistry = ISettingsRegistry(_registry);\n\n\t\t_init();\n\t}\n\n\tfunction _init() internal {\n\t\taddress gego = registry.addressOf(CONTRACT_ERC721_GEGO); \n\t\taddress ownership = registry.addressOf(CONTRACT_OBJECT_OWNERSHIP);\n\t\t// 0\n\t\tinsert(\"合金镐\", uint128(5 * RATE_DECIMALS), uint16(256), uint16(1), uint16(1), true, CONTRACT_ELEMENT_TOKEN, 500 * UNIT, gego, 256, 0, 1);\n\n\t\t// 1\n\t\tinsert(\"人力铸铁钻机\", uint128(5 * RATE_DECIMALS), uint16(4), uint16(1), uint16(1), true, CONTRACT_ELEMENT_TOKEN, 500 * UNIT, ownership, 4, 0, 1);\n\n\t\t// 2\n\t\tinsert(\"人力镍钢钻机\", uint128(12 * RATE_DECIMALS), uint16(4), uint16(1), uint16(2), true, CONTRACT_ELEMENT_TOKEN, 500 * UNIT, ownership, 4, 0, 2);\n\n\t\t// 3\n\t\tinsert(\"人力金刚钻机\", uint128(25 * RATE_DECIMALS), uint16(4), uint16(1), uint16(3), true, CONTRACT_ELEMENT_TOKEN, 500 * UNIT, ownership, 4, 0, 3);\n\n\t\t// 4\n\t\tinsert(\"高级合金镐\", uint128(28 * RATE_DECIMALS), uint16(256), uint16(2), uint16(1), true, CONTRACT_LP_ELEMENT_TOKEN, 450 * UNIT, ownership, 256, 1, 1);\n\n\t\t// 5\n\t\tinsert(\"燃油铸铁钻机\", uint128(28 * RATE_DECIMALS), uint16(4), uint16(2), uint16(1), true, CONTRACT_LP_ELEMENT_TOKEN, 450 * UNIT, ownership, 4, 1, 1);\n\n\t\t// 6\n\t\tinsert(\"燃油钨钢钻机\", uint128(68 * RATE_DECIMALS), uint16(4), uint16(2), uint16(2), true, CONTRACT_LP_ELEMENT_TOKEN, 450 * UNIT, ownership, 4, 1, 2);\n\n\t\t// 7\n\t\tinsert(\"燃油金刚钻机\", uint128(120 * RATE_DECIMALS), uint16(4), uint16(2), uint16(3), true, CONTRACT_LP_ELEMENT_TOKEN, 450 * UNIT, ownership, 4, 1, 3);\n\t}\n\n\tfunction insert(\n\t\tbytes32 _name,\n\t\tuint128 _rate,\n\t\tuint16 _objClassExt,\n\t\tuint16 _class,\n\t\tuint16 _grade,\n\t\tbool _canDisenchant,\n\t\tbytes32 _minor,\n\t\tuint256 _amount,\n\t\taddress _majorAddr,\n\t\tuint16 _majorObjClassExt,\n\t\tuint16 _majorClass,\n\t\tuint16 _majorGrade\n\t) public override auth {\n\t\tFormulaEntry memory formula =\n\t\t\tFormulaEntry({\n\t\t\t\tname: _name,\n\t\t\t\trate: _rate,\n\t\t\t\tobjClassExt: _objClassExt,\n\t\t\t\tdisable: false,\n\t\t\t\tclass: _class,\n\t\t\t\tgrade: _grade,\n\t\t\t\tcanDisenchant: _canDisenchant,\n\t\t\t\tminor: _minor,\n\t\t\t\tamount: _amount,\n\t\t\t\tmajorAddr: _majorAddr,\n\t\t        majorObjClassExt: _majorObjClassExt,\n\t\t        majorClass: _majorClass,\n\t\t        majorGrade:_majorGrade\n\t\t\t});\n\t\tformulas.push(formula);\n\t\temit AddFormula(\n\t\t\tformulas.length - 1,\n\t\t\tformula.name,\n\t\t\tformula.rate,\n\t\t\tformula.objClassExt,\n\t\t\tformula.class,\n\t\t\tformula.grade,\n\t\t\tformula.canDisenchant,\n\t\t\tformula.minor,\n\t\t\tformula.amount,\n\t\t\tformula.majorAddr,\n\t\t\tformula.majorObjClassExt,\n\t\t\tformula.majorClass,\n\t\t\tformula.majorGrade\n\t\t);\n\t}\n\n\tfunction disable(uint256 _index) external override auth {\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\tformulas[_index].disable = true;\n\t\temit DisableFormula(_index);\n\t}\n\n\tfunction enable(uint256 _index) external override auth {\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\tformulas[_index].disable = false;\n\t\temit EnableFormula(_index);\n\t}\n\n\tfunction setStrengthRate(uint256 _index, uint128 _rate) external auth {\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\tFormulaEntry storage formula = formulas[_index];\n\t\tformula.rate = _rate;\n\t\temit SetStrength(_index, formula.rate);\n\t}\n\n\tfunction setAmount(uint256 _index, uint256 _amount)\n\t\texternal\n\t\tauth\n\t{\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\tFormulaEntry storage formula = formulas[_index];\n\t\tformula.amount = _amount;\n\t\temit SetAmount(_index, formula.amount);\n\t}\n\n\tfunction length() external view override returns (uint256) {\n\t\treturn formulas.length;\n\t}\n\n\tfunction isDisable(uint256 _index) external view override returns (bool) {\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\treturn formulas[_index].disable;\n\t}\n\n\tfunction getMinor(uint256 _index)\n\t\texternal\n\t\tview\n\t\toverride\n\t\treturns (bytes32, uint256)\n\t{\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\treturn (formulas[_index].minor, formulas[_index].amount);\n\t}\n\n\tfunction canDisenchant(uint256 _index)\n\t\texternal\n\t\tview\n\t\toverride\n\t\treturns (bool)\n\t{\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\treturn formulas[_index].canDisenchant;\n\t}\n\n\tfunction getMetaInfo(uint256 _index)\n\t\texternal\n\t\tview\n\t\toverride\n\t\treturns (\n\t\t\tuint16,\n\t\t\tuint16,\n\t\t\tuint16,\n\t\t\tuint128\n\t\t)\n\t{\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\tFormulaEntry storage formula = formulas[_index];\n\t\treturn (\n\t\t\tformula.objClassExt,\n\t\t\tformula.class,\n\t\t\tformula.grade,\n\t\t\tformula.rate\n\t\t);\n\t}\n\n\tfunction getMajorInfo(uint256 _index)\n\t\tpublic\n\t\tview\t\n\t\toverride\n\t\treturns (\n\t\t\taddress,\n\t\t\tuint16,\n\t\t\tuint16,\n\t\t\tuint16\n\t\t)\n\t{\n\t\trequire(_index < formulas.length, \"Formula: OUT_OF_RANGE\");\n\t\tFormulaEntry storage formula = formulas[_index];\n\t\treturn (\n\t\t\tformula.majorAddr,\n\t\t\tformula.majorObjClassExt,\n\t\t\tformula.majorClass,\n\t\t\tformula.majorGrade\n\t\t);\n\t}\n}\n","ABI":"[{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"name\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"rate\",\"type\":\"uint128\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"objClassExt\",\"type\":\"uint16\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"class\",\"type\":\"uint16\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"grade\",\"type\":\"uint16\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"canDisenchant\",\"type\":\"bool\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"minor\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"majorAddr\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"majorObjClassExt\",\"type\":\"uint16\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"majorClass\",\"type\":\"uint16\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"majorGrade\",\"type\":\"uint16\"}],\"name\":\"AddFormula\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"DisableFormula\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"}],\"name\":\"EnableFormula\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"authority\",\"type\":\"address\"}],\"name\":\"LogSetAuthority\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"LogSetOwner\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"index\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"SetAmount\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"inde\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint128\",\"name\":\"rate\",\"type\":\"uint128\"}],\"name\":\"SetStrength\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"CONTRACT_ELEMENT_TOKEN\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"CONTRACT_ERC721_GEGO\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"CONTRACT_LP_ELEMENT_TOKEN\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"CONTRACT_OBJECT_OWNERSHIP\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"RATE_DECIMALS\",\"outputs\":[{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"UNIT\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"authority\",\"outputs\":[{\"internalType\":\"contract DSAuthority\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"canDisenchant\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"disable\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"enable\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"formulas\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"name\",\"type\":\"bytes32\"},{\"internalType\":\"uint128\",\"name\":\"rate\",\"type\":\"uint128\"},{\"internalType\":\"uint16\",\"name\":\"objClassExt\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"class\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"grade\",\"type\":\"uint16\"},{\"internalType\":\"bool\",\"name\":\"canDisenchant\",\"type\":\"bool\"},{\"internalType\":\"bool\",\"name\":\"disable\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"minor\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"majorAddr\",\"type\":\"address\"},{\"internalType\":\"uint16\",\"name\":\"majorObjClassExt\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"majorClass\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"majorGrade\",\"type\":\"uint16\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getMajorInfo\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getMetaInfo\",\"outputs\":[{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"},{\"internalType\":\"uint128\",\"name\":\"\",\"type\":\"uint128\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getMinor\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_registry\",\"type\":\"address\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"_name\",\"type\":\"bytes32\"},{\"internalType\":\"uint128\",\"name\":\"_rate\",\"type\":\"uint128\"},{\"internalType\":\"uint16\",\"name\":\"_objClassExt\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"_class\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"_grade\",\"type\":\"uint16\"},{\"internalType\":\"bool\",\"name\":\"_canDisenchant\",\"type\":\"bool\"},{\"internalType\":\"bytes32\",\"name\":\"_minor\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_majorAddr\",\"type\":\"address\"},{\"internalType\":\"uint16\",\"name\":\"_majorObjClassExt\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"_majorClass\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"_majorGrade\",\"type\":\"uint16\"}],\"name\":\"insert\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"isDisable\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"length\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"registry\",\"outputs\":[{\"internalType\":\"contract ISettingsRegistry\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"setAmount\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"contract DSAuthority\",\"name\":\"authority_\",\"type\":\"address\"}],\"name\":\"setAuthority\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner_\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_index\",\"type\":\"uint256\"},{\"internalType\":\"uint128\",\"name\":\"_rate\",\"type\":\"uint128\"}],\"name\":\"setStrengthRate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"Formula","CompilerVersion":"v0.6.7+commit.b8d736ae","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"","Proxy":"0","Implementation":"","SwarmSource":""}]}