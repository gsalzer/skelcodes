{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity >=0.5.0 <0.7.0;\r\n\r\ncontract mortgage {\r\n      modifier onlyOwner{\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n    // USDValue = 1000,\r\n    // security = 300,\r\n    // securityAmount = 0.246,\r\n    // securityCurrency = ETH,\r\n    // scurityRate = 0.00082\r\n    // lended = 700,\r\n    // lendedCurrency = AGCoin,\r\n    // lendedRate = 1,\r\n   \r\n    // event newrate(uint rate);\r\n    \r\n    event deployed(address owner , uint id);\r\n    \r\n    event userDetails1 (address user_address,\r\n        uint id,\r\n        uint asset_value_USD,\r\n        AsssetType deposited_asset,\r\n        AsssetType lend_asset,\r\n        mortgage_state m_state,\r\n        uint lended_value,\r\n        uint time,\r\n        uint rate,\r\n        uint interestrate,\r\n        uint max_mortgage);\r\n        // uint security_value);\r\n        \r\n    event userDetails2(uint absolute_mortgage,\r\n        uint security_rate,\r\n        uint lended_Rate,\r\n        // uint absolute_mortgage,\r\n        uint mortgage_amount,\r\n        uint deposited_value,  //initial deposited value\r\n        AsssetType withdrawl,\r\n        uint withdrawState,\r\n        uint deposited_asset_rate,\r\n        uint lended_asset_rate,\r\n        uint interest);\r\n        \r\n    event userDetails3(AsssetType extra_asset,\r\n        uint extraamount);\r\n    \r\n    address public owner;\r\n    uint public id ;\r\n    uint public rate;\r\n    uint public interestrate;\r\n    \r\n    enum AsssetType{\r\n        AGCoin, ETH, BTC, LTC, USDT\r\n    }\r\n\r\n    enum mortgage_state {\r\n        none, asked, provided\r\n    } \r\n    \r\n    struct Mortgage1 { \r\n        address  user;\r\n        uint id ;\r\n        uint asset_value_USD;\r\n        AsssetType deposited_asset;\r\n        AsssetType lend_asset;\r\n        mortgage_state m_state;\r\n        uint lended_value;\r\n        uint time;\r\n        uint rate;\r\n        uint interestrate;\r\n        uint max_mortgage;\r\n        \r\n    }\r\n    mapping(uint  => uint) ratess;\r\n        \r\n    struct Mortgage2 {\r\n        uint absolute_mortgage;\r\n        uint security_rate;\r\n        uint lended_Rate;\r\n        uint mortgage_amount;\r\n        uint deposited_value;\r\n        AsssetType withdrawl;\r\n        uint withdrawState;\r\n        uint deposited_asset_rate;\r\n        uint lended_asset_rate;\r\n        uint interest;\r\n    }\r\n    \r\n    struct Mortgage3 {\r\n        AsssetType extra_asset;\r\n        uint extraamount;\r\n    }\r\n    \r\n    \r\n     event rates (uint rate_AGCoin,\r\n        uint rate_ETH,\r\n        uint rate_BTC,\r\n        uint rate_LTC,\r\n        uint rate_XRP,\r\n        uint rate_USD);\r\n        \r\n     mapping(uint=>Mortgage1) public user_details1;\r\n     mapping(uint=>Mortgage2) public user_details2;\r\n     mapping(uint=>Mortgage3) public user_details3;\r\n\r\n     constructor() public {\r\n        owner = msg.sender;\r\n        id=1;\r\n        emit deployed(owner, id);\r\n    }\r\n    \r\n    \r\n    function setrate(uint _rate) onlyOwner public {\r\n        rate = _rate;\r\n        // emit newrate(rate);\r\n    }\r\n    \r\n     function setinterestrate(uint _interestrate) onlyOwner public {\r\n        interestrate = _interestrate;\r\n        // emit newrate(rate);\r\n    }\r\n   \r\n    \r\n    function settingUser(uint asset_value_USD, AsssetType _deposited_asset, AsssetType _lend_asset, uint _time, uint _deposited_value,uint _deposited_asset_rate, uint _lended_asset_rate,uint _lended_value) public {\r\n        require(_time>= 3 , \"Mortgage should be for atleast 3 months\");\r\n        require(_deposited_value >=500, \"security should be greater than 500 USD\");\r\n        uint _rate = rate;\r\n        uint _interestrate = interestrate;\r\n        uint calculateInterest = (asset_value_USD * _interestrate * _time)/(100 * 12);\r\n        \r\n        user_details1[id].user = msg.sender;\r\n        user_details1[id].id = id;\r\n        user_details2[id].deposited_value = _deposited_value;\r\n        user_details1[id].lended_value = _lended_value;\r\n        user_details1[id].asset_value_USD = asset_value_USD;\r\n        user_details2[id].lended_asset_rate = _lended_asset_rate;\r\n        user_details2[id].deposited_asset_rate = _deposited_asset_rate;\r\n        user_details2[id].absolute_mortgage = _deposited_value;\r\n        user_details1[id].lend_asset = _lend_asset;\r\n        user_details1[id].deposited_asset = _deposited_asset;\r\n        user_details2[id].withdrawl=AsssetType.AGCoin;\r\n        user_details3[id].extra_asset = _deposited_asset;\r\n        // user_details2[msg.sender][id].extraamount = extraamount;\r\n        user_details1[id].m_state = mortgage_state.provided;\r\n        user_details1[id].time =_time;\r\n        user_details1[id].rate= _rate;\r\n        user_details1[id].interestrate= _interestrate;\r\n        user_details2[id].interest= calculateInterest;\r\n        \r\n        emit userDetails1(user_details1[id].user,\r\n        user_details1[id].id,\r\n        user_details1[id].asset_value_USD,\r\n        user_details1[id].deposited_asset,\r\n        user_details1[id].lend_asset,\r\n        user_details1[id].m_state,\r\n        user_details1[id].lended_value,\r\n        user_details1[id].time,\r\n        user_details1[id].rate,\r\n        user_details1[id].interestrate,\r\n        user_details1[id].max_mortgage);\r\n        \r\n        emit userDetails2(user_details2[id].absolute_mortgage,\r\n        user_details2[id].security_rate,\r\n        user_details2[id].lended_Rate,\r\n        user_details2[id].mortgage_amount,\r\n        user_details2[id].deposited_value,\r\n        user_details2[id].withdrawl,\r\n        user_details2[id].withdrawState,\r\n        user_details2[id].deposited_asset_rate,\r\n        user_details2[id].lended_asset_rate,\r\n        user_details2[id].interest);\r\n        \r\n        emit userDetails3(user_details3[id].extra_asset,\r\n        user_details3[id].extraamount);\r\n        \r\n        id=id+1;\r\n    }\r\n    \r\n    \r\n    function addExtra (uint _id, uint extraAmount )  public {\r\n        // uint oldExtra = user_details2[_id].extraamount;\r\n        uint newExtra = user_details3[_id].extraamount + extraAmount;\r\n        user_details3[_id].extraamount = newExtra;\r\n        \r\n        emit userDetails1(user_details1[_id].user,\r\n        user_details1[_id].id,\r\n        user_details1[_id].asset_value_USD,\r\n        user_details1[_id].deposited_asset,\r\n        user_details1[_id].lend_asset,\r\n        user_details1[_id].m_state,\r\n        user_details1[_id].lended_value,\r\n        user_details1[_id].time,\r\n        user_details1[_id].rate,\r\n        user_details1[_id].interestrate,\r\n        user_details1[_id].max_mortgage);\r\n        \r\n        emit userDetails2(user_details2[_id].absolute_mortgage,\r\n        user_details2[_id].security_rate,\r\n        user_details2[_id].lended_Rate,\r\n        user_details2[_id].mortgage_amount,\r\n        user_details2[_id].deposited_value,\r\n        user_details2[_id].withdrawl,\r\n        user_details2[_id].withdrawState,\r\n        user_details2[_id].deposited_asset_rate,\r\n        user_details2[_id].lended_asset_rate,\r\n        user_details2[_id].interest);\r\n        \r\n        emit userDetails3(user_details3[_id].extra_asset,\r\n        user_details3[_id].extraamount);\r\n        \r\n    } \r\n    \r\n    \r\n    function cal_mortgage (uint _id )  public {\r\n        if (user_details1[_id].deposited_asset == AsssetType.AGCoin ) {\r\n            user_details1[_id].max_mortgage =  user_details2[_id].deposited_value*80/100;\r\n        }\r\n        else {\r\n            user_details1[_id].max_mortgage =  (user_details2[_id].deposited_value*rate)/100;\r\n        }\r\n        require(user_details2[_id].mortgage_amount >= user_details1[_id].max_mortgage, \"\");\r\n        \r\n        emit userDetails1(user_details1[_id].user,\r\n        user_details1[_id].id,\r\n        user_details1[_id].asset_value_USD,\r\n        user_details1[_id].deposited_asset,\r\n        user_details1[_id].lend_asset,\r\n        user_details1[_id].m_state,\r\n        user_details1[_id].lended_value,\r\n        user_details1[_id].time,\r\n        user_details1[_id].rate,\r\n        user_details1[_id].interestrate,\r\n        user_details1[_id].max_mortgage);\r\n        \r\n        emit userDetails2(user_details2[_id].absolute_mortgage,\r\n        user_details2[_id].security_rate,\r\n        user_details2[_id].lended_Rate,\r\n        user_details2[_id].mortgage_amount,\r\n        user_details2[_id].deposited_value,\r\n        user_details2[_id].withdrawl,\r\n        user_details2[_id].withdrawState,\r\n        user_details2[_id].deposited_asset_rate,\r\n        user_details2[_id].lended_asset_rate,\r\n        user_details2[_id].interest);\r\n        \r\n        emit userDetails3(user_details3[_id].extra_asset,\r\n        user_details3[_id].extraamount);\r\n        \r\n    } \r\n    \r\n    function withdraw(uint _id) onlyOwner public{\r\n        user_details1[_id].m_state = mortgage_state.provided;\r\n        user_details2[_id].withdrawState = 1;\r\n        \r\n        emit userDetails1(user_details1[_id].user,\r\n        user_details1[_id].id,\r\n        user_details1[_id].asset_value_USD,\r\n        user_details1[_id].deposited_asset,\r\n        user_details1[_id].lend_asset,\r\n        user_details1[_id].m_state,\r\n        user_details1[_id].lended_value,\r\n        user_details1[_id].time,\r\n        user_details1[_id].rate,\r\n        user_details1[_id].interestrate,\r\n        user_details1[_id].max_mortgage);\r\n        \r\n        emit userDetails2(user_details2[_id].absolute_mortgage,\r\n        user_details2[_id].security_rate,\r\n        user_details2[_id].lended_Rate,\r\n        user_details2[_id].mortgage_amount,\r\n        user_details2[_id].deposited_value,\r\n        user_details2[_id].withdrawl,\r\n        user_details2[_id].withdrawState,\r\n        user_details2[_id].deposited_asset_rate,\r\n        user_details2[_id].lended_asset_rate,\r\n        user_details2[_id].interest);\r\n        \r\n        emit userDetails3(user_details3[_id].extra_asset,\r\n        user_details3[_id].extraamount);\r\n    }\r\n}","ABI":"[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"}],\"name\":\"deployed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate_AGCoin\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate_ETH\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate_BTC\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate_LTC\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate_XRP\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate_USD\",\"type\":\"uint256\"}],\"name\":\"rates\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"user_address\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"asset_value_USD\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"deposited_asset\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"lend_asset\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"enum mortgage.mortgage_state\",\"name\":\"m_state\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lended_value\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"time\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"interestrate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"max_mortgage\",\"type\":\"uint256\"}],\"name\":\"userDetails1\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"absolute_mortgage\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"security_rate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lended_Rate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"mortgage_amount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"deposited_value\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"withdrawl\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"withdrawState\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"deposited_asset_rate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"lended_asset_rate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"interest\",\"type\":\"uint256\"}],\"name\":\"userDetails2\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"extra_asset\",\"type\":\"uint8\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"extraamount\",\"type\":\"uint256\"}],\"name\":\"userDetails3\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_id\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"extraAmount\",\"type\":\"uint256\"}],\"name\":\"addExtra\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_id\",\"type\":\"uint256\"}],\"name\":\"cal_mortgage\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"id\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"interestrate\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"rate\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_interestrate\",\"type\":\"uint256\"}],\"name\":\"setinterestrate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_rate\",\"type\":\"uint256\"}],\"name\":\"setrate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"asset_value_USD\",\"type\":\"uint256\"},{\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"_deposited_asset\",\"type\":\"uint8\"},{\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"_lend_asset\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"_time\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_deposited_value\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_deposited_asset_rate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_lended_asset_rate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_lended_value\",\"type\":\"uint256\"}],\"name\":\"settingUser\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"user_details1\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"id\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"asset_value_USD\",\"type\":\"uint256\"},{\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"deposited_asset\",\"type\":\"uint8\"},{\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"lend_asset\",\"type\":\"uint8\"},{\"internalType\":\"enum mortgage.mortgage_state\",\"name\":\"m_state\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"lended_value\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"time\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"rate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interestrate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"max_mortgage\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"user_details2\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"absolute_mortgage\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"security_rate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lended_Rate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"mortgage_amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"deposited_value\",\"type\":\"uint256\"},{\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"withdrawl\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"withdrawState\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"deposited_asset_rate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lended_asset_rate\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"interest\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"user_details3\",\"outputs\":[{\"internalType\":\"enum mortgage.AsssetType\",\"name\":\"extra_asset\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"extraamount\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_id\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"mortgage","CompilerVersion":"v0.6.12+commit.27d51765","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":"ipfs://b4ed91329161f0e6892c3d6119df39ef5737c9107082d86ee26fda306d6dab48"}]}