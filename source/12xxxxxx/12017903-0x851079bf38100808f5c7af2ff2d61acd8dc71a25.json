{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.5.16;\r\n\r\ncontract RegistryLike {\r\n    function proxies(address user) public view returns(address);\r\n}\r\n\r\ncontract ProxyLike {\r\n    function owner() public view returns(address);\r\n}\r\n\r\ncontract ScoreLike {\r\n    function getUserScore(bytes32 user) external view returns (uint);\r\n    function getGlobalScore() external view returns (uint);\r\n}\r\n\r\ncontract GetCDPLike {\r\n    function getCdpsAsc(address manager, address guy) external view returns (uint[] memory ids, address[] memory urns, bytes32[] memory ilks);\r\n}\r\n\r\n\r\n\r\ncontract MScore {\r\n    RegistryLike constant REGISTRY_PROXY = RegistryLike(0x4678f0a6958e4D2Bc4F1BAF7Bc52E8F3564f3fE4);\r\n    ScoreLike constant JAR_CONNECTOR = ScoreLike(0xf10Bb2Ca172249C715E4F9eE7776b2C8C31aaA69);\r\n    GetCDPLike constant GET_CDP = GetCDPLike(0x36a724Bd100c39f0Ea4D3A20F7097eE01A8Ff573);\r\n    address constant BCDP_MANAGER = address(0x3f30c2381CD8B917Dd96EB2f1A4F96D91324BBed);\r\n    uint constant SCALING_FACTOR = 24 * 60 * 60 * 1000;\r\n    \r\n    function balanceOf(address user) external view returns(uint) {\r\n        address proxy = REGISTRY_PROXY.proxies(user);\r\n        if(proxy == address(0)) return 0;\r\n        if(ProxyLike(proxy).owner() != user) return 0;\r\n        \r\n        (uint[] memory cdps,,) = GET_CDP.getCdpsAsc(BCDP_MANAGER, proxy);\r\n        if(cdps.length == 0) return 0;\r\n        \r\n        return JAR_CONNECTOR.getUserScore(bytes32(cdps[0])) / SCALING_FACTOR;\r\n    }\r\n    \r\n    function totalSupply() external view returns(uint) {\r\n        return JAR_CONNECTOR.getGlobalScore() / SCALING_FACTOR;\r\n    }\r\n    \r\n}","ABI":"[{\"constant\":true,\"inputs\":[{\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"MScore","CompilerVersion":"v0.5.16+commit.9c3226ce","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"BSD-3-Clause","Proxy":"0","Implementation":"","SwarmSource":"bzzr://d09250e1d03074bb7eb70441adaa07436055e48017052a6e5899827bfaeca416"}]}