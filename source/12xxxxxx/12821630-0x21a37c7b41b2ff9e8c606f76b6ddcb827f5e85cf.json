{"status":"1","message":"OK","result":[{"SourceCode":"# @version 0.2.12\r\n\r\n\"\"\"\r\n@title Unagii Zap 0.1.0\r\n@author stakewith.us\r\n@license AGPL-3.0-or-later\r\n\"\"\"\r\n\r\nfrom vyper.interfaces import ERC20\r\n\r\n\r\ninterface VaultV1:\r\n    def token() -> address: view\r\n    def withdraw(shares: uint256, _min: uint256): nonpayable\r\n\r\n\r\ninterface VaultV2:\r\n    def token() -> address: view\r\n    def uToken() -> address: view\r\n    def deposit(amount: uint256, _min: uint256) -> uint256: nonpayable\r\n\r\n\r\nv1: public(VaultV1)\r\nv2: public(VaultV2)\r\ntoken: public(ERC20)\r\nuToken: public(ERC20)\r\n\r\n\r\n@external\r\ndef __init__(v1: address, v2: address, uToken: address):\r\n    self.v1 = VaultV1(v1)\r\n    self.v2 = VaultV1(v2)\r\n\r\n    assert self.v1.token() == self.v2.token(), \"v1 token != v2 token\"\r\n    self.token = ERC20(self.v1.token())\r\n\r\n    assert uToken == self.v2.uToken(), \"uToken != v2 uToken\"\r\n    self.uToken = ERC20(self.v2.uToken())\r\n\r\n\r\n@internal\r\ndef _safeApprove(token: address, spender: address, amount: uint256):\r\n    res: Bytes[32] = raw_call(\r\n        token,\r\n        concat(\r\n            method_id(\"approve(address,uint256)\"),\r\n            convert(spender, bytes32),\r\n            convert(amount, bytes32),\r\n        ),\r\n        max_outsize=32,\r\n    )\r\n    if len(res) > 0:\r\n        assert convert(res, bool), \"approve failed\"\r\n\r\n\r\n@external\r\ndef zap(shares: uint256, _min: uint256, _minV2Shares: uint256):\r\n    ERC20(self.v1.address).transferFrom(msg.sender, self, shares)\r\n    self.v1.withdraw(shares, _min)\r\n\r\n    bal: uint256 = self.token.balanceOf(self)\r\n    # use _safeApprove, USDT does not return bool\r\n    self._safeApprove(self.token.address, self.v2.address, bal)\r\n    uShares: uint256 = self.v2.deposit(bal, _minV2Shares)\r\n    self.uToken.transfer(msg.sender, uShares)","ABI":"[{\"stateMutability\":\"nonpayable\",\"type\":\"constructor\",\"inputs\":[{\"name\":\"v1\",\"type\":\"address\"},{\"name\":\"v2\",\"type\":\"address\"},{\"name\":\"uToken\",\"type\":\"address\"}],\"outputs\":[]},{\"stateMutability\":\"nonpayable\",\"type\":\"function\",\"name\":\"zap\",\"inputs\":[{\"name\":\"shares\",\"type\":\"uint256\"},{\"name\":\"_min\",\"type\":\"uint256\"},{\"name\":\"_minV2Shares\",\"type\":\"uint256\"}],\"outputs\":[],\"gas\":41744},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"v1\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"gas\":2418},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"v2\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"gas\":2448},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"token\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"gas\":2478},{\"stateMutability\":\"view\",\"type\":\"function\",\"name\":\"uToken\",\"inputs\":[],\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"gas\":2508}]","ContractName":"Vyper_contract","CompilerVersion":"vyper:0.2.12","OptimizationUsed":"0","Runs":"0","ConstructorArguments":"000000000000000000000000fd9f501324c07613f8fb4d73c798d764d0bfcdcc00000000000000000000000055ece7dc08f1950245102ad92968bdae1b359a0a000000000000000000000000ffd51a24c65cc6981f3a543320fdadaf57fffd7a","EVMVersion":"Default","Library":"","LicenseType":"Unknown","Proxy":"0","Implementation":"","SwarmSource":""}]}