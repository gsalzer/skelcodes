{"status":"1","message":"OK","result":[{"SourceCode":"//SPDX-License-Identifier: MIT\r\npragma solidity ^0.7.6;\r\n\r\ninterface I{function transfer(address to, uint value) external returns(bool);function balanceOf(address) external view returns(uint); function genesisBlock() external view returns(uint);}\r\n\r\ncontract Treasury {\r\n\taddress private _governance;\r\n\tbool private _init;\r\n\r\n\tstruct Beneficiary {uint88 amount; uint32 lastClaim; uint16 emission;}\r\n\tmapping (address => Beneficiary) public bens;\r\n\r\n\tfunction init() public {\r\n\t\trequire(_init == false && msg.sender == 0x5C8403A2617aca5C86946E32E14148776E37f72A);\r\n\t\t_init=true;\r\n\t\t_governance = msg.sender;\r\n\t\tsetBen(0x2D9F853F1a71D0635E64FcC4779269A05BccE2E2,32857142857e12,0,2e3);\r\n\t\tsetBen(0x174F4EbE08a7193833e985d4ef0Ad6ce50F7cBc4,28857142857e12,0,2e3);\r\n\t\tsetBen(0xFA9675E41a9457E8278B2701C504cf4d132Fe2c2,25285714286e12,0,2e3);\r\n\t\tsetBen(0x86bBB555f1B2C38F27d8f4a2085C1D37eF0D6785,2e22,0,1432);\r\n\t}\r\n\r\n\tfunction setBen(address a, uint amount, uint lastClaim, uint emission) public {\r\n\t\trequire(msg.sender == _governance && amount<=4e22 && bens[a].amount == 0 && lastClaim < block.number+1e6 && emission >= 1e2 && emission <=2e3);\r\n\t\tif(lastClaim < block.number) {lastClaim = block.number;}\r\n\t\tuint lc = bens[a].lastClaim;\r\n\t\tif (lc == 0) {bens[a].lastClaim = uint32(lastClaim);} // this 3 weeks delay disallows deployer to be malicious, can be removed after the governance will have control over treasury\r\n\t\tif (bens[a].amount == 0 && lc != 0) {bens[a].lastClaim = uint32(lastClaim);}\r\n\t\tbens[a].amount = uint88(amount);\r\n\t\tbens[a].emission = uint16(emission);\r\n\t}\r\n\r\n\tfunction getBenRewards() external{\r\n\t\tuint genesisBlock = I(0x31A188024FcD6E462aBF157F879Fb7da37D6AB2f).genesisBlock();\r\n\t\tuint lastClaim = bens[msg.sender].lastClaim;\r\n\t\tif (lastClaim < genesisBlock) {lastClaim = genesisBlock+129600;}\r\n\t\trequire(genesisBlock != 0 && lastClaim > block.number);\r\n\t\tuint rate = 5e11; uint quarter = block.number/1e7;\r\n\t\tif (quarter>1) { for (uint i=1;i<quarter;i++) {rate=rate*3/4;} }\r\n\t\tuint toClaim = (block.number - lastClaim)*bens[msg.sender].emission*rate;\r\n\t\tbens[msg.sender].lastClaim = uint32(block.number);\r\n\t\tbens[msg.sender].amount -= uint88(toClaim);\r\n\t\tI(0xEd7C1848FA90E6CDA4faAC7F61752857461af284).transfer(msg.sender, toClaim);\r\n\t}\r\n\r\n// these checks leave less room for deployer to be malicious\r\n\tfunction getRewards(address a,uint amount) external{ //for posters, providers and oracles\r\n\t\tuint genesisBlock = I(0x31A188024FcD6E462aBF157F879Fb7da37D6AB2f).genesisBlock();\r\n\t\trequire(genesisBlock != 0 && msg.sender == 0x93bF14C7Cf7250b09D78D4EadFD79FCA01BAd9F8 || msg.sender == 0xF38A689712a6935a90d6955eD6b9D0fA7Ce7123e || msg.sender == 0x742133180738679782538C9e66A03d0c0270acE8);\r\n\t\tif (msg.sender == 0xF38A689712a6935a90d6955eD6b9D0fA7Ce7123e) {// if job market(posters)\r\n\t\t\t\tuint withd =  999e24 - I(0xEd7C1848FA90E6CDA4faAC7F61752857461af284).balanceOf(address(this));// balanceOf(treasury)\r\n\t\t\t\tuint allowed = (block.number - genesisBlock)*168e15 - withd;//40% of all emission max\r\n\t\t\t\trequire(amount <= allowed);\r\n\t\t}\r\n\t\tif (msg.sender == 0x742133180738679782538C9e66A03d0c0270acE8) {// if oracle registry\r\n\t\t\t\tuint withd =  999e24 - I(0xEd7C1848FA90E6CDA4faAC7F61752857461af284).balanceOf(address(this));// balanceOf(treasury)\r\n\t\t\t\tuint allowed = (block.number - genesisBlock)*42e15 - withd;//10% of all emission max, maybe actually should be less, depends on stuff\r\n\t\t\t\trequire(amount <= allowed);\r\n\t\t}\r\n\t\tI(0xEd7C1848FA90E6CDA4faAC7F61752857461af284).transfer(a, amount);\r\n\t}\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"bens\",\"outputs\":[{\"internalType\":\"uint88\",\"name\":\"amount\",\"type\":\"uint88\"},{\"internalType\":\"uint32\",\"name\":\"lastClaim\",\"type\":\"uint32\"},{\"internalType\":\"uint16\",\"name\":\"emission\",\"type\":\"uint16\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getBenRewards\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"a\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"getRewards\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"init\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"a\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"lastClaim\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"emission\",\"type\":\"uint256\"}],\"name\":\"setBen\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"Treasury","CompilerVersion":"v0.7.6+commit.7338295f","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"MIT","Proxy":"0","Implementation":"","SwarmSource":"ipfs://36b8ecca8ab2151282cf613d2e13992415b5fef06df2438fc60d0e6e96d95591"}]}