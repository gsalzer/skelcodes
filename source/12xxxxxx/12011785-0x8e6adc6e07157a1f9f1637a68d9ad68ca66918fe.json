{"status":"1","message":"OK","result":[{"SourceCode":"{{\r\n  \"language\": \"Solidity\",\r\n  \"sources\": {\r\n    \"/Users/stephanmeier/Workspace/airdrops/contracts/Airdrop.sol\": {\r\n      \"content\": \"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.0;\\n\\ninterface IERCX {\\n  function balanceOf(address owner) external view returns (uint);\\n  function balanceOf(address account, uint256 id) external view returns (uint256);\\n  function transferFrom(address from, address to, uint256 value) external;\\n  function name() external view returns (string memory);\\n\\tfunction symbol() external view returns (string memory);\\n\\tfunction decimals() external view returns (uint8);\\n  function tokenURI(uint256 tokenId) external view returns (string memory);\\n  function uri(uint256) external view returns (string memory);\\n  function safeTransferFrom(address from, address to, uint256 id, uint256 amount, bytes calldata data) external;\\n}\\n\\ncontract Airdrop {\\n\\n  enum ERC { ERC20, ERC721, ERC1155 }\\n\\n  struct Data {\\n    address from;\\n    address token;\\n    ERC erc;\\n    uint128 value;\\n    uint128 timestamp;\\n    uint    totalSupply;\\n  }\\n\\n  struct ERCData {\\n    string name;\\n    string symbol;\\n    uint8 decimals;\\n    uint balanceFrom;\\n    string uri;\\n  }\\n\\n\\taddress public owner;\\n  uint32 public latestRef;\\n\\n\\tmapping (uint32 => Data) public refData;\\n\\tmapping (uint32 => mapping (address => uint32)) public claimable;\\n\\tmapping (address => uint32[]) private drops;\\n\\n\\tconstructor() {\\n\\t\\towner = msg.sender;\\n\\t}\\n\\n\\tmodifier ensureOwner {\\n\\t\\trequire(owner == msg.sender); _;\\n\\t}\\n\\n\\tevent Dropped(uint32 ref, address indexed token);\\n\\tevent Claimed(uint32 ref, address indexed token, address indexed to);\\n\\n\\tfunction drop(ERC erc, uint32 ref, address from, address token, uint128 value, uint totalSupply, address[] calldata owners) ensureOwner external {\\n\\t\\trequire(refData[ref].timestamp == 0, 'ref');\\n    latestRef = ref;\\n\\t\\trefData[ref] = Data({\\n\\t\\t\\tfrom: from,\\n\\t\\t\\ttoken: token,\\n      erc: erc,\\n\\t\\t\\tvalue: value,\\n      totalSupply: totalSupply,\\n\\t\\t\\ttimestamp: uint128(block.timestamp)\\n\\t\\t});\\n\\t\\tfor (uint i = 0; i < owners.length; i++) {\\n\\t\\t\\tdrops[owners[i]].push(ref);\\n      claimable[ref][owners[i]] = 1;\\n\\t\\t}\\n\\n\\t\\temit Dropped(ref, token);\\n\\t}\\n\\n\\tfunction claim(uint32 ref) external {\\n\\t\\trequire(claimable[ref][msg.sender] == 1, 'claim');\\n\\t\\tclaimable[ref][msg.sender] = uint32(block.timestamp);\\n\\n    if(refData[ref].erc != ERC.ERC1155) {\\n      IERCX(refData[ref].token).transferFrom(refData[ref].from, msg.sender, refData[ref].value);\\n    } else {\\n      IERCX(refData[ref].token).safeTransferFrom(refData[ref].from, msg.sender, refData[ref].value, 1, \\\"\\\");\\n    }\\n\\n\\t\\temit Claimed(ref, refData[ref].token, msg.sender);\\n\\t}\\n\\n\\tfunction setOwner(address _owner) ensureOwner external {\\n\\t\\towner = _owner;\\n\\t}\\n\\n\\tfunction dropsOf(address _owner) external view returns (uint32[] memory, Data[] memory, ERCData[] memory, uint[] memory) {\\n\\t\\tData[] memory _refDatas = new Data[](drops[_owner].length);\\n    ERCData[] memory _ercDatas = new ERCData[](drops[_owner].length);\\n\\t\\tuint[] memory _claims = new uint[](drops[_owner].length);\\n\\n\\t\\tfor (uint i = 0; i < drops[_owner].length; i++) {\\n      Data memory data = refData[drops[_owner][i]];\\n\\t\\t\\t_refDatas[i] = data;\\n      _ercDatas[i] = ERCData({\\n        name: data.erc != ERC.ERC1155 ? IERCX(data.token).name() : '',\\n        symbol: data.erc != ERC.ERC1155 ? IERCX(data.token).symbol() : '',\\n        decimals: data.erc == ERC.ERC20 ? IERCX(data.token).decimals() : 0,\\n        balanceFrom: data.erc != ERC.ERC1155 ? IERCX(data.token).balanceOf(data.from) : IERCX(data.token).balanceOf(data.from, data.value),\\n        uri: data.erc == ERC.ERC721 ? IERCX(data.token).tokenURI(data.value) : data.erc == ERC.ERC1155 ? IERCX(data.token).uri(data.value) : ''\\n      });\\n\\t\\t\\t_claims[i] = claimable[drops[_owner][i]][_owner];\\n\\t\\t}\\n\\n\\t\\treturn (drops[_owner], _refDatas, _ercDatas, _claims);\\n\\t}\\n\\n\\tfunction balancesOf(address _owner, address[] calldata tokens) external view returns (uint[] memory) {\\n\\t\\tuint[] memory b = new uint[](tokens.length);\\n\\t\\tfor (uint i = 0; i < b.length; i++) {\\n\\t\\t\\tb[i] = IERCX(tokens[i]).balanceOf(_owner);\\n\\t\\t}\\n\\t\\treturn b;\\n\\t}\\n}\\n\"\r\n    }\r\n  },\r\n  \"settings\": {\r\n    \"remappings\": [],\r\n    \"optimizer\": {\r\n      \"enabled\": true,\r\n      \"runs\": 999999\r\n    },\r\n    \"evmVersion\": \"istanbul\",\r\n    \"libraries\": {},\r\n    \"outputSelection\": {\r\n      \"*\": {\r\n        \"*\": [\r\n          \"evm.bytecode\",\r\n          \"evm.deployedBytecode\",\r\n          \"abi\"\r\n        ]\r\n      }\r\n    }\r\n  }\r\n}}","ABI":"[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint32\",\"name\":\"ref\",\"type\":\"uint32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"to\",\"type\":\"address\"}],\"name\":\"Claimed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint32\",\"name\":\"ref\",\"type\":\"uint32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"Dropped\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"tokens\",\"type\":\"address[]\"}],\"name\":\"balancesOf\",\"outputs\":[{\"internalType\":\"uint256[]\",\"name\":\"\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"ref\",\"type\":\"uint32\"}],\"name\":\"claim\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"name\":\"claimable\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"enum Airdrop.ERC\",\"name\":\"erc\",\"type\":\"uint8\"},{\"internalType\":\"uint32\",\"name\":\"ref\",\"type\":\"uint32\"},{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"uint128\",\"name\":\"value\",\"type\":\"uint128\"},{\"internalType\":\"uint256\",\"name\":\"totalSupply\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"owners\",\"type\":\"address[]\"}],\"name\":\"drop\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"dropsOf\",\"outputs\":[{\"internalType\":\"uint32[]\",\"name\":\"\",\"type\":\"uint32[]\"},{\"components\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"enum Airdrop.ERC\",\"name\":\"erc\",\"type\":\"uint8\"},{\"internalType\":\"uint128\",\"name\":\"value\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"timestamp\",\"type\":\"uint128\"},{\"internalType\":\"uint256\",\"name\":\"totalSupply\",\"type\":\"uint256\"}],\"internalType\":\"struct Airdrop.Data[]\",\"name\":\"\",\"type\":\"tuple[]\"},{\"components\":[{\"internalType\":\"string\",\"name\":\"name\",\"type\":\"string\"},{\"internalType\":\"string\",\"name\":\"symbol\",\"type\":\"string\"},{\"internalType\":\"uint8\",\"name\":\"decimals\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"balanceFrom\",\"type\":\"uint256\"},{\"internalType\":\"string\",\"name\":\"uri\",\"type\":\"string\"}],\"internalType\":\"struct Airdrop.ERCData[]\",\"name\":\"\",\"type\":\"tuple[]\"},{\"internalType\":\"uint256[]\",\"name\":\"\",\"type\":\"uint256[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"latestRef\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"name\":\"refData\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"from\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"},{\"internalType\":\"enum Airdrop.ERC\",\"name\":\"erc\",\"type\":\"uint8\"},{\"internalType\":\"uint128\",\"name\":\"value\",\"type\":\"uint128\"},{\"internalType\":\"uint128\",\"name\":\"timestamp\",\"type\":\"uint128\"},{\"internalType\":\"uint256\",\"name\":\"totalSupply\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}]","ContractName":"Airdrop","CompilerVersion":"v0.8.0+commit.c7dfd78e","OptimizationUsed":"1","Runs":"999999","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"","Proxy":"0","Implementation":"","SwarmSource":""}]}