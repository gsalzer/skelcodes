{"status":"1","message":"OK","result":[{"SourceCode":"// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.2;\r\n\r\nlibrary Math {\r\n    function max(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        return a >= b ? a : b;\r\n    }\r\n    function min(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        return a < b ? a : b;\r\n    }\r\n}\r\n\r\ninterface IChainLinkFeed {\r\n    function latestAnswer() external view returns (int256);\r\n}\r\n\r\ninterface IKeep3rV1 {\r\n    function totalBonded() external view returns (uint);\r\n    function bonds(address keeper, address credit) external view returns (uint);\r\n    function votes(address keeper) external view returns (uint);\r\n}\r\n\r\ninterface IKeep3rV2Oracle {\r\n    function quote(address tokenIn, uint amountIn, address tokenOut, uint points) external view returns (uint amountOut, uint lastUpdatedAgo);\r\n}\r\n\r\ncontract Keep3rV2Helper {\r\n\r\n    IChainLinkFeed public constant FASTGAS = IChainLinkFeed(0x169E633A2D1E6c10dD91238Ba11c4A708dfEF37C);\r\n    IKeep3rV1 public constant KP3R = IKeep3rV1(0x1cEB5cB57C4D4E2b2433641b95Dd330A33185A44);\r\n    IKeep3rV2Oracle public constant KV2O = IKeep3rV2Oracle(0x7dBCd8f1b76591aED6a5bAeF7b63a6f745e1DC92);\r\n    address public constant WETH = address(0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2);\r\n\r\n    uint constant public MIN = 11;\r\n    uint constant public MAX = 12;\r\n    uint constant public BASE = 10;\r\n    uint constant public SWAP = 300000;\r\n    uint constant public TARGETBOND = 200e18;\r\n    \r\n    function quote(uint eth) public view returns (uint amountOut) {\r\n        (amountOut,) = KV2O.quote(address(WETH), eth, address(KP3R), 1);\r\n    }\r\n\r\n    function getFastGas() external view returns (uint) {\r\n        return uint(FASTGAS.latestAnswer());\r\n    }\r\n\r\n    function bonds(address keeper) public view returns (uint) {\r\n        return KP3R.bonds(keeper, address(KP3R)) + (KP3R.votes(keeper));\r\n    }\r\n\r\n    function getQuoteLimitFor(address origin, uint gasUsed) public view returns (uint) {\r\n        uint _quote = quote((gasUsed+SWAP)*(uint(FASTGAS.latestAnswer())));\r\n        uint _min = _quote * MIN / BASE;\r\n        uint _boost = _quote * MAX / BASE;\r\n        uint _bond = Math.min(bonds(origin), TARGETBOND);\r\n        return Math.max(_min, _boost * _bond / TARGETBOND);\r\n    }\r\n\r\n    function getQuoteLimit(uint gasUsed) external view returns (uint) {\r\n        return getQuoteLimitFor(tx.origin, gasUsed);\r\n    }\r\n}","ABI":"[{\"inputs\":[],\"name\":\"BASE\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"FASTGAS\",\"outputs\":[{\"internalType\":\"contract IChainLinkFeed\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"KP3R\",\"outputs\":[{\"internalType\":\"contract IKeep3rV1\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"KV2O\",\"outputs\":[{\"internalType\":\"contract IKeep3rV2Oracle\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MAX\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MIN\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"SWAP\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"TARGETBOND\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"WETH\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"keeper\",\"type\":\"address\"}],\"name\":\"bonds\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getFastGas\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"gasUsed\",\"type\":\"uint256\"}],\"name\":\"getQuoteLimit\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"origin\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"gasUsed\",\"type\":\"uint256\"}],\"name\":\"getQuoteLimitFor\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"eth\",\"type\":\"uint256\"}],\"name\":\"quote\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"amountOut\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"Keep3rV2Helper","CompilerVersion":"v0.8.2+commit.661d1103","OptimizationUsed":"1","Runs":"999999","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"GNU LGPLv3","Proxy":"0","Implementation":"","SwarmSource":"ipfs://0a2defa211f913544b9e15656271cce31d077d7cdb00b068c7921e653c6a5809"}]}