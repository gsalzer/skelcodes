{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity >=0.6.12 <0.7.0;\r\n\r\n////// src/Lerp.sol\r\n//\r\n/// Lerp.sol -- Linear Interpolation module\r\n//\r\n// This program is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU Affero General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// This program is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU Affero General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU Affero General Public License\r\n// along with this program.  If not, see <https://www.gnu.org/licenses/>.\r\n\r\n/* pragma solidity ^0.6.12; */\r\n\r\ninterface DenyLike {\r\n    function deny(address) external;\r\n}\r\n\r\ninterface FileLike {\r\n    function file(bytes32, uint256) external;\r\n}\r\n\r\ninterface FileIlkLike {\r\n    function file(bytes32, bytes32, uint256) external;\r\n}\r\n\r\n// Perform linear interpolation on a dss administrative value over time\r\n\r\nabstract contract BaseLerp {\r\n\r\n    uint256 constant WAD = 10 ** 18;\r\n\r\n    address immutable public target;\r\n    bytes32 immutable public what;\r\n    uint256 immutable public start;\r\n    uint256 immutable public end;\r\n    uint256 immutable public duration;\r\n\r\n    bool              public done;\r\n    uint256           public startTime;\r\n\r\n    constructor(address target_, bytes32 what_, uint256 startTime_, uint256 start_, uint256 end_, uint256 duration_) public {\r\n        require(duration_ != 0, \"Lerp/no-zero-duration\");\r\n        require(duration_ <= 365 days, \"Lerp/max-duration-one-year\");\r\n        require(startTime_ <= block.timestamp + 365 days, \"Lerp/start-within-one-year\");\r\n        // This is not the exact upper bound, but it's a practical one\r\n        // Ballparked from 2^256 / 10^18 and verified that this is less than that value\r\n        require(start_ <= 10 ** 59, \"Lerp/start-too-large\");\r\n        require(end_ <= 10 ** 59, \"Lerp/end-too-large\");\r\n        target = target_;\r\n        what = what_;\r\n        startTime = startTime_;\r\n        start = start_;\r\n        end = end_;\r\n        duration = duration_;\r\n    }\r\n\r\n    function tick() external returns (uint256 result) {\r\n        require(!done, \"Lerp/finished\");\r\n        if (block.timestamp >= startTime) {\r\n            if (block.timestamp < startTime + duration) {\r\n                // All bounds are constrained in the constructor so no need for safe-math\r\n                // 0 <= t < WAD\r\n                uint256 t = (block.timestamp - startTime) * WAD / duration;\r\n                // y = (end - start) * t + start [Linear Interpolation]\r\n                //   = end * t + start - start * t [Avoids overflow by moving the subtraction to the end]\r\n                update(result = end * t / WAD + start - start * t / WAD);\r\n            } else {\r\n                // Set the end value and mark as done\r\n                update(result = end);\r\n                try DenyLike(target).deny(address(this)) {} catch {}\r\n                done = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    function update(uint256 value) virtual internal;\r\n\r\n}\r\n\r\n// Standard Lerp with only a uint256 value\r\n\r\ncontract Lerp is BaseLerp {\r\n\r\n    constructor(address target_, bytes32 what_, uint256 startTime_, uint256 start_, uint256 end_, uint256 duration_) public BaseLerp(target_, what_, startTime_, start_, end_, duration_) {\r\n    }\r\n\r\n    function update(uint256 value) override internal {\r\n        FileLike(target).file(what, value);\r\n    }\r\n\r\n}\r\n\r\n// Lerp that takes an ilk parameter\r\n\r\ncontract IlkLerp is BaseLerp {\r\n\r\n    bytes32 immutable public ilk;\r\n\r\n    constructor(address target_, bytes32 ilk_, bytes32 what_, uint256 startTime_, uint256 start_, uint256 end_, uint256 duration_) public BaseLerp(target_, what_, startTime_, start_, end_, duration_) {\r\n        ilk = ilk_;\r\n    }\r\n\r\n    function update(uint256 value) override internal {\r\n        FileIlkLike(target).file(ilk, what, value);\r\n    }\r\n\r\n}","ABI":"[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"target_\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"what_\",\"type\":\"bytes32\"},{\"internalType\":\"uint256\",\"name\":\"startTime_\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"start_\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"end_\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"duration_\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"done\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"duration\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"end\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"start\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"startTime\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"target\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"tick\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"result\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"what\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"}]","ContractName":"Lerp","CompilerVersion":"v0.6.12+commit.27d51765","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000a950524441892a31ebddf91d3ceefa04bf45446668756d700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000608bc71000000000000000000000502ed53dc07790272afdb61a1950913000000000000000000000000000000000a05daa7b80ef204e55fb6c3432a122600000000000000000000000000000000000000000000000000000000000000000000000828480","EVMVersion":"Default","Library":"","LicenseType":"GNU GPLv3","Proxy":"0","Implementation":"","SwarmSource":"ipfs://697dccb3d89b4ad637debbce58676d8f400b5de4df882c82455094c4cf8e4ac5"}]}