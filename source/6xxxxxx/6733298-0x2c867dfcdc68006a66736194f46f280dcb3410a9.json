{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.24;\r\n\r\ncontract Sansara {\r\n    address public owner;\r\n    address public commissions;\r\n    address public techSupport;\r\n    address public salary;\r\n    address public advert;\r\n    uint constant public MASS_TRANSACTION_LIMIT = 150;\r\n    uint constant public MINIMUM_INVEST = 1e16 wei;\r\n    uint constant public INTEREST = 1;\r\n    uint constant public COMMISSIONS_FEE = 1;\r\n    uint constant public TECH_SUPPORT_FEE = 1;\r\n    uint constant public SALARY_FEE = 3;\r\n    uint constant public ADV_FEE = 8;\r\n    uint constant public CASHBACK_FEE = 2;\r\n    uint constant public REF_FEE = 5;\r\n\r\n    uint public depositAmount;\r\n    uint public round;\r\n    uint public lastPaymentDate;\r\n    address[] public addresses;\r\n    mapping(address => Investor) public investors;\r\n    bool public pause;\r\n\r\n    struct Investor\r\n    {\r\n        uint id;\r\n        uint deposit;\r\n        uint deposits;\r\n        uint date;\r\n        uint investDate;\r\n        address referrer;\r\n    }\r\n    \r\n    event Invest(address addr, uint amount, address referrer);\r\n    event Payout(address addr, uint amount, string eventType, address from);\r\n    event NextRoundStarted(uint round, uint date, uint deposit);\r\n\r\n    modifier onlyOwner {if (msg.sender == owner) _;}\r\n\r\n    constructor() public {\r\n        owner = msg.sender;\r\n        addresses.length = 1;\r\n        round = 1;\r\n    }\r\n\r\n    function transferOwnership(address addr) onlyOwner public {\r\n        owner = addr;\r\n    }\r\n    \r\n    function setProvisionAddresses(address tech, address sal, address adv, address comm) onlyOwner public {\r\n        techSupport = tech;\r\n        salary = sal;\r\n        advert = adv;\r\n        commissions = comm;\r\n    }\r\n\r\n    function addInvestors(address[] _addr, uint[] _deposit, uint[] _date, address[] _referrer) onlyOwner public {\r\n        // add initiated investors\r\n        for (uint i = 0; i < _addr.length; i++) {\r\n            uint id = addresses.length;\r\n            if (investors[_addr[i]].deposit == 0) {\r\n                addresses.push(_addr[i]);\r\n                depositAmount += investors[_addr[i]].deposit;\r\n            }\r\n\r\n            investors[_addr[i]] = Investor(id, _deposit[i], 1, _date[i], _date[i], _referrer[i]);\r\n            emit Invest(_addr[i], _deposit  [i], _referrer[i]);\r\n        }\r\n        lastPaymentDate = now;\r\n    }\r\n\r\n    function() payable public {\r\n        if (owner == msg.sender) {\r\n            return;\r\n        }\r\n\r\n        if (0 == msg.value) {\r\n            payoutSelf();\r\n            return;\r\n        }\r\n\r\n        require(false == pause, \"Sansara is restarting. Please wait.\");\r\n        require(msg.value >= MINIMUM_INVEST, \"Too small amount, minimum 0.01 ether\");\r\n        Investor storage user = investors[msg.sender];\r\n\r\n        if (user.id == 0) {\r\n            // ensure that payment not from hacker contract\r\n            msg.sender.transfer(0 wei);\r\n            addresses.push(msg.sender);\r\n            user.id = addresses.length;\r\n            user.date = now;\r\n\r\n            // referrer\r\n            address referrer = bytesToAddress(msg.data);\r\n            if (investors[referrer].deposit > 0 && referrer != msg.sender) {\r\n                user.referrer = referrer;\r\n            }\r\n        } else {\r\n            payoutSelf();\r\n        }\r\n\r\n        // save investor\r\n        user.deposit += msg.value;\r\n        user.deposits += 1;\r\n        user.investDate = now;\r\n\r\n        emit Invest(msg.sender, msg.value, user.referrer);\r\n\r\n        depositAmount += msg.value;\r\n        lastPaymentDate = now;\r\n\r\n        techSupport.transfer((msg.value / 100) * TECH_SUPPORT_FEE);\r\n        advert.transfer((msg.value / 100) * ADV_FEE);\r\n        salary.transfer((msg.value / 100) * SALARY_FEE);\r\n        commissions.transfer((msg.value / 100) * COMMISSIONS_FEE);\r\n\r\n        uint bonusAmount = (msg.value / 100) * REF_FEE; // referrer commission for all deposits\r\n        uint cashbackAmount = (msg.value / 100) * CASHBACK_FEE;\r\n\r\n        if (user.referrer > 0x0) {\r\n            if (user.referrer.send(bonusAmount)) {\r\n                emit Payout(user.referrer, bonusAmount, \"referral\", msg.sender);\r\n            }\r\n\r\n            if (msg.sender.send(cashbackAmount)) {\r\n                emit Payout(msg.sender, cashbackAmount, \"cash-back\", 0);\r\n            }\r\n        } else {\r\n            advert.transfer(bonusAmount + cashbackAmount);\r\n        }\r\n    }\r\n\r\n    function payout(uint offset) public\r\n    {\r\n        if (pause == true) {\r\n            doRestart();\r\n            return;\r\n        }\r\n\r\n        uint txs;\r\n        uint amount;\r\n\r\n        for (uint idx = addresses.length - offset - 1; idx >= 1 && txs < MASS_TRANSACTION_LIMIT; idx--) {\r\n            address addr = addresses[idx];\r\n            if (investors[addr].date + 20 hours > now || investors[addr].investDate + 400 days < now) {\r\n                continue;\r\n            }\r\n\r\n            amount = getInvestorDividendsAmount(addr);\r\n            investors[addr].date = now;\r\n\r\n            if (address(this).balance < amount) {\r\n                pause = true;\r\n                return;\r\n            }\r\n\r\n            if (addr.send(amount)) {\r\n                emit Payout(addr, amount, \"bulk-payout\", 0);\r\n            }\r\n\r\n            txs++;\r\n        }\r\n    }\r\n\r\n    function payoutSelf() private {\r\n        require(investors[msg.sender].id > 0, \"Investor not found.\");\r\n        uint amount = getInvestorDividendsAmount(msg.sender);\r\n\r\n        investors[msg.sender].date = now;\r\n        if (address(this).balance < amount) {\r\n            pause = true;\r\n            return;\r\n        }\r\n\r\n        msg.sender.transfer(amount);\r\n        emit Payout(msg.sender, amount, \"self-payout\", 0);\r\n    }\r\n\r\n    function doRestart() private {\r\n        uint txs;\r\n        address addr;\r\n\r\n        for (uint i = addresses.length - 1; i > 0; i--) {\r\n            addr = addresses[i];\r\n            addresses.length -= 1;\r\n            delete investors[addr];\r\n            if (txs++ == MASS_TRANSACTION_LIMIT) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        emit NextRoundStarted(round, now, depositAmount);\r\n        pause = false;\r\n        round += 1;\r\n        depositAmount = 0;\r\n        lastPaymentDate = now;\r\n    }\r\n\r\n    function getInvestorCount() public view returns (uint) {\r\n        return addresses.length - 1;\r\n    }\r\n\r\n    function getInvestorDividendsAmount(address addr) public view returns (uint) {\r\n        return investors[addr].deposit / 100 * INTEREST * (now - investors[addr].date) / 1 days;\r\n    }\r\n\r\n    function bytesToAddress(bytes bys) private pure returns (address addr) {\r\n        assembly {\r\n            addr := mload(add(bys, 20))\r\n        }\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"salary\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"round\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MINIMUM_INVEST\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"depositAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MASS_TRANSACTION_LIMIT\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ADV_FEE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"CASHBACK_FEE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"advert\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"investors\",\"outputs\":[{\"name\":\"id\",\"type\":\"uint256\"},{\"name\":\"deposit\",\"type\":\"uint256\"},{\"name\":\"deposits\",\"type\":\"uint256\"},{\"name\":\"date\",\"type\":\"uint256\"},{\"name\":\"investDate\",\"type\":\"uint256\"},{\"name\":\"referrer\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"commissions\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lastPaymentDate\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"pause\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"tech\",\"type\":\"address\"},{\"name\":\"sal\",\"type\":\"address\"},{\"name\":\"adv\",\"type\":\"address\"},{\"name\":\"comm\",\"type\":\"address\"}],\"name\":\"setProvisionAddresses\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"TECH_SUPPORT_FEE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getInvestorCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_addr\",\"type\":\"address[]\"},{\"name\":\"_deposit\",\"type\":\"uint256[]\"},{\"name\":\"_date\",\"type\":\"uint256[]\"},{\"name\":\"_referrer\",\"type\":\"address[]\"}],\"name\":\"addInvestors\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"COMMISSIONS_FEE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"getInvestorDividendsAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"REF_FEE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"techSupport\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SALARY_FEE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"offset\",\"type\":\"uint256\"}],\"name\":\"payout\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"addresses\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"addr\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"INTEREST\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"addr\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"referrer\",\"type\":\"address\"}],\"name\":\"Invest\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"addr\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"eventType\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"from\",\"type\":\"address\"}],\"name\":\"Payout\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"round\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"date\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"deposit\",\"type\":\"uint256\"}],\"name\":\"NextRoundStarted\",\"type\":\"event\"}]","ContractName":"Sansara","CompilerVersion":"v0.4.25+commit.59dbf8f1","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://a354da99540f2418afe3fcae908aeb4c1e6580592189694acba8e1cd0af92590"}]}