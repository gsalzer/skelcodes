{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity 0.4.25;\r\n/**\r\n* @title PRIWGR ICO Contract\r\n* @dev PRIWGR is an ERC-20 Standar Compliant Token\r\n*/\r\n\r\n/**\r\n * @title SafeMath by OpenZeppelin\r\n * @dev Math operations with safety checks that throw on error\r\n */\r\nlibrary SafeMath {\r\n\r\n    function mul(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        uint256 c = a * b;\r\n        assert(a == 0 || c / a == b);\r\n        return c;\r\n    }\r\n\r\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        uint256 c = a / b;\r\n        return c;\r\n    }\r\n\r\n    function add(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        uint256 c = a + b;\r\n        assert(c >= a);\r\n        return c;\r\n    }\r\n\r\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        assert(b <= a);\r\n        return a - b;\r\n    }\r\n\r\n}\r\n\r\n\r\n/**\r\n * @title ERC20Basic\r\n * @dev Simpler version of ERC20 interface\r\n * @dev see https://github.com/ethereum/EIPs/issues/179\r\n */\r\ncontract ERC20Basic {\r\n    function totalSupply() public view returns (uint256);\r\n    function balanceOf(address who) public view returns (uint256);\r\n    function transfer(address to, uint256 value) public;\r\n    function transferFrom(address from, address to, uint256 value) public returns (bool);\r\n    event Transfer(address indexed from, address indexed to, uint256 value);\r\n}\r\n\r\n/**\r\n * @title admined\r\n * @notice This contract is administered\r\n */\r\ncontract admined {\r\n    //mapping to user levels\r\n    mapping(address => uint8) public level;\r\n    //0 normal user\r\n    //1 basic admin\r\n    //2 master admin\r\n\r\n    /**\r\n    * @dev This contructor takes the msg.sender as the first master admin\r\n    */\r\n    constructor() internal {\r\n        level[msg.sender] = 2; //Set initial admin to contract creator\r\n        emit AdminshipUpdated(msg.sender,2); //Log the admin set\r\n    }\r\n\r\n    /**\r\n    * @dev This modifier limits function execution to the admin\r\n    */\r\n    modifier onlyAdmin(uint8 _level) { //A modifier to define admin-only functions\r\n        require(level[msg.sender] >= _level ); //It require the user level to be more or equal than _level\r\n        _;\r\n    }\r\n\r\n    /**\r\n    * @notice This function transfer the adminship of the contract to _newAdmin\r\n    * @param _newAdmin The new admin of the contract\r\n    */\r\n    function adminshipLevel(address _newAdmin, uint8 _level) onlyAdmin(2) public { //Admin can be set\r\n        require(_newAdmin != address(0)); //The new admin must not be zero address\r\n        level[_newAdmin] = _level; //New level is set\r\n        emit AdminshipUpdated(_newAdmin,_level); //Log the admin set\r\n    }\r\n\r\n    /**\r\n    * @dev Log Events\r\n    */\r\n    event AdminshipUpdated(address _newAdmin, uint8 _level);\r\n\r\n}\r\n\r\ncontract PRIWGRICO is admined {\r\n\r\n    using SafeMath for uint256;\r\n    //This ico have these possible states\r\n    enum State {\r\n        MAINSALE,\r\n        Successful\r\n    }\r\n    //Public variables\r\n\r\n    //Time-state Related\r\n    State public state = State.MAINSALE; //Set initial stage\r\n    uint256 public MAINSALEStart = now;\r\n    uint256 public SaleDeadline = MAINSALEStart.add(120 days); //Human time (GMT):\r\n    uint256 public completedAt; //Set when ico finish\r\n    //Token-eth related\r\n    uint256 public totalRaised; //eth collected in wei\r\n    uint256 public totalDistributed; //Whole sale tokens distributed\r\n    ERC20Basic public tokenReward; //Token contract address\r\n\r\n    //Contract details\r\n    address public creator; //Creator address\r\n    address public WGRholder; //Holder address\r\n    string public version = '0.1'; //Contract version\r\n\r\n    //Price related\r\n    uint256 public USDPriceInWei; // 0.01 cent (0.0001$) in wei\r\n\r\n    //events for log\r\n    event LogFundrisingInitialized(address indexed _creator);\r\n    event LogFundingReceived(address indexed _addr, uint _amount, uint _currentTotal);\r\n    event LogBeneficiaryPaid(address indexed _beneficiaryAddress);\r\n    event LogContributorsPayout(address indexed _addr, uint _amount);\r\n    event LogFundingSuccessful(uint _totalRaised);\r\n\r\n    //Modifier to prevent execution if ico has ended or is holded\r\n    modifier notFinished() {\r\n        require(state != State.Successful);\r\n        _;\r\n    }\r\n\r\n    /**\r\n    * @notice ICO constructor\r\n    * @param _addressOfTokenUsedAsReward is the token to distribute\r\n    */\r\n    constructor(ERC20Basic _addressOfTokenUsedAsReward, uint _initialUSDInWei) public {\r\n\r\n        creator = msg.sender; //Creator is set from deployer address\r\n        WGRholder = creator; //WGRholder is set to creator address\r\n        tokenReward = _addressOfTokenUsedAsReward; //Token address is set during deployment\r\n        USDPriceInWei = _initialUSDInWei;\r\n\r\n        emit LogFundrisingInitialized(creator); //Log contract initialization\r\n\r\n    }\r\n\r\n    /**\r\n    * @notice contribution handler\r\n    */\r\n    function contribute(address _target, uint256 _value) public notFinished payable {\r\n        require(now > MAINSALEStart); //Current time must be equal or greater than the start time\r\n\r\n        address user;\r\n        uint remaining;\r\n        uint256 tokenBought;\r\n        uint256 temp;\r\n\r\n        if(_target != address(0) && level[msg.sender] >= 1){\r\n          user = _target;\r\n          remaining = _value.mul(1e18);\r\n        } else {\r\n          user = msg.sender;\r\n          remaining = msg.value.mul(1e18);\r\n        }\r\n\r\n        totalRaised = totalRaised.add(remaining.div(1e18)); //ether received updated\r\n\r\n        while(remaining > 0){\r\n\r\n          (temp,remaining) = tokenBuyCalc(remaining);\r\n          tokenBought = tokenBought.add(temp);\r\n\r\n        }\r\n\r\n        temp = 0;\r\n\r\n        totalDistributed = totalDistributed.add(tokenBought); //Whole tokens sold updated\r\n        \r\n        WGRholder.transfer(address(this).balance); //After successful eth is send to WGRholder\r\n        emit LogBeneficiaryPaid(WGRholder); //Log transaction\r\n\r\n        tokenReward.transfer(user,tokenBought);\r\n\r\n        emit LogFundingReceived(user, msg.value, totalRaised); //Log the purchase\r\n\r\n        checkIfFundingCompleteOrExpired(); //Execute state checks\r\n    }\r\n\r\n\r\n    /*\r\n    * This function handle the token purchases values\r\n    */\r\n    function tokenBuyCalc(uint _value) internal view returns (uint sold,uint remaining) {\r\n\r\n      uint256 tempPrice = USDPriceInWei; //0.001$ in wei\r\n\r\n      //state == State.MAINSALE\r\n\r\n      tempPrice = tempPrice.mul(1000); //0.1$\r\n      sold = _value.div(tempPrice);\r\n\r\n      return (sold,0);\r\n\r\n    }\r\n\r\n    /**\r\n    * @notice Process to check contract current status\r\n    */\r\n    function checkIfFundingCompleteOrExpired() public {\r\n\r\n        if ( now > SaleDeadline && state != State.Successful){ //If Deadline is reached and not yet successful\r\n\r\n            state = State.Successful; //ICO becomes Successful\r\n            completedAt = now; //ICO is complete\r\n\r\n            emit LogFundingSuccessful(totalRaised); //we log the finish\r\n            successful(); //and execute closure\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n    * @notice successful closure handler\r\n    */\r\n    function successful() public {\r\n        require(state == State.Successful); //When successful\r\n        uint256 temp = tokenReward.balanceOf(address(this)); //Remanent tokens handle\r\n        tokenReward.transfer(creator,temp); //Try to transfer\r\n\r\n        emit LogContributorsPayout(creator,temp); //Log transaction\r\n\r\n        WGRholder.transfer(address(this).balance); //After successful eth is send to WGRholder\r\n\r\n        emit LogBeneficiaryPaid(WGRholder); //Log transaction\r\n\r\n    }\r\n\r\n    /*\r\n    * Funtion to update current price of ether\r\n    * it expects the value in wei of 0.01 cent (0.0001$)\r\n    */\r\n    function setPrice(uint _value) public onlyAdmin(2) {\r\n\r\n      USDPriceInWei = _value;\r\n\r\n    }\r\n    function setHolder(address _holder) public onlyAdmin(2) {\r\n\r\n      WGRholder = _holder;\r\n\r\n    }\r\n\r\n    /**\r\n    * @notice Function to claim any token stuck on contract\r\n    * @param _address Address of target token\r\n    */\r\n    function externalTokensRecovery(ERC20Basic _address) onlyAdmin(2) public{\r\n        require(state == State.Successful); //Only when sale finish\r\n\r\n        uint256 remainder = _address.balanceOf(address(this)); //Check remainder tokens\r\n        _address.transfer(msg.sender,remainder); //Transfer tokens to admin\r\n\r\n    }\r\n\r\n    /*\r\n    * @dev Direct payments handler\r\n    */\r\n    function () public payable {\r\n\r\n        contribute(address(0),0); //Forward to contribute function\r\n\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"creator\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"WGRholder\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"completedAt\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"externalTokensRecovery\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"version\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenReward\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_target\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"contribute\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"checkIfFundingCompleteOrExpired\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"setPrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"successful\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SaleDeadline\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"state\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"USDPriceInWei\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalRaised\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newAdmin\",\"type\":\"address\"},{\"name\":\"_level\",\"type\":\"uint8\"}],\"name\":\"adminshipLevel\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MAINSALEStart\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"level\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_holder\",\"type\":\"address\"}],\"name\":\"setHolder\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalDistributed\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_addressOfTokenUsedAsReward\",\"type\":\"address\"},{\"name\":\"_initialUSDInWei\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_creator\",\"type\":\"address\"}],\"name\":\"LogFundrisingInitialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_addr\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_amount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_currentTotal\",\"type\":\"uint256\"}],\"name\":\"LogFundingReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_beneficiaryAddress\",\"type\":\"address\"}],\"name\":\"LogBeneficiaryPaid\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_addr\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"LogContributorsPayout\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_totalRaised\",\"type\":\"uint256\"}],\"name\":\"LogFundingSuccessful\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_newAdmin\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_level\",\"type\":\"uint8\"}],\"name\":\"AdminshipUpdated\",\"type\":\"event\"}]","ContractName":"PRIWGRICO","CompilerVersion":"v0.4.25+commit.59dbf8f1","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000f92fce194846789795acd18877b6921206e1cd7d0000000000000000000000000000000000000000000000000000000000000000","Library":"","SwarmSource":"bzzr://eb067878094324ffc11362aa0ec46601c5a936600bda7622791935b7934526bc"}]}