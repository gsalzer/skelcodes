{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.24;\r\n\r\ncontract VerityToken {\r\n    function totalSupply() public constant returns (uint);\r\n    function balanceOf(address tokenOwner) public constant returns (uint balance);\r\n    function allowance(address tokenOwner, address spender) public constant returns (uint remaining);\r\n    function transfer(address to, uint tokens) public returns (bool success);\r\n    function approve(address spender, uint tokens) public returns (bool success);\r\n    function transferFrom(address from, address to, uint tokens) public returns (bool success);\r\n\r\n    event Transfer(address indexed from, address indexed to, uint tokens);\r\n    event Approval(address indexed tokenOwner, address indexed spender, uint tokens);\r\n}\r\n\r\ncontract MasterDataProviderLock {\r\n  address public owner;\r\n  address public tokenAddress;\r\n  bool public allFundsCanBeUnlocked = false;\r\n  uint public lastLockingTime;\r\n\r\n  // amount => lockedUntil\r\n  mapping(uint => uint) public validLockingAmountToPeriod;\r\n  mapping(address => mapping(string => uint)) lockingData;\r\n\r\n  event Withdrawn(address indexed withdrawer, uint indexed withdrawnAmount);\r\n  event FundsLocked(\r\n    address indexed user,\r\n    uint indexed lockedAmount,\r\n    uint indexed lockedUntil\r\n  );\r\n  event AllFundsCanBeUnlocked(\r\n    uint indexed triggeredTimestamp,\r\n    bool indexed canAllFundsBeUnlocked\r\n  );\r\n\r\n  modifier onlyOwner() {\r\n    require(msg.sender == owner);\r\n    _;\r\n  }\r\n\r\n  modifier onlyOnceLockingPeriodIsOver(address _user) {\r\n    require(\r\n      (now >= lockingData[_user][\"lockedUntil\"] || allFundsCanBeUnlocked)\r\n    );\r\n    _;\r\n  }\r\n\r\n  modifier checkValidLockingAmount(uint _funds) {\r\n    require(validLockingAmountToPeriod[_funds] != 0);\r\n    _;\r\n  }\r\n\r\n  modifier checkUsersTokenBalance(uint _fundsToTransfer) {\r\n    require(\r\n      _fundsToTransfer <= VerityToken(tokenAddress).balanceOf(msg.sender)\r\n    );\r\n    _;\r\n  }\r\n\r\n  modifier onlyOncePerUser(address _user) {\r\n    require(\r\n      lockingData[_user][\"amount\"] == 0 &&\r\n        lockingData[_user][\"lockedUntil\"] == 0\r\n    );\r\n    _;\r\n  }\r\n\r\n  modifier checkValidLockingTime() {\r\n    require(now <= lastLockingTime);\r\n    _;\r\n  }\r\n\r\n  modifier lastLockingTimeIsInTheFuture(uint _lastLockingTime) {\r\n    require(now < _lastLockingTime);\r\n    _;\r\n  }\r\n\r\n  modifier checkLockIsNotTerminated() {\r\n    require(allFundsCanBeUnlocked == false);\r\n    _;\r\n  }\r\n\r\n  constructor(\r\n    address _tokenAddress,\r\n    uint _lastLockingTime,\r\n    uint[3] _lockingAmounts,\r\n    uint[3] _lockingPeriods\r\n  )\r\n    public\r\n    lastLockingTimeIsInTheFuture(_lastLockingTime)\r\n  {\r\n    owner = msg.sender;\r\n    tokenAddress = _tokenAddress;\r\n    lastLockingTime = _lastLockingTime;\r\n\r\n    // expects \"ether\" format. Number is converted to wei:  num * 10**18\r\n    setValidLockingAmountToPeriod(_lockingAmounts, _lockingPeriods);\r\n  }\r\n\r\n  function lockFunds(uint _tokens)\r\n    public\r\n    checkValidLockingTime()\r\n    checkLockIsNotTerminated()\r\n    checkUsersTokenBalance(_tokens)\r\n    checkValidLockingAmount(_tokens)\r\n    onlyOncePerUser(msg.sender)\r\n  {\r\n    require(\r\n      VerityToken(tokenAddress).transferFrom(msg.sender, address(this), _tokens)\r\n    );\r\n\r\n    lockingData[msg.sender][\"amount\"] = _tokens;\r\n    lockingData[msg.sender][\"lockedUntil\"] = validLockingAmountToPeriod[_tokens];\r\n\r\n    emit FundsLocked(\r\n      msg.sender,\r\n      _tokens,\r\n      validLockingAmountToPeriod[_tokens]\r\n    );\r\n  }\r\n\r\n  function withdrawFunds()\r\n    public\r\n    onlyOnceLockingPeriodIsOver(msg.sender)\r\n  {\r\n    uint amountToBeTransferred = lockingData[msg.sender][\"amount\"];\r\n    lockingData[msg.sender][\"amount\"] = 0;\r\n    VerityToken(tokenAddress).transfer(msg.sender, amountToBeTransferred);\r\n\r\n    emit Withdrawn(\r\n      msg.sender,\r\n      amountToBeTransferred\r\n    );\r\n  }\r\n\r\n  function terminateTokenLock() public onlyOwner() {\r\n    allFundsCanBeUnlocked = true;\r\n\r\n    emit AllFundsCanBeUnlocked(\r\n      now,\r\n      allFundsCanBeUnlocked\r\n    );\r\n  }\r\n\r\n  function getUserData(address _user) public view returns (uint[2]) {\r\n    return [lockingData[_user][\"amount\"], lockingData[_user][\"lockedUntil\"]];\r\n  }\r\n\r\n  function setValidLockingAmountToPeriod(\r\n    uint[3] _lockingAmounts,\r\n    uint[3] _lockingPeriods\r\n  )\r\n  private\r\n  {\r\n    validLockingAmountToPeriod[_lockingAmounts[0] * 10 ** 18] = _lockingPeriods[0];\r\n    validLockingAmountToPeriod[_lockingAmounts[1] * 10 ** 18] = _lockingPeriods[1];\r\n    validLockingAmountToPeriod[_lockingAmounts[2] * 10 ** 18] = _lockingPeriods[2];\r\n  }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[],\"name\":\"withdrawFunds\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"validLockingAmountToPeriod\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lastLockingTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokens\",\"type\":\"uint256\"}],\"name\":\"lockFunds\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"terminateTokenLock\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"allFundsCanBeUnlocked\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"getUserData\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256[2]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"name\":\"_lastLockingTime\",\"type\":\"uint256\"},{\"name\":\"_lockingAmounts\",\"type\":\"uint256[3]\"},{\"name\":\"_lockingPeriods\",\"type\":\"uint256[3]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"withdrawer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"withdrawnAmount\",\"type\":\"uint256\"}],\"name\":\"Withdrawn\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"lockedAmount\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"lockedUntil\",\"type\":\"uint256\"}],\"name\":\"FundsLocked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"triggeredTimestamp\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"canAllFundsBeUnlocked\",\"type\":\"bool\"}],\"name\":\"AllFundsCanBeUnlocked\",\"type\":\"event\"}]","ContractName":"MasterDataProviderLock","CompilerVersion":"v0.4.24+commit.e67f0147","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"0000000000000000000000007ba8a5d59b21390a70b2ba968a183712e12a049c000000000000000000000000000000000000000000000000000000005b892dc00000000000000000000000000000000000000000000000000000000000000fa00000000000000000000000000000000000000000000000000000000000001f400000000000000000000000000000000000000000000000000000000000003e80000000000000000000000000000000000000000000000000000000005b9cf440000000000000000000000000000000000000000000000000000000005bc48140000000000000000000000000000000000000000000000000000000005bec0e40","Library":"","SwarmSource":"bzzr://17314b27302123949d58d9169df46496226d5426cd2a738ef21cfd39d4083004"}]}