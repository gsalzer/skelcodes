{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.22;\r\n\r\ncontract Game101 {\r\n\tstruct GameInfo {\r\n\t    uint funderNum;\r\n\t\tmapping(uint => address) funder;\r\n\t\tmapping(uint => address) winner;\r\n\t}\r\n\r\n\tGameInfo[] public games;\r\n\tuint public gameNum = 0;\r\n\tmapping(address => uint) public lastGame;\r\n\tmapping(address => uint) public funderBalance;\r\n\tmapping(address => address) public referrer;\r\n\r\n\taddress public manager;\r\n\tuint count = 10000000000000000;\r\n\r\n\tconstructor() public {\r\n\t\tmanager = msg.sender;\r\n\t\treferrer[manager] = manager;\r\n\t\tgames.push(GameInfo(0));\r\n\t}\r\n\r\n\tfunction addIn(address referr) public payable returns (bool){\r\n\t\trequire(\r\n\t\t\tmsg.value == 100 * count,\r\n\t\t\t\"ETH count is wrong!\"\r\n\t\t);\r\n\t\tif(lastGame[msg.sender] == 0){\r\n\t\t\tif(referr == msg.sender){\r\n\t\t\t\treferrer[msg.sender] = manager;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treferrer[msg.sender] = referr;\r\n\t\t\t}\r\n\t\t}\r\n\t\tgames[gameNum].funder[games[gameNum].funderNum] = msg.sender;\r\n\t\tgames[gameNum].funderNum += 1;\r\n\t\tlastGame[msg.sender] = gameNum;\r\n\t\tif (games[gameNum].funderNum == 10) {\r\n\t\t\tuint winNum = (now + gameNum)%10;\r\n\t\t\tgames[gameNum].winner[0] = games[gameNum].funder[winNum];\r\n\t\t\tgames[gameNum].winner[1] = games[gameNum].funder[(winNum+3)%10];\r\n\t\t\tgames[gameNum].winner[2] = games[gameNum].funder[(winNum+6)%10];\r\n\t\t\tfunderBalance[games[gameNum].winner[0]] += 450 * count;\r\n\t\t\tfunderBalance[games[gameNum].winner[1]] += 300 * count;\r\n\t\t\tfunderBalance[games[gameNum].winner[2]] += 200 * count;\r\n\t\t\tfunderBalance[manager] += 10 * count;\r\n\t\t\tfor(uint8 i=0;i<10;i++){\r\n\t\t\t\taddress addr = referrer[games[gameNum].funder[i]];\r\n\t\t\t\tfunderBalance[addr] += count;\r\n\t\t\t\tfunderBalance[referrer[addr]] += count;\r\n\t\t\t\tfunderBalance[referrer[referrer[addr]]] += count / 2;\r\n\t\t\t\tfunderBalance[referrer[referrer[referrer[addr]]]] += count / 2;\r\n\t\t\t\tfunderBalance[referrer[referrer[referrer[referrer[addr]]]]] += count / 2;\r\n\t\t\t\tfunderBalance[referrer[referrer[referrer[referrer[referrer[addr]]]]]] += count / 2;\r\n\t\t\t}\r\n\t\t\tgameNum += 1;\r\n\t\t\tgames.push(GameInfo(0));\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\tfunction withdraw(uint amount) public {\r\n\t\trequire(\r\n\t\t\tfunderBalance[msg.sender] >= amount,\r\n\t\t\t\"ETH Out of balance!\"\r\n\t\t);\r\n\t\tfunderBalance[msg.sender] += -amount;\r\n        msg.sender.transfer(amount);\r\n    }\r\n\r\n\tfunction getLastGame() public view returns (uint last, uint num, uint balance, address winer1, address winer2, address winer3){\r\n\t\tlast = lastGame[msg.sender];\r\n\t\tGameInfo storage  game = games[lastGame[msg.sender]];\r\n\t\tnum = game.funderNum;\r\n\t\tif(game.funderNum == 10){\r\n\t\t\twiner1 = game.winner[0];\r\n\t\t\twiner2 = game.winner[1];\r\n\t\t\twiner3 = game.winner[2];\r\n\t\t}\r\n\t\tbalance = funderBalance[msg.sender];\r\n\t}\r\n\r\n\tfunction getNewGame() public view returns (uint last, uint num, address winer1, address winer2, address winer3){\r\n\t\tlast = gameNum;\r\n\t\tGameInfo storage  game = games[gameNum];\r\n\t\tnum = game.funderNum;\r\n\t\tif(game.funderNum == 3){\r\n\t\t\twiner1 = game.winner[0];\r\n\t\t\twiner2 = game.winner[1];\r\n\t\t\twiner3 = game.winner[2];\r\n\t\t}\r\n\t}\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"gameNum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"lastGame\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"games\",\"outputs\":[{\"name\":\"funderNum\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"referrer\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"manager\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getLastGame\",\"outputs\":[{\"name\":\"last\",\"type\":\"uint256\"},{\"name\":\"num\",\"type\":\"uint256\"},{\"name\":\"balance\",\"type\":\"uint256\"},{\"name\":\"winer1\",\"type\":\"address\"},{\"name\":\"winer2\",\"type\":\"address\"},{\"name\":\"winer3\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNewGame\",\"outputs\":[{\"name\":\"last\",\"type\":\"uint256\"},{\"name\":\"num\",\"type\":\"uint256\"},{\"name\":\"winer1\",\"type\":\"address\"},{\"name\":\"winer2\",\"type\":\"address\"},{\"name\":\"winer3\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"funderBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"referr\",\"type\":\"address\"}],\"name\":\"addIn\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]","ContractName":"Game101","CompilerVersion":"v0.4.24+commit.e67f0147","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://bf44c5a66851f94f5896d4e37f5313ad9a8e9a2602867c1e89b0bba4b18d449e"}]}