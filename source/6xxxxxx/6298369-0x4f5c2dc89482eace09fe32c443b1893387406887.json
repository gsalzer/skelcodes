{"status":"1","message":"OK","result":[{"SourceCode":"//etherate v.1.0\r\n//https://etherate.org\r\n//ETHERATE - BET and WIN ETH\r\n/*\r\n╔═══╗╔════╗╔╗─╔╗╔═══╗╔═══╗╔═══╗╔════╗╔═══╗\r\n║╔══╝║╔╗╔╗║║║─║║║╔══╝║╔═╗║║╔═╗║║╔╗╔╗║║╔══╝\r\n║╚══╗╚╝║║╚╝║╚═╝║║╚══╗║╚═╝║║║─║║╚╝║║╚╝║╚══╗\r\n║╔══╝──║║──║╔═╗║║╔══╝║╔╗╔╝║╚═╝║──║║──║╔══╝\r\n║╚══╗──║║──║║─║║║╚══╗║║║╚╗║╔═╗║──║║──║╚══╗\r\n╚═══╝──╚╝──╚╝─╚╝╚═══╝╚╝╚═╝╚╝─╚╝──╚╝──╚═══╝\r\n*/\r\n//69 84 72 69 82 65 84 69 \r\npragma solidity ^0.4.24;\r\ncontract Control\r\n{\r\n    mapping(address => uint8) public agents;\r\n    modifier onlyADM()\r\n    {\r\n        require(agents[msg.sender] == 1);\r\n        _;\r\n    }\r\n    event ChangePermission(address indexed _called, address indexed _agent, uint8 _value);\r\n    function changePermission(address _agent, uint8 _value) public onlyADM()\r\n    {\r\n        require(msg.sender != _agent);\r\n        agents[_agent] = _value;\r\n        ChangePermission(msg.sender, _agent, _value);\r\n    }\r\n    bool public status;\r\n    event ChangeStatus(address indexed _called, bool _value);\r\n    function changeStatus(bool _value) public onlyADM()\r\n    {\r\n        status = _value;\r\n        ChangeStatus(msg.sender, _value);\r\n    }\r\n    modifier onlyRun()\r\n    {\r\n        require(status);\r\n        _;\r\n    }\r\n    event WithdrawWEI(address indexed _called, address indexed _to, uint256 _wei, uint8 indexed _type);\r\n    uint256 private totalDonateWEI;\r\n    event Donate(address indexed _from, uint256 _value);\r\n    function () payable //Thank you very much ;)\r\n    {\r\n        totalDonateWEI = totalDonateWEI + msg.value;\r\n        Donate(msg.sender, msg.value);\r\n    }\r\n    function getTotalDonateWEIInfo() public onlyADM() constant returns(uint256)\r\n    {\r\n        return totalDonateWEI;\r\n    }\r\n    function withdrawDonateWEI(address _to) public onlyADM()\r\n    {\r\n        _to.transfer(totalDonateWEI);\r\n        WithdrawWEI(msg.sender, _to, totalDonateWEI, 1);\r\n        totalDonateWEI = 0;\r\n    }\r\n    function Control()\r\n    {\r\n        agents[msg.sender] = 1;\r\n        status = true;\r\n    }\r\n}\r\n\r\ncontract Core is Control\r\n{\r\n    ///RANDOM\r\n    function random(uint256 _min, uint256 _max) public constant returns(uint256)\r\n    {\r\n        return uint256(sha3(block.blockhash(block.number - 1))) % (_min + _max) - _min;\r\n\t}\r\n    ///*RANDOM\r\n    uint256 public betSizeFINNEY;\r\n    uint256 public totalBets;\r\n    uint256 public limitAgentBets;\r\n    uint256 public roundNum;\r\n    uint256 public betsNum;\r\n    uint256 public commissionPCT;\r\n    bool public commissionType;\r\n    uint256 private bankBalanceWEI;\r\n    uint256 private commissionBalanceWEI;\r\n    uint256 private overBalanceWEI;\r\n    uint256 public timeoutSEC;\r\n    uint256 public lastBetTimeSEC;\r\n    function getOverBalanceWEIInfo() public onlyADM() constant returns(uint256)\r\n    {\r\n        return overBalanceWEI;\r\n    }\r\n    function getBankBalanceWEIInfo() public onlyADM() constant returns(uint256)\r\n    {\r\n        return bankBalanceWEI;\r\n    }\r\n    function getCommissionBalanceWEIInfo() public onlyADM() constant returns(uint256)\r\n    {\r\n        return commissionBalanceWEI;\r\n    }\r\n    function withdrawOverBalanceWEI(address _to) public onlyADM()\r\n    {\r\n        _to.transfer(overBalanceWEI);\r\n        WithdrawWEI(msg.sender, _to, overBalanceWEI, 2);\r\n        overBalanceWEI = 0;\r\n    }\r\n    function withdrawCommissionBalanceWEI(address _to) public onlyADM()\r\n    {\r\n        _to.transfer(commissionBalanceWEI);\r\n        WithdrawWEI(msg.sender, _to, commissionBalanceWEI, 3);\r\n        commissionBalanceWEI = 0;\r\n    }\r\n    mapping(address => uint256) private agentAddressId;\r\n    address[] private agentIdAddress;\r\n    uint256[] private agentIdBetsSum;\r\n    uint256[] private agentIdBankBalanceWEI;\r\n    uint256[] private betsNumAgentId;\r\n    function getAgentId(address _agentAddress) public constant returns(uint256)\r\n    {\r\n        uint256 value;\r\n        uint256 id = agentAddressId[_agentAddress];\r\n        if (id != 0 && id <= agentIdAddress.length)\r\n        {\r\n            if (agentIdAddress[id - 1] == _agentAddress)\r\n            {\r\n                value = agentAddressId[_agentAddress];\r\n            }\r\n        }\r\n        return value;\r\n    }\r\n    function getAgentAdress(uint256 _agentId) public constant returns(address)\r\n    {\r\n        address value;\r\n        if (_agentId > 0 && _agentId <= agentIdAddress.length)\r\n        {\r\n            value = agentIdAddress[_agentId - 1];\r\n        }\r\n        return value;\r\n    }\r\n    function getAgentBetsSum(uint256 _agentId) public constant returns(uint256)\r\n    {\r\n        uint256 value;\r\n        if (_agentId > 0 && _agentId <= agentIdBetsSum.length)\r\n        {\r\n            value = agentIdBetsSum[_agentId - 1];\r\n        }\r\n        return value;\r\n    }\r\n    function getAgentBankBalanceWEI(uint256 _agentId) public constant returns(uint256)\r\n    {\r\n        uint256 value;\r\n        if (_agentId > 0 && _agentId <= agentIdBankBalanceWEI.length)\r\n        {\r\n            value = agentIdBankBalanceWEI[_agentId - 1];\r\n        }\r\n        return value;\r\n    }\r\n    function getPositionBetAgent(uint256 _positionBet) public constant returns(uint256)\r\n    {\r\n        uint256 value;\r\n        if (_positionBet > 0 && _positionBet <= betsNumAgentId.length)\r\n        {\r\n            value = betsNumAgentId[_positionBet - 1];\r\n        }\r\n        return value;\r\n    }\r\n    function getAgentsNum() public constant returns(uint256)\r\n    {\r\n        return agentIdAddress.length;\r\n    }\r\n    function Core()\r\n    {\r\n        roundNum = 1;\r\n    }\r\n    event ChangeGameSettings(address indexed _called, uint256 _betSizeFINNEY, uint256 _totalBets, uint256 _limitAgentBets, uint256 _commissionPCT, bool _commissionType, uint256 _timeoutSEC);\r\n    function changeGameSettings(uint256 _betSizeFINNEY, uint256 _totalBets, uint256 _limitAgentBets, uint256 _commissionPCT, bool _commissionType, uint256 _timeoutSEC) public onlyADM()\r\n    {\r\n        require(betsNum == 0);\r\n        require(_limitAgentBets < _totalBets);\r\n        require(_commissionPCT < 100);\r\n        betSizeFINNEY = _betSizeFINNEY;\r\n        totalBets = _totalBets;\r\n        limitAgentBets = _limitAgentBets;\r\n        commissionPCT = _commissionPCT;\r\n        commissionType = _commissionType;\r\n        timeoutSEC = _timeoutSEC;\r\n        ChangeGameSettings(msg.sender, _betSizeFINNEY, _totalBets, _limitAgentBets, _commissionPCT, _commissionType, _timeoutSEC);\r\n    }\r\n    event Bet(address indexed _agent, uint256 _agentId, uint256 _round, uint256 _bets, uint256 _WEI);\r\n    event Winner(address indexed _agent, uint256 _agentId, uint256 _round, uint256 _betsSum, uint256 _depositWEI, uint256 _winWEI, uint256 _luckyNumber);\r\n    function bet() payable public onlyRun() //BET AND WIN\r\n    {\r\n        require(msg.value > 0);\r\n        uint256 agentID;\r\n        agentID = getAgentId(msg.sender);\r\n        if (agentID == 0)\r\n        {\r\n            agentIdAddress.push(msg.sender);\r\n            agentID = agentIdAddress.length;\r\n            agentAddressId[msg.sender] = agentID;\r\n            agentIdBetsSum.push(0);\r\n            agentIdBankBalanceWEI.push(0);\r\n        }\r\n        bankBalanceWEI = bankBalanceWEI + msg.value;\r\n        agentIdBankBalanceWEI[agentID - 1] = getAgentBankBalanceWEI(agentID) + msg.value;\r\n        uint256 agentTotalBets = (getAgentBankBalanceWEI(agentID)/1000000000000000)/betSizeFINNEY;\r\n        uint256 agentAmountBets = agentTotalBets - getAgentBetsSum(agentID);\r\n        if (agentAmountBets > 0)\r\n        {\r\n            if ((agentAmountBets + getAgentBetsSum(agentID) + betsNum) > totalBets)\r\n            {\r\n                agentAmountBets = \r\n                totalBets - betsNum;\r\n            }\r\n            if ((agentAmountBets + getAgentBetsSum(agentID)) > limitAgentBets)\r\n            {\r\n                agentAmountBets = \r\n                limitAgentBets - getAgentBetsSum(agentID);   \r\n            }\r\n            \r\n            agentIdBetsSum[agentID - 1] = getAgentBetsSum(agentID) + agentAmountBets;\r\n            \r\n            while (betsNumAgentId.length < betsNum + agentAmountBets)\r\n            {\r\n                betsNumAgentId.push(agentID);\r\n            }\r\n            \r\n            betsNum = betsNum + agentAmountBets;\r\n            \r\n            Bet(msg.sender, agentID, roundNum, agentAmountBets, msg.value);\r\n        }\r\n        lastBetTimeSEC = block.timestamp;\r\n        if (betsNum == totalBets)\r\n        {\r\n            _play();\r\n        }\r\n    }\r\n    function playForcibly() public onlyRun() onlyADM()\r\n    {\r\n        require(block.timestamp + timeoutSEC > lastBetTimeSEC);\r\n        _play();\r\n    }\r\n    function _play() private\r\n    {\r\n        uint256 luckyNumber = random(1, betsNum);\r\n        uint256 winnerID = betsNumAgentId[luckyNumber - 1];\r\n        address winnerAddress = getAgentAdress(winnerID);\r\n        uint256 jackpotBankWEI = betsNum * betSizeFINNEY * 1000000000000000;\r\n        uint256 overWEI = bankBalanceWEI - jackpotBankWEI;\r\n        uint256 commissionWEI;\r\n        if (commissionType)\r\n        {\r\n            commissionWEI = (jackpotBankWEI/100) * commissionPCT;\r\n        }\r\n        else\r\n        {\r\n            commissionWEI = (betsNum - getAgentBetsSum(winnerID)) * (betSizeFINNEY * 1000000000000000) / 100 * commissionPCT;\r\n        }\r\n        winnerAddress.transfer(jackpotBankWEI - commissionWEI);\r\n        commissionBalanceWEI = commissionBalanceWEI + commissionWEI;\r\n        overBalanceWEI = overBalanceWEI + overWEI;\r\n        Winner(winnerAddress, winnerID, roundNum, getAgentBetsSum(winnerID), getAgentBankBalanceWEI(winnerID), jackpotBankWEI - commissionWEI, luckyNumber);\r\n        bankBalanceWEI = 0;\r\n        betsNum = 0;\r\n        roundNum++;\r\n        delete agentIdAddress;\r\n        delete agentIdBetsSum;\r\n        delete agentIdBankBalanceWEI;\r\n        delete betsNumAgentId;\r\n    }\r\n}\r\n//https://etherate.org\r\n//Blog (Medium): https://medium.com/etherate\r\n//Reddit: https://www.reddit.com/r/EtheRate\r\n//Twitter: https://twitter.com/etherate_org\r\n//Facebook: https://www.facebook.com/etherate\r\n//Instagram: https://www.instagram.com/etherate_org\r\n//Telegram: https://t.me/etherate","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"withdrawOverBalanceWEI\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_agentAddress\",\"type\":\"address\"}],\"name\":\"getAgentId\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"playForcibly\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAgentsNum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"lastBetTimeSEC\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"bet\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"roundNum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"status\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"betSizeFINNEY\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"limitAgentBets\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_betSizeFINNEY\",\"type\":\"uint256\"},{\"name\":\"_totalBets\",\"type\":\"uint256\"},{\"name\":\"_limitAgentBets\",\"type\":\"uint256\"},{\"name\":\"_commissionPCT\",\"type\":\"uint256\"},{\"name\":\"_commissionType\",\"type\":\"bool\"},{\"name\":\"_timeoutSEC\",\"type\":\"uint256\"}],\"name\":\"changeGameSettings\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_agentId\",\"type\":\"uint256\"}],\"name\":\"getAgentAdress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_agent\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint8\"}],\"name\":\"changePermission\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_agentId\",\"type\":\"uint256\"}],\"name\":\"getAgentBetsSum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_value\",\"type\":\"bool\"}],\"name\":\"changeStatus\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_min\",\"type\":\"uint256\"},{\"name\":\"_max\",\"type\":\"uint256\"}],\"name\":\"random\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_positionBet\",\"type\":\"uint256\"}],\"name\":\"getPositionBetAgent\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"commissionType\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getCommissionBalanceWEIInfo\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"commissionPCT\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_agentId\",\"type\":\"uint256\"}],\"name\":\"getAgentBankBalanceWEI\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalBets\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"withdrawCommissionBalanceWEI\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getBankBalanceWEIInfo\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"withdrawDonateWEI\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"timeoutSEC\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOverBalanceWEIInfo\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"betsNum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTotalDonateWEIInfo\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"agents\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_called\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_betSizeFINNEY\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_totalBets\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_limitAgentBets\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_commissionPCT\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_commissionType\",\"type\":\"bool\"},{\"indexed\":false,\"name\":\"_timeoutSEC\",\"type\":\"uint256\"}],\"name\":\"ChangeGameSettings\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_agent\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_agentId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_round\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_bets\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_WEI\",\"type\":\"uint256\"}],\"name\":\"Bet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_agent\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_agentId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_round\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_betsSum\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_depositWEI\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_winWEI\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_luckyNumber\",\"type\":\"uint256\"}],\"name\":\"Winner\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_called\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_agent\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint8\"}],\"name\":\"ChangePermission\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_called\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"bool\"}],\"name\":\"ChangeStatus\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_called\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_wei\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"_type\",\"type\":\"uint8\"}],\"name\":\"WithdrawWEI\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Donate\",\"type\":\"event\"}]","ContractName":"Core","CompilerVersion":"v0.4.24+commit.e67f0147","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://d238dc69c8a8eebf564c52276e484ada12a3383153047801c962272b93e0c3ff"}]}