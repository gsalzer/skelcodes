{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.23;\r\n\r\n/*** @title SafeMath\r\n * @dev https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/math/SafeMath.sol */\r\nlibrary SafeMath {\r\n\r\n    function mul(uint256 a, uint256 b) internal pure returns (uint256 c) {\r\n        if (a == 0) {\r\n            return 0;\r\n        }\r\n        c = a * b;\r\n        assert(c / a == b);\r\n        return c;\r\n    }\r\n\r\n    function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        return a / b;\r\n    }\r\n\r\n    function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n        assert(b <= a);\r\n        return a - b;\r\n    }\r\n\r\n    function add(uint256 a, uint256 b) internal pure returns (uint256 c) {\r\n        c = a + b;\r\n        assert(c >= a);\r\n        return c;\r\n    }\r\n}\r\n\r\ninterface ERC20 {\r\n    function transfer (address _beneficiary, uint256 _tokenAmount) external returns (bool);\r\n    function mintFromICO(address _to, uint256 _amount) external  returns(bool);\r\n    function isWhitelisted(address wlCandidate) external returns(bool);\r\n}\r\n/**\r\n * @title Ownable\r\n * @dev https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/ownership/Ownable.sol\r\n */\r\ncontract Ownable {\r\n    address public owner;\r\n\r\n    constructor() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlyOwner() {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n}\r\n\r\n/**\r\n * @title CrowdSale\r\n * @dev https://github.com/\r\n */\r\ncontract OneStageMainSale is Ownable {\r\n\r\n    ERC20 public token;\r\n    \r\n    ERC20 public authorize;\r\n    \r\n    using SafeMath for uint;\r\n\r\n    address public backEndOperator = msg.sender;\r\n    address team = 0x7eDE8260e573d3A3dDfc058f19309DF5a1f7397E; // 33% - team и ранние инвесторы проекта\r\n    address bounty = 0x0cdb839B52404d49417C8Ded6c3E2157A06CdD37; // 2% - для баунти программы\r\n    address reserve = 0xC032D3fCA001b73e8cC3be0B75772329395caA49; // 5%  - для резерва\r\n\r\n    mapping(address=>bool) public whitelist;\r\n\r\n    mapping(address => uint256) public investedEther;\r\n\r\n    uint256 public start1StageSale = 1539561601; // Monday, 15-Oct-18 00:00:01 UTC\r\n    uint256 public end1StageSale = 1542326399; // Thursday, 15-Nov-18 23:59:59 UTC\r\n\r\n    uint256 public investors; // общее количество инвесторов\r\n    uint256 public weisRaised; // общее колиество собранных Ether\r\n\r\n    uint256 public softCap1Stage = 1000000*1e18; // $2,600,000 = 1,000,000 INM\r\n    uint256 public hardCap1Stage = 1700000*1e18; // 1,700,000 INM = $4,420,000 USD\r\n\r\n    uint256 public buyPrice; // 2.6 USD \r\n    uint256 public dollarPrice; // Ether by USD\r\n\r\n    uint256 public soldTokens; // solded tokens - > 1,700,000 INM\r\n\r\n    event Authorized(address wlCandidate, uint timestamp);\r\n    event Revoked(address wlCandidate, uint timestamp);\r\n    event UpdateDollar(uint256 time, uint256 _rate);\r\n\r\n    modifier backEnd() {\r\n        require(msg.sender == backEndOperator || msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    // конструктор контракта\r\n    constructor(ERC20 _token, ERC20 _authorize, uint256 usdETH) public {\r\n        token = _token;\r\n        authorize = _authorize;\r\n        dollarPrice = usdETH;\r\n        buyPrice = (1e17/dollarPrice)*26; // 2.60 usd\r\n    }\r\n\r\n    // изменение даты начала предварительной распродажи\r\n    function setStartOneSale(uint256 newStart1Sale) public onlyOwner {\r\n        start1StageSale = newStart1Sale;\r\n    }\r\n\r\n    // изменение даты окончания предварительной распродажи\r\n    function setEndOneSale(uint256 newEnd1Sale) public onlyOwner {\r\n        end1StageSale = newEnd1Sale;\r\n    }\r\n\r\n    // Изменение адреса оператора бекэнда\r\n    function setBackEndAddress(address newBackEndOperator) public onlyOwner {\r\n        backEndOperator = newBackEndOperator;\r\n    }\r\n\r\n    // Изменение курса доллра к эфиру\r\n    function setBuyPrice(uint256 _dollar) public backEnd {\r\n        dollarPrice = _dollar;\r\n        buyPrice = (1e17/dollarPrice)*26; // 2.60 usd\r\n        emit UpdateDollar(now, dollarPrice);\r\n    }\r\n\r\n\r\n    /*******************************************************************************\r\n     * Payable's section\r\n     */\r\n\r\n    function isOneStageSale() public constant returns(bool) {\r\n        return now >= start1StageSale && now <= end1StageSale;\r\n    }\r\n\r\n    // callback функция контракта\r\n    function () public payable {\r\n        require(authorize.isWhitelisted(msg.sender));\r\n        require(isOneStageSale());\r\n        require(msg.value >= 19*buyPrice); // ~ 50 USD\r\n        SaleOneStage(msg.sender, msg.value);\r\n        require(soldTokens<=hardCap1Stage);\r\n        investedEther[msg.sender] = investedEther[msg.sender].add(msg.value);\r\n    }\r\n\r\n    // выпуск токенов в период предварительной распродажи\r\n    function SaleOneStage(address _investor, uint256 _value) internal {\r\n        uint256 tokens = _value.mul(1e18).div(buyPrice);\r\n        uint256 tokensByDate = tokens.div(10);\r\n        uint256 bonusSumTokens = tokens.mul(bonusSum(tokens)).div(100);\r\n        tokens = tokens.add(tokensByDate).add(bonusSumTokens); // 60%\r\n        token.mintFromICO(_investor, tokens);\r\n        soldTokens = soldTokens.add(tokens);\r\n\r\n        uint256 tokensTeam = tokens.mul(11).div(20); // 33 %\r\n        token.mintFromICO(team, tokensTeam);\r\n\r\n        uint256 tokensBoynty = tokens.div(30); // 2 %\r\n        token.mintFromICO(bounty, tokensBoynty);\r\n\r\n        uint256 tokensReserve = tokens.div(12);  // 5 %\r\n        token.mintFromICO(reserve, tokensReserve);\r\n\r\n        weisRaised = weisRaised.add(_value);\r\n    }\r\n\r\n    function bonusSum(uint256 _amount) pure private returns(uint256) {\r\n        if (_amount > 76923*1e18) { // 200k+\t10% INMCoin\r\n            return 10;\r\n        } else if (_amount > 19230*1e18) { // 50k - 200k\t7% INMCoin\r\n            return 7;\r\n        } else if (_amount > 7692*1e18) { // 20k - 50k\t5% INMCoin\r\n            return 5;\r\n        } else if (_amount > 1923*1e18) { // 5k - 20k\t3% INMCoin\r\n            return 3;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n\r\n    // Отправка эфира с контракта\r\n    function transferEthFromContract(address _to, uint256 amount) public onlyOwner {\r\n        _to.transfer(amount);\r\n    }\r\n\r\n    /*******************************************************************************\r\n     * Refundable\r\n     */\r\n    function refund1ICO() public {\r\n        require(soldTokens < softCap1Stage && now > end1StageSale);\r\n        uint rate = investedEther[msg.sender];\r\n        require(investedEther[msg.sender] >= 0);\r\n        investedEther[msg.sender] = 0;\r\n        msg.sender.transfer(rate);\r\n        weisRaised = weisRaised.sub(rate);\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"backEndOperator\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"investedEther\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transferEthFromContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dollarPrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"soldTokens\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_dollar\",\"type\":\"uint256\"}],\"name\":\"setBuyPrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"softCap1Stage\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"buyPrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newEnd1Sale\",\"type\":\"uint256\"}],\"name\":\"setEndOneSale\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"investors\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"whitelist\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"authorize\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newBackEndOperator\",\"type\":\"address\"}],\"name\":\"setBackEndAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"end1StageSale\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"hardCap1Stage\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"refund1ICO\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"weisRaised\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"start1StageSale\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newStart1Sale\",\"type\":\"uint256\"}],\"name\":\"setStartOneSale\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isOneStageSale\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"token\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_token\",\"type\":\"address\"},{\"name\":\"_authorize\",\"type\":\"address\"},{\"name\":\"usdETH\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"wlCandidate\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"timestamp\",\"type\":\"uint256\"}],\"name\":\"Authorized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"wlCandidate\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"timestamp\",\"type\":\"uint256\"}],\"name\":\"Revoked\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"time\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_rate\",\"type\":\"uint256\"}],\"name\":\"UpdateDollar\",\"type\":\"event\"}]","ContractName":"OneStageMainSale","CompilerVersion":"v0.4.25+commit.59dbf8f1","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"0000000000000000000000002ec3fea4b59b6c0c32fb7442590f6abb9926a34c000000000000000000000000b821cfcf5033523ad74b1c48e97e2f13e9f0b9f000000000000000000000000000000000000000000000000000000000000000ce","Library":"","SwarmSource":"bzzr://1d3697873b126fb74c9fa06cb044ea1571503975f2806909c9e989a6a2b4b53a"}]}