{"status":"1","message":"OK","result":[{"SourceCode":"//Copyright CryptoDiamond srl\r\n//Luigi Di Benedetto | Brescia (Italy) | CEO CryptoDiamond srl\r\n\r\n//social:   fb          - https://www.facebook.com/LuigiDiBenedettoBS\r\n//          linkedin    - https://www.linkedin.com/in/luigi-di-benedetto\r\n\r\n//          website     - https://www.cryptodiamond.it/\r\n\r\npragma solidity ^0.4.24;\r\n\r\ncontract cryptodiamondwatch {\r\n    \r\n    string private ID; //format W-CRIBIXX (es: W-CRIBI01/W-CRIBI02...)\r\n    string private name;\r\n    string private surname;\r\n    string private comment;\r\n    string private metadataURL;\r\n    \r\n    uint256 private nID=1; //from ID (es: W-CRIBI01 => nID: 01)\r\n    \r\n    uint256 private amount;\r\n    \r\n    uint256 private unlockTime;\r\n    \r\n    address private tokenERC721Address;\r\n    address private owner;\r\n    address private cryptodiamondAddress;\r\n    \r\n    //eventi\r\n    event Created(string _id, address _address);\r\n    event InfoSetted(string _name, string _surname, string _comment);\r\n    event OwnershipChanged(address _address, address _newOwner,string _comment);\r\n    event Received(address _address ,uint _value);\r\n    \r\n    //id dell'orologio e indirizzo del tokenerc721 corrispondente\r\n    constructor(string _ID, address _tokenERC721Address)public{\r\n        ID = _ID;\r\n        tokenERC721Address = _tokenERC721Address;\r\n        cryptodiamondAddress = msg.sender;\r\n        name = \"not assigned yet\";\r\n        surname = \"not assigned yet\";\r\n        comment = \"not assigned yet\";\r\n        unlockTime=0;\r\n        amount=0;\r\n        owner=msg.sender;\r\n        emit Created(_ID,msg.sender);\r\n    }\r\n    \r\n    \r\n    modifier onlyOwner() { \r\n    \trequire (msg.sender == owner); \r\n    \t_; \r\n    }\r\n    \r\n    modifier onlyCryptodiamond() { \r\n    \trequire (msg.sender == cryptodiamondAddress); \r\n    \t_; \r\n    }\r\n    \r\n    modifier onlyToken() { \r\n    \trequire (msg.sender == tokenERC721Address); \r\n    \t_; \r\n    }\r\n    \r\n    \r\n    function setInfo(string _name, string _surname, string _comment)public onlyCryptodiamond{\r\n        name = _name;\r\n        surname = _surname;\r\n        comment = _comment;\r\n    }\r\n    \r\n    function fee(uint256 _amount,uint256 _fee) private returns(uint256){\r\n        uint256 calcFee;\r\n        calcFee=(_fee*_amount)/100;\r\n        return(_fee*amount/100);\r\n    }\r\n    \r\n    //fallback function\r\n    function () public payable{\r\n        uint256 cFee = fee(msg.value,1);\r\n        owner.transfer(msg.value-cFee);\r\n        cryptodiamondAddress.transfer(cFee);\r\n        emit Received(msg.sender,msg.value);\r\n    }\r\n    \r\n    \r\n    //solo Cryptodiamond puÃ² inviare ether inizialmente\r\n    function ethIN() public payable onlyCryptodiamond{\r\n            amount+=msg.value;\r\n            unlockTime=now+7889400;    //7889400; +3 mesi\r\n            emit Received(msg.sender,msg.value);\r\n    }\r\n    \r\n    function allEthOUT() public onlyOwner{\r\n        if(now>=unlockTime){\r\n            owner.transfer(amount);\r\n            amount = 0;\r\n            unlockTime = 0;\r\n        }\r\n        else\r\n            revert();\r\n    }\r\n\r\n   function transferOwnershipTo(address _newOwner, string _comment) external onlyToken{\r\n        //cryptodiamondAddress.transfer(0.01 ether); //Cryptodiamond fee\r\n        //amount -=0.01 ether;\r\n        require(_newOwner != address(0));\r\n        require(_newOwner != cryptodiamondAddress);\r\n        emit OwnershipChanged(msg.sender,_newOwner,_comment);\r\n   \t\towner = _newOwner;\r\n   }\r\n    \r\n    function getOwner() public constant returns (address){\r\n        return owner;\r\n    }\r\n    function getCryptodiamondAddress() public constant returns (address){\r\n        return cryptodiamondAddress;\r\n    }\r\n    function getID() public constant returns (string){\r\n        return ID;\r\n    }\r\n    \r\n    function getNID() public constant returns (uint256){\r\n        return nID;\r\n    }\r\n\r\n    function getMetadataURL() public constant returns (string){\r\n        return metadataURL;\r\n    }\r\n    \r\n    function getName() public constant returns (string){\r\n        return name;\r\n    }\r\n    function getSurname() public constant returns (string){\r\n        return surname;\r\n    }\r\n    \r\n    function getUnlocktime() public constant returns (uint){\r\n        return unlockTime;\r\n    }\r\n    \r\n    function getAmount() external constant returns (uint){\r\n        return amount;\r\n    }\r\n    \r\n    \r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"getName\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"allEthOUT\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getMetadataURL\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_name\",\"type\":\"string\"},{\"name\":\"_surname\",\"type\":\"string\"},{\"name\":\"_comment\",\"type\":\"string\"}],\"name\":\"setInfo\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getUnlocktime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getCryptodiamondAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"},{\"name\":\"_comment\",\"type\":\"string\"}],\"name\":\"transferOwnershipTo\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getID\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getSurname\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"ethIN\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNID\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_ID\",\"type\":\"string\"},{\"name\":\"_tokenERC721Address\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_id\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"Created\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_name\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_surname\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_comment\",\"type\":\"string\"}],\"name\":\"InfoSetted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_address\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_newOwner\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_comment\",\"type\":\"string\"}],\"name\":\"OwnershipChanged\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_address\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Received\",\"type\":\"event\"}]","ContractName":"cryptodiamondwatch","CompilerVersion":"v0.4.24+commit.e67f0147","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000000000000000000000000000000000000000004000000000000000000000000005ae2edfb986e3a8c3a5887dff69d46c665fec9d0000000000000000000000000000000000000000000000000000000000000009572d435249424930310000000000000000000000000000000000000000000000","Library":"","SwarmSource":"bzzr://071528bf5264063ddb7f3a5dd993724e12ec44d41de198ea7adb4c8870a04628"}]}