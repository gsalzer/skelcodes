{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.4;\r\n/**\r\n * @title Contract for object that have an owner\r\n */\r\ncontract Owned {\r\n    /**\r\n     * Contract owner address\r\n     */\r\n    address public owner;\r\n\r\n    /**\r\n     * @dev Store owner on creation\r\n     */\r\n    function Owned() { owner = msg.sender; }\r\n\r\n    /**\r\n     * @dev Delegate contract to another person\r\n     * @param _owner is another person address\r\n     */\r\n    function delegate(address _owner) onlyOwner\r\n    { owner = _owner; }\r\n\r\n    /**\r\n     * @dev Owner check modifier\r\n     */\r\n    modifier onlyOwner { if (msg.sender != owner) throw; _; }\r\n}\r\n\r\n/**\r\n * @title Contract for objects that can be morder\r\n */\r\ncontract Mortal is Owned {\r\n    /**\r\n     * @dev Destroy contract and scrub a data\r\n     * @notice Only owner can kill me\r\n     */\r\n    function kill() onlyOwner\r\n    { suicide(owner); }\r\n}\r\n\r\n\r\ncontract Comission is Mortal {\r\n    address public ledger;\r\n    bytes32 public taxman;\r\n    uint    public taxPerc;\r\n\r\n    /**\r\n     * @dev Comission contract constructor\r\n     * @param _ledger Processing ledger contract\r\n     * @param _taxman Tax receiver account\r\n     * @param _taxPerc Processing tax in percent\r\n     */\r\n    function Comission(address _ledger, bytes32 _taxman, uint _taxPerc) {\r\n        ledger  = _ledger;\r\n        taxman  = _taxman;\r\n        taxPerc = _taxPerc;\r\n    }\r\n\r\n    /**\r\n     * @dev Refill ledger with comission\r\n     * @param _destination Destination account\r\n     */\r\n    function process(bytes32 _destination) payable returns (bool) {\r\n        // Handle value below 100 isn't possible\r\n        if (msg.value < 100) throw;\r\n\r\n        var tax = msg.value * taxPerc / 100; \r\n        var refill = bytes4(sha3(\"refill(bytes32)\")); \r\n        if ( !ledger.call.value(tax)(refill, taxman)\r\n          || !ledger.call.value(msg.value - tax)(refill, _destination)\r\n           ) throw;\r\n        return true;\r\n    }\r\n}\r\n\r\ncontract Invoice is Mortal {\r\n    address   public signer;\r\n    uint      public closeBlock;\r\n\r\n    Comission public comission;\r\n    string    public description;\r\n    bytes32   public beneficiary;\r\n    uint      public value;\r\n\r\n    /**\r\n     * @dev Offer type contract\r\n     * @param _comission Comission handler address\r\n     * @param _description Deal description\r\n     * @param _beneficiary Beneficiary account\r\n     * @param _value Deal value\r\n     */\r\n    function Invoice(address _comission,\r\n                     string  _description,\r\n                     bytes32 _beneficiary,\r\n                     uint    _value) {\r\n        comission   = Comission(_comission);\r\n        description = _description;\r\n        beneficiary = _beneficiary;\r\n        value       = _value;\r\n    }\r\n\r\n    /**\r\n     * @dev Call me to withdraw money\r\n     */\r\n    function withdraw() onlyOwner {\r\n        if (closeBlock != 0) {\r\n            if (!comission.process.value(value)(beneficiary)) throw;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @dev Payment fallback function\r\n     */\r\n    function () payable {\r\n        // Condition check\r\n        if (msg.value != value\r\n           || closeBlock != 0) throw;\r\n\r\n        // Store block when closed\r\n        closeBlock = block.number;\r\n        signer = msg.sender;\r\n        PaymentReceived();\r\n    }\r\n    \r\n    /**\r\n     * @dev Payment notification\r\n     */\r\n    event PaymentReceived();\r\n}\r\n\r\nlibrary CreatorInvoice {\r\n    function create(address _comission, string _description, bytes32 _beneficiary, uint256 _value) returns (Invoice)\r\n    { return new Invoice(_comission, _description, _beneficiary, _value); }\r\n\r\n    function version() constant returns (string)\r\n    { return \"v0.5.0 (a9ea4c6c)\"; }\r\n\r\n    function abi() constant returns (string)\r\n    { return '[{\"constant\":true,\"inputs\":[],\"name\":\"signer\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"beneficiary\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"comission\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"value\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"delegate\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"description\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"closeBlock\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[{\"name\":\"_comission\",\"type\":\"address\"},{\"name\":\"_description\",\"type\":\"string\"},{\"name\":\"_beneficiary\",\"type\":\"bytes32\"},{\"name\":\"_value\",\"type\":\"uint256\"}],\"type\":\"constructor\"},{\"payable\":true,\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"PaymentReceived\",\"type\":\"event\"}]'; }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"abi\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"version\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_comission\",\"type\":\"address\"},{\"name\":\"_description\",\"type\":\"string\"},{\"name\":\"_beneficiary\",\"type\":\"bytes32\"},{\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"create\",\"outputs\":[{\"name\":\"\",\"type\":\"Invoice\"}],\"payable\":false,\"type\":\"function\"}]","ContractName":"CreatorInvoice","CompilerVersion":"v0.4.4+commit.4633f3de","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":""}]}