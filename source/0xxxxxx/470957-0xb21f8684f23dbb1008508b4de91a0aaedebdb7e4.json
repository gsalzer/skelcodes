{"status":"1","message":"OK","result":[{"SourceCode":"//                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               contract BlockDefStorage \r\n{\r\n\tfunction getOccupies(uint8 blocktype) public returns (int8[24])\r\n\t{}\r\n\tfunction getAttachesto(uint8 blocktype) public returns (int8[48])\r\n    {}\r\n}\r\n\r\ncontract MapElevationRetriever \r\n{\r\n\tfunction getElevation(uint8 col, uint8 row) public constant returns (uint8)\r\n\t{}\r\n}\r\n\r\ncontract Etheria \r\n{\r\n\tevent TileChanged(uint8 col, uint8 row);//, address owner, string name, string status, uint lastfarm, address[] offerers, uint[] offers, int8[5][] blocks);\r\n\t\r\n    uint8 mapsize = 33;\r\n    Tile[33][33] tiles;\r\n    address creator;\r\n    \r\n    struct Tile \r\n    {\r\n    \taddress owner;\r\n    \tstring name;\r\n    \tstring status;\r\n    \tint8[5][] blocks; //0 = blocktype,1 = blockx,2 = blocky,3 = blockz, 4 = color\r\n    \tuint lastfarm;\r\n    \tint8[3][] occupado; // the only one not reported in the //TileChanged event\r\n    }\r\n    \r\n    BlockDefStorage bds;\r\n    MapElevationRetriever mer;\r\n    \r\n    function Etheria() {\r\n    \tcreator = tx.origin;\r\n    \tbds = BlockDefStorage(0xd4e686a1fbf1bfe058510f07cd3936d3d5a70589); \r\n    \tmer = MapElevationRetriever(0x68549d7dbb7a956f955ec1263f55494f05972a6b);\r\n    }\r\n    \r\n    function getOwner(uint8 col, uint8 row) public constant returns(address)\r\n    {\r\n    \treturn tiles[col][row].owner; // no harm if col,row are invalid\r\n    }\r\n    \r\n    function setOwner(uint8 col, uint8 row, address newowner)\r\n    {\r\n//    \tif(isOOB(col,row)) // row and/or col was not between 0-mapsize\r\n//    \t{\r\n//    \t\twhathappened = \"setOwner:ERR:c,r OOB\";  \r\n//    \t\treturn;\r\n//    \t}\r\n    \tTile tile = tiles[col][row];\r\n    \tif(tile.owner != tx.origin && !(tx.origin == creator && !getLocked()))\r\n    \t{\r\n    \t\twhathappened = \"setOwner:ERR:not owner\";  \r\n    \t\treturn;\r\n    \t}\r\n    \ttile.owner = newowner;\r\n    \tTileChanged(col,row);\r\n    \twhathappened = \"setOwner:OK\";\r\n    \treturn;\r\n    }\r\n    \r\n    /***\r\n     *     _   _   ___  ___  ___ _____            _____ _____ ___ _____ _   _ _____ \r\n     *    | \\ | | / _ \\ |  \\/  ||  ___|   ___    /  ___|_   _/ _ \\_   _| | | /  ___|\r\n     *    |  \\| |/ /_\\ \\| .  . || |__    ( _ )   \\ `--.  | |/ /_\\ \\| | | | | \\ `--. \r\n     *    | . ` ||  _  || |\\/| ||  __|   / _ \\/\\  `--. \\ | ||  _  || | | | | |`--. \\\r\n     *    | |\\  || | | || |  | || |___  | (_>  < /\\__/ / | || | | || | | |_| /\\__/ /\r\n     *    \\_| \\_/\\_| |_/\\_|  |_/\\____/   \\___/\\/ \\____/  \\_/\\_| |_/\\_/  \\___/\\____/ \r\n     *                                                                              \r\n     *                                                                              \r\n     */\r\n    \r\n    function getName(uint8 col, uint8 row) public constant returns(string)\r\n    {\r\n    \treturn tiles[col][row].name; // no harm if col,row are invalid\r\n    }\r\n    \r\n    function setName(uint8 col, uint8 row, string _n) public\r\n    {\r\n//    \tif(isOOB(col,row)) // row and/or col was not between 0-mapsize\r\n//    \t{\r\n//    \t\twhathappened = \"setName:ERR:c,r OOB\";  \r\n//    \t\treturn;\r\n//    \t}\r\n    \tTile tile = tiles[col][row];\r\n    \tif(tile.owner != tx.origin && !(tx.origin == creator && !getLocked()))\r\n    \t{\r\n    \t\twhathappened = \"setName:ERR:not owner\";  \r\n    \t\treturn;\r\n    \t}\r\n    \ttile.name = _n;\r\n    \tTileChanged(col,row);\r\n    \twhathappened = \"setName:OK\";\r\n    \treturn;\r\n    }\r\n    \r\n    function getStatus(uint8 col, uint8 row) public constant returns(string)\r\n    {\r\n    \treturn tiles[col][row].status; // no harm if col,row are invalid\r\n    }\r\n    \r\n    function setStatus(uint8 col, uint8 row, string _s) public // setting status costs 1 eth to prevent spam\r\n    {\r\n//    \tif(isOOB(col,row)) // row and/or col was not between 0-mapsize\r\n//    \t{\r\n//    \t\ttx.origin.send(msg.value); \t\t// return their money, if any\r\n//    \t\twhathappened = \"setStatus:ERR:c,r OOB\";  \r\n//    \t\treturn;\r\n//    \t}\r\n    \tif(msg.value != 1000000000000000000) \r\n    \t{\r\n    \t\ttx.origin.send(msg.value); \t\t// return their money, if any\r\n    \t\twhathappened = \"setStatus:ERR:val!=1eth\";\r\n    \t\treturn;\r\n    \t}\r\n    \tTile tile = tiles[col][row];\r\n    \tif(tile.owner != tx.origin && !(tx.origin == creator && !getLocked()))\r\n    \t{\r\n    \t\ttx.origin.send(msg.value); \t\t// return their money, if any\r\n    \t\twhathappened = \"setStatus:ERR:not owner\";  \r\n    \t\treturn;\r\n    \t}\r\n    \ttile.status = _s;\r\n    \tcreator.send(msg.value);\r\n    \tTileChanged(col,row);\r\n    \twhathappened = \"setStatus:OK\";\r\n    \treturn;\r\n    }\r\n    \r\n    /***\r\n     *    ______ ___  _________  ________ _   _ _____            ___________ _____ _____ _____ _   _ _____ \r\n     *    |  ___/ _ \\ | ___ \\  \\/  |_   _| \\ | |  __ \\   ___    |  ___|  _  \\_   _|_   _|_   _| \\ | |  __ \\\r\n     *    | |_ / /_\\ \\| |_/ / .  . | | | |  \\| | |  \\/  ( _ )   | |__ | | | | | |   | |   | | |  \\| | |  \\/\r\n     *    |  _||  _  ||    /| |\\/| | | | | . ` | | __   / _ \\/\\ |  __|| | | | | |   | |   | | | . ` | | __ \r\n     *    | |  | | | || |\\ \\| |  | |_| |_| |\\  | |_\\ \\ | (_>  < | |___| |/ / _| |_  | |  _| |_| |\\  | |_\\ \\\r\n     *    \\_|  \\_| |_/\\_| \\_\\_|  |_/\\___/\\_| \\_/\\____/  \\___/\\/ \\____/|___/  \\___/  \\_/  \\___/\\_| \\_/\\____/\r\n     *                                                                                                     \r\n     */\r\n    \r\n    function getLastFarm(uint8 col, uint8 row) public constant returns (uint)\r\n    {\r\n    \treturn tiles[col][row].lastfarm;\r\n    }\r\n    \r\n    function farmTile(uint8 col, uint8 row, int8 blocktype) public \r\n    {\r\n//    \tif(isOOB(col,row)) // row and/or col was not between 0-mapsize\r\n//    \t{\r\n//    \t\ttx.origin.send(msg.value); \t\t// return their money, if any\r\n//    \t\twhathappened = \"farmTile:ERR:c,r OOB\";  \r\n//    \t\treturn;\r\n//    \t}\r\n    \t\r\n    \tif(blocktype < 0 || blocktype > 17) // invalid blocktype\r\n    \t{\r\n    \t\ttx.origin.send(msg.value); \t\t// return their money, if any\r\n    \t\twhathappened = \"farmTile:ERR:invalid blocktype\";\r\n    \t\treturn;\r\n    \t}\t\r\n    \t\r\n    \tTile tile = tiles[col][row];\r\n        if(tile.owner != tx.origin)\r\n        {\r\n        \ttx.origin.send(msg.value); \t\t// return their money, if any\r\n        \twhathappened = \"farmTile:ERR:not owner\";\r\n        \treturn;\r\n        }\r\n        if((block.number - tile.lastfarm) < 2500) // ~12 hours of blocks\r\n        {\r\n        \tif(msg.value != 1000000000000000000)\r\n        \t{\t\r\n        \t\ttx.origin.send(msg.value); // return their money\r\n        \t\twhathappened = \"farmTile:ERR:val!=1eth\";\r\n        \t\treturn;\r\n        \t}\r\n        \telse // they paid 1 ETH\r\n        \t{\r\n        \t\tcreator.send(msg.value); // If they haven't waited long enough, but they've paid 1 eth, let them farm again.\r\n        \t}\t\r\n        }\r\n        else\r\n        {\r\n        \tif(msg.value > 0) // they've waited long enough but also sent money. Return it and continue normally.\r\n        \t{\r\n        \t\ttx.origin.send(msg.value); // return their money\r\n        \t}\r\n        }\r\n        \r\n        // by this point, they've either waited 2500 blocks or paid 1 ETH\r\n    \tfor(uint8 i = 0; i < 10; i++)\r\n    \t{\r\n            tile.blocks.length+=1;\r\n            tile.blocks[tile.blocks.length - 1][0] = int8(blocktype); // blocktype 0-17\r\n    \t    tile.blocks[tile.blocks.length - 1][1] = 0; // x\r\n    \t    tile.blocks[tile.blocks.length - 1][2] = 0; // y\r\n    \t    tile.blocks[tile.blocks.length - 1][3] = -1; // z\r\n    \t    tile.blocks[tile.blocks.length - 1][4] = 0; // color\r\n    \t}\r\n    \ttile.lastfarm = block.number;\r\n    \tTileChanged(col,row);\r\n    \twhathappened = \"farmTile:OK\";\r\n    \treturn;\r\n    }\r\n    \r\n    function editBlock(uint8 col, uint8 row, uint index, int8[5] _block)   // NOTE: won't return accidental money.\r\n    {\r\n//    \tif(isOOB(col,row)) // row and/or col was not between 0-mapsize\r\n//    \t{\r\n//    \t\twhathappened = \"editBlock:ERR:c,r OOB\";  \r\n//    \t\treturn;\r\n//    \t}\r\n    \tTile tile = tiles[col][row];\r\n        if(tile.owner != tx.origin) // 1. DID THE OWNER SEND THIS MESSAGE?\r\n        {\r\n        \twhathappened = \"editBlock:ERR:not owner\";\r\n        \treturn;\r\n        }\r\n        if(_block[3] < 0) // 2. IS THE Z LOCATION OF THE BLOCK BELOW ZERO? BLOCKS CANNOT BE HIDDEN\r\n        {\r\n        \twhathappened = \"editBlock:ERR:can't hide blocks\";\r\n        \treturn;\r\n        }\r\n        if(index > (tile.blocks.length-1))\r\n        {\r\n        \twhathappened = \"editBlock:ERR:index OOR\";\r\n        \treturn;\r\n        }\t\t\r\n        if(_block[0] == -1) // user has signified they want to only change the color of this block\r\n        {\r\n        \ttile.blocks[index][4] = _block[4];\r\n        \twhathappened = \"editBlock:OK:color changed\";\r\n        \treturn;\r\n        }\t\r\n        _block[0] = tile.blocks[index][0]; // can't change the blocktype, so set it to whatever it already was\r\n\r\n        int8[24] memory didoccupy = bds.getOccupies(uint8(_block[0]));\r\n        int8[24] memory wouldoccupy = bds.getOccupies(uint8(_block[0]));\r\n        \r\n        for(uint8 b = 0; b < 24; b+=3) // always 8 hexes, calculate the didoccupy\r\n \t\t{\r\n \t\t\t wouldoccupy[b] = wouldoccupy[b]+_block[1];\r\n \t\t\t wouldoccupy[b+1] = wouldoccupy[b+1]+_block[2];\r\n \t\t\t if(wouldoccupy[1] % 2 != 0 && wouldoccupy[b+1] % 2 == 0) // if anchor y is odd and this hex y is even, (SW NE beam goes 11,`2`2,23,`3`4,35,`4`6,47,`5`8  ` = x value incremented by 1. Same applies to SW NE beam from 01,12,13,24,25,36,37,48)\r\n \t\t\t\t wouldoccupy[b] = wouldoccupy[b]+1;  \t\t\t   // then offset x by +1\r\n \t\t\t wouldoccupy[b+2] = wouldoccupy[b+2]+_block[3];\r\n \t\t\t \r\n \t\t\t didoccupy[b] = didoccupy[b]+tile.blocks[index][1];\r\n \t\t\t didoccupy[b+1] = didoccupy[b+1]+tile.blocks[index][2];\r\n \t\t\t if(didoccupy[1] % 2 != 0 && didoccupy[b+1] % 2 == 0) // if anchor y and this hex y are both odd,\r\n \t\t\t\t didoccupy[b] = didoccupy[b]+1; \t\t\t\t\t // then offset x by +1\r\n       \t\tdidoccupy[b+2] = didoccupy[b+2]+tile.blocks[index][3];\r\n \t\t}\r\n        \r\n        if(!isValidLocation(col,row,_block, wouldoccupy))\r\n        {\r\n        \treturn; // whathappened is already set\r\n        }\r\n        \r\n        // EVERYTHING CHECKED OUT, WRITE OR OVERWRITE THE HEXES IN OCCUPADO\r\n        \r\n      \tif(tile.blocks[index][3] >= 0) // If the previous z was greater than 0 (i.e. not hidden) ...\r\n     \t{\r\n         \tfor(uint8 l = 0; l < 24; l+=3) // loop 8 times,find the previous occupado entries and overwrite them\r\n         \t{\r\n         \t\tfor(uint o = 0; o < tile.occupado.length; o++)\r\n         \t\t{\r\n         \t\t\tif(didoccupy[l] == tile.occupado[o][0] && didoccupy[l+1] == tile.occupado[o][1] && didoccupy[l+2] == tile.occupado[o][2]) // x,y,z equal?\r\n         \t\t\t{\r\n         \t\t\t\ttile.occupado[o][0] = wouldoccupy[l]; // found it. Overwrite it\r\n         \t\t\t\ttile.occupado[o][1] = wouldoccupy[l+1];\r\n         \t\t\t\ttile.occupado[o][2] = wouldoccupy[l+2];\r\n         \t\t\t}\r\n         \t\t}\r\n         \t}\r\n     \t}\r\n     \telse // previous block was hidden\r\n     \t{\r\n     \t\tfor(uint8 ll = 0; ll < 24; ll+=3) // add the 8 new hexes to occupado\r\n         \t{\r\n     \t\t\ttile.occupado.length++;\r\n     \t\t\ttile.occupado[tile.occupado.length-1][0] = wouldoccupy[ll];\r\n     \t\t\ttile.occupado[tile.occupado.length-1][1] = wouldoccupy[ll+1];\r\n     \t\t\ttile.occupado[tile.occupado.length-1][2] = wouldoccupy[ll+2];\r\n         \t}\r\n     \t}\r\n     \ttile.blocks[index] = _block;\r\n     \tTileChanged(col,row);\r\n    \treturn;\r\n    }\r\n       \r\n    function getBlocks(uint8 col, uint8 row) public constant returns (int8[5][])\r\n    {\r\n    \treturn tiles[col][row].blocks; // no harm if col,row are invalid\r\n    }\r\n   \r\n    // three OK conditions:\r\n    // 1. Valid offer on unowned tile. (whathap = 4)\r\n    // 2. Valid offer on owned tile where offerer did not previously have an offer on file (whathap = 7)\r\n    // 3. Valid offer on owned tile where offerer DID have a previous offer on file (whathap = 6)\r\n    function buyTile(uint8 col, uint8 row)\r\n    {    \t\r\n//    \tif(isOOB(col,row)) // row and/or col was not between 0-mapsize\r\n//    \t{\r\n//    \t\ttx.origin.send(msg.value);              // return their money, if any\r\n//    \t\twhathappened = \"buyTile:ERR:c,r OOB\";  \r\n//    \t\treturn;\r\n//    \t}\r\n//    \t\r\n    \tif(msg.value != 1000000000000000000)\t// 1 ETH is the starting value. If not return; // Also, if below sea level, return. \r\n\t\t{\r\n    \t\ttx.origin.send(msg.value);              // return their money, if any\r\n    \t\twhathappened = \"buyTile:ERR:val!=1eth\";  \r\n    \t\treturn;\r\n\t\t}\r\n    \t\r\n    \tTile tile = tiles[col][row];\r\n    \tif(tile.owner == address(0x0000000000000000000000000000000000000000))\t\t\t// if UNOWNED\r\n    \t{\t  \r\n    \t\tif(mer.getElevation(col,row) < 125)\t// 1 ETH is the starting value. If not return; // Also, if below sea level, return. \r\n    \t\t{\r\n    \t\t\ttx.origin.send(msg.value); \t \t\t\t\t\t\t\t\t\t// return their money\r\n    \t\t\twhathappened = \"buyTile:ERR:water\";\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\telse\r\n    \t\t{\t\r\n    \t\t\tcreator.send(msg.value);     \t\t \t\t\t\t\t// this was a valid offer, send money to contract creator\r\n    \t\t\ttile.owner = tx.origin;  \t\t\t\t\t\t\t\t// set tile owner to the buyer\r\n    \t\t\tTileChanged(col,row);\r\n    \t\t\twhathappened = \"buyTile:OK\";\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t}\r\n    \telse\r\n    \t{\r\n    \t\ttx.origin.send(msg.value);              // return their money, if any\r\n    \t\twhathappened = \"buyTile:ERR:alr owned\";\r\n    \t\treturn;\r\n    \t}\r\n    }\r\n    \r\n    /***\r\n     *     _   _ _____ _____ _     _____ _______   __\r\n     *    | | | |_   _|_   _| |   |_   _|_   _\\ \\ / /\r\n     *    | | | | | |   | | | |     | |   | |  \\ V / \r\n     *    | | | | | |   | | | |     | |   | |   \\ /  \r\n     *    | |_| | | |  _| |_| |_____| |_  | |   | |  \r\n     *     \\___/  \\_/  \\___/\\_____/\\___/  \\_/   \\_/  \r\n     *                                               \r\n     */\r\n    \r\n    // this logic COULD be reduced a little, but the gain is minimal and readability suffers\r\n    function blockHexCoordsValid(int8 x, int8 y) private constant returns (bool)\r\n    {\r\n    \tuint absx;\r\n\t\tuint absy;\r\n\t\tif(x < 0)\r\n\t\t\tabsx = uint(x*-1);\r\n\t\telse\r\n\t\t\tabsx = uint(x);\r\n\t\tif(y < 0)\r\n\t\t\tabsy = uint(y*-1);\r\n\t\telse\r\n\t\t\tabsy = uint(y);\r\n    \t\r\n    \tif(absy <= 33) // middle rectangle\r\n    \t{\r\n    \t\tif(y % 2 != 0 ) // odd\r\n    \t\t{\r\n    \t\t\tif(-50 <= x && x <= 49)\r\n    \t\t\t\treturn true;\r\n    \t\t}\r\n    \t\telse // even\r\n    \t\t{\r\n    \t\t\tif(absx <= 49)\r\n    \t\t\t\treturn true;\r\n    \t\t}\t\r\n    \t}\t\r\n    \telse\r\n    \t{\t\r\n    \t\tif((y >= 0 && x >= 0) || (y < 0 && x > 0)) // first or 4th quadrants\r\n    \t\t{\r\n    \t\t\tif(y % 2 != 0 ) // odd\r\n    \t\t\t{\r\n    \t\t\t\tif (((absx*2) + (absy*3)) <= 198)\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t}\t\r\n    \t\t\telse\t// even\r\n    \t\t\t{\r\n    \t\t\t\tif ((((absx+1)*2) + ((absy-1)*3)) <= 198)\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\telse\r\n    \t\t{\t\r\n    \t\t\tif(y % 2 == 0 ) // even\r\n    \t\t\t{\r\n    \t\t\t\tif (((absx*2) + (absy*3)) <= 198)\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t}\t\r\n    \t\t\telse\t// odd\r\n    \t\t\t{\r\n    \t\t\t\tif ((((absx+1)*2) + ((absy-1)*3)) <= 198)\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \treturn false;\r\n    }\r\n    \r\n    // SEVERAL CHECKS TO BE PERFORMED\r\n    // 1. DID THE OWNER SEND THIS MESSAGE?\t\t(SEE editBlock)\r\n    // 2. IS THE Z LOCATION OF THE BLOCK BELOW ZERO? BLOCKS CANNOT BE HIDDEN AFTER SHOWING\t   (SEE editBlock)\r\n    // 3. DO ANY OF THE PROPOSED HEXES FALL OUTSIDE OF THE TILE? \r\n    // 4. DO ANY OF THE PROPOSED HEXES CONFLICT WITH ENTRIES IN OCCUPADO? \r\n    // 5. DO ANY OF THE BLOCKS TOUCH ANOTHER?\r\n    // 6. NONE OF THE OCCUPY BLOCKS TOUCHED THE GROUND. BUT MAYBE THEY TOUCH ANOTHER BLOCK?\r\n    \r\n    function isValidLocation(uint8 col, uint8 row, int8[5] _block, int8[24] wouldoccupy) private constant returns (bool)\r\n    {\r\n    \tbool touches;\r\n    \tTile tile = tiles[col][row]; // since this is a private method, we don't need to check col,row validity\r\n    \t\r\n        for(uint8 b = 0; b < 24; b+=3) // always 8 hexes, calculate the wouldoccupy and the didoccupy\r\n       \t{\r\n       \t\tif(!blockHexCoordsValid(wouldoccupy[b], wouldoccupy[b+1])) // 3. DO ANY OF THE PROPOSED HEXES FALL OUTSIDE OF THE TILE? \r\n      \t\t{\r\n       \t\t\twhathappened = \"editBlock:ERR:OOB\";\r\n      \t\t\treturn false;\r\n      \t\t}\r\n       \t\tfor(uint o = 0; o < tile.occupado.length; o++)  // 4. DO ANY OF THE PROPOSED HEXES CONFLICT WITH ENTRIES IN OCCUPADO? \r\n          \t{\r\n      \t\t\tif(wouldoccupy[b] == tile.occupado[o][0] && wouldoccupy[b+1] == tile.occupado[o][1] && wouldoccupy[b+2] == tile.occupado[o][2]) // do the x,y,z entries of each match?\r\n      \t\t\t{\r\n      \t\t\t\twhathappened = \"editBlock:ERR:conflict\";\r\n      \t\t\t\treturn false; // this hex conflicts. The proposed block does not avoid overlap. Return false immediately.\r\n      \t\t\t}\r\n          \t}\r\n      \t\tif(touches == false && wouldoccupy[b+2] == 0)  // 5. DO ANY OF THE BLOCKS TOUCH ANOTHER? (GROUND ONLY FOR NOW)\r\n      \t\t{\r\n      \t\t\ttouches = true; // once true, always true til the end of this method. We must keep looping to check all the hexes for conflicts and tile boundaries, though, so we can't return true here.\r\n      \t\t}\t\r\n       \t}\r\n        \r\n        // now if we're out of the loop and here, there were no conflicts and the block was found to be in the tile boundary.\r\n        // touches may be true or false, so we need to check \r\n          \r\n        if(touches == false)  // 6. NONE OF THE OCCUPY BLOCKS TOUCHED THE GROUND. BUT MAYBE THEY TOUCH ANOTHER BLOCK?\r\n  \t\t{\r\n          \tint8[48] memory attachesto = bds.getAttachesto(uint8(_block[0]));\r\n          \tfor(uint8 a = 0; a < 48 && !touches; a+=3) // always 8 hexes, calculate the wouldoccupy and the didoccupy\r\n          \t{\r\n          \t\tif(attachesto[a] == 0 && attachesto[a+1] == 0 && attachesto[a+2] == 0) // there are no more attachestos available, break (0,0,0 signifies end)\r\n          \t\t\tbreak;\r\n          \t\t//attachesto[a] = attachesto[a]+_block[1];\r\n          \t\tattachesto[a+1] = attachesto[a+1]+_block[2];\r\n           \t\tif(attachesto[1] % 2 != 0 && attachesto[a+1] % 2 == 0) // (for attachesto, anchory is the same as for occupies, but the z is different. Nothing to worry about)\r\n           \t\t\tattachesto[a] = attachesto[a]+1;  \t\t\t       // then offset x by +1\r\n           \t\t//attachesto[a+2] = attachesto[a+2]+_block[3];\r\n           \t\tfor(o = 0; o < tile.occupado.length && !touches; o++)\r\n           \t\t{\r\n           \t\t\tif((attachesto[a]+_block[1]) == tile.occupado[o][0] && attachesto[a+1] == tile.occupado[o][1] && (attachesto[a+2]+_block[3]) == tile.occupado[o][2]) // a valid attachesto found in occupado?\r\n           \t\t\t{\r\n           \t\t\t\twhathappened = \"editBlock:OK:attached\";\r\n           \t\t\t\treturn true; // in bounds, didn't conflict and now touches is true. All good. Return.\r\n           \t\t\t}\r\n           \t\t}\r\n          \t}\r\n          \twhathappened = \"editBlock:ERR:floating\";\r\n          \treturn false; \r\n  \t\t}\r\n        else // touches was true by virtue of a z = 0 above (touching the ground). Return true;\r\n        {\r\n        \twhathappened = \"editBlock:OK:ground\";\r\n        \treturn true;\r\n        }\t\r\n    }  \r\n\r\n//    function isOOB(uint8 col, uint8 row) private constant returns (bool)\r\n//    {\r\n//    \tif(col < 0 || col > (mapsize-1) || row < 0 || row > (mapsize-1))\r\n//    \t\treturn true; // is out of bounds\r\n//    }\r\n    \r\n    string whathappened;\r\n    function getWhatHappened() public constant returns (string)\r\n    {\r\n    \treturn whathappened;\r\n    }\r\n\r\n   /***\r\n    Return money fallback and empty random funds, if any\r\n    */\r\n   function() \r\n   {\r\n\t   tx.origin.send(msg.value);\r\n   }\r\n   \r\n   function empty() \r\n   {\r\n\t   creator.send(address(this).balance); // etheria should never hold a balance. But in case it does, at least provide a way to retrieve them.\r\n   }\r\n    \r\n   /**********\r\n   Standard lock-kill methods \r\n   **********/\r\n   bool locked;\t\t\t// until locked, creator can kill, set names, statuses and tile ownership.\r\n   function setLocked()\r\n   {\r\n\t   if (msg.sender == creator)\r\n\t\t   locked = true;\r\n   }\r\n   function getLocked() public constant returns (bool)\r\n   {\r\n\t   return locked;\r\n   }\r\n   function kill()\r\n   { \r\n\t   if (!getLocked() && msg.sender == creator)\r\n\t\t   suicide(creator);  // kills this contract and sends remaining funds back to creator\r\n   }\r\n}\r\n\r\n//                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               \r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           \r\n","ABI":"[{\"constant\":false,\"inputs\":[],\"name\":\"setLocked\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":true,\"inputs\":[],\"name\":\"getWhatHappened\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"type\":\"function\",\"payable\":false,\"stateMutability\":\"view\"},{\"constant\":true,\"inputs\":[],\"name\":\"getLocked\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\",\"payable\":false,\"stateMutability\":\"view\"},{\"constant\":false,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"}],\"name\":\"buyTile\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":false,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"},{\"name\":\"_s\",\"type\":\"string\"}],\"name\":\"setStatus\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":false,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"},{\"name\":\"newowner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":true,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"}],\"name\":\"getLastFarm\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"type\":\"function\",\"payable\":false,\"stateMutability\":\"view\"},{\"constant\":false,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"},{\"name\":\"index\",\"type\":\"uint256\"},{\"name\":\"_block\",\"type\":\"int8[5]\"}],\"name\":\"editBlock\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":false,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"},{\"name\":\"blocktype\",\"type\":\"int8\"}],\"name\":\"farmTile\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":false,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"},{\"name\":\"_n\",\"type\":\"string\"}],\"name\":\"setName\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":true,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"}],\"name\":\"getName\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"type\":\"function\",\"payable\":false,\"stateMutability\":\"view\"},{\"constant\":true,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"}],\"name\":\"getStatus\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"type\":\"function\",\"payable\":false,\"stateMutability\":\"view\"},{\"constant\":true,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"}],\"name\":\"getOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"type\":\"function\",\"payable\":false,\"stateMutability\":\"view\"},{\"constant\":false,\"inputs\":[],\"name\":\"empty\",\"outputs\":[],\"type\":\"function\",\"payable\":true,\"stateMutability\":\"payable\"},{\"constant\":true,\"inputs\":[{\"name\":\"col\",\"type\":\"uint8\"},{\"name\":\"row\",\"type\":\"uint8\"}],\"name\":\"getBlocks\",\"outputs\":[{\"name\":\"\",\"type\":\"int8[5][]\"}],\"type\":\"function\",\"payable\":false,\"stateMutability\":\"view\"},{\"inputs\":[],\"type\":\"constructor\",\"payable\":true,\"stateMutability\":\"payable\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"col\",\"type\":\"uint8\"},{\"indexed\":false,\"name\":\"row\",\"type\":\"uint8\"}],\"name\":\"TileChanged\",\"type\":\"event\"},{\"type\":\"fallback\",\"payable\":true,\"stateMutability\":\"payable\"}]","ContractName":"Etheria","CompilerVersion":"v0.1.6+commit.d41f8b7c","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","EVMVersion":"Default","Library":"","LicenseType":"None","Proxy":"0","Implementation":"","SwarmSource":""}]}