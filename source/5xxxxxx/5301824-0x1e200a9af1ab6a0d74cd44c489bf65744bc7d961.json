{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.14;\r\n\r\ncontract BountyBG {\r\n\r\n    address public owner;\r\n\r\n    uint256 public bountyCount = 0;\r\n    uint256 public minBounty = 10 finney;\r\n    uint256 public bountyFee = 2 finney;\r\n    uint256 public bountyFeeCount = 0;\r\n    uint256 public bountyBeneficiariesCount = 2;\r\n    uint256 public bountyDuration = 30 hours;\r\n\r\n    mapping(uint256 => Bounty) bountyAt;\r\n\r\n    event BountyStatus(string _msg, uint256 _id, address _from, uint256 _amount);\r\n    event RewardStatus(string _msg, uint256 _id, address _to, uint256 _amount);\r\n    event ErrorStatus(string _msg, uint256 _id, address _to, uint256 _amount);\r\n\r\n    struct Bounty {\r\n        uint256 id;\r\n        address owner;\r\n        uint256 bounty;\r\n        uint256 remainingBounty;\r\n        uint256 startTime;\r\n        uint256 endTime;\r\n        bool ended;\r\n        bool retracted;\r\n    }\r\n\r\n    function BountyBG() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlyOwner() {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    // BLOCKGEEKS ACTIONS\r\n\r\n    function withdrawFee(uint256 _amount) external onlyOwner {\r\n        require(_amount <= bountyFeeCount);\r\n        bountyFeeCount -= _amount;\r\n        owner.transfer(_amount);\r\n    }\r\n\r\n    function setBountyDuration(uint256 _bountyDuration) external onlyOwner {\r\n        bountyDuration = _bountyDuration;\r\n    }\r\n\r\n    function setMinBounty(uint256 _minBounty) external onlyOwner {\r\n        minBounty = _minBounty;\r\n    }\r\n\r\n    function setBountyBeneficiariesCount(uint256 _bountyBeneficiariesCount) external onlyOwner {\r\n        bountyBeneficiariesCount = _bountyBeneficiariesCount;\r\n    }\r\n\r\n    function rewardUsers(uint256 _bountyId, address[] _users, uint256[] _rewards) external onlyOwner {\r\n        Bounty storage bounty = bountyAt[_bountyId];\r\n        require(\r\n            !bounty.ended &&\r\n            !bounty.retracted &&\r\n            bounty.startTime + bountyDuration > block.timestamp &&\r\n            _users.length > 0 &&\r\n            _users.length <= bountyBeneficiariesCount &&\r\n            _users.length == _rewards.length\r\n        );\r\n\r\n\r\n\r\n\r\n\r\n        bounty.ended = true;\r\n        bounty.endTime = block.timestamp;\r\n        uint256 currentRewards = 0;\r\n        for (uint8 i = 0; i < _rewards.length; i++) {\r\n            currentRewards += _rewards[i];\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        require(bounty.bounty >= currentRewards);\r\n\r\n        for (i = 0; i < _users.length; i++) {\r\n            _users[i].transfer(_rewards[i]);\r\n            RewardStatus(\"Reward sent\", bounty.id, _users[i], _rewards[i]);\r\n            /* if (_users[i].send(_rewards[i])) {\r\n                bounty.remainingBounty -= _rewards[i];\r\n                RewardStatus('Reward sent', bounty.id, _users[i], _rewards[i]);\r\n            } else {\r\n                ErrorStatus('Error in reward', bounty.id, _users[i], _rewards[i]);\r\n            } */\r\n        }\r\n    }\r\n\r\n    function rewardUser(uint256 _bountyId, address _user, uint256 _reward) external onlyOwner {\r\n        Bounty storage bounty = bountyAt[_bountyId];\r\n        require(bounty.remainingBounty >= _reward);\r\n        bounty.remainingBounty -= _reward;\r\n\r\n        bounty.ended = true;\r\n        bounty.endTime = block.timestamp;\r\n        \r\n        _user.transfer(_reward);\r\n        RewardStatus('Reward sent', bounty.id, _user, _reward);\r\n    }\r\n\r\n    // USER ACTIONS TRIGGERED BY METAMASK\r\n\r\n    function createBounty(uint256 _bountyId) external payable {\r\n        require(\r\n            msg.value >= minBounty + bountyFee\r\n        );\r\n        Bounty storage bounty = bountyAt[_bountyId];\r\n        require(bounty.id == 0);\r\n        bountyCount++;\r\n        bounty.id = _bountyId;\r\n        bounty.bounty = msg.value - bountyFee;\r\n        bounty.remainingBounty = bounty.bounty;\r\n        bountyFeeCount += bountyFee;\r\n        bounty.startTime = block.timestamp;\r\n        bounty.owner = msg.sender;\r\n        BountyStatus('Bounty submitted', bounty.id, msg.sender, msg.value);\r\n    }\r\n\r\n    function cancelBounty(uint256 _bountyId) external {\r\n        Bounty storage bounty = bountyAt[_bountyId];\r\n        require(\r\n            msg.sender == bounty.owner &&\r\n            !bounty.ended &&\r\n            !bounty.retracted &&\r\n            bounty.owner == msg.sender &&\r\n            bounty.startTime + bountyDuration < block.timestamp\r\n        );\r\n        bounty.ended = true;\r\n        bounty.retracted = true;\r\n        bounty.owner.transfer(bounty.bounty);\r\n        BountyStatus('Bounty was canceled', bounty.id, msg.sender, bounty.bounty);\r\n    }\r\n\r\n\r\n    // CUSTOM GETTERS\r\n\r\n    function getBalance() external view returns (uint256) {\r\n        return this.balance;\r\n    }\r\n\r\n    function getBounty(uint256 _bountyId) external view\r\n    returns (uint256, address, uint256, uint256, uint256, uint256, bool, bool) {\r\n        Bounty memory bounty = bountyAt[_bountyId];\r\n        return (\r\n            bounty.id,\r\n            bounty.owner,\r\n            bounty.bounty,\r\n            bounty.remainingBounty,\r\n            bounty.startTime,\r\n            bounty.endTime,\r\n            bounty.ended,\r\n            bounty.retracted\r\n        );\r\n    }\r\n\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"getBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_bountyDuration\",\"type\":\"uint256\"}],\"name\":\"setBountyDuration\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bountyDuration\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_bountyBeneficiariesCount\",\"type\":\"uint256\"}],\"name\":\"setBountyBeneficiariesCount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_minBounty\",\"type\":\"uint256\"}],\"name\":\"setMinBounty\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bountyCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_bountyId\",\"type\":\"uint256\"}],\"name\":\"createBounty\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_bountyId\",\"type\":\"uint256\"},{\"name\":\"_user\",\"type\":\"address\"},{\"name\":\"_reward\",\"type\":\"uint256\"}],\"name\":\"rewardUser\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bountyBeneficiariesCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"minBounty\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bountyFee\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bountyFeeCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"withdrawFee\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_bountyId\",\"type\":\"uint256\"}],\"name\":\"cancelBounty\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_bountyId\",\"type\":\"uint256\"}],\"name\":\"getBounty\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"bool\"},{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_bountyId\",\"type\":\"uint256\"},{\"name\":\"_users\",\"type\":\"address[]\"},{\"name\":\"_rewards\",\"type\":\"uint256[]\"}],\"name\":\"rewardUsers\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_msg\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_id\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"BountyStatus\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_msg\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_id\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"RewardStatus\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_msg\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"_id\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"ErrorStatus\",\"type\":\"event\"}]","ContractName":"BountyBG","CompilerVersion":"v0.4.22-nightly.2018.3.21+commit.8fd53c1c","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://c7baa9bdc5c46a78e14db59558a8739a183e7edd46ec046caa42fbb229a2a6d4"}]}