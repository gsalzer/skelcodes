{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.21;\r\n\r\ncontract BlackjackTipJar {\r\n\r\n    address public pitboss;\r\n    uint256 public deployedOn;\r\n\r\n    uint8 public dealer_cut = 95; // percent\r\n    uint256 public overflow_upper = 0.25 ether;\r\n    uint256 public overflow_lower = 0.15 ether;\r\n\r\n    mapping(address => uint256) public bankrolls;\r\n    mapping(address => address) public beneficiaries;\r\n    \r\n    event Deposit(address indexed _dealer, address indexed _from, uint256 _value);\r\n    event Cashout(address indexed _dealer, address indexed _to, uint256 _value);\r\n    event Overflow(address indexed _dealer, uint256 _value);\r\n\r\n    modifier auth() {\r\n      require(msg.sender == pitboss);\r\n      _;\r\n    }\r\n\r\n    function BlackjackTipJar() public payable {\r\n      pitboss = msg.sender;\r\n      deployedOn = block.number;\r\n      bankrolls[pitboss] = msg.value;\r\n    }\r\n\r\n    function () public payable {\r\n      bankrolls[pitboss] += msg.value;\r\n      emit Deposit(pitboss, msg.sender, msg.value);\r\n    }\r\n\r\n\r\n    // To be called by players\r\n    function deposit(address dealer) public payable {\r\n      bankrolls[dealer] = bankrolls[dealer] + msg.value;\r\n      emit Deposit(dealer, msg.sender, msg.value);\r\n    }\r\n\r\n\r\n    // To be called by dealers\r\n    function cashout(address winner, uint256 amount) public {\r\n\r\n      uint256 dealerBankroll = bankrolls[msg.sender];\r\n      uint256 value = amount;\r\n      if (value > dealerBankroll) {\r\n        value = dealerBankroll;\r\n      }\r\n\r\n      bankrolls[msg.sender] -= value;\r\n      winner.transfer(value);\r\n      emit Cashout(msg.sender, winner, value);\r\n\r\n      // Has our cup runneth over? Let us collect our profits\r\n      dealerBankroll = bankrolls[msg.sender];\r\n      if (dealerBankroll > overflow_upper) {\r\n\r\n        uint256 overflow_amt = dealerBankroll - overflow_lower;\r\n        bankrolls[msg.sender] -= overflow_amt;\r\n\r\n        value = overflow_amt;\r\n        if (msg.sender != pitboss) {\r\n          value = overflow_amt * dealer_cut / 100;\r\n          pitboss.transfer(overflow_amt - value);\r\n        }\r\n\r\n        address beneficiary = msg.sender;\r\n        address sender_beneficiary = beneficiaries[msg.sender];\r\n        if (sender_beneficiary > 0) { beneficiary = sender_beneficiary; }\r\n\r\n        beneficiary.transfer(value);\r\n        emit Overflow(msg.sender, value);\r\n\r\n      }\r\n    }\r\n\r\n    // To be called by dealers\r\n    function setBeneficiary(address beneficiary) public {\r\n      beneficiaries[msg.sender] = beneficiary;\r\n    }\r\n\r\n    // To be called by the pitboss\r\n    function setDealerCut(uint8 cut) public auth {\r\n      require(cut <= 100 && cut >= 1);\r\n      dealer_cut = cut;\r\n    }\r\n\r\n    // To be called by the pitboss\r\n    function setOverflowBounds(uint256 upper, uint256 lower) public auth {\r\n      require(lower > 0 && upper > lower);\r\n      overflow_upper = upper;\r\n      overflow_lower = lower;\r\n    }\r\n\r\n    function kill() public auth {\r\n      selfdestruct(pitboss);\r\n    }\r\n\r\n}","ABI":"[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"beneficiaries\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"overflow_upper\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"beneficiary\",\"type\":\"address\"}],\"name\":\"setBeneficiary\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"cut\",\"type\":\"uint8\"}],\"name\":\"setDealerCut\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"dealer_cut\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"deployedOn\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"pitboss\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"upper\",\"type\":\"uint256\"},{\"name\":\"lower\",\"type\":\"uint256\"}],\"name\":\"setOverflowBounds\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"winner\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"cashout\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"overflow_lower\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"bankrolls\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"dealer\",\"type\":\"address\"}],\"name\":\"deposit\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_dealer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Deposit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_dealer\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Cashout\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_dealer\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Overflow\",\"type\":\"event\"}]","ContractName":"BlackjackTipJar","CompilerVersion":"v0.4.21+commit.dfe3193c","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://0933095ee8c043130065580012348582579a1c8699a1645cd633f5e1923a8e3d"}]}