{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.20;\r\n\r\n/*\r\n    ____\r\n   /\\' .\\    _____\r\n  /: \\___\\  / .  /\\\r\n  \\' / . / /____/..\\\r\n   \\/___/  \\'  '\\  /\r\n            \\'__'\\/\r\n\r\n Developer:  TechnicalRise\r\n \r\n ** Updated with low (3%) house edge\r\n ** and contract events\r\n \r\n *   Â© 2018 TechnicalRise.  Written in March 2018.  \r\n *   All rights reserved.  Do not copy, adapt, or otherwise use without permission.\r\n *   https://www.reddit.com/user/TechnicalRise/\r\n \r\n*/\r\n\r\ncontract PHXReceivingContract {\r\n    /**\r\n     * @dev Standard ERC223 function that will handle incoming token transfers.\r\n     *\r\n     * @param _from  Token sender address.\r\n     * @param _value Amount of tokens.\r\n     * @param _data  Transaction metadata.\r\n     */\r\n    function tokenFallback(address _from, uint _value, bytes _data) public;\r\n}\r\n\r\ncontract PHXInterface {\r\n    function balanceOf(address who) public view returns (uint);\r\n    function transfer(address _to, uint _value) public returns (bool);\r\n    function transfer(address _to, uint _value, bytes _data) public returns (bool);\r\n}\r\n\r\ncontract PHXFlip is PHXReceivingContract {\r\n\r\n    address public constant PHXTKNADDR = 0x14b759A158879B133710f4059d32565b4a66140C;\r\n    PHXInterface public PHXTKN;\r\n    \r\n    event result(address indexed _roller, uint _wager, uint _payout, uint indexed _rollednumber);\r\n\r\n\tfunction PHXFlip() public {\r\n\t    PHXTKN = PHXInterface(PHXTKNADDR); // Initialize the PHX Contract\r\n\t}\r\n\t\r\n\tfunction tokenFallback(address _from, uint _value, bytes _data) public {\r\n\t  // Note that msg.sender is the Token Contract Address\r\n\t  // and \"_from\" is the sender of the tokens\r\n\t  require(_humanSender(_from)); // Check that this is a non-contract sender\r\n\t  require(_phxToken(msg.sender));\r\n\t  \r\n\t  uint _balance = PHXTKN.balanceOf(this);\r\n\t  uint _possibleWinnings = 2 * _value;\r\n\t  uint _rollednumber = _prand(100) + 1;\r\n\t  // This doesn't require the PHX Balance to be greater than double the bet\r\n\t  // So check the contract's PHX Balance before wagering!\r\n\t  if(_rollednumber < 48) { // i.e. 1-47 wins, 48-100 loses\r\n\t      if(_balance >= _possibleWinnings) {\r\n\t          PHXTKN.transfer(_from, _possibleWinnings);\r\n\t          emit result(_from, _value, _possibleWinnings, _rollednumber);\r\n\t      } else {\r\n\t          PHXTKN.transfer(_from,_balance);\r\n\t          emit result(_from, _value, _balance, _rollednumber);\r\n\t      }\r\n\t  } else {\r\n\t      // And if you don't win, you get a Rise so that you know you lost\r\n\t      PHXTKN.transfer(_from, 1);\r\n\t      emit result(_from, _value, 1, _rollednumber);\r\n\t  }\r\n    }\r\n    \r\n    // This is a supercheap psuedo-random number generator\r\n    // that relies on the fact that \"who\" will mine and \"when\" they will\r\n    // mine is random.  This is obviously vulnerable to \"inside the block\"\r\n    // attacks where someone writes a contract mined in the same block\r\n    // and calls this contract from it -- but we don't accept transactions\r\n    // from foreign contracts, lessening that risk\r\n    function _prand(uint _modulo) private view returns (uint) {\r\n        uint seed1 = uint(block.coinbase); // Get Miner's Address\r\n        uint seed2 = now; // Get the timestamp\r\n        return uint(keccak256(seed1, seed2)) % _modulo;\r\n    }\r\n    \r\n    function _phxToken(address _tokenContract) private pure returns (bool) {\r\n        return _tokenContract == PHXTKNADDR; // Returns \"true\" of this is the PHX Token Contract\r\n    }\r\n    \r\n    // Determine if the \"_from\" address is a contract\r\n    function _humanSender(address _from) private view returns (bool) {\r\n      uint codeLength;\r\n      assembly { codeLength := extcodesize(_from)  }\r\n      return (codeLength == 0); // If this is \"true\" sender is most likely  a Wallet\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"PHXTKNADDR\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"PHXTKN\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint256\"},{\"name\":\"_data\",\"type\":\"bytes\"}],\"name\":\"tokenFallback\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_roller\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_wager\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_payout\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"_rollednumber\",\"type\":\"uint256\"}],\"name\":\"result\",\"type\":\"event\"}]","ContractName":"PHXFlip","CompilerVersion":"v0.4.21+commit.dfe3193c","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://dfc8079df710958a960a5a100b27cbf416b023dbae41268de7d0afc02c95b4a0"}]}