{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.18;\r\n\r\ncontract SendGift {\r\n\taddress public owner;\r\n\tmapping(address=>address) public friends;\r\n\tmapping(address=>uint256) public received;\r\n\tmapping(address=>uint256) public sent;\r\n\tevent Gift(address indexed _sender);\r\n\tmodifier onlyOwner() {\r\n      if (msg.sender!=owner) revert();\r\n      _;\r\n    }\r\n    \r\n    function SendGift() public {\r\n    \towner = msg.sender;\r\n    }\r\n    \r\n    \r\n    function sendGift(address friend) payable public returns (bool ok){\r\n        if (msg.value==0 || friend==address(0) || friend==msg.sender || (friend!=owner && friends[friend]==address(0))) revert();\r\n        friends[msg.sender] = friend;\r\n        payOut();\r\n        return true;\r\n    }\r\n    \r\n    function payOut() private{\r\n        uint256 gift;\r\n        address payee1 = friends[msg.sender];\r\n        if (payee1==address(0)) payee1 = owner;\r\n        if (received[payee1]>sent[payee1]*2) {\r\n            gift = msg.value*49/100;\r\n            address payee2 = friends[payee1];\r\n            if (payee2==address(0)) payee2 = owner;\r\n            payee2.transfer(gift);\r\n            sent[payee1]+=gift;\r\n            received[payee2]+=gift;\r\n        }\r\n        else gift = msg.value*99/100;\r\n        payee1.transfer(gift);\r\n        sent[msg.sender]+=msg.value;\r\n        received[payee1]+=gift;\r\n        owner.transfer(this.balance);\r\n        Gift(msg.sender);\r\n    }\r\n    \r\n    function () payable public {\r\n        revert();\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"friends\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"sent\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"friend\",\"type\":\"address\"}],\"name\":\"sendGift\",\"outputs\":[{\"name\":\"ok\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"received\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_sender\",\"type\":\"address\"}],\"name\":\"Gift\",\"type\":\"event\"}]","ContractName":"SendGift","CompilerVersion":"v0.4.18+commit.9cf6e910","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://6ca80695e86ce1e67bb673266d6a66c0bdbc8a7359655d32f405f8bd3b8e6bc5"}]}