{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.16;\r\n\r\n\r\n/* \r\nThis contract stores the memories of GuaGua and MiaoMiao.\r\nLong last our love and the blockchain.\r\n*/\r\ncontract GuaGuaMiaoMiaoMemories {\r\n\r\n    struct Memory {\r\n        string story;\r\n        uint256 imageSliceCount;\r\n        mapping(uint256 => bytes) imageSlices;\r\n    }\r\n\r\n    Memory[] internal memories;\r\n\r\n    address public guagua;\r\n    address public miaomiao;\r\n\r\n    function GuaGuaMiaoMiaoMemories() public {\r\n        guagua = msg.sender;\r\n    }\r\n\r\n    modifier onlyGuaGua() {\r\n        require(msg.sender == guagua);\r\n        _;\r\n    }\r\n\r\n    modifier onlyMiaoMiao() {\r\n        require(msg.sender == miaomiao);\r\n        _;\r\n    }\r\n\r\n    modifier onlyGuaGuaMiaoMiao() {\r\n        require(msg.sender == guagua || msg.sender == miaomiao);\r\n        _;\r\n    }\r\n\r\n    function initMiaoMiaoAddress(address _miaomiaoAddress) external onlyGuaGuaMiaoMiao {\r\n        require(_miaomiaoAddress != address(0));\r\n        miaomiao = _miaomiaoAddress;\r\n    }\r\n\r\n    function addMemory(string _story, bytes _imageFirstSlice) external onlyGuaGuaMiaoMiao {\r\n        memories.push(Memory({story: _story, imageSliceCount: 0}));\r\n        memories[memories.length-1].imageSlices[0] = _imageFirstSlice;\r\n        memories[memories.length-1].imageSliceCount = 1;\r\n    }\r\n\r\n    function addMemoryImageSlice(uint256 _index, bytes _imageSlice) external onlyGuaGuaMiaoMiao {\r\n        require(_index >= 0 && _index < memories.length);\r\n        memories[_index].imageSlices[memories[_index].imageSliceCount] = _imageSlice;\r\n        memories[_index].imageSliceCount += 1;\r\n    }\r\n\r\n    function viewMemory(uint256 _index) public view returns (string story, bytes image) {\r\n        require(_index >= 0 && _index < memories.length);\r\n        uint256 imageLen = 0;\r\n        uint256 i = 0;\r\n        for (i = 0; i < memories[_index].imageSliceCount; i++){\r\n            imageLen += memories[_index].imageSlices[i].length;\r\n        }\r\n        image = new bytes(imageLen);\r\n        uint256 j = 0;\r\n        uint256 k = 0;\r\n        for (i = 0; i < memories[_index].imageSliceCount; i++){\r\n            for (j = 0; j < memories[_index].imageSlices[i].length; j++) {\r\n                image[k] = memories[_index].imageSlices[i][j];\r\n                k += 1;\r\n            }\r\n        }\r\n        story = memories[_index].story;\r\n        return (story, image);\r\n    }\r\n\r\n    function viewNumberOfMemories() public view returns(uint256) {\r\n        return memories.length;\r\n    }\r\n    \r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"guagua\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"viewMemory\",\"outputs\":[{\"name\":\"story\",\"type\":\"string\"},{\"name\":\"image\",\"type\":\"bytes\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_miaomiaoAddress\",\"type\":\"address\"}],\"name\":\"initMiaoMiaoAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_index\",\"type\":\"uint256\"},{\"name\":\"_imageSlice\",\"type\":\"bytes\"}],\"name\":\"addMemoryImageSlice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"miaomiao\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_story\",\"type\":\"string\"},{\"name\":\"_imageFirstSlice\",\"type\":\"bytes\"}],\"name\":\"addMemory\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"viewNumberOfMemories\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]","ContractName":"GuaGuaMiaoMiaoMemories","CompilerVersion":"v0.4.19+commit.c4cbbb05","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://b8208d0aa39a4b36379fe0603782f30d34caf6fa41ab4d6a9053ee37d24d47e2"}]}