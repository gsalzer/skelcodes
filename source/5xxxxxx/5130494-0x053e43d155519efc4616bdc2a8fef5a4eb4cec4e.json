{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.18;\r\n\r\n/// candy.claims\r\n\r\ncontract CandyClaim {\r\n  /*** CONSTANTS ***/\r\n  uint256 private fiveHoursInSeconds = 3600; // 18000;\r\n  string public constant NAME = \"CandyClaims\";\r\n  string public constant SYMBOL = \"CandyClaim\";\r\n\r\n  /*** STORAGE ***/\r\n  mapping (address => uint256) private ownerCount;\r\n\r\n  address public ceoAddress;\r\n  address public cooAddress;\r\n\r\n  struct Candy {\r\n    address owner;\r\n    uint256 price;\r\n    uint256 last_transaction;\r\n    address approve_transfer_to;\r\n  }\r\n  uint candy_count;\r\n  mapping (string => Candy) candies;\r\n\r\n  /*** ACCESS MODIFIERS ***/\r\n  modifier onlyCEO() { require(msg.sender == ceoAddress); _; }\r\n  modifier onlyCOO() { require(msg.sender == cooAddress); _; }\r\n  modifier onlyCXX() { require(msg.sender == ceoAddress || msg.sender == cooAddress); _; }\r\n\r\n  /*** ACCESS MODIFIES ***/\r\n  function setCEO(address _newCEO) public onlyCEO {\r\n    require(_newCEO != address(0));\r\n    ceoAddress = _newCEO;\r\n  }\r\n  function setCOO(address _newCOO) public onlyCEO {\r\n    require(_newCOO != address(0));\r\n    cooAddress = _newCOO;\r\n  }\r\n\r\n  /*** DEFAULT METHODS ***/\r\n  function symbol() public pure returns (string) { return SYMBOL; }\r\n  function name() public pure returns (string) { return NAME; }\r\n  function implementsERC721() public pure returns (bool) { return true; }\r\n\r\n  /*** CONSTRUCTOR ***/\r\n  function CandyClaim() public {\r\n    ceoAddress = msg.sender;\r\n    cooAddress = msg.sender;\r\n  }\r\n\r\n  /*** INTERFACE METHODS ***/\r\n  function createCandy(string _candy_id, uint256 _price) public onlyCXX {\r\n    require(msg.sender != address(0));\r\n    _create_candy(_candy_id, address(this), _price);\r\n  }\r\n\r\n  function totalSupply() public view returns (uint256 total) {\r\n    return candy_count;\r\n  }\r\n\r\n  function balanceOf(address _owner) public view returns (uint256 balance) {\r\n    return ownerCount[_owner];\r\n  }\r\n  function priceOf(string _candy_id) public view returns (uint256 price) {\r\n    return candies[_candy_id].price;\r\n  }\r\n\r\n  function getCandy(string _candy_id) public view returns (\r\n    string id,\r\n    address owner,\r\n    uint256 price,\r\n    uint256 last_transaction\r\n  ) {\r\n    id = _candy_id;\r\n    owner = candies[_candy_id].owner;\r\n    price = candies[_candy_id].price;\r\n    last_transaction = candies[_candy_id].last_transaction;\r\n  }\r\n\r\n  function purchase(string _candy_id) public payable {\r\n    Candy storage candy = candies[_candy_id];\r\n\r\n    require(candy.owner != msg.sender);\r\n    require(msg.sender != address(0));\r\n\r\n    uint256 time_diff = (block.timestamp - candy.last_transaction);\r\n    while(time_diff >= fiveHoursInSeconds){\r\n        time_diff = (time_diff - fiveHoursInSeconds);\r\n        candy.price = SafeMath.mul(SafeMath.div(candy.price, 100), 90);\r\n    }\r\n    if(candy.price < 1000000000000000){ candy.price = 1000000000000000; }\r\n    require(msg.value >= candy.price);\r\n\r\n    uint256 excess = SafeMath.sub(msg.value, candy.price);\r\n\r\n    if(candy.owner == address(this)){\r\n      ceoAddress.transfer(candy.price);\r\n    } else {\r\n      ceoAddress.transfer(uint256(SafeMath.mul(SafeMath.div(candy.price, 100), 10)));\r\n      candy.owner.transfer(uint256(SafeMath.mul(SafeMath.div(candy.price, 100), 90)));\r\n    }\r\n\r\n    candy.price = SafeMath.mul(SafeMath.div(candy.price, 100), 160);\r\n    candy.owner = msg.sender;\r\n    candy.last_transaction = block.timestamp;\r\n\r\n    msg.sender.transfer(excess);\r\n  }\r\n\r\n  function payout() public onlyCEO {\r\n    ceoAddress.transfer(this.balance);\r\n  }\r\n\r\n  /*** PRIVATE METHODS ***/\r\n\r\n  function _create_candy(string _candy_id, address _owner, uint256 _price) private {\r\n    candy_count++;\r\n    candies[_candy_id] = Candy({\r\n      owner: _owner,\r\n      price: _price,\r\n      last_transaction: block.timestamp,\r\n      approve_transfer_to: address(0)\r\n    });\r\n  }\r\n\r\n  function _transfer(address _from, address _to, string _candy_id) private {\r\n    candies[_candy_id].owner = _to;\r\n    candies[_candy_id].approve_transfer_to = address(0);\r\n    ownerCount[_from] -= 1;\r\n    ownerCount[_to] += 1;\r\n  }\r\n}\r\n\r\nlibrary SafeMath {\r\n  function mul(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    if (a == 0) {\r\n      return 0;\r\n    }\r\n    uint256 c = a * b;\r\n    assert(c / a == b);\r\n    return c;\r\n  }\r\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    uint256 c = a / b;\r\n    return c;\r\n  }\r\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    assert(b <= a);\r\n    return a - b;\r\n  }\r\n  function add(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    uint256 c = a + b;\r\n    assert(c >= a);\r\n    return c;\r\n  }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ceoAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"implementsERC721\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_candy_id\",\"type\":\"string\"},{\"name\":\"_price\",\"type\":\"uint256\"}],\"name\":\"createCandy\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"total\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newCEO\",\"type\":\"address\"}],\"name\":\"setCEO\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newCOO\",\"type\":\"address\"}],\"name\":\"setCOO\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_candy_id\",\"type\":\"string\"}],\"name\":\"getCandy\",\"outputs\":[{\"name\":\"id\",\"type\":\"string\"},{\"name\":\"owner\",\"type\":\"address\"},{\"name\":\"price\",\"type\":\"uint256\"},{\"name\":\"last_transaction\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_candy_id\",\"type\":\"string\"}],\"name\":\"purchase\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"payout\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"NAME\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_candy_id\",\"type\":\"string\"}],\"name\":\"priceOf\",\"outputs\":[{\"name\":\"price\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"cooAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"SYMBOL\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"}]","ContractName":"CandyClaim","CompilerVersion":"v0.4.18+commit.9cf6e910","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://ebe71ff451ad50a853e45462c288c84ec5a4cc6f1d7966eae029de2896d65b18"}]}