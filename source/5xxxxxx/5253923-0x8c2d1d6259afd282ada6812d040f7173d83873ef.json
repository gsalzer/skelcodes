{"status":"1","message":"OK","result":[{"SourceCode":"/*\r\nThis Contract is free software: you can redistribute it and/or\r\nmodify it under the terms of the GNU lesser General Public License as published\r\nby the Free Software Foundation, either version 3 of the License, or\r\n(at your option) any later version.\r\nThis Contract is distributed WITHOUT ANY WARRANTY; without even the implied warranty of\r\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\r\nGNU lesser General Public License for more details.\r\nYou should have received a copy of the GNU lesser General Public License\r\n<http://www.gnu.org/licenses/>.\r\n*/\r\n\r\npragma solidity ^0.4.18;\r\n\r\ncontract InterfaceERC20Token\r\n{\r\n    function balanceOf (address tokenOwner) public constant returns (uint balance);\r\n    function transfer (address to, uint tokens) public returns (bool success);\r\n    function allowance (address _owner, address _spender) public constant returns (uint remaining);\r\n    function transferFrom (address _from, address _to, uint _value) public returns (bool success);\r\n}\r\n\r\ncontract LittleStoreERC20Token\r\n{\r\n\r\n    mapping (address => bool) public agents;\r\n    address public addressERC20Token;\r\n    InterfaceERC20Token internal ERC20Token;\r\n\r\n    bool public sale;\r\n    uint public price;\r\n    uint public bonusLine;\r\n    uint public bonusSize;\r\n\r\n    event ChangePermission (address indexed _called, address indexed _to, bool _permission);\r\n    event ChangeSaleSettings (address indexed _called, address indexed _token, uint _price, uint _bonusLine, uint _bonusSize);\r\n    event Buy (address indexed _called, address indexed _token, uint _count, uint _bonusCount, uint _value);\r\n    event Donate (address indexed _from, uint _value);\r\n\r\n    function LittleStoreERC20Token () public\r\n    {\r\n        agents[msg.sender] = true;\r\n        sale = true;\r\n    }\r\n\r\n    modifier onlyAdministrators ()\r\n    {\r\n        require (agents[msg.sender]);\r\n        _;\r\n    }\r\n\r\n    function changePermission (address _agent, bool _permission) public onlyAdministrators ()\r\n    {\r\n        if (msg.sender != _agent)\r\n        {\r\n            agents[_agent] = _permission;\r\n            ChangePermission (msg.sender, _agent, _permission);\r\n        }\r\n    }\r\n\r\n    function changeSaleSettings (address _addressERC20Token, uint _priceGwei, uint _bonusLine, uint _bonusSize) public onlyAdministrators ()\r\n    {\r\n        addressERC20Token = _addressERC20Token;\r\n        ERC20Token = InterfaceERC20Token (_addressERC20Token);\r\n        price = _priceGwei * 1000000000; //calculation of gwei in wei\r\n        bonusLine = _bonusLine;\r\n        bonusSize = _bonusSize;\r\n        ChangeSaleSettings (msg.sender, _addressERC20Token, _priceGwei * 1000000000, _bonusLine, _bonusSize);\r\n    }\r\n\r\n    function saleValve (bool _sale) public onlyAdministrators ()\r\n    {\r\n        sale = _sale;\r\n    }\r\n\r\n    function allowanceTransfer () public onlyAdministrators ()\r\n    {\r\n        ERC20Token.transferFrom (msg.sender, this, ERC20Token.allowance (msg.sender, this));\r\n    }\r\n\r\n    function withdrawalToken (address _to) public onlyAdministrators ()\r\n    {\r\n        ERC20Token.transfer (_to, ERC20Token.balanceOf (this));\r\n    }\r\n\r\n    function withdrawal (address _to) public onlyAdministrators ()\r\n    {\r\n        _to.transfer (this.balance);\r\n    }\r\n    \r\n    function destroy (address _to) public onlyAdministrators ()\r\n    {\r\n        withdrawalToken (_to);\r\n        selfdestruct (_to);\r\n    }\r\n\r\n    function totalSale () public constant returns (uint)\r\n    {\r\n        return ERC20Token.balanceOf (this); \r\n    }\r\n\r\n    function () payable\r\n    {\r\n       Donate (msg.sender, msg.value);\r\n    }\r\n\r\n    function buy () payable\r\n    {\r\n        uint thisBalance = ERC20Token.balanceOf (this);\r\n        require (thisBalance > 0 && sale);\r\n        \r\n        uint countToken;\r\n        uint countBonusToken;\r\n        \r\n        countToken = msg.value / price;\r\n        require (countToken > 0);\r\n        \r\n        if (thisBalance > countToken)\r\n        {\r\n            thisBalance -= countToken;\r\n            countBonusToken = (countToken / bonusLine) * bonusSize;\r\n            \r\n            if (countBonusToken > 0 && thisBalance <= countBonusToken)\r\n            {\r\n                countBonusToken = thisBalance;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            countToken = thisBalance;\r\n        }\r\n            \r\n        require (ERC20Token.transfer (msg.sender, countToken + countBonusToken));\r\n        msg.sender.transfer (msg.value - (countToken * price));\r\n        Buy (msg.sender, addressERC20Token, countToken, countBonusToken, msg.value);\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"destroy\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"withdrawalToken\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bonusSize\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bonusLine\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"allowanceTransfer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sale\",\"type\":\"bool\"}],\"name\":\"saleValve\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sale\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_agent\",\"type\":\"address\"},{\"name\":\"_permission\",\"type\":\"bool\"}],\"name\":\"changePermission\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"addressERC20Token\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"}],\"name\":\"withdrawal\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"price\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"buy\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_addressERC20Token\",\"type\":\"address\"},{\"name\":\"_priceGwei\",\"type\":\"uint256\"},{\"name\":\"_bonusLine\",\"type\":\"uint256\"},{\"name\":\"_bonusSize\",\"type\":\"uint256\"}],\"name\":\"changeSaleSettings\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSale\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"agents\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_called\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_permission\",\"type\":\"bool\"}],\"name\":\"ChangePermission\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_called\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_token\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_price\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_bonusLine\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_bonusSize\",\"type\":\"uint256\"}],\"name\":\"ChangeSaleSettings\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_called\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_token\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_count\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_bonusCount\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Buy\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Donate\",\"type\":\"event\"}]","ContractName":"LittleStoreERC20Token","CompilerVersion":"v0.4.21+commit.dfe3193c","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://14745185bb7b904a4e98edc03048d1a05683b8d780f1c164b96c751887006767"}]}