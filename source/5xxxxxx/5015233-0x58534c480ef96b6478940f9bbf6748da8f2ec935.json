{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.17;\r\n\r\n/*\r\n\r\n * source       https://github.com/blockbitsio/\r\n\r\n * @name        Application Entity Generic Contract\r\n * @package     BlockBitsIO\r\n * @author      Micky Socaci <micky@nowlive.ro>\r\n\r\n    Used for the ABI interface when assets need to call Application Entity.\r\n\r\n    This is required, otherwise we end up loading the assets themselves when we load the ApplicationEntity contract\r\n    and end up in a loop\r\n*/\r\n\r\n\r\n\r\ncontract ApplicationEntityABI {\r\n\r\n    address public ProposalsEntity;\r\n    address public FundingEntity;\r\n    address public MilestonesEntity;\r\n    address public MeetingsEntity;\r\n    address public BountyManagerEntity;\r\n    address public TokenManagerEntity;\r\n    address public ListingContractEntity;\r\n    address public FundingManagerEntity;\r\n    address public NewsContractEntity;\r\n\r\n    bool public _initialized = false;\r\n    bool public _locked = false;\r\n    uint8 public CurrentEntityState;\r\n    uint8 public AssetCollectionNum;\r\n    address public GatewayInterfaceAddress;\r\n    address public deployerAddress;\r\n    address testAddressAllowUpgradeFrom;\r\n    mapping (bytes32 => uint8) public EntityStates;\r\n    mapping (bytes32 => address) public AssetCollection;\r\n    mapping (uint8 => bytes32) public AssetCollectionIdToName;\r\n    mapping (bytes32 => uint256) public BylawsUint256;\r\n    mapping (bytes32 => bytes32) public BylawsBytes32;\r\n\r\n    function ApplicationEntity() public;\r\n    function getEntityState(bytes32 name) public view returns (uint8);\r\n    function linkToGateway( address _GatewayInterfaceAddress, bytes32 _sourceCodeUrl ) external;\r\n    function setUpgradeState(uint8 state) public ;\r\n    function addAssetProposals(address _assetAddresses) external;\r\n    function addAssetFunding(address _assetAddresses) external;\r\n    function addAssetMilestones(address _assetAddresses) external;\r\n    function addAssetMeetings(address _assetAddresses) external;\r\n    function addAssetBountyManager(address _assetAddresses) external;\r\n    function addAssetTokenManager(address _assetAddresses) external;\r\n    function addAssetFundingManager(address _assetAddresses) external;\r\n    function addAssetListingContract(address _assetAddresses) external;\r\n    function addAssetNewsContract(address _assetAddresses) external;\r\n    function getAssetAddressByName(bytes32 _name) public view returns (address);\r\n    function setBylawUint256(bytes32 name, uint256 value) public;\r\n    function getBylawUint256(bytes32 name) public view returns (uint256);\r\n    function setBylawBytes32(bytes32 name, bytes32 value) public;\r\n    function getBylawBytes32(bytes32 name) public view returns (bytes32);\r\n    function initialize() external returns (bool);\r\n    function getParentAddress() external view returns(address);\r\n    function createCodeUpgradeProposal( address _newAddress, bytes32 _sourceCodeUrl ) external returns (uint256);\r\n    function acceptCodeUpgradeProposal(address _newAddress) external;\r\n    function initializeAssetsToThisApplication() external returns (bool);\r\n    function transferAssetsToNewApplication(address _newAddress) external returns (bool);\r\n    function lock() external returns (bool);\r\n    function canInitiateCodeUpgrade(address _sender) public view returns(bool);\r\n    function doStateChanges() public;\r\n    function hasRequiredStateChanges() public view returns (bool);\r\n    function anyAssetHasChanges() public view returns (bool);\r\n    function extendedAnyAssetHasChanges() internal view returns (bool);\r\n    function getRequiredStateChanges() public view returns (uint8, uint8);\r\n    function getTimestamp() view public returns (uint256);\r\n\r\n}\r\n\r\n/*\r\n\r\n * source       https://github.com/blockbitsio/\r\n\r\n * @name        Application Asset Contract\r\n * @package     BlockBitsIO\r\n * @author      Micky Socaci <micky@nowlive.ro>\r\n\r\n Any contract inheriting this will be usable as an Asset in the Application Entity\r\n\r\n*/\r\n\r\n\r\n\r\n\r\ncontract ApplicationAsset {\r\n\r\n    event EventAppAssetOwnerSet(bytes32 indexed _name, address indexed _owner);\r\n    event EventRunBeforeInit(bytes32 indexed _name);\r\n    event EventRunBeforeApplyingSettings(bytes32 indexed _name);\r\n\r\n\r\n    mapping (bytes32 => uint8) public EntityStates;\r\n    mapping (bytes32 => uint8) public RecordStates;\r\n    uint8 public CurrentEntityState;\r\n\r\n    event EventEntityProcessor(bytes32 indexed _assetName, uint8 indexed _current, uint8 indexed _required);\r\n    event DebugEntityRequiredChanges( bytes32 _assetName, uint8 indexed _current, uint8 indexed _required );\r\n\r\n    bytes32 public assetName;\r\n\r\n    /* Asset records */\r\n    uint8 public RecordNum = 0;\r\n\r\n    /* Asset initialised or not */\r\n    bool public _initialized = false;\r\n\r\n    /* Asset settings present or not */\r\n    bool public _settingsApplied = false;\r\n\r\n    /* Asset owner ( ApplicationEntity address ) */\r\n    address public owner = address(0x0) ;\r\n    address public deployerAddress;\r\n\r\n    function ApplicationAsset() public {\r\n        deployerAddress = msg.sender;\r\n    }\r\n\r\n    function setInitialApplicationAddress(address _ownerAddress) public onlyDeployer requireNotInitialised {\r\n        owner = _ownerAddress;\r\n    }\r\n\r\n    function setInitialOwnerAndName(bytes32 _name) external\r\n        requireNotInitialised\r\n        onlyOwner\r\n        returns (bool)\r\n    {\r\n        // init states\r\n        setAssetStates();\r\n        assetName = _name;\r\n        // set initial state\r\n        CurrentEntityState = getEntityState(\"NEW\");\r\n        runBeforeInitialization();\r\n        _initialized = true;\r\n        EventAppAssetOwnerSet(_name, owner);\r\n        return true;\r\n    }\r\n\r\n    function setAssetStates() internal {\r\n        // Asset States\r\n        EntityStates[\"__IGNORED__\"]     = 0;\r\n        EntityStates[\"NEW\"]             = 1;\r\n        // Funding Stage States\r\n        RecordStates[\"__IGNORED__\"]     = 0;\r\n    }\r\n\r\n    function getRecordState(bytes32 name) public view returns (uint8) {\r\n        return RecordStates[name];\r\n    }\r\n\r\n    function getEntityState(bytes32 name) public view returns (uint8) {\r\n        return EntityStates[name];\r\n    }\r\n\r\n    function runBeforeInitialization() internal requireNotInitialised  {\r\n        EventRunBeforeInit(assetName);\r\n    }\r\n\r\n    function applyAndLockSettings()\r\n        public\r\n        onlyDeployer\r\n        requireInitialised\r\n        requireSettingsNotApplied\r\n        returns(bool)\r\n    {\r\n        runBeforeApplyingSettings();\r\n        _settingsApplied = true;\r\n        return true;\r\n    }\r\n\r\n    function runBeforeApplyingSettings() internal requireInitialised requireSettingsNotApplied  {\r\n        EventRunBeforeApplyingSettings(assetName);\r\n    }\r\n\r\n    function transferToNewOwner(address _newOwner) public requireInitialised onlyOwner returns (bool) {\r\n        require(owner != address(0x0) && _newOwner != address(0x0));\r\n        owner = _newOwner;\r\n        EventAppAssetOwnerSet(assetName, owner);\r\n        return true;\r\n    }\r\n\r\n    function getApplicationAssetAddressByName(bytes32 _name)\r\n        public\r\n        view\r\n        returns(address)\r\n    {\r\n        address asset = ApplicationEntityABI(owner).getAssetAddressByName(_name);\r\n        if( asset != address(0x0) ) {\r\n            return asset;\r\n        } else {\r\n            revert();\r\n        }\r\n    }\r\n\r\n    function getApplicationState() public view returns (uint8) {\r\n        return ApplicationEntityABI(owner).CurrentEntityState();\r\n    }\r\n\r\n    function getApplicationEntityState(bytes32 name) public view returns (uint8) {\r\n        return ApplicationEntityABI(owner).getEntityState(name);\r\n    }\r\n\r\n    function getAppBylawUint256(bytes32 name) public view requireInitialised returns (uint256) {\r\n        ApplicationEntityABI CurrentApp = ApplicationEntityABI(owner);\r\n        return CurrentApp.getBylawUint256(name);\r\n    }\r\n\r\n    function getAppBylawBytes32(bytes32 name) public view requireInitialised returns (bytes32) {\r\n        ApplicationEntityABI CurrentApp = ApplicationEntityABI(owner);\r\n        return CurrentApp.getBylawBytes32(name);\r\n    }\r\n\r\n    modifier onlyOwner() {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    modifier onlyApplicationEntity() {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    modifier requireInitialised() {\r\n        require(_initialized == true);\r\n        _;\r\n    }\r\n\r\n    modifier requireNotInitialised() {\r\n        require(_initialized == false);\r\n        _;\r\n    }\r\n\r\n    modifier requireSettingsApplied() {\r\n        require(_settingsApplied == true);\r\n        _;\r\n    }\r\n\r\n    modifier requireSettingsNotApplied() {\r\n        require(_settingsApplied == false);\r\n        _;\r\n    }\r\n\r\n    modifier onlyDeployer() {\r\n        require(msg.sender == deployerAddress);\r\n        _;\r\n    }\r\n\r\n    modifier onlyAsset(bytes32 _name) {\r\n        address AssetAddress = getApplicationAssetAddressByName(_name);\r\n        require( msg.sender == AssetAddress);\r\n        _;\r\n    }\r\n\r\n    function getTimestamp() view public returns (uint256) {\r\n        return now;\r\n    }\r\n\r\n\r\n}\r\n\r\n/*\r\n\r\n * source       https://github.com/blockbitsio/\r\n\r\n * @name        Application Asset Contract ABI\r\n * @package     BlockBitsIO\r\n * @author      Micky Socaci <micky@nowlive.ro>\r\n\r\n Any contract inheriting this will be usable as an Asset in the Application Entity\r\n\r\n*/\r\n\r\n\r\n\r\ncontract ABIApplicationAsset {\r\n\r\n    bytes32 public assetName;\r\n    uint8 public CurrentEntityState;\r\n    uint8 public RecordNum;\r\n    bool public _initialized;\r\n    bool public _settingsApplied;\r\n    address public owner;\r\n    address public deployerAddress;\r\n    mapping (bytes32 => uint8) public EntityStates;\r\n    mapping (bytes32 => uint8) public RecordStates;\r\n\r\n    function setInitialApplicationAddress(address _ownerAddress) public;\r\n    function setInitialOwnerAndName(bytes32 _name) external returns (bool);\r\n    function getRecordState(bytes32 name) public view returns (uint8);\r\n    function getEntityState(bytes32 name) public view returns (uint8);\r\n    function applyAndLockSettings() public returns(bool);\r\n    function transferToNewOwner(address _newOwner) public returns (bool);\r\n    function getApplicationAssetAddressByName(bytes32 _name) public returns(address);\r\n    function getApplicationState() public view returns (uint8);\r\n    function getApplicationEntityState(bytes32 name) public view returns (uint8);\r\n    function getAppBylawUint256(bytes32 name) public view returns (uint256);\r\n    function getAppBylawBytes32(bytes32 name) public view returns (bytes32);\r\n    function getTimestamp() view public returns (uint256);\r\n\r\n\r\n}\r\n\r\n/*\r\n\r\n * source       https://github.com/blockbitsio/\r\n\r\n * @name        Funding Contract ABI\r\n * @package     BlockBitsIO\r\n * @author      Micky Socaci <micky@nowlive.ro>\r\n\r\n Contains the Funding Contract code deployed and linked to the Application Entity\r\n\r\n*/\r\n\r\n\r\n\r\n\r\n\r\ncontract ABIFundingManager is ABIApplicationAsset {\r\n\r\n    bool public fundingProcessed;\r\n    bool FundingPoolBalancesAllocated;\r\n    uint8 public VaultCountPerProcess;\r\n    uint256 public lastProcessedVaultId;\r\n    uint256 public vaultNum;\r\n    uint256 public LockedVotingTokens;\r\n    bytes32 public currentTask;\r\n    mapping (bytes32 => bool) public taskByHash;\r\n    mapping  (address => address) public vaultList;\r\n    mapping  (uint256 => address) public vaultById;\r\n\r\n    function receivePayment(address _sender, uint8 _payment_method, uint8 _funding_stage) payable public returns(bool);\r\n    function getMyVaultAddress(address _sender) public view returns (address);\r\n    function setVaultCountPerProcess(uint8 _perProcess) external;\r\n    function getHash(bytes32 actionType, bytes32 arg1) public pure returns ( bytes32 );\r\n    function getCurrentMilestoneProcessed() public view returns (bool);\r\n    function processFundingFailedFinished() public view returns (bool);\r\n    function processFundingSuccessfulFinished() public view returns (bool);\r\n    function getCurrentMilestoneIdHash() internal view returns (bytes32);\r\n    function processMilestoneFinished() public view returns (bool);\r\n    function processEmergencyFundReleaseFinished() public view returns (bool);\r\n    function getAfterTransferLockedTokenBalances(address vaultAddress, bool excludeCurrent) public view returns (uint256);\r\n    function VaultRequestedUpdateForLockedVotingTokens(address owner) public;\r\n    function doStateChanges() public;\r\n    function hasRequiredStateChanges() public view returns (bool);\r\n    function getRequiredStateChanges() public view returns (uint8, uint8);\r\n    function ApplicationInFundingOrDevelopment() public view returns(bool);\r\n\r\n}\r\n\r\n/*\r\n\r\n * source       https://github.com/blockbitsio/\r\n\r\n * @name        Token Manager Contract\r\n * @package     BlockBitsIO\r\n * @author      Micky Socaci <micky@nowlive.ro>\r\n\r\n*/\r\n\r\n\r\n\r\n\r\n\r\ncontract ABITokenManager is ABIApplicationAsset {\r\n\r\n    address public TokenSCADAEntity;\r\n    address public TokenEntity;\r\n    address public MarketingMethodAddress;\r\n    bool OwnerTokenBalancesReleased = false;\r\n\r\n    function addSettings(address _scadaAddress, address _tokenAddress, address _marketing ) public;\r\n    function getTokenSCADARequiresHardCap() public view returns (bool);\r\n    function mint(address _to, uint256 _amount) public returns (bool);\r\n    function finishMinting() public returns (bool);\r\n    function mintForMarketingPool(address _to, uint256 _amount) external returns (bool);\r\n    function ReleaseOwnersLockedTokens(address _multiSigOutputAddress) public returns (bool);\r\n\r\n}\r\n\r\n/*\r\n\r\n * source       https://github.com/blockbitsio/\r\n\r\n * @name        General Funding Input Contract ABI\r\n * @package     BlockBitsIO\r\n * @author      Micky Socaci <micky@nowlive.ro>\r\n\r\n*/\r\n\r\n\r\n\r\ncontract ABIFundingInputGeneral {\r\n\r\n    bool public initialized = false;\r\n    uint8 public typeId;\r\n    address public FundingAssetAddress;\r\n\r\n    event EventInputPaymentReceived(address sender, uint amount, uint8 _type);\r\n\r\n    function setFundingAssetAddress(address _addr) public;\r\n    function () public payable;\r\n    function buy() public payable returns(bool);\r\n}\r\n\r\n/*\r\n\r\n * source       https://github.com/blockbitsio/\r\n\r\n * @name        Funding Contract\r\n * @package     BlockBitsIO\r\n * @author      Micky Socaci <micky@nowlive.ro>\r\n\r\n Contains the Funding Contract code deployed and linked to the Application Entity\r\n\r\n !!! Links directly to Milestones\r\n\r\n*/\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\ncontract Funding is ApplicationAsset {\r\n\r\n    address public multiSigOutputAddress;\r\n    ABIFundingInputGeneral public DirectInput;\r\n    ABIFundingInputGeneral public MilestoneInput;\r\n\r\n    // mapping (bytes32 => uint8) public FundingMethods;\r\n    enum FundingMethodIds {\r\n        __IGNORED__,\r\n        DIRECT_ONLY, \t\t\t\t//\r\n        MILESTONE_ONLY, \t\t    //\r\n        DIRECT_AND_MILESTONE\t\t//\r\n    }\r\n\r\n    ABITokenManager public TokenManagerEntity;\r\n    ABIFundingManager public FundingManagerEntity;\r\n\r\n    event FundingStageCreated( uint8 indexed index, bytes32 indexed name );\r\n\r\n    struct FundingStage {\r\n        bytes32 name;\r\n        uint8   state;\r\n        uint256 time_start;\r\n        uint256 time_end;\r\n        uint256 amount_cap_soft;            // 0 = not enforced\r\n        uint256 amount_cap_hard;            // 0 = not enforced\r\n        uint256 amount_raised;              // 0 = not enforced\r\n        // funding method settings\r\n        uint256 minimum_entry;\r\n        uint8   methods;                    // FundingMethodIds\r\n        // token settings\r\n        uint256 fixed_tokens;\r\n        uint8   price_addition_percentage;  //\r\n        uint8   token_share_percentage;\r\n        uint8   index;\r\n    }\r\n\r\n    mapping (uint8 => FundingStage) public Collection;\r\n    uint8 public FundingStageNum = 0;\r\n    uint8 public currentFundingStage = 1;\r\n\r\n    // funding settings\r\n    uint256 public AmountRaised = 0;\r\n    uint256 public MilestoneAmountRaised = 0;\r\n\r\n    uint256 public GlobalAmountCapSoft = 0;\r\n    uint256 public GlobalAmountCapHard = 0;\r\n\r\n    uint8 public TokenSellPercentage = 0;\r\n\r\n    uint256 public Funding_Setting_funding_time_start = 0;\r\n    uint256 public Funding_Setting_funding_time_end = 0;\r\n\r\n    uint256 public Funding_Setting_cashback_time_start = 0;\r\n    // end time is ignored at this stage, anyone can cashback forever if funding fails.\r\n    uint256 public Funding_Setting_cashback_time_end = 0;\r\n\r\n    // to be taken from application bylaws\r\n    uint256 public Funding_Setting_cashback_before_start_wait_duration = 7 days;\r\n    uint256 public Funding_Setting_cashback_duration = 365 days;\r\n\r\n    event LifeCycle();\r\n    event DebugRecordRequiredChanges( bytes32 indexed _assetName, uint8 indexed _current, uint8 indexed _required );\r\n    event DebugCallAgain(uint8 indexed _who);\r\n\r\n    event EventEntityProcessor(bytes32 indexed _assetName, uint8 indexed _current, uint8 indexed _required);\r\n    event EventRecordProcessor(bytes32 indexed _assetName, uint8 indexed _current, uint8 indexed _required);\r\n\r\n    event DebugAction(bytes32 indexed _name, bool indexed _allowed);\r\n\r\n\r\n    event EventFundingReceivedPayment(address indexed _sender, uint8 indexed _payment_method, uint256 indexed _amount );\r\n\r\n    function runBeforeInitialization() internal requireNotInitialised {\r\n\r\n        // instantiate token manager, moved from runBeforeApplyingSettings\r\n        TokenManagerEntity = ABITokenManager( getApplicationAssetAddressByName('TokenManager') );\r\n        FundingManagerEntity = ABIFundingManager( getApplicationAssetAddressByName('FundingManager') );\r\n\r\n        EventRunBeforeInit(assetName);\r\n    }\r\n\r\n    function setAssetStates() internal {\r\n        // Asset States\r\n        EntityStates[\"__IGNORED__\"]     = 0;\r\n        EntityStates[\"NEW\"]             = 1;\r\n        EntityStates[\"WAITING\"]         = 2;\r\n        EntityStates[\"IN_PROGRESS\"]     = 3;\r\n        EntityStates[\"COOLDOWN\"]        = 4;\r\n        EntityStates[\"FUNDING_ENDED\"]   = 5;\r\n        EntityStates[\"FAILED\"]          = 6;\r\n        EntityStates[\"FAILED_FINAL\"]    = 7;\r\n        EntityStates[\"SUCCESSFUL\"]      = 8;\r\n        EntityStates[\"SUCCESSFUL_FINAL\"]= 9;\r\n\r\n        // Funding Stage States\r\n        RecordStates[\"__IGNORED__\"]     = 0;\r\n        RecordStates[\"NEW\"]             = 1;\r\n        RecordStates[\"IN_PROGRESS\"]     = 2;\r\n        RecordStates[\"FINAL\"]           = 3;\r\n    }\r\n\r\n    function addSettings(address _outputAddress, uint256 soft_cap, uint256 hard_cap, uint8 sale_percentage, address _direct, address _milestone )\r\n        public\r\n        requireInitialised\r\n        requireSettingsNotApplied\r\n    {\r\n        if(soft_cap > hard_cap) {\r\n            revert();\r\n        }\r\n\r\n        multiSigOutputAddress = _outputAddress;\r\n        GlobalAmountCapSoft = soft_cap;\r\n        GlobalAmountCapHard = hard_cap;\r\n\r\n        if(sale_percentage > 90) {\r\n            revert();\r\n        }\r\n\r\n        TokenSellPercentage = sale_percentage;\r\n\r\n        DirectInput = ABIFundingInputGeneral(_direct);\r\n        MilestoneInput = ABIFundingInputGeneral(_milestone);\r\n    }\r\n\r\n    function addFundingStage(\r\n        bytes32 _name,\r\n        uint256 _time_start,\r\n        uint256 _time_end,\r\n        uint256 _amount_cap_soft,\r\n        uint256 _amount_cap_hard,   // required > 0\r\n        uint8   _methods,\r\n        uint256 _minimum_entry,\r\n        uint256 _fixed_tokens,\r\n        uint8   _price_addition_percentage,\r\n        uint8   _token_share_percentage\r\n    )\r\n        public\r\n        onlyDeployer\r\n        requireInitialised\r\n        requireSettingsNotApplied\r\n    {\r\n\r\n        // make sure end time is later than start time\r\n        if(_time_end <= _time_start) {\r\n            revert();\r\n        }\r\n\r\n        // make sure hard cap exists!\r\n        if(_amount_cap_hard == 0) {\r\n            revert();\r\n        }\r\n\r\n        // make sure soft cap is not higher than hard cap\r\n        if(_amount_cap_soft > _amount_cap_hard) {\r\n            revert();\r\n        }\r\n\r\n        if(_token_share_percentage > 0) {\r\n            revert();\r\n        }\r\n\r\n        FundingStage storage prevRecord = Collection[FundingStageNum];\r\n        if(FundingStageNum > 0) {\r\n\r\n            // new stage does not start before the previous one ends\r\n            if( _time_start <= prevRecord.time_end ) {\r\n                revert();\r\n            }\r\n        }\r\n\r\n        FundingStage storage record = Collection[++FundingStageNum];\r\n        record.name             = _name;\r\n        record.time_start       = _time_start;\r\n        record.time_end         = _time_end;\r\n        record.amount_cap_soft  = _amount_cap_soft;\r\n        record.amount_cap_hard  = _amount_cap_hard;\r\n\r\n        // funding method settings\r\n        record.methods          = _methods;\r\n        record.minimum_entry    = _minimum_entry;\r\n\r\n        // token settings\r\n        record.fixed_tokens              = _fixed_tokens;\r\n        record.price_addition_percentage = _price_addition_percentage;\r\n        record.token_share_percentage    = _token_share_percentage;\r\n\r\n        // state new\r\n        record.state = getRecordState(\"NEW\");\r\n        record.index = FundingStageNum;\r\n\r\n        FundingStageCreated( FundingStageNum, _name );\r\n\r\n        adjustFundingSettingsBasedOnNewFundingStage();\r\n    }\r\n\r\n    function adjustFundingSettingsBasedOnNewFundingStage() internal {\r\n\r\n        // set funding start\r\n        Funding_Setting_funding_time_start = Collection[1].time_start;\r\n        // set funding end\r\n        Funding_Setting_funding_time_end = Collection[FundingStageNum].time_end;\r\n\r\n        // cashback starts 1 day after funding status is failed\r\n        Funding_Setting_cashback_time_start = Funding_Setting_funding_time_end + Funding_Setting_cashback_before_start_wait_duration;\r\n        Funding_Setting_cashback_time_end = Funding_Setting_cashback_time_start + Funding_Setting_cashback_duration;\r\n    }\r\n\r\n    function getStageAmount(uint8 StageId) public view returns ( uint256 ) {\r\n        return Collection[StageId].fixed_tokens;\r\n    }\r\n\r\n    function allowedPaymentMethod(uint8 _payment_method) public pure returns (bool) {\r\n        if(\r\n        _payment_method == uint8(FundingMethodIds.DIRECT_ONLY) ||\r\n        _payment_method == uint8(FundingMethodIds.MILESTONE_ONLY)\r\n        ){\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function receivePayment(address _sender, uint8 _payment_method)\r\n        payable\r\n        public\r\n        requireInitialised\r\n        onlyInputPaymentMethod\r\n        returns(bool)\r\n    {\r\n        // check that msg.value is higher than 0, don't really want to have to deal with minus in case the network breaks this somehow\r\n        if(allowedPaymentMethod(_payment_method) && canAcceptPayment(msg.value) ) {\r\n\r\n            uint256 contributed_value = msg.value;\r\n\r\n            uint256 amountOverCap = getValueOverCurrentCap(contributed_value);\r\n            if ( amountOverCap > 0 ) {\r\n                // calculate how much we can accept\r\n\r\n                // update contributed value\r\n                contributed_value -= amountOverCap;\r\n            }\r\n\r\n            Collection[currentFundingStage].amount_raised+= contributed_value;\r\n            AmountRaised+= contributed_value;\r\n\r\n            if(_payment_method == uint8(FundingMethodIds.MILESTONE_ONLY)) {\r\n                MilestoneAmountRaised+=contributed_value;\r\n            }\r\n\r\n            EventFundingReceivedPayment(_sender, _payment_method, contributed_value);\r\n\r\n            if( FundingManagerEntity.receivePayment.value(contributed_value)( _sender, _payment_method, currentFundingStage ) ) {\r\n\r\n                if(amountOverCap > 0) {\r\n                    // last step, if we received more than we can accept, send remaining back\r\n                    // amountOverCap sent back\r\n                    if( _sender.send(this.balance) ) {\r\n                        return true;\r\n                    }\r\n                    else {\r\n                        revert();\r\n                    }\r\n                } else {\r\n                    return true;\r\n                }\r\n            } else {\r\n                revert();\r\n            }\r\n\r\n        } else {\r\n            revert();\r\n        }\r\n    }\r\n\r\n    modifier onlyInputPaymentMethod() {\r\n        require(msg.sender != 0x0 && ( msg.sender == address(DirectInput) || msg.sender == address(MilestoneInput) ));\r\n        _;\r\n    }\r\n\r\n    function canAcceptPayment(uint256 _amount) public view returns (bool) {\r\n        if( _amount > 0 ) {\r\n            // funding state should be IN_PROGRESS, no state changes should be required\r\n            if( CurrentEntityState == getEntityState(\"IN_PROGRESS\") && hasRequiredStateChanges() == false) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function getValueOverCurrentCap(uint256 _amount) public view returns (uint256) {\r\n        FundingStage memory record = Collection[currentFundingStage];\r\n        uint256 remaining = record.amount_cap_hard - AmountRaised;\r\n        if( _amount > remaining ) {\r\n            return _amount - remaining;\r\n        }\r\n        return 0;\r\n    }\r\n\r\n\r\n    /*\r\n    * Update Existing FundingStage\r\n    *\r\n    * @param        uint8 _record_id\r\n    * @param        uint8 _new_state\r\n    * @param        uint8 _duration\r\n    *\r\n    * @access       public\r\n    * @type         method\r\n    * @modifiers    onlyOwner, requireInitialised, updateAllowed\r\n    *\r\n    * @return       void\r\n    */\r\n\r\n    function updateFundingStage( uint8 _new_state )\r\n        internal\r\n        requireInitialised\r\n        FundingStageUpdateAllowed(_new_state)\r\n        returns (bool)\r\n    {\r\n        FundingStage storage rec = Collection[currentFundingStage];\r\n        rec.state       = _new_state;\r\n        return true;\r\n    }\r\n\r\n\r\n    /*\r\n    * Modifier: Validate if record updates are allowed\r\n    *\r\n    * @type         modifier\r\n    *\r\n    * @param        uint8 _record_id\r\n    * @param        uint8 _new_state\r\n    * @param        uint256 _duration\r\n    *\r\n    * @return       bool\r\n    */\r\n\r\n    modifier FundingStageUpdateAllowed(uint8 _new_state) {\r\n        require( isFundingStageUpdateAllowed( _new_state )  );\r\n        _;\r\n    }\r\n\r\n    /*\r\n     * Method: Validate if record can be updated to requested state\r\n     *\r\n     * @access       public\r\n     * @type         method\r\n     *\r\n     * @param        uint8 _record_id\r\n     * @param        uint8 _new_state\r\n     *\r\n     * @return       bool\r\n     */\r\n    function isFundingStageUpdateAllowed(uint8 _new_state ) public view returns (bool) {\r\n\r\n        var (CurrentRecordState, RecordStateRequired, EntityStateRequired) = getRequiredStateChanges();\r\n\r\n        CurrentRecordState = 0;\r\n        EntityStateRequired = 0;\r\n\r\n        if(_new_state == uint8(RecordStateRequired)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /*\r\n     * Funding Phase changes\r\n     *\r\n     * Method: Get FundingStage Required State Changes\r\n     *\r\n     * @access       public\r\n     * @type         method\r\n     * @modifiers    onlyOwner\r\n     *\r\n     * @return       uint8 RecordStateRequired\r\n     */\r\n    function getRecordStateRequiredChanges() public view returns (uint8) {\r\n\r\n        FundingStage memory record = Collection[currentFundingStage];\r\n        uint8 RecordStateRequired = getRecordState(\"__IGNORED__\");\r\n\r\n        if(record.state == getRecordState(\"FINAL\")) {\r\n            return getRecordState(\"__IGNORED__\");\r\n        }\r\n\r\n        /*\r\n            If funding stage is not started and timestamp is after start time:\r\n            - we need to change state to IN_PROGRESS so we can start receiving funds\r\n        */\r\n        if( getTimestamp() >= record.time_start ) {\r\n            RecordStateRequired = getRecordState(\"IN_PROGRESS\");\r\n        }\r\n\r\n        /*\r\n            This is where we're accepting payments unless we can change state to FINAL\r\n\r\n            1. Check if timestamp is after record time_end\r\n            2. Check hard caps\r\n            All lead to state change => FINAL\r\n        */\r\n\r\n        // Time check\r\n        if(getTimestamp() >= record.time_end) {\r\n            // Funding Phase ended passed\r\n            return getRecordState(\"FINAL\");\r\n        }\r\n\r\n        // will trigger in pre-ico\r\n        // Record Hard Cap Check\r\n        if(AmountRaised >= record.amount_cap_hard) {\r\n            // record hard cap reached\r\n            return getRecordState(\"FINAL\");\r\n        }\r\n\r\n        // will trigger in ico\r\n        // Global Hard Cap Check\r\n        if(AmountRaised >= GlobalAmountCapHard) {\r\n            // hard cap reached\r\n            return getRecordState(\"FINAL\");\r\n        }\r\n\r\n        if( record.state == RecordStateRequired ) {\r\n            RecordStateRequired = getRecordState(\"__IGNORED__\");\r\n        }\r\n\r\n        return RecordStateRequired;\r\n    }\r\n\r\n    function doStateChanges() public {\r\n        var (CurrentRecordState, RecordStateRequired, EntityStateRequired) = getRequiredStateChanges();\r\n        bool callAgain = false;\r\n\r\n        DebugRecordRequiredChanges( assetName, CurrentRecordState, RecordStateRequired );\r\n        DebugEntityRequiredChanges( assetName, CurrentEntityState, EntityStateRequired );\r\n\r\n        if( RecordStateRequired != getRecordState(\"__IGNORED__\") ) {\r\n            // process record changes.\r\n            RecordProcessor(CurrentRecordState, RecordStateRequired);\r\n            DebugCallAgain(2);\r\n            callAgain = true;\r\n        }\r\n\r\n        if(EntityStateRequired != getEntityState(\"__IGNORED__\") ) {\r\n            // process entity changes.\r\n            // if(CurrentEntityState != EntityStateRequired) {\r\n            EntityProcessor(EntityStateRequired);\r\n            DebugCallAgain(1);\r\n            callAgain = true;\r\n            //}\r\n        }\r\n    }\r\n\r\n    function hasRequiredStateChanges() public view returns (bool) {\r\n        bool hasChanges = false;\r\n\r\n        var (CurrentRecordState, RecordStateRequired, EntityStateRequired) = getRequiredStateChanges();\r\n        CurrentRecordState = 0;\r\n\r\n        if( RecordStateRequired != getRecordState(\"__IGNORED__\") ) {\r\n            hasChanges = true;\r\n        }\r\n        if(EntityStateRequired != getEntityState(\"__IGNORED__\") ) {\r\n            hasChanges = true;\r\n        }\r\n        return hasChanges;\r\n    }\r\n\r\n    // view methods decide if changes are to be made\r\n    // in case of tasks, we do them in the Processors.\r\n\r\n    function RecordProcessor(uint8 CurrentRecordState, uint8 RecordStateRequired) internal {\r\n        EventRecordProcessor( assetName, CurrentRecordState, RecordStateRequired );\r\n        updateFundingStage( RecordStateRequired );\r\n        if( RecordStateRequired == getRecordState(\"FINAL\") ) {\r\n            if(currentFundingStage < FundingStageNum) {\r\n                // jump to next stage\r\n                currentFundingStage++;\r\n            }\r\n        }\r\n    }\r\n\r\n    function EntityProcessor(uint8 EntityStateRequired) internal {\r\n        EventEntityProcessor( assetName, CurrentEntityState, EntityStateRequired );\r\n\r\n        // Do State Specific Updates\r\n        // Update our Entity State\r\n        CurrentEntityState = EntityStateRequired;\r\n\r\n        if ( EntityStateRequired == getEntityState(\"FUNDING_ENDED\") ) {\r\n            /*\r\n                STATE: FUNDING_ENDED\r\n                @Processor hook\r\n                Action: Check if funding is successful or not, and move state to \"FAILED\" or \"SUCCESSFUL\"\r\n            */\r\n\r\n            // Global Hard Cap Check\r\n            if(AmountRaised >= GlobalAmountCapSoft) {\r\n                // hard cap reached\r\n                CurrentEntityState = getEntityState(\"SUCCESSFUL\");\r\n            } else {\r\n                CurrentEntityState = getEntityState(\"FAILED\");\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /*\r\n     * Method: Get Record and Entity State Changes\r\n     *\r\n     * @access       public\r\n     * @type         method\r\n     * @modifiers    onlyOwner\r\n     *\r\n     * @return       ( uint8 CurrentRecordState, uint8 RecordStateRequired, uint8 EntityStateRequired)\r\n     */\r\n    function getRequiredStateChanges() public view returns (uint8, uint8, uint8) {\r\n\r\n        // get FundingStage current state\r\n        FundingStage memory record = Collection[currentFundingStage];\r\n\r\n        uint8 CurrentRecordState = record.state;\r\n        uint8 RecordStateRequired = getRecordStateRequiredChanges();\r\n        uint8 EntityStateRequired = getEntityState(\"__IGNORED__\");\r\n\r\n\r\n        // Funding Record State Overrides\r\n        // if(CurrentRecordState != RecordStateRequired) {\r\n        if(RecordStateRequired != getRecordState(\"__IGNORED__\"))\r\n        {\r\n            // direct state overrides by funding stage\r\n            if(RecordStateRequired == getRecordState(\"IN_PROGRESS\") ) {\r\n                // both funding stage and entity states need to move to IN_PROGRESS\r\n                EntityStateRequired = getEntityState(\"IN_PROGRESS\");\r\n\r\n            } else if (RecordStateRequired == getRecordState(\"FINAL\")) {\r\n                // funding stage moves to FINAL\r\n\r\n                if (currentFundingStage == FundingStageNum) {\r\n                    // if current funding is last\r\n                    EntityStateRequired = getEntityState(\"FUNDING_ENDED\");\r\n                }\r\n                else {\r\n                    // start cooldown between funding stages\r\n                    EntityStateRequired = getEntityState(\"COOLDOWN\");\r\n                }\r\n            }\r\n\r\n        } else {\r\n\r\n            // Records do not require any updates.\r\n            // Do Entity Checks\r\n\r\n            if( CurrentEntityState == getEntityState(\"NEW\") ) {\r\n                /*\r\n                    STATE: NEW\r\n                    Processor Action: Allocate Tokens to Funding / Owners then Update to WAITING\r\n                */\r\n                EntityStateRequired = getEntityState(\"WAITING\");\r\n            } else  if ( CurrentEntityState == getEntityState(\"FUNDING_ENDED\") ) {\r\n                /*\r\n                    STATE: FUNDING_ENDED\r\n                    Processor Action: Check if funding is successful or not, and move state to \"SUCCESSFUL\" or \"FAILED\"\r\n                */\r\n            } else if ( CurrentEntityState == getEntityState(\"SUCCESSFUL\") ) {\r\n                /*\r\n                    STATE: SUCCESSFUL\r\n                    Processor Action: none\r\n\r\n                    External Action:\r\n                    FundingManager - Run Internal Processor ( deliver tokens, deliver direct funding eth )\r\n                */\r\n\r\n                // check funding manager has processed the FUNDING_SUCCESSFUL Task, if true => FUNDING_SUCCESSFUL_DONE\r\n                if(FundingManagerEntity.taskByHash( FundingManagerEntity.getHash(\"FUNDING_SUCCESSFUL_START\", \"\") ) == true) {\r\n                    EntityStateRequired = getEntityState(\"SUCCESSFUL_FINAL\");\r\n                }\r\n                /*\r\n                if( FundingManagerEntity.CurrentEntityState() == FundingManagerEntity.getEntityState(\"FUNDING_SUCCESSFUL_DONE\") ) {\r\n                    EntityStateRequired = getEntityState(\"SUCCESSFUL_FINAL\");\r\n                }\r\n                */\r\n\r\n            } else if ( CurrentEntityState == getEntityState(\"FAILED\") ) {\r\n                /*\r\n                    STATE: FAILED\r\n                    Processor Action: none\r\n\r\n                    External Action:\r\n                    FundingManager - Run Internal Processor (release tokens to owner) ( Cashback is available )\r\n                */\r\n\r\n                // check funding manager state, if FUNDING_NOT_PROCESSED -> getEntityState(\"__IGNORED__\")\r\n                // if FUNDING_FAILED_DONE\r\n\r\n                if(FundingManagerEntity.taskByHash( FundingManagerEntity.getHash(\"FUNDING_FAILED_START\", \"\") ) == true) {\r\n                    EntityStateRequired = getEntityState(\"FAILED_FINAL\");\r\n                }\r\n            } else if ( CurrentEntityState == getEntityState(\"SUCCESSFUL_FINAL\") ) {\r\n                /*\r\n                    STATE: SUCCESSFUL_FINAL\r\n                    Processor Action: none\r\n\r\n                    External Action:\r\n                    Application: Run Internal Processor ( Change State to IN_DEVELOPMENT )\r\n                */\r\n            } else if ( CurrentEntityState == getEntityState(\"FAILED_FINAL\") ) {\r\n                /*\r\n                    STATE: FINAL_FAILED\r\n                    Processor Action: none\r\n\r\n                    External Action:\r\n                    Application: Run Internal Processor ( Change State to FUNDING_FAILED )\r\n                */\r\n            }\r\n        }\r\n\r\n        return (CurrentRecordState, RecordStateRequired, EntityStateRequired);\r\n    }\r\n\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"GlobalAmountCapSoft\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTimestamp\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"name\",\"type\":\"bytes32\"}],\"name\":\"getRecordState\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"StageId\",\"type\":\"uint8\"}],\"name\":\"getStageAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"_initialized\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MilestoneInput\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"name\":\"Collection\",\"outputs\":[{\"name\":\"name\",\"type\":\"bytes32\"},{\"name\":\"state\",\"type\":\"uint8\"},{\"name\":\"time_start\",\"type\":\"uint256\"},{\"name\":\"time_end\",\"type\":\"uint256\"},{\"name\":\"amount_cap_soft\",\"type\":\"uint256\"},{\"name\":\"amount_cap_hard\",\"type\":\"uint256\"},{\"name\":\"amount_raised\",\"type\":\"uint256\"},{\"name\":\"minimum_entry\",\"type\":\"uint256\"},{\"name\":\"methods\",\"type\":\"uint8\"},{\"name\":\"fixed_tokens\",\"type\":\"uint256\"},{\"name\":\"price_addition_percentage\",\"type\":\"uint8\"},{\"name\":\"token_share_percentage\",\"type\":\"uint8\"},{\"name\":\"index\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"RecordNum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"TokenManagerEntity\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"DirectInput\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"Funding_Setting_cashback_duration\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"TokenSellPercentage\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"RecordStates\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"canAcceptPayment\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"FundingManagerEntity\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"AmountRaised\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"EntityStates\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getApplicationState\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"CurrentEntityState\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferToNewOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_name\",\"type\":\"bytes32\"}],\"name\":\"getApplicationAssetAddressByName\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"Funding_Setting_cashback_before_start_wait_duration\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"FundingStageNum\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getRequiredStateChanges\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"multiSigOutputAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_name\",\"type\":\"bytes32\"},{\"name\":\"_time_start\",\"type\":\"uint256\"},{\"name\":\"_time_end\",\"type\":\"uint256\"},{\"name\":\"_amount_cap_soft\",\"type\":\"uint256\"},{\"name\":\"_amount_cap_hard\",\"type\":\"uint256\"},{\"name\":\"_methods\",\"type\":\"uint8\"},{\"name\":\"_minimum_entry\",\"type\":\"uint256\"},{\"name\":\"_fixed_tokens\",\"type\":\"uint256\"},{\"name\":\"_price_addition_percentage\",\"type\":\"uint8\"},{\"name\":\"_token_share_percentage\",\"type\":\"uint8\"}],\"name\":\"addFundingStage\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"GlobalAmountCapHard\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sender\",\"type\":\"address\"},{\"name\":\"_payment_method\",\"type\":\"uint8\"}],\"name\":\"receivePayment\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"Funding_Setting_funding_time_end\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"applyAndLockSettings\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"Funding_Setting_funding_time_start\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"getValueOverCurrentCap\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getRecordStateRequiredChanges\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_new_state\",\"type\":\"uint8\"}],\"name\":\"isFundingStageUpdateAllowed\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_name\",\"type\":\"bytes32\"}],\"name\":\"setInitialOwnerAndName\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_ownerAddress\",\"type\":\"address\"}],\"name\":\"setInitialApplicationAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"assetName\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"Funding_Setting_cashback_time_end\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"_settingsApplied\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"name\",\"type\":\"bytes32\"}],\"name\":\"getAppBylawBytes32\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"name\",\"type\":\"bytes32\"}],\"name\":\"getEntityState\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_outputAddress\",\"type\":\"address\"},{\"name\":\"soft_cap\",\"type\":\"uint256\"},{\"name\":\"hard_cap\",\"type\":\"uint256\"},{\"name\":\"sale_percentage\",\"type\":\"uint8\"},{\"name\":\"_direct\",\"type\":\"address\"},{\"name\":\"_milestone\",\"type\":\"address\"}],\"name\":\"addSettings\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"name\",\"type\":\"bytes32\"}],\"name\":\"getAppBylawUint256\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"currentFundingStage\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"deployerAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"name\",\"type\":\"bytes32\"}],\"name\":\"getApplicationEntityState\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MilestoneAmountRaised\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"Funding_Setting_cashback_time_start\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"doStateChanges\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"hasRequiredStateChanges\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_payment_method\",\"type\":\"uint8\"}],\"name\":\"allowedPaymentMethod\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"index\",\"type\":\"uint8\"},{\"indexed\":true,\"name\":\"name\",\"type\":\"bytes32\"}],\"name\":\"FundingStageCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"LifeCycle\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_assetName\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"_current\",\"type\":\"uint8\"},{\"indexed\":true,\"name\":\"_required\",\"type\":\"uint8\"}],\"name\":\"DebugRecordRequiredChanges\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_who\",\"type\":\"uint8\"}],\"name\":\"DebugCallAgain\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_assetName\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"_current\",\"type\":\"uint8\"},{\"indexed\":true,\"name\":\"_required\",\"type\":\"uint8\"}],\"name\":\"EventEntityProcessor\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_assetName\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"_current\",\"type\":\"uint8\"},{\"indexed\":true,\"name\":\"_required\",\"type\":\"uint8\"}],\"name\":\"EventRecordProcessor\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_name\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"_allowed\",\"type\":\"bool\"}],\"name\":\"DebugAction\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_sender\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_payment_method\",\"type\":\"uint8\"},{\"indexed\":true,\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"EventFundingReceivedPayment\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_name\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"EventAppAssetOwnerSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_name\",\"type\":\"bytes32\"}],\"name\":\"EventRunBeforeInit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_name\",\"type\":\"bytes32\"}],\"name\":\"EventRunBeforeApplyingSettings\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"_assetName\",\"type\":\"bytes32\"},{\"indexed\":true,\"name\":\"_current\",\"type\":\"uint8\"},{\"indexed\":true,\"name\":\"_required\",\"type\":\"uint8\"}],\"name\":\"DebugEntityRequiredChanges\",\"type\":\"event\"}]","ContractName":"Funding","CompilerVersion":"v0.4.17+commit.bdeb9e52","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://7a4f8c16f2b88a018941bed5d9ea86095385b4ce913d51d370e260ccaf709e82"}]}