{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.18;\r\n/* ==================================================================== */\r\n/* Copyright (c) 2018 The MagicAcademy Project.  All rights reserved.\r\n/* \r\n/* https://www.magicacademy.io One of the world's first idle strategy games of blockchain \r\n/*  \r\n/* authors rainy@livestar.com/fanny.zheng@livestar.com\r\n/*                 \r\n/* ==================================================================== */\r\n/**\r\n * @title Ownable\r\n * @dev The Ownable contract has an owner address, and provides basic authorization control\r\n * functions, this simplifies the implementation of \"user permissions\".\r\n */\r\ncontract Ownable {\r\n  address public owner;\r\n\r\n  event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\r\n\r\n  /*\r\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\r\n   * account.\r\n   */\r\n  function Ownable() public {\r\n    owner = msg.sender;\r\n  }\r\n\r\n  /**\r\n   * @dev Throws if called by any account other than the owner.\r\n   */\r\n  modifier onlyOwner() {\r\n    require(msg.sender == owner);\r\n    _;\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\r\n   * @param newOwner The address to transfer ownership to.\r\n   */\r\n  function transferOwnership(address newOwner) public onlyOwner {\r\n    require(newOwner != address(0));\r\n    OwnershipTransferred(owner, newOwner);\r\n    owner = newOwner;\r\n  }\r\n}\r\n\r\ncontract AccessAdmin is Ownable {\r\n\r\n  /// @dev Admin Address\r\n  mapping (address => bool) adminContracts;\r\n\r\n  /// @dev Trust contract\r\n  mapping (address => bool) actionContracts;\r\n\r\n  function setAdminContract(address _addr, bool _useful) public onlyOwner {\r\n    require(_addr != address(0));\r\n    adminContracts[_addr] = _useful;\r\n  }\r\n\r\n  modifier onlyAdmin {\r\n    require(adminContracts[msg.sender]); \r\n    _;\r\n  }\r\n\r\n  function setActionContract(address _actionAddr, bool _useful) public onlyAdmin {\r\n    actionContracts[_actionAddr] = _useful;\r\n  }\r\n\r\n  modifier onlyAccess() {\r\n    require(actionContracts[msg.sender]);\r\n    _;\r\n  }\r\n}\r\n\r\ninterface ERC20 {\r\n    function totalSupply() public constant returns (uint);\r\n    function balanceOf(address tokenOwner) public constant returns (uint balance);\r\n    function allowance(address tokenOwner, address spender) public constant returns (uint remaining);\r\n    function transfer(address to, uint tokens) public returns (bool success);\r\n    function approve(address spender, uint tokens) public returns (bool success);\r\n    function transferFrom(address from, address to, uint tokens) public returns (bool success);\r\n    event Transfer(address indexed from, address indexed to, uint tokens);\r\n    event Approval(address indexed tokenOwner, address indexed spender, uint tokens);\r\n}\r\n\r\ncontract JadeCoin is ERC20, AccessAdmin {\r\n  using SafeMath for SafeMath;\r\n  string public constant name  = \"MAGICACADEMY JADE\";\r\n  string public constant symbol = \"Jade\";\r\n  uint8 public constant decimals = 0;\r\n  uint256 public roughSupply;\r\n  uint256 public totalJadeProduction;\r\n\r\n  uint256[] public totalJadeProductionSnapshots; // The total goo production for each prior day past\r\n     \r\n  uint256 public nextSnapshotTime;\r\n  uint256 public researchDivPercent = 10;\r\n\r\n  // Balances for each player\r\n  mapping(address => uint256) public jadeBalance;\r\n  mapping(address => mapping(uint8 => uint256)) public coinBalance;\r\n  mapping(uint8 => uint256) totalEtherPool; //Total Pool\r\n  \r\n  mapping(address => mapping(uint256 => uint256)) public jadeProductionSnapshots; // Store player's jade production for given day (snapshot)\r\n \r\n  mapping(address => mapping(uint256 => bool)) private jadeProductionZeroedSnapshots; // This isn't great but we need know difference between 0 production and an unused/inactive day.\r\n    \r\n  mapping(address => uint256) public lastJadeSaveTime; // Seconds (last time player claimed their produced jade)\r\n  mapping(address => uint256) public lastJadeProductionUpdate; // Days (last snapshot player updated their production)\r\n  mapping(address => uint256) private lastJadeResearchFundClaim; // Days (snapshot number)\r\n  \r\n  mapping(address => uint256) private lastJadeDepositFundClaim; // Days (snapshot number)\r\n  uint256[] private allocatedJadeResearchSnapshots; // Div pot #1 (research eth allocated to each prior day past)\r\n\r\n  // Mapping of approved ERC20 transfers (by player)\r\n  mapping(address => mapping(address => uint256)) private allowed;\r\n\r\n  event ReferalGain(address player, address referal, uint256 amount);\r\n\r\n  // Constructor\r\n  function JadeCoin() public {\r\n  }\r\n\r\n  function() external payable {\r\n    totalEtherPool[1] += msg.value;\r\n  }\r\n\r\n  // Incase community prefers goo deposit payments over production %, can be tweaked for balance\r\n  function tweakDailyDividends(uint256 newResearchPercent) external {\r\n    require(msg.sender == owner);\r\n    require(newResearchPercent > 0 && newResearchPercent <= 10);\r\n        \r\n    researchDivPercent = newResearchPercent;\r\n  }\r\n\r\n  function totalSupply() public constant returns(uint256) {\r\n    return roughSupply; // Stored jade (rough supply as it ignores earned/unclaimed jade)\r\n  }\r\n  /// balance of jade in-game\r\n  function balanceOf(address player) public constant returns(uint256) {\r\n    return SafeMath.add(jadeBalance[player],balanceOfUnclaimed(player));\r\n  }\r\n\r\n  /// unclaimed jade\r\n  function balanceOfUnclaimed(address player) public constant returns (uint256) {\r\n    uint256 lSave = lastJadeSaveTime[player];\r\n    if (lSave > 0 && lSave < block.timestamp) { \r\n      return SafeMath.mul(getJadeProduction(player),SafeMath.div(SafeMath.sub(block.timestamp,lSave),10));\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  /// production/s\r\n  function getJadeProduction(address player) public constant returns (uint256){\r\n    return jadeProductionSnapshots[player][lastJadeProductionUpdate[player]];\r\n  }\r\n\r\n  /// return totalJadeProduction/s\r\n  function getTotalJadeProduction() external view returns (uint256) {\r\n    return totalJadeProduction;\r\n  }\r\n\r\n  function getlastJadeProductionUpdate(address player) public view returns (uint256) {\r\n    return lastJadeProductionUpdate[player];\r\n  }\r\n    /// increase prodution \r\n  function increasePlayersJadeProduction(address player, uint256 increase) public onlyAccess {\r\n    jadeProductionSnapshots[player][allocatedJadeResearchSnapshots.length] = SafeMath.add(getJadeProduction(player),increase);\r\n    lastJadeProductionUpdate[player] = allocatedJadeResearchSnapshots.length;\r\n    totalJadeProduction = SafeMath.add(totalJadeProduction,increase);\r\n  }\r\n\r\n  /// reduce production  20180702\r\n  function reducePlayersJadeProduction(address player, uint256 decrease) public onlyAccess {\r\n    uint256 previousProduction = getJadeProduction(player);\r\n    uint256 newProduction = SafeMath.sub(previousProduction, decrease);\r\n\r\n    if (newProduction == 0) { \r\n      jadeProductionZeroedSnapshots[player][allocatedJadeResearchSnapshots.length] = true;\r\n      delete jadeProductionSnapshots[player][allocatedJadeResearchSnapshots.length]; // 0\r\n    } else {\r\n      jadeProductionSnapshots[player][allocatedJadeResearchSnapshots.length] = newProduction;\r\n    }   \r\n    lastJadeProductionUpdate[player] = allocatedJadeResearchSnapshots.length;\r\n    totalJadeProduction = SafeMath.sub(totalJadeProduction,decrease);\r\n  }\r\n\r\n  /// update player's jade balance\r\n  function updatePlayersCoin(address player) internal {\r\n    uint256 coinGain = balanceOfUnclaimed(player);\r\n    lastJadeSaveTime[player] = block.timestamp;\r\n    roughSupply = SafeMath.add(roughSupply,coinGain);  \r\n    jadeBalance[player] = SafeMath.add(jadeBalance[player],coinGain);  \r\n  }\r\n\r\n  /// update player's jade balance\r\n  function updatePlayersCoinByOut(address player) external onlyAccess {\r\n    uint256 coinGain = balanceOfUnclaimed(player);\r\n    lastJadeSaveTime[player] = block.timestamp;\r\n    roughSupply = SafeMath.add(roughSupply,coinGain);  \r\n    jadeBalance[player] = SafeMath.add(jadeBalance[player],coinGain);  \r\n  }\r\n  /// transfer\r\n  function transfer(address recipient, uint256 amount) public returns (bool) {\r\n    updatePlayersCoin(msg.sender);\r\n    require(amount <= jadeBalance[msg.sender]);\r\n    jadeBalance[msg.sender] = SafeMath.sub(jadeBalance[msg.sender],amount);\r\n    jadeBalance[recipient] = SafeMath.add(jadeBalance[recipient],amount);\r\n    //event\r\n    Transfer(msg.sender, recipient, amount);\r\n    return true;\r\n  }\r\n  /// transferfrom\r\n  function transferFrom(address player, address recipient, uint256 amount) public returns (bool) {\r\n    updatePlayersCoin(player);\r\n    require(amount <= allowed[player][msg.sender] && amount <= jadeBalance[player]);\r\n        \r\n    jadeBalance[player] = SafeMath.sub(jadeBalance[player],amount); \r\n    jadeBalance[recipient] = SafeMath.add(jadeBalance[recipient],amount); \r\n    allowed[player][msg.sender] = SafeMath.sub(allowed[player][msg.sender],amount); \r\n        \r\n    Transfer(player, recipient, amount);  \r\n    return true;\r\n  }\r\n  \r\n  function approve(address approvee, uint256 amount) public returns (bool) {\r\n    allowed[msg.sender][approvee] = amount;  \r\n    Approval(msg.sender, approvee, amount);\r\n    return true;\r\n  }\r\n  \r\n  function allowance(address player, address approvee) public constant returns(uint256) {\r\n    return allowed[player][approvee];  \r\n  }\r\n  \r\n  /// update Jade via purchase\r\n  function updatePlayersCoinByPurchase(address player, uint256 purchaseCost) public onlyAccess {\r\n    uint256 unclaimedJade = balanceOfUnclaimed(player);\r\n        \r\n    if (purchaseCost > unclaimedJade) {\r\n      uint256 jadeDecrease = SafeMath.sub(purchaseCost, unclaimedJade);\r\n      require(jadeBalance[player] >= jadeDecrease);\r\n      roughSupply = SafeMath.sub(roughSupply,jadeDecrease);\r\n      jadeBalance[player] = SafeMath.sub(jadeBalance[player],jadeDecrease);\r\n    } else {\r\n      uint256 jadeGain = SafeMath.sub(unclaimedJade,purchaseCost);\r\n      roughSupply = SafeMath.add(roughSupply,jadeGain);\r\n      jadeBalance[player] = SafeMath.add(jadeBalance[player],jadeGain);\r\n    }\r\n        \r\n    lastJadeSaveTime[player] = block.timestamp;\r\n  }\r\n\r\n  function JadeCoinMining(address _addr, uint256 _amount) external onlyAdmin {\r\n    roughSupply = SafeMath.add(roughSupply,_amount);\r\n    jadeBalance[_addr] = SafeMath.add(jadeBalance[_addr],_amount);\r\n  }\r\n\r\n  function setRoughSupply(uint256 iroughSupply) external onlyAccess {\r\n    roughSupply = SafeMath.add(roughSupply,iroughSupply);\r\n  }\r\n  /// balance of coin  in-game\r\n  function coinBalanceOf(address player,uint8 itype) external constant returns(uint256) {\r\n    return coinBalance[player][itype];\r\n  }\r\n\r\n  function setJadeCoin(address player, uint256 coin, bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      jadeBalance[player] = SafeMath.add(jadeBalance[player],coin);\r\n    } else if (!iflag) {\r\n      jadeBalance[player] = SafeMath.sub(jadeBalance[player],coin);\r\n    }\r\n  }\r\n  \r\n  function setCoinBalance(address player, uint256 eth, uint8 itype, bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      coinBalance[player][itype] = SafeMath.add(coinBalance[player][itype],eth);\r\n    } else if (!iflag) {\r\n      coinBalance[player][itype] = SafeMath.sub(coinBalance[player][itype],eth);\r\n    }\r\n  }\r\n\r\n  function setLastJadeSaveTime(address player) external onlyAccess {\r\n    lastJadeSaveTime[player] = block.timestamp;\r\n  }\r\n\r\n  function setTotalEtherPool(uint256 inEth, uint8 itype, bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      totalEtherPool[itype] = SafeMath.add(totalEtherPool[itype],inEth);\r\n     } else if (!iflag) {\r\n      totalEtherPool[itype] = SafeMath.sub(totalEtherPool[itype],inEth);\r\n    }\r\n  }\r\n\r\n  function getTotalEtherPool(uint8 itype) external view returns (uint256) {\r\n    return totalEtherPool[itype];\r\n  }\r\n\r\n  function setJadeCoinZero(address player) external onlyAccess {\r\n    jadeBalance[player]=0;\r\n  }\r\n\r\n  function getNextSnapshotTime() external view returns(uint256) {\r\n    return nextSnapshotTime;\r\n  }\r\n  \r\n  // To display on website\r\n  function viewUnclaimedResearchDividends() external constant returns (uint256, uint256, uint256) {\r\n    uint256 startSnapshot = lastJadeResearchFundClaim[msg.sender];\r\n    uint256 latestSnapshot = allocatedJadeResearchSnapshots.length - 1; // No snapshots to begin with\r\n        \r\n    uint256 researchShare;\r\n    uint256 previousProduction = jadeProductionSnapshots[msg.sender][lastJadeResearchFundClaim[msg.sender] - 1]; // Underflow won't be a problem as gooProductionSnapshots[][0xfffffffffffff] = 0;\r\n    for (uint256 i = startSnapshot; i <= latestSnapshot; i++) {     \r\n    // Slightly complex things by accounting for days/snapshots when user made no tx's\r\n      uint256 productionDuringSnapshot = jadeProductionSnapshots[msg.sender][i];\r\n      bool soldAllProduction = jadeProductionZeroedSnapshots[msg.sender][i];\r\n      if (productionDuringSnapshot == 0 && !soldAllProduction) {\r\n        productionDuringSnapshot = previousProduction;\r\n      } else {\r\n        previousProduction = productionDuringSnapshot;\r\n    }\r\n            \r\n      researchShare += (allocatedJadeResearchSnapshots[i] * productionDuringSnapshot) / totalJadeProductionSnapshots[i];\r\n    }\r\n    return (researchShare, startSnapshot, latestSnapshot);\r\n  }\r\n      \r\n  function claimResearchDividends(address referer, uint256 startSnapshot, uint256 endSnapShot) external {\r\n    require(startSnapshot <= endSnapShot);\r\n    require(startSnapshot >= lastJadeResearchFundClaim[msg.sender]);\r\n    require(endSnapShot < allocatedJadeResearchSnapshots.length);\r\n        \r\n    uint256 researchShare;\r\n    uint256 previousProduction = jadeProductionSnapshots[msg.sender][lastJadeResearchFundClaim[msg.sender] - 1]; // Underflow won't be a problem as gooProductionSnapshots[][0xffffffffff] = 0;\r\n    for (uint256 i = startSnapshot; i <= endSnapShot; i++) {\r\n            \r\n    // Slightly complex things by accounting for days/snapshots when user made no tx's\r\n      uint256 productionDuringSnapshot = jadeProductionSnapshots[msg.sender][i];\r\n      bool soldAllProduction = jadeProductionZeroedSnapshots[msg.sender][i];\r\n      if (productionDuringSnapshot == 0 && !soldAllProduction) {\r\n        productionDuringSnapshot = previousProduction;\r\n      } else {\r\n        previousProduction = productionDuringSnapshot;\r\n      }\r\n            \r\n      researchShare += (allocatedJadeResearchSnapshots[i] * productionDuringSnapshot) / totalJadeProductionSnapshots[i];\r\n      }\r\n        \r\n        \r\n    if (jadeProductionSnapshots[msg.sender][endSnapShot] == 0 && !jadeProductionZeroedSnapshots[msg.sender][endSnapShot] && previousProduction > 0) {\r\n      jadeProductionSnapshots[msg.sender][endSnapShot] = previousProduction; // Checkpoint for next claim\r\n    }\r\n        \r\n    lastJadeResearchFundClaim[msg.sender] = endSnapShot + 1;\r\n        \r\n    uint256 referalDivs;\r\n    if (referer != address(0) && referer != msg.sender) {\r\n      referalDivs = researchShare / 100; // 1%\r\n      coinBalance[referer][1] += referalDivs;\r\n      ReferalGain(referer, msg.sender, referalDivs);\r\n    }\r\n    coinBalance[msg.sender][1] += SafeMath.sub(researchShare,referalDivs);\r\n  }    \r\n    \r\n  // Allocate pot divs for the day (00:00 cron job)\r\n  function snapshotDailyGooResearchFunding() external onlyAdmin {\r\n    uint256 todaysGooResearchFund = (totalEtherPool[1] * researchDivPercent) / 100; // 10% of pool daily\r\n    totalEtherPool[1] -= todaysGooResearchFund;\r\n        \r\n    totalJadeProductionSnapshots.push(totalJadeProduction);\r\n    allocatedJadeResearchSnapshots.push(todaysGooResearchFund);\r\n    nextSnapshotTime = block.timestamp + 24 hours;\r\n  }\r\n}\r\n\r\ninterface GameConfigInterface {\r\n  function productionCardIdRange() external constant returns (uint256, uint256);\r\n  function battleCardIdRange() external constant returns (uint256, uint256);\r\n  function upgradeIdRange() external constant returns (uint256, uint256);\r\n  function unitCoinProduction(uint256 cardId) external constant returns (uint256);\r\n  function unitAttack(uint256 cardId) external constant returns (uint256);\r\n  function unitDefense(uint256 cardId) external constant returns (uint256);\r\n  function unitStealingCapacity(uint256 cardId) external constant returns (uint256);\r\n}\r\n\r\n/// @notice define the players,cards,jadecoin\r\n/// @author rainysiu rainy@livestar.com\r\n/// @dev MagicAcademy Games \r\n\r\ncontract CardsBase is JadeCoin {\r\n\r\n  function CardsBase() public {\r\n    setAdminContract(msg.sender,true);\r\n    setActionContract(msg.sender,true);\r\n  }\r\n  // player  \r\n  struct Player {\r\n    address owneraddress;\r\n  }\r\n\r\n  Player[] players;\r\n  bool gameStarted;\r\n  \r\n  GameConfigInterface public schema;\r\n\r\n  // Stuff owned by each player\r\n  mapping(address => mapping(uint256 => uint256)) public unitsOwned;  //number of normal card\r\n  mapping(address => mapping(uint256 => uint256)) public upgradesOwned;  //Lv of upgrade card\r\n\r\n  mapping(address => uint256) public uintsOwnerCount; // total number of cards\r\n  mapping(address=> mapping(uint256 => uint256)) public uintProduction;  //card's production 单张卡牌总产量\r\n\r\n  // Rares & Upgrades (Increase unit's production / attack etc.)\r\n  mapping(address => mapping(uint256 => uint256)) public unitCoinProductionIncreases; // Adds to the coin per second\r\n  mapping(address => mapping(uint256 => uint256)) public unitCoinProductionMultiplier; // Multiplies the coin per second\r\n  mapping(address => mapping(uint256 => uint256)) public unitAttackIncreases;\r\n  mapping(address => mapping(uint256 => uint256)) public unitAttackMultiplier;\r\n  mapping(address => mapping(uint256 => uint256)) public unitDefenseIncreases;\r\n  mapping(address => mapping(uint256 => uint256)) public unitDefenseMultiplier;\r\n  mapping(address => mapping(uint256 => uint256)) public unitJadeStealingIncreases;\r\n  mapping(address => mapping(uint256 => uint256)) public unitJadeStealingMultiplier;\r\n  mapping(address => mapping(uint256 => uint256)) private unitMaxCap; // external cap\r\n\r\n  //setting configuration\r\n  function setConfigAddress(address _address) external onlyOwner {\r\n    schema = GameConfigInterface(_address);\r\n  }\r\n\r\n/// start game\r\n  function beginGame(uint256 firstDivsTime) external payable onlyOwner {\r\n    require(!gameStarted);\r\n    gameStarted = true;\r\n    nextSnapshotTime = firstDivsTime;\r\n    totalEtherPool[1] = msg.value;  // Seed pot \r\n  }\r\n\r\n  function endGame() external payable onlyOwner {\r\n    require(gameStarted);\r\n    gameStarted = false;\r\n  }\r\n\r\n  function getGameStarted() external constant returns (bool) {\r\n    return gameStarted;\r\n  }\r\n  function AddPlayers(address _address) external onlyAccess { \r\n    Player memory _player= Player({\r\n      owneraddress: _address\r\n    });\r\n    players.push(_player);\r\n  }\r\n\r\n  /// @notice ranking of production\r\n  /// @notice rainysiu\r\n  function getRanking() external view returns (address[], uint256[],uint256[]) {\r\n    uint256 len = players.length;\r\n    uint256[] memory arr = new uint256[](len);\r\n    address[] memory arr_addr = new address[](len);\r\n    uint256[] memory arr_def = new uint256[](len);\r\n  \r\n    uint counter =0;\r\n    for (uint k=0;k<len; k++){\r\n      arr[counter] =  getJadeProduction(players[k].owneraddress);\r\n      arr_addr[counter] = players[k].owneraddress;\r\n      (,arr_def[counter],,) = getPlayersBattleStats(players[k].owneraddress);\r\n      counter++;\r\n    }\r\n\r\n    for(uint i=0;i<len-1;i++) {\r\n      for(uint j=0;j<len-i-1;j++) {\r\n        if(arr[j]<arr[j+1]) {\r\n          uint256 temp = arr[j];\r\n          address temp_addr = arr_addr[j];\r\n          uint256 temp_def = arr_def[j];\r\n          arr[j] = arr[j+1];\r\n          arr[j+1] = temp;\r\n          arr_addr[j] = arr_addr[j+1];\r\n          arr_addr[j+1] = temp_addr;\r\n\r\n          arr_def[j] = arr_def[j+1];\r\n          arr_def[j+1] = temp_def;\r\n        }\r\n      }\r\n    }\r\n    return (arr_addr,arr,arr_def);\r\n  }\r\n\r\n  //total users\r\n  function getTotalUsers()  external view returns (uint256) {\r\n    return players.length;\r\n  }\r\n  function getMaxCap(address _addr,uint256 _cardId) external view returns (uint256) {\r\n    return unitMaxCap[_addr][_cardId];\r\n  }\r\n\r\n  /// UnitsProuction\r\n  function getUnitsProduction(address player, uint256 unitId, uint256 amount) external constant returns (uint256) {\r\n    return (amount * (schema.unitCoinProduction(unitId) + unitCoinProductionIncreases[player][unitId]) * (10 + unitCoinProductionMultiplier[player][unitId])) / 10; \r\n  } \r\n\r\n  /// one card's production\r\n  function getUnitsInProduction(address player, uint256 unitId, uint256 amount) external constant returns (uint256) {\r\n    return SafeMath.div(SafeMath.mul(amount,uintProduction[player][unitId]),unitsOwned[player][unitId]);\r\n  } \r\n\r\n  /// UnitsAttack\r\n  function getUnitsAttack(address player, uint256 unitId, uint256 amount) internal constant returns (uint256) {\r\n    return (amount * (schema.unitAttack(unitId) + unitAttackIncreases[player][unitId]) * (10 + unitAttackMultiplier[player][unitId])) / 10;\r\n  }\r\n  /// UnitsDefense\r\n  function getUnitsDefense(address player, uint256 unitId, uint256 amount) internal constant returns (uint256) {\r\n    return (amount * (schema.unitDefense(unitId) + unitDefenseIncreases[player][unitId]) * (10 + unitDefenseMultiplier[player][unitId])) / 10;\r\n  }\r\n  /// UnitsStealingCapacity\r\n  function getUnitsStealingCapacity(address player, uint256 unitId, uint256 amount) internal constant returns (uint256) {\r\n    return (amount * (schema.unitStealingCapacity(unitId) + unitJadeStealingIncreases[player][unitId]) * (10 + unitJadeStealingMultiplier[player][unitId])) / 10;\r\n  }\r\n \r\n  // player's attacking & defending & stealing & battle power\r\n  function getPlayersBattleStats(address player) public constant returns (\r\n    uint256 attackingPower, \r\n    uint256 defendingPower, \r\n    uint256 stealingPower,\r\n    uint256 battlePower) {\r\n\r\n    uint256 startId;\r\n    uint256 endId;\r\n    (startId, endId) = schema.battleCardIdRange();\r\n\r\n    // Not ideal but will only be a small number of units (and saves gas when buying units)\r\n    while (startId <= endId) {\r\n      attackingPower = SafeMath.add(attackingPower,getUnitsAttack(player, startId, unitsOwned[player][startId]));\r\n      stealingPower = SafeMath.add(stealingPower,getUnitsStealingCapacity(player, startId, unitsOwned[player][startId]));\r\n      defendingPower = SafeMath.add(defendingPower,getUnitsDefense(player, startId, unitsOwned[player][startId]));\r\n      battlePower = SafeMath.add(attackingPower,defendingPower); \r\n      startId++;\r\n    }\r\n  }\r\n\r\n  // @nitice number of normal card\r\n  function getOwnedCount(address player, uint256 cardId) external view returns (uint256) {\r\n    return unitsOwned[player][cardId];\r\n  }\r\n  function setOwnedCount(address player, uint256 cardId, uint256 amount, bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitsOwned[player][cardId] = SafeMath.add(unitsOwned[player][cardId],amount);\r\n     } else if (!iflag) {\r\n      unitsOwned[player][cardId] = SafeMath.sub(unitsOwned[player][cardId],amount);\r\n    }\r\n  }\r\n\r\n  // @notice Lv of upgrade card\r\n  function getUpgradesOwned(address player, uint256 upgradeId) external view returns (uint256) {\r\n    return upgradesOwned[player][upgradeId];\r\n  }\r\n  //set upgrade\r\n  function setUpgradesOwned(address player, uint256 upgradeId) external onlyAccess {\r\n    upgradesOwned[player][upgradeId] = SafeMath.add(upgradesOwned[player][upgradeId],1);\r\n  }\r\n\r\n  function getUintsOwnerCount(address _address) external view returns (uint256) {\r\n    return uintsOwnerCount[_address];\r\n  }\r\n  function setUintsOwnerCount(address _address, uint256 amount, bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      uintsOwnerCount[_address] = SafeMath.add(uintsOwnerCount[_address],amount);\r\n    } else if (!iflag) {\r\n      uintsOwnerCount[_address] = SafeMath.sub(uintsOwnerCount[_address],amount);\r\n    }\r\n  }\r\n\r\n  function getUnitCoinProductionIncreases(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitCoinProductionIncreases[_address][cardId];\r\n  }\r\n\r\n  function setUnitCoinProductionIncreases(address _address, uint256 cardId, uint256 iValue,bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitCoinProductionIncreases[_address][cardId] = SafeMath.add(unitCoinProductionIncreases[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitCoinProductionIncreases[_address][cardId] = SafeMath.sub(unitCoinProductionIncreases[_address][cardId],iValue);\r\n    }\r\n  }\r\n\r\n  function getUnitCoinProductionMultiplier(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitCoinProductionMultiplier[_address][cardId];\r\n  }\r\n\r\n  function setUnitCoinProductionMultiplier(address _address, uint256 cardId, uint256 iValue, bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitCoinProductionMultiplier[_address][cardId] = SafeMath.add(unitCoinProductionMultiplier[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitCoinProductionMultiplier[_address][cardId] = SafeMath.sub(unitCoinProductionMultiplier[_address][cardId],iValue);\r\n    }\r\n  }\r\n\r\n  function setUnitAttackIncreases(address _address, uint256 cardId, uint256 iValue,bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitAttackIncreases[_address][cardId] = SafeMath.add(unitAttackIncreases[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitAttackIncreases[_address][cardId] = SafeMath.sub(unitAttackIncreases[_address][cardId],iValue);\r\n    }\r\n  }\r\n\r\n  function getUnitAttackIncreases(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitAttackIncreases[_address][cardId];\r\n  } \r\n  function setUnitAttackMultiplier(address _address, uint256 cardId, uint256 iValue,bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitAttackMultiplier[_address][cardId] = SafeMath.add(unitAttackMultiplier[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitAttackMultiplier[_address][cardId] = SafeMath.sub(unitAttackMultiplier[_address][cardId],iValue);\r\n    }\r\n  }\r\n  function getUnitAttackMultiplier(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitAttackMultiplier[_address][cardId];\r\n  } \r\n\r\n  function setUnitDefenseIncreases(address _address, uint256 cardId, uint256 iValue,bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitDefenseIncreases[_address][cardId] = SafeMath.add(unitDefenseIncreases[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitDefenseIncreases[_address][cardId] = SafeMath.sub(unitDefenseIncreases[_address][cardId],iValue);\r\n    }\r\n  }\r\n  function getUnitDefenseIncreases(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitDefenseIncreases[_address][cardId];\r\n  }\r\n  function setunitDefenseMultiplier(address _address, uint256 cardId, uint256 iValue,bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitDefenseMultiplier[_address][cardId] = SafeMath.add(unitDefenseMultiplier[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitDefenseMultiplier[_address][cardId] = SafeMath.sub(unitDefenseMultiplier[_address][cardId],iValue);\r\n    }\r\n  }\r\n  function getUnitDefenseMultiplier(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitDefenseMultiplier[_address][cardId];\r\n  }\r\n  function setUnitJadeStealingIncreases(address _address, uint256 cardId, uint256 iValue,bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitJadeStealingIncreases[_address][cardId] = SafeMath.add(unitJadeStealingIncreases[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitJadeStealingIncreases[_address][cardId] = SafeMath.sub(unitJadeStealingIncreases[_address][cardId],iValue);\r\n    }\r\n  }\r\n  function getUnitJadeStealingIncreases(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitJadeStealingIncreases[_address][cardId];\r\n  } \r\n\r\n  function setUnitJadeStealingMultiplier(address _address, uint256 cardId, uint256 iValue,bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      unitJadeStealingMultiplier[_address][cardId] = SafeMath.add(unitJadeStealingMultiplier[_address][cardId],iValue);\r\n    } else if (!iflag) {\r\n      unitJadeStealingMultiplier[_address][cardId] = SafeMath.sub(unitJadeStealingMultiplier[_address][cardId],iValue);\r\n    }\r\n  }\r\n  function getUnitJadeStealingMultiplier(address _address, uint256 cardId) external view returns (uint256) {\r\n    return unitJadeStealingMultiplier[_address][cardId];\r\n  } \r\n\r\n  function setUintCoinProduction(address _address, uint256 cardId, uint256 iValue, bool iflag) external onlyAccess {\r\n    if (iflag) {\r\n      uintProduction[_address][cardId] = SafeMath.add(uintProduction[_address][cardId],iValue);\r\n     } else if (!iflag) {\r\n      uintProduction[_address][cardId] = SafeMath.sub(uintProduction[_address][cardId],iValue);\r\n    }\r\n  }\r\n\r\n  function getUintCoinProduction(address _address, uint256 cardId) external view returns (uint256) {\r\n    return uintProduction[_address][cardId];\r\n  }\r\n\r\n  function upgradeUnitMultipliers(address player, uint256 upgradeClass, uint256 unitId, uint256 upgradeValue) external onlyAccess {\r\n    uint256 productionGain;\r\n    if (upgradeClass == 0) {\r\n      unitCoinProductionIncreases[player][unitId] += upgradeValue;\r\n      productionGain = unitsOwned[player][unitId] * upgradeValue * (10 + unitCoinProductionMultiplier[player][unitId]);\r\n      increasePlayersJadeProduction(player, productionGain);\r\n    } else if (upgradeClass == 1) {\r\n      unitCoinProductionMultiplier[player][unitId] += upgradeValue;\r\n      productionGain = unitsOwned[player][unitId] * upgradeValue * (schema.unitCoinProduction(unitId) + unitCoinProductionIncreases[player][unitId]);\r\n      increasePlayersJadeProduction(player, productionGain);\r\n    } else if (upgradeClass == 2) {\r\n      unitAttackIncreases[player][unitId] += upgradeValue;\r\n    } else if (upgradeClass == 3) {\r\n      unitAttackMultiplier[player][unitId] += upgradeValue;\r\n    } else if (upgradeClass == 4) {\r\n      unitDefenseIncreases[player][unitId] += upgradeValue;\r\n    } else if (upgradeClass == 5) {\r\n      unitDefenseMultiplier[player][unitId] += upgradeValue;\r\n    } else if (upgradeClass == 6) {\r\n      unitJadeStealingIncreases[player][unitId] += upgradeValue;\r\n    } else if (upgradeClass == 7) {\r\n      unitJadeStealingMultiplier[player][unitId] += upgradeValue;\r\n    } else if (upgradeClass == 8) {\r\n      unitMaxCap[player][unitId] = upgradeValue; // Housing upgrade (new capacity)\r\n    }\r\n  }\r\n    \r\n  function removeUnitMultipliers(address player, uint256 upgradeClass, uint256 unitId, uint256 upgradeValue) external onlyAccess {\r\n    uint256 productionLoss;\r\n    if (upgradeClass == 0) {\r\n      unitCoinProductionIncreases[player][unitId] -= upgradeValue;\r\n      productionLoss = unitsOwned[player][unitId] * upgradeValue * (10 + unitCoinProductionMultiplier[player][unitId]);\r\n      reducePlayersJadeProduction(player, productionLoss);\r\n    } else if (upgradeClass == 1) {\r\n      unitCoinProductionMultiplier[player][unitId] -= upgradeValue;\r\n      productionLoss = unitsOwned[player][unitId] * upgradeValue * (schema.unitCoinProduction(unitId) + unitCoinProductionIncreases[player][unitId]);\r\n      reducePlayersJadeProduction(player, productionLoss);\r\n    } else if (upgradeClass == 2) {\r\n      unitAttackIncreases[player][unitId] -= upgradeValue;\r\n    } else if (upgradeClass == 3) {\r\n      unitAttackMultiplier[player][unitId] -= upgradeValue;\r\n    } else if (upgradeClass == 4) {\r\n      unitDefenseIncreases[player][unitId] -= upgradeValue;\r\n    } else if (upgradeClass == 5) {\r\n      unitDefenseMultiplier[player][unitId] -= upgradeValue;\r\n    } else if (upgradeClass == 6) {\r\n      unitJadeStealingIncreases[player][unitId] -= upgradeValue;\r\n    } else if (upgradeClass == 7) {\r\n      unitJadeStealingMultiplier[player][unitId] -= upgradeValue;\r\n    }\r\n  }\r\n}\r\n\r\nlibrary SafeMath {\r\n\r\n  /**\r\n  * @dev Multiplies two numbers, throws on overflow.\r\n  */\r\n  function mul(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    if (a == 0) {\r\n      return 0;\r\n    }\r\n    uint256 c = a * b;\r\n    assert(c / a == b);\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Integer division of two numbers, truncating the quotient.\r\n  */\r\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\r\n    uint256 c = a / b;\r\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Substracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\r\n  */\r\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    assert(b <= a);\r\n    return a - b;\r\n  }\r\n\r\n  /**\r\n  * @dev Adds two numbers, throws on overflow.\r\n  */\r\n  function add(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    uint256 c = a + b;\r\n    assert(c >= a);\r\n    return c;\r\n  }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitCoinProductionIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"upgradesOwned\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_addr\",\"type\":\"address\"},{\"name\":\"_useful\",\"type\":\"bool\"}],\"name\":\"setAdminContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"approvee\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUnitJadeStealingIncreases\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitAttackMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getRanking\",\"outputs\":[{\"name\":\"\",\"type\":\"address[]\"},{\"name\":\"\",\"type\":\"uint256[]\"},{\"name\":\"\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"getlastJadeProductionUpdate\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"setLastJadeSaveTime\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getOwnedCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"recipient\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"firstDivsTime\",\"type\":\"uint256\"}],\"name\":\"beginGame\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitJadeStealingMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitCoinProductionMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"upgradeId\",\"type\":\"uint256\"}],\"name\":\"setUpgradesOwned\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"unitId\",\"type\":\"uint256\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"getUnitsProduction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"inEth\",\"type\":\"uint256\"},{\"name\":\"itype\",\"type\":\"uint8\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setTotalEtherPool\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitAttackIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"decrease\",\"type\":\"uint256\"}],\"name\":\"reducePlayersJadeProduction\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"getJadeProduction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"iroughSupply\",\"type\":\"uint256\"}],\"name\":\"setRoughSupply\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"balanceOfUnclaimed\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUnitJadeStealingMultiplier\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUnitCoinProductionIncreases\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"lastJadeProductionUpdate\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"viewUnclaimedResearchDividends\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitDefenseIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"upgradeClass\",\"type\":\"uint256\"},{\"name\":\"unitId\",\"type\":\"uint256\"},{\"name\":\"upgradeValue\",\"type\":\"uint256\"}],\"name\":\"removeUnitMultipliers\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"eth\",\"type\":\"uint256\"},{\"name\":\"itype\",\"type\":\"uint8\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setCoinBalance\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"upgradeClass\",\"type\":\"uint256\"},{\"name\":\"unitId\",\"type\":\"uint256\"},{\"name\":\"upgradeValue\",\"type\":\"uint256\"}],\"name\":\"upgradeUnitMultipliers\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"uintsOwnerCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"jadeBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitDefenseMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitJadeStealingIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"endGame\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newResearchPercent\",\"type\":\"uint256\"}],\"name\":\"tweakDailyDividends\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitAttackIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_actionAddr\",\"type\":\"address\"},{\"name\":\"_useful\",\"type\":\"bool\"}],\"name\":\"setActionContract\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitDefenseMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"lastJadeSaveTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"jadeProductionSnapshots\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"increase\",\"type\":\"uint256\"}],\"name\":\"increasePlayersJadeProduction\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUnitAttackIncreases\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"getPlayersBattleStats\",\"outputs\":[{\"name\":\"attackingPower\",\"type\":\"uint256\"},{\"name\":\"defendingPower\",\"type\":\"uint256\"},{\"name\":\"stealingPower\",\"type\":\"uint256\"},{\"name\":\"battlePower\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalJadeProduction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"setConfigAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUnitAttackMultiplier\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNextSnapshotTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitJadeStealingIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"totalJadeProductionSnapshots\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"referer\",\"type\":\"address\"},{\"name\":\"startSnapshot\",\"type\":\"uint256\"},{\"name\":\"endSnapShot\",\"type\":\"uint256\"}],\"name\":\"claimResearchDividends\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getGameStarted\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"itype\",\"type\":\"uint8\"}],\"name\":\"getTotalEtherPool\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"researchDivPercent\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"roughSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUnitCoinProductionMultiplier\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_addr\",\"type\":\"address\"},{\"name\":\"_cardId\",\"type\":\"uint256\"}],\"name\":\"getMaxCap\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"unitId\",\"type\":\"uint256\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"getUnitsInProduction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint8\"}],\"name\":\"coinBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTotalUsers\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"purchaseCost\",\"type\":\"uint256\"}],\"name\":\"updatePlayersCoinByPurchase\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"getUintsOwnerCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"coin\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setJadeCoin\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"nextSnapshotTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"recipient\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitAttackMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitJadeStealingMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTotalJadeProduction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_addr\",\"type\":\"address\"},{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"JadeCoinMining\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitCoinProductionMultiplier\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"setJadeCoinZero\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"uintProduction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitsOwned\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"snapshotDailyGooResearchFunding\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUintCoinProduction\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUnitCoinProductionIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"approvee\",\"type\":\"address\"}],\"name\":\"allowance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setunitDefenseMultiplier\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"unitDefenseIncreases\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"}],\"name\":\"getUintCoinProduction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"}],\"name\":\"updatePlayersCoinByOut\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"amount\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setOwnedCount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"itype\",\"type\":\"uint8\"}],\"name\":\"coinBalanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"player\",\"type\":\"address\"},{\"name\":\"upgradeId\",\"type\":\"uint256\"}],\"name\":\"getUpgradesOwned\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"cardId\",\"type\":\"uint256\"},{\"name\":\"iValue\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUnitDefenseIncreases\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"AddPlayers\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"schema\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_address\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"},{\"name\":\"iflag\",\"type\":\"bool\"}],\"name\":\"setUintsOwnerCount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"referal\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"ReferalGain\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tokens\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"tokenOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tokens\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"}]","ContractName":"CardsBase","CompilerVersion":"v0.4.21+commit.dfe3193c","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://f8c67d851bbde20e836fd0eeef2632d7c7eb04e550f23ed2173a9889effc694c"}]}