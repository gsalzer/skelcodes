{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.21;\r\n// The Original All For 1 -  www.allfor1.io\r\n// https://www.twitter.com/allfor1_io\r\n// https://www.reddit.com/user/allfor1_io\r\n\r\ncontract AllForOne {\r\n    \r\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\r\n    mapping (address => uint) private playerRegistrationStatus;\r\n    mapping (address => uint) private confirmedWinners;\r\n    mapping (uint => address) private numberToAddress;\r\n    uint private currentPlayersRequired;\r\n    uint private currentBet;\r\n    uint private playerCount;\r\n    uint private jackpot;\r\n    uint private revealBlock;\r\n    uint private currentGame;\r\n    address private contractAddress;\r\n    address private owner;\r\n    address private lastWinner;\r\n    \r\n    function AllForOne () {\r\n        contractAddress = this;\r\n        currentGame++;\r\n        currentPlayersRequired = 25;\r\n        owner = msg.sender;\r\n        currentBet = 0.005 ether;\r\n        lastWinner = msg.sender;\r\n    }\r\n    modifier onlyOwner () {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n    modifier changeBetConditions () {\r\n        require (playerCount == 0);\r\n        require (contractAddress.balance == 0 ether);\r\n        _;\r\n    }\r\n    modifier betConditions () {\r\n        require (playerRegistrationStatus[msg.sender] < currentGame);\r\n        require (playerCount < currentPlayersRequired);\r\n        require (msg.value == currentBet);\r\n        require (confirmedWinners[msg.sender] == 0);\r\n        _;\r\n    }\r\n    modifier revealConditions () {\r\n        require (playerCount == currentPlayersRequired);\r\n        require (block.blockhash(revealBlock) != 0);\r\n        _;\r\n    }\r\n    modifier winnerWithdrawConditions () {\r\n        require (confirmedWinners[msg.sender] == 1);\r\n        _;\r\n    }\r\n    function transferOwnership (address newOwner) public onlyOwner {\r\n        require(newOwner != address(0));\r\n        emit OwnershipTransferred(owner, newOwner);\r\n        owner = newOwner;\r\n    }\r\n    function changeBet (uint _newBet) external changeBetConditions onlyOwner {\r\n        currentBet = _newBet;\r\n    }\r\n    function canBet () view public returns (uint, uint, address) {\r\n        uint _status = 0;\r\n        uint _playerCount = playerCount;\r\n        address _lastWinner = lastWinner;\r\n        if (playerRegistrationStatus[msg.sender] < currentGame) {\r\n        _status = 1;\r\n        }\r\n        return (_status, _playerCount, _lastWinner);\r\n    }\r\n    function placeBet () payable betConditions {\r\n        playerCount++;\r\n        playerRegistrationStatus[msg.sender] = currentGame;\r\n        numberToAddress[playerCount] = msg.sender;\r\n        if (playerCount == currentPlayersRequired) {\r\n            revealBlock = block.number;\r\n        }\r\n        }\r\n    function revealWinner () external revealConditions {\r\n        uint _thisBlock = block.number;\r\n        if (_thisBlock - revealBlock <= 255) {\r\n            playerCount = 0;\r\n            currentGame++;\r\n            uint _winningNumber = uint(block.blockhash(revealBlock)) % currentPlayersRequired + 1;\r\n            address _winningAddress = numberToAddress[_winningNumber];\r\n            confirmedWinners[_winningAddress] = 1;\r\n            lastWinner = _winningAddress;\r\n            msg.sender.transfer(currentBet);\r\n        } else {\r\n            revealBlock = block.number;       \r\n        }\r\n    }\r\n    function winnerWithdraw () external winnerWithdrawConditions {\r\n        confirmedWinners[msg.sender] = 0;\r\n        jackpot = (currentBet * (currentPlayersRequired - 1));\r\n        msg.sender.transfer(jackpot);\r\n    }\r\n}","ABI":"[{\"constant\":true,\"inputs\":[],\"name\":\"canBet\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"uint256\"},{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"revealWinner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"winnerWithdraw\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newBet\",\"type\":\"uint256\"}],\"name\":\"changeBet\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"placeBet\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]","ContractName":"AllForOne","CompilerVersion":"v0.4.21+commit.dfe3193c","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://c1d2e025bab26e90d4409bb70e1355a04c56069b8aa6758b8ed34fdbd2379718"}]}