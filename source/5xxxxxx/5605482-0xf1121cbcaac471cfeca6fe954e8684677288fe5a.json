{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.22;\r\n\r\ncontract GiftBox {\r\n\taddress public owner;\r\n\tuint256 public gift;\r\n\tuint16[7] public gifts;\r\n\tmapping(address=>address) public friends;\r\n\tevent GiftSent(address indexed gifter);\r\n\tmodifier onlyOwner() {\r\n      if (msg.sender!=owner) revert();\r\n      _;\r\n    }\r\n    \r\n    constructor() public{\r\n        owner = msg.sender;\r\n        gifts = [49,7,7,7,7,7,7];\r\n        gift = 100000000000000000;\r\n    }\r\n    \r\n    function transferOwnership(address newOwner) public onlyOwner {\r\n        owner = newOwner;\r\n    }\r\n    \r\n    function changeGift(uint256 newGift) public onlyOwner {\r\n        if (newGift>0) gift = newGift;\r\n        else revert();\r\n    }\r\n    \r\n    function changeFriend(address payer, address newFriend) public onlyOwner {\r\n        if (payer!=address(0) && newFriend!=address(0)) friends[payer] = newFriend;\r\n        else revert();\r\n    }\r\n    \r\n    function transferGift(address from, address to) payable public onlyOwner {\r\n        if (from==address(0) || to==address(0) || from==to) revert();\r\n        friends[from] = to;\r\n        payOut(to);\r\n        emit GiftSent(from);\r\n    }\r\n    \r\n    function sendGift(address friend) payable public {\r\n        if (msg.value<gift || friend==address(0) || friend==msg.sender || (friend!=owner && friends[friend]==address(0))) revert();\r\n        friends[msg.sender] = friend;\r\n        payOut(friend);\r\n        emit GiftSent(msg.sender);\r\n    }\r\n    \r\n    function payOut(address payee) private{\r\n        uint256 pay;\r\n        uint256 paid = 0;\r\n        for (uint i=0;i<7;i++) {\r\n            pay = gift*gifts[i]/100;\r\n            if (pay>0 && payee!=address(0)) {\r\n                payee.transfer(pay);\r\n                paid+=pay;\r\n            }\r\n            payee = friends[payee];\r\n            if (payee==address(0)) break;\r\n        }\r\n        if (gift-paid>0) owner.transfer(gift-paid);\r\n    }\r\n    \r\n    function () payable public {\r\n        if (msg.value<gift) revert();\r\n        friends[msg.sender] = owner;\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"payer\",\"type\":\"address\"},{\"name\":\"newFriend\",\"type\":\"address\"}],\"name\":\"changeFriend\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"friends\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"gift\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newGift\",\"type\":\"uint256\"}],\"name\":\"changeGift\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"from\",\"type\":\"address\"},{\"name\":\"to\",\"type\":\"address\"}],\"name\":\"transferGift\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"gifts\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"friend\",\"type\":\"address\"}],\"name\":\"sendGift\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"gifter\",\"type\":\"address\"}],\"name\":\"GiftSent\",\"type\":\"event\"}]","ContractName":"GiftBox","CompilerVersion":"v0.4.23+commit.124ca40d","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://70a6d82168bafb733356c71ebeb05142a48a254b7ca2d2ac6f3213418418df79"}]}