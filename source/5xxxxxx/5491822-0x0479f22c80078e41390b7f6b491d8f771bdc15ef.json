{"status":"1","message":"OK","result":[{"SourceCode":"pragma solidity ^0.4.18;\r\n\r\n/*\r\nCopyright (c) 2015-2016 Oraclize SRL\r\nCopyright (c) 2016 Oraclize LTD\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy\r\nof this software and associated documentation files (the \"Software\"), to deal\r\nin the Software without restriction, including without limitation the rights\r\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\ncopies of the Software, and to permit persons to whom the Software is\r\nfurnished to do so, subject to the following conditions:\r\n\r\nThe above copyright notice and this permission notice shall be included in\r\nall copies or substantial portions of the Software.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\r\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\nTHE SOFTWARE.\r\n*/\r\npragma solidity ^0.4.0;\r\n\r\ncontract OraclizeI {\r\n    address public cbAddress;\r\n    function query_withGasLimit(uint _timestamp, string _datasource, string _arg, uint _gaslimit) payable public returns (bytes32 _id);\r\n    function getPrice(string _datasource, uint gaslimit) public returns (uint _dsprice);\r\n    function setProofType(byte _proofType) public;\r\n    function setCustomGasPrice(uint _gasPrice) public;\r\n}\r\n\r\ncontract OraclizeAddrResolverI {\r\n    function getAddress() view public returns (address _addr);\r\n}\r\n\r\ncontract usingOraclize {\r\n    byte constant proofType_NONE = 0x00;\r\n    byte constant proofType_TLSNotary = 0x10;\r\n    byte constant proofType_Android = 0x20;\r\n    byte constant proofType_Ledger = 0x30;\r\n    byte constant proofType_Native = 0xF0;\r\n    byte constant proofStorage_IPFS = 0x01;\r\n\r\n    OraclizeAddrResolverI OAR;\r\n    OraclizeI oraclize;\r\n\r\n    modifier oraclizeAPI {\r\n        if ((address(OAR)==0)||(getCodeSize(address(OAR))==0))\r\n            oraclize_setNetworkAuto();\r\n\r\n        if (address(oraclize) != OAR.getAddress())\r\n            oraclize = OraclizeI(OAR.getAddress());\r\n\r\n        _;\r\n    }\r\n\r\n    function oraclize_setNetworkAuto() internal returns(bool){\r\n        if (getCodeSize(0x1d3B2638a7cC9f2CB3D298A3DA7a90B67E5506ed)>0){ //mainnet\r\n            OAR = OraclizeAddrResolverI(0x1d3B2638a7cC9f2CB3D298A3DA7a90B67E5506ed);\r\n            return true;\r\n        }\r\n        if (getCodeSize(0xc03A2615D5efaf5F49F60B7BB6583eaec212fdf1)>0){ //ropsten testnet\r\n            OAR = OraclizeAddrResolverI(0xc03A2615D5efaf5F49F60B7BB6583eaec212fdf1);\r\n            return true;\r\n        }\r\n        if (getCodeSize(0xB7A07BcF2Ba2f2703b24C0691b5278999C59AC7e)>0){ //kovan testnet\r\n            OAR = OraclizeAddrResolverI(0xB7A07BcF2Ba2f2703b24C0691b5278999C59AC7e);\r\n            return true;\r\n        }\r\n        if (getCodeSize(0x146500cfd35B22E4A392Fe0aDc06De1a1368Ed48)>0){ //rinkeby testnet\r\n            OAR = OraclizeAddrResolverI(0x146500cfd35B22E4A392Fe0aDc06De1a1368Ed48);\r\n            return true;\r\n        }\r\n        if (getCodeSize(0x6f485C8BF6fc43eA212E93BBF8ce046C7f1cb475)>0){ //ethereum-bridge\r\n            OAR = OraclizeAddrResolverI(0x6f485C8BF6fc43eA212E93BBF8ce046C7f1cb475);\r\n            return true;\r\n        }\r\n        if (getCodeSize(0x20e12A1F859B3FeaE5Fb2A0A32C18F5a65555bBF)>0){ //ether.camp ide\r\n            OAR = OraclizeAddrResolverI(0x20e12A1F859B3FeaE5Fb2A0A32C18F5a65555bBF);\r\n            return true;\r\n        }\r\n        if (getCodeSize(0x51efaF4c8B3C9AfBD5aB9F4bbC82784Ab6ef8fAA)>0){ //browser-solidity\r\n            OAR = OraclizeAddrResolverI(0x51efaF4c8B3C9AfBD5aB9F4bbC82784Ab6ef8fAA);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    function oraclize_getPrice(string datasource, uint gaslimit) oraclizeAPI internal returns (uint){\r\n        return oraclize.getPrice(datasource, gaslimit);\r\n    }\r\n\r\n    function oraclize_query(string datasource, string arg, uint gaslimit, uint priceLimit) oraclizeAPI internal returns (bytes32 id){\r\n        uint price = oraclize.getPrice(datasource, gaslimit);\r\n        if (price > priceLimit + tx.gasprice*gaslimit) return 0; // unexpectedly high price\r\n        return oraclize.query_withGasLimit.value(price)(0, datasource, arg, gaslimit);\r\n    }\r\n\r\n    function oraclize_cbAddress() oraclizeAPI internal returns (address){\r\n        return oraclize.cbAddress();\r\n    }\r\n\r\n    function oraclize_setProof(byte proofP) oraclizeAPI internal {\r\n        return oraclize.setProofType(proofP);\r\n    }\r\n\r\n    function oraclize_setCustomGasPrice(uint gasPrice) oraclizeAPI internal {\r\n        return oraclize.setCustomGasPrice(gasPrice);\r\n    }\r\n\r\n    function getCodeSize(address _addr) constant internal returns(uint _size) {\r\n        assembly {\r\n            _size := extcodesize(_addr)\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * @title Ownable\r\n * @dev The Ownable contract has an owner address, and provides basic authorization control\r\n * functions, this simplifies the implementation of \"user permissions\".\r\n */\r\ncontract Ownable {\r\n  address public owner;\r\n\r\n\r\n  event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\r\n\r\n\r\n  /**\r\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\r\n   * account.\r\n   */\r\n  function Ownable() public {\r\n    owner = msg.sender;\r\n  }\r\n\r\n  /**\r\n   * @dev Throws if called by any account other than the owner.\r\n   */\r\n  modifier onlyOwner() {\r\n    require(msg.sender == owner);\r\n    _;\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\r\n   * @param newOwner The address to transfer ownership to.\r\n   */\r\n  function transferOwnership(address newOwner) public onlyOwner {\r\n    require(newOwner != address(0));\r\n    OwnershipTransferred(owner, newOwner);\r\n    owner = newOwner;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * @title SafeMath\r\n * @dev Math operations with safety checks that throw on error\r\n */\r\nlibrary SafeMath {\r\n\r\n  /**\r\n  * @dev Multiplies two numbers, throws on overflow.\r\n  */\r\n  function mul(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    if (a == 0) {\r\n      return 0;\r\n    }\r\n    uint256 c = a * b;\r\n    assert(c / a == b);\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Integer division of two numbers, truncating the quotient.\r\n  */\r\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\r\n    uint256 c = a / b;\r\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Substracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\r\n  */\r\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    assert(b <= a);\r\n    return a - b;\r\n  }\r\n\r\n  /**\r\n  * @dev Adds two numbers, throws on overflow.\r\n  */\r\n  function add(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    uint256 c = a + b;\r\n    assert(c >= a);\r\n    return c;\r\n  }\r\n}\r\n\r\nlibrary Helpers {\r\n\tusing SafeMath for uint256;\r\n\tfunction parseIntRound(string _a, uint256 _b) internal pure returns (uint256) {\r\n\t\tbytes memory bresult = bytes(_a);\r\n\t\tuint256 mint = 0;\r\n\t\t_b++;\r\n\t\tbool decimals = false;\r\n\t\tfor (uint i = 0; i < bresult.length; i++) {\r\n\t\t\tif ((bresult[i] >= 48) && (bresult[i] <= 57)) {\r\n\t\t\t\tif (decimals) {\r\n\t\t\t\t\tif (_b == 0) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\t_b--;\r\n\t\t\t\t}\r\n\t\t\t\tif (_b == 0) {\r\n\t\t\t\t\tif (uint(bresult[i]) - 48 >= 5)\r\n\t\t\t\t\t\tmint += 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmint *= 10;\r\n\t\t\t\t\tmint += uint(bresult[i]) - 48;\r\n\t\t\t\t}\r\n\t\t\t} else if (bresult[i] == 46)\r\n\t\t\t\tdecimals = true;\r\n\t\t}\r\n\t\tif (_b > 0)\r\n\t\t\tmint *= 10**(_b - 1);\r\n\t\treturn mint;\r\n\t}\r\n}\r\n\r\ncontract OracleI {\r\n    bytes32 public oracleName;\r\n    bytes16 public oracleType;\r\n    uint256 public rate;\r\n    bool public waitQuery;\r\n    uint256 public updateTime;\r\n    uint256 public callbackTime;\r\n    function getPrice() view public returns (uint);\r\n    function setBank(address _bankAddress) public;\r\n    function setGasPrice(uint256 _price) public;\r\n    function setGasLimit(uint256 _limit) public;\r\n    function updateRate() external returns (bool);\r\n}\r\n\r\n\r\n/**\r\n * @title Base contract for Oraclize oracles.\r\n *\r\n * @dev Base contract for oracles. Not abstract.\r\n */\r\ncontract OracleBase is Ownable, usingOraclize, OracleI {\r\n    event NewOraclizeQuery();\r\n    event OraclizeError(string desciption);\r\n    event PriceTicker(string price, bytes32 queryId, bytes proof);\r\n    event BankSet(address bankAddress);\r\n\r\n    struct OracleConfig {\r\n        string datasource;\r\n        string arguments;\r\n    }\r\n\r\n    bytes32 public oracleName = \"Base Oracle\";\r\n    bytes16 public oracleType = \"Undefined\";\r\n    uint256 public updateTime;\r\n    uint256 public callbackTime;\r\n    uint256 public priceLimit = 1 ether;\r\n\r\n    mapping(bytes32=>bool) validIds; // ensure that each query response is processed only once\r\n    address public bankAddress;\r\n    uint256 public rate;\r\n    bool public waitQuery = false;\r\n    OracleConfig public oracleConfig;\r\n\r\n    \r\n    uint256 public gasPrice = 20 * 10**9;\r\n    uint256 public gasLimit = 100000;\r\n\r\n    uint256 constant MIN_GAS_PRICE = 1 * 10**9; // Min gas price limit\r\n    uint256 constant MAX_GAS_PRICE = 100 * 10**9; // Max gas limit pric\r\n    uint256 constant MIN_GAS_LIMIT = 95000; \r\n    uint256 constant MAX_GAS_LIMIT = 1000000;\r\n    uint256 constant MIN_REQUEST_PRICE = 0.001118 ether;\r\n\r\n    modifier onlyBank() {\r\n        require(msg.sender == bankAddress);\r\n        _;\r\n    }\r\n\r\n    /**\r\n     * @dev Constructor.\r\n     */\r\n    function OracleBase() public {\r\n        oraclize_setProof(proofType_TLSNotary | proofStorage_IPFS);\r\n    }\r\n\r\n    /**\r\n     * @dev Sets gas price.\r\n     * @param priceInWei New gas price.\r\n     */\r\n    function setGasPrice(uint256 priceInWei) public onlyOwner {\r\n        require((priceInWei >= MIN_GAS_PRICE) && (priceInWei <= MAX_GAS_PRICE));\r\n        gasPrice = priceInWei;\r\n        oraclize_setCustomGasPrice(gasPrice);\r\n    }\r\n\r\n    /**\r\n     * @dev Sets gas limit.\r\n     * @param _gasLimit New gas limit.\r\n     */\r\n    function setGasLimit(uint256 _gasLimit) public onlyOwner {\r\n        require((_gasLimit >= MIN_GAS_LIMIT) && (_gasLimit <= MAX_GAS_LIMIT));\r\n        gasLimit = _gasLimit;\r\n    }\r\n\r\n    /**\r\n     * @dev Sets bank address.\r\n     * @param bank Address of the bank contract.\r\n     */\r\n    function setBank(address bank) public onlyOwner {\r\n        bankAddress = bank;\r\n        BankSet(bankAddress);\r\n    }\r\n\r\n    /**\r\n     * @dev oraclize getPrice.\r\n     */\r\n    function getPrice() public view returns (uint) {\r\n        return oraclize_getPrice(oracleConfig.datasource, gasLimit);\r\n    }\r\n\r\n    /**\r\n     * @dev Requests updating rate from oraclize.\r\n     */\r\n    function updateRate() external onlyBank returns (bool) {\r\n        if (getPrice() > this.balance) {\r\n            OraclizeError(\"Not enough ether\");\r\n            return false;\r\n        }\r\n        bytes32 queryId = oraclize_query(oracleConfig.datasource, oracleConfig.arguments, gasLimit, priceLimit);\r\n        \r\n        if (queryId == bytes32(0)) {\r\n            OraclizeError(\"Unexpectedly high query price\");\r\n            return false;\r\n        }\r\n\r\n        NewOraclizeQuery();\r\n        validIds[queryId] = true;\r\n        waitQuery = true;\r\n        updateTime = now;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n    * @dev Oraclize default callback with the proof set.\r\n    * @param myid The callback ID.\r\n    * @param result The callback data.\r\n    * @param proof The oraclize proof bytes.\r\n    */\r\n    function __callback(bytes32 myid, string result, bytes proof) public {\r\n        require(validIds[myid] && msg.sender == oraclize_cbAddress());\r\n\r\n        rate = Helpers.parseIntRound(result, 3); // save it in storage as 1/1000 of $\r\n        delete validIds[myid];\r\n        callbackTime = now;\r\n        waitQuery = false;\r\n        PriceTicker(result, myid, proof);\r\n    }\r\n\r\n    /**\r\n    * @dev Oraclize default callback without the proof set.\r\n    * @param myid The callback ID.\r\n    * @param result The callback data.\r\n    */\r\n    function __callback(bytes32 myid, string result) public {\r\n        bytes memory proof = new bytes(1);\r\n        __callback(myid, result, proof);\r\n    }\r\n\r\n    /**\r\n    * @dev Method used for oracle funding   \r\n    */    \r\n    function () public payable {}\r\n}\r\n\r\ncontract OracleBitstamp is OracleBase {\r\n    bytes32 constant ORACLE_NAME = \"Bitstamp Oraclize Async\";\r\n    bytes16 constant ORACLE_TYPE = \"ETHUSD\";\r\n    string constant ORACLE_DATASOURCE = \"URL\";\r\n    string constant ORACLE_ARGUMENTS = \"json(https://www.bitstamp.net/api/v2/ticker/ethusd).last\";\r\n    \r\n    /**\r\n     * @dev Constructor.\r\n     */\r\n    function OracleBitstamp() public {\r\n        oracleName = ORACLE_NAME;\r\n        oracleType = ORACLE_TYPE;\r\n        oracleConfig = OracleConfig({datasource: ORACLE_DATASOURCE, arguments: ORACLE_ARGUMENTS});\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"bank\",\"type\":\"address\"}],\"name\":\"setBank\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"oracleType\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"myid\",\"type\":\"bytes32\"},{\"name\":\"result\",\"type\":\"string\"}],\"name\":\"__callback\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"rate\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"oracleConfig\",\"outputs\":[{\"name\":\"datasource\",\"type\":\"string\"},{\"name\":\"arguments\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"myid\",\"type\":\"bytes32\"},{\"name\":\"result\",\"type\":\"string\"},{\"name\":\"proof\",\"type\":\"bytes\"}],\"name\":\"__callback\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bankAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"oracleName\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getPrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"waitQuery\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"priceInWei\",\"type\":\"uint256\"}],\"name\":\"setGasPrice\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"updateRate\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"updateTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_gasLimit\",\"type\":\"uint256\"}],\"name\":\"setGasLimit\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"priceLimit\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"callbackTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"gasLimit\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"gasPrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[],\"name\":\"NewOraclizeQuery\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"desciption\",\"type\":\"string\"}],\"name\":\"OraclizeError\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"price\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"queryId\",\"type\":\"bytes32\"},{\"indexed\":false,\"name\":\"proof\",\"type\":\"bytes\"}],\"name\":\"PriceTicker\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"bankAddress\",\"type\":\"address\"}],\"name\":\"BankSet\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]","ContractName":"OracleBitstamp","CompilerVersion":"v0.4.23+commit.124ca40d","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://095513bc8c3aff7b89607ea7f5fe4933aca78f863099e5e4ecbfacea0ea76ace"}]}